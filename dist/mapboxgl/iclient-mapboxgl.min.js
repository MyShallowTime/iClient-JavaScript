/*!
 * 
 *          iclient-mapboxgl.(https://iclient.supermap.io)
 *          CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v11.1.0-dev
 *
 */!function(){var e={378:function(e,t,n){var r,o,i,a;function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(e){"use strict";var t;"undefined"!=typeof window?t=window.__DEV__:void 0!==n.g&&(t=n.g.__DEV__),void 0===t&&(t=!0);var r=t,o=2311,i=function(){return o++},a="object"===("undefined"==typeof wx?"undefined":s(wx))&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(e){var t={},n=e.match(/Firefox\/([\d.]+)/),r=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge\/([\d.]+)/),i=/micromessenger/i.test(e);n&&(t.firefox=!0,t.version=n[1]);r&&(t.ie=!0,t.version=r[1]);o&&(t.edge=!0,t.version=o[1]);i&&(t.weChat=!0);return{browser:t,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!t.ie&&!t.edge,pointerEventsSupported:"onpointerdown"in window&&(t.edge||t.ie&&t.version>=11),domSupported:"undefined"!=typeof document}}(navigator.userAgent);var l={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},u={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},c=Object.prototype.toString,f=Array.prototype,h=f.forEach,p=f.filter,d=f.slice,y=f.map,v=f.reduce,g={};function m(e,t){"createCanvas"===e&&(O=null),g[e]=t}function b(e){if(null==e||"object"!==s(e))return e;var t=e,n=c.call(e);if("[object Array]"===n){if(!te(e)){t=[];for(var r=0,o=e.length;r<o;r++)t[r]=b(e[r])}}else if(u[n]){if(!te(e)){var i=e.constructor;if(e.constructor.from)t=i.from(e);else{t=new i(e.length);for(r=0,o=e.length;r<o;r++)t[r]=b(e[r])}}}else if(!l[n]&&!te(e)&&!W(e))for(var a in t={},e)e.hasOwnProperty(a)&&(t[a]=b(e[a]));return t}function w(e,t,n){if(!z(t)||!z(e))return n?b(t):e;for(var r in t)if(t.hasOwnProperty(r)){var o=e[r],i=t[r];!z(i)||!z(o)||B(i)||B(o)||W(i)||W(o)||V(i)||V(o)||te(i)||te(o)?!n&&r in e||(e[r]=b(t[r])):w(o,i,n)}return e}function _(e,t){for(var n=e[0],r=1,o=e.length;r<o;r++)n=w(n,e[r],t);return n}function x(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function S(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(n?null!=t[r]:null==e[r])&&(e[r]=t[r]);return e}var O,P=function(){return g.createCanvas()};function T(){return O||(O=P().getContext("2d")),O}function k(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n}return-1}function C(e,t){var n=e.prototype;function r(){}for(var o in r.prototype=t.prototype,e.prototype=new r,n)n.hasOwnProperty(o)&&(e.prototype[o]=n[o]);e.prototype.constructor=e,e.superClass=t}function E(e,t,n){S(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,n)}function A(e){if(e)return"string"!=typeof e&&"number"==typeof e.length}function M(e,t,n){if(e&&t)if(e.forEach&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e);else for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function R(e,t,n){if(e&&t){if(e.map&&e.map===y)return e.map(t,n);for(var r=[],o=0,i=e.length;o<i;o++)r.push(t.call(n,e[o],o,e));return r}}function I(e,t,n,r){if(e&&t){if(e.reduce&&e.reduce===v)return e.reduce(t,n,r);for(var o=0,i=e.length;o<i;o++)n=t.call(r,n,e[o],o,e);return n}}function j(e,t,n){if(e&&t){if(e.filter&&e.filter===p)return e.filter(t,n);for(var r=[],o=0,i=e.length;o<i;o++)t.call(n,e[o],o,e)&&r.push(e[o]);return r}}function L(e,t,n){if(e&&t)for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return e[r]}function D(e,t){var n=d.call(arguments,2);return function(){return e.apply(t,n.concat(d.call(arguments)))}}function N(e){var t=d.call(arguments,1);return function(){return e.apply(this,t.concat(d.call(arguments)))}}function B(e){return"[object Array]"===c.call(e)}function F(e){return"function"==typeof e}function G(e){return"[object String]"===c.call(e)}function z(e){var t=s(e);return"function"===t||!!e&&"object"===t}function V(e){return!!l[c.call(e)]}function H(e){return!!u[c.call(e)]}function W(e){return"object"===s(e)&&"number"==typeof e.nodeType&&"object"===s(e.ownerDocument)}function U(e){return e!=e}function J(e){for(var t=0,n=arguments.length;t<n;t++)if(null!=arguments[t])return arguments[t]}function q(e,t){return null!=e?e:t}function Y(e,t,n){return null!=e?e:null!=t?t:n}function X(){return Function.call.apply(d,arguments)}function Z(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function Q(e,t){if(!e)throw new Error(t)}function K(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}g.createCanvas=function(){return document.createElement("canvas")};var $="__ec_primitive__";function ee(e){e[$]=!0}function te(e){return e[$]}function ne(e){var t=B(e);this.data={};var n=this;function r(e,r){t?n.set(e,r):n.set(r,e)}e instanceof ne?e.each(r):e&&M(e,r)}function re(e){return new ne(e)}function oe(e,t){for(var n=new e.constructor(e.length+t.length),r=0;r<e.length;r++)n[r]=e[r];var o=e.length;for(r=0;r<t.length;r++)n[r+o]=t[r];return n}function ie(){}ne.prototype={constructor:ne,get:function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},set:function(e,t){return this.data[e]=t},each:function(e,t){for(var n in void 0!==t&&(e=D(e,t)),this.data)this.data.hasOwnProperty(n)&&e(this.data[n],n)},removeKey:function(e){delete this.data[e]}};var ae=(Object.freeze||Object)({$override:m,clone:b,merge:w,mergeAll:_,extend:x,defaults:S,createCanvas:P,getContext:T,indexOf:k,inherits:C,mixin:E,isArrayLike:A,each:M,map:R,reduce:I,filter:j,find:L,bind:D,curry:N,isArray:B,isFunction:F,isString:G,isObject:z,isBuiltInObject:V,isTypedArray:H,isDom:W,eqNaN:U,retrieve:J,retrieve2:q,retrieve3:Y,slice:X,normalizeCssArray:Z,assert:Q,trim:K,setAsPrimitive:ee,isPrimitive:te,createHashMap:re,concatArray:oe,noop:ie}),se="undefined"==typeof Float32Array?Array:Float32Array;function le(e,t){var n=new se(2);return null==e&&(e=0),null==t&&(t=0),n[0]=e,n[1]=t,n}function ue(e,t){return e[0]=t[0],e[1]=t[1],e}function ce(e){var t=new se(2);return t[0]=e[0],t[1]=e[1],t}function fe(e,t,n){return e[0]=t,e[1]=n,e}function he(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function pe(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function de(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function ye(e){return Math.sqrt(ge(e))}var ve=ye;function ge(e){return e[0]*e[0]+e[1]*e[1]}var me=ge;function be(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function we(e,t){var n=ye(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function _e(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var xe=_e;function Se(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Oe=Se;function Pe(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e}function Te(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e}function ke(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function Ce(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var Ee=(Object.freeze||Object)({create:le,copy:ue,clone:ce,set:fe,add:he,scaleAndAdd:pe,sub:de,len:ye,length:ve,lenSquare:ge,lengthSquare:me,mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},div:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:be,normalize:we,distance:_e,dist:xe,distanceSquare:Se,distSquare:Oe,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:Pe,applyTransform:Te,min:ke,max:Ce});function Ae(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function Me(e,t){return{target:e,topTarget:t&&t.topTarget}}Ae.prototype={constructor:Ae,_dragStart:function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(Me(t,e),"dragstart",e.event))},_drag:function(e){var t=this._draggingTarget;if(t){var n=e.offsetX,r=e.offsetY,o=n-this._x,i=r-this._y;this._x=n,this._y=r,t.drift(o,i,e),this.dispatchToElement(Me(t,e),"drag",e.event);var a=this.findHover(n,r,t).target,s=this._dropTarget;this._dropTarget=a,t!==a&&(s&&a!==s&&this.dispatchToElement(Me(s,e),"dragleave",e.event),a&&a!==s&&this.dispatchToElement(Me(a,e),"dragenter",e.event))}},_dragEnd:function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.dispatchToElement(Me(t,e),"dragend",e.event),this._dropTarget&&this.dispatchToElement(Me(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null}};var Re=Array.prototype.slice,Ie=function(e){this._$handlers={},this._$eventProcessor=e};function je(e,t,n,r,o,i){var a=e._$handlers;if("function"==typeof n&&(o=r,r=n,n=null),!r||!t)return e;n=function(e,t){var n=e._$eventProcessor;return null!=t&&n&&n.normalizeQuery&&(t=n.normalizeQuery(t)),t}(e,n),a[t]||(a[t]=[]);for(var s=0;s<a[t].length;s++)if(a[t][s].h===r)return e;var l={h:r,one:i,query:n,ctx:o||e,callAtLast:r.zrEventfulCallAtLast},u=a[t].length-1,c=a[t][u];return c&&c.callAtLast?a[t].splice(u,0,l):a[t].push(l),e}Ie.prototype={constructor:Ie,one:function(e,t,n,r){return je(this,e,t,n,r,!0)},on:function(e,t,n,r){return je(this,e,t,n,r,!1)},isSilent:function(e){var t=this._$handlers;return!t[e]||!t[e].length},off:function(e,t){var n=this._$handlers;if(!e)return this._$handlers={},this;if(t){if(n[e]){for(var r=[],o=0,i=n[e].length;o<i;o++)n[e][o].h!==t&&r.push(n[e][o]);n[e]=r}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this},trigger:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var r=arguments,o=r.length;o>3&&(r=Re.call(r,1));for(var i=t.length,a=0;a<i;){var s=t[a];if(n&&n.filter&&null!=s.query&&!n.filter(e,s.query))a++;else{switch(o){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,r[1]);break;case 3:s.h.call(s.ctx,r[1],r[2]);break;default:s.h.apply(s.ctx,r)}s.one?(t.splice(a,1),i--):a++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this},triggerWithContext:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var r=arguments,o=r.length;o>4&&(r=Re.call(r,1,r.length-1));for(var i=r[r.length-1],a=t.length,s=0;s<a;){var l=t[s];if(n&&n.filter&&null!=l.query&&!n.filter(e,l.query))s++;else{switch(o){case 1:l.h.call(i);break;case 2:l.h.call(i,r[1]);break;case 3:l.h.call(i,r[1],r[2]);break;default:l.h.apply(i,r)}l.one?(t.splice(s,1),a--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this}};var Le=Math.log(2);function De(e,t,n,r,o,i){var a=r+"-"+o,s=e.length;if(i.hasOwnProperty(a))return i[a];if(1===t){var l=Math.round(Math.log((1<<s)-1&~o)/Le);return e[n][l]}for(var u=r|1<<n,c=n+1;r&1<<c;)c++;for(var f=0,h=0,p=0;h<s;h++){var d=1<<h;d&o||(f+=(p%2?-1:1)*e[n][h]*De(e,t-1,c,u,o|d,i),p++)}return i[a]=f,f}function Ne(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],r={},o=De(n,8,0,0,0,r);if(0!==o){for(var i=[],a=0;a<8;a++)for(var s=0;s<8;s++)null==i[s]&&(i[s]=0),i[s]+=((a+s)%2?-1:1)*De(n,7,0===a?1:0,1<<a,1<<s,r)/o*t[a];return function(e,t,n){var r=t*i[6]+n*i[7]+1;e[0]=(t*i[0]+n*i[1]+i[2])/r,e[1]=(t*i[3]+n*i[4]+i[5])/r}}}var Be="___zrEVENTSAVED",Fe=[];function Ge(e,t,n,r,o){if(t.getBoundingClientRect&&a.domSupported&&!ze(t)){var i=t[Be]||(t[Be]={}),s=function(e,t,n){for(var r=n?"invTrans":"trans",o=t[r],i=t.srcCoords,a=!0,s=[],l=[],u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,p=c.top;s.push(h,p),a=a&&i&&h===i[f]&&p===i[f+1],l.push(e[u].offsetLeft,e[u].offsetTop)}return a&&o?o:(t.srcCoords=s,t[r]=n?Ne(l,s):Ne(s,l))}(function(e,t){var n=t.markers;if(n)return n;n=t.markers=[];for(var r=["left","right"],o=["top","bottom"],i=0;i<4;i++){var a=document.createElement("div"),s=a.style,l=i%2,u=(i>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",o[u]+":0",r[1-l]+":auto",o[1-u]+":auto",""].join("!important;"),e.appendChild(a),n.push(a)}return n}(t,i),i,o);if(s)return s(e,n,r),!0}return!1}function ze(e){return"CANVAS"===e.nodeName.toUpperCase()}var Ve="undefined"!=typeof window&&!!window.addEventListener,He=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,We=[];function Ue(e,t,n,r){return n=n||{},r||!a.canvasSupported?Je(e,t,n):a.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):null!=t.offsetX?(n.zrX=t.offsetX,n.zrY=t.offsetY):Je(e,t,n),n}function Je(e,t,n){if(a.domSupported&&e.getBoundingClientRect){var r=t.clientX,o=t.clientY;if(ze(e)){var i=e.getBoundingClientRect();return n.zrX=r-i.left,void(n.zrY=o-i.top)}if(Ge(We,e,r,o))return n.zrX=We[0],void(n.zrY=We[1])}n.zrX=n.zrY=0}function qe(e){return e||window.event}function Ye(e,t,n){if(null!=(t=qe(t)).zrX)return t;var r=t.type;if(r&&r.indexOf("touch")>=0){var o="touchend"!==r?t.targetTouches[0]:t.changedTouches[0];o&&Ue(e,o,t,n)}else Ue(e,t,t,n),t.zrDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;var i=t.button;return null==t.which&&void 0!==i&&He.test(t.type)&&(t.which=1&i?1:2&i?3:4&i?2:0),t}function Xe(e,t,n,r){Ve?e.addEventListener(t,n,r):e.attachEvent("on"+t,n)}var Ze=Ve?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};function Qe(e){return 2===e.which||3===e.which}var Ke=function(){this._track=[]};function $e(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}Ke.prototype={constructor:Ke,recognize:function(e,t,n){return this._doTrack(e,t,n),this._recognize(e)},clear:function(){return this._track.length=0,this},_doTrack:function(e,t,n){var r=e.touches;if(r){for(var o={points:[],touches:[],target:t,event:e},i=0,a=r.length;i<a;i++){var s=r[i],l=Ue(n,s,{});o.points.push([l.zrX,l.zrY]),o.touches.push(s)}this._track.push(o)}},_recognize:function(e){for(var t in et)if(et.hasOwnProperty(t)){var n=et[t](this._track,e);if(n)return n}}};var et={pinch:function(e,t){var n=e.length;if(n){var r,o=(e[n-1]||{}).points,i=(e[n-2]||{}).points||o;if(i&&i.length>1&&o&&o.length>1){var a=$e(o)/$e(i);!isFinite(a)&&(a=1),t.pinchScale=a;var s=[((r=o)[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2];return t.pinchX=s[0],t.pinchY=s[1],{type:"pinch",target:e[0].target,event:t}}}}},tt="silent";function nt(){Ze(this.event)}function rt(){}rt.prototype.dispose=function(){};var ot=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],it=function(e,t,n,r){Ie.call(this),this.storage=e,this.painter=t,this.painterRoot=r,n=n||new rt,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,Ae.call(this),this.setHandlerProxy(n)};function at(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var r,o=e;o;){if(o.clipPath&&!o.clipPath.contain(t,n))return!1;o.silent&&(r=!0),o=o.parent}return!r||tt}return!1}function st(e,t,n){var r=e.painter;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}it.prototype={constructor:it,setHandlerProxy:function(e){this.proxy&&this.proxy.dispose(),e&&(M(ot,function(t){e.on&&e.on(t,this[t],this)},this),e.handler=this),this.proxy=e},mousemove:function(e){var t=e.zrX,n=e.zrY,r=st(this,t,n),o=this._hovered,i=o.target;i&&!i.__zr&&(i=(o=this.findHover(o.x,o.y)).target);var a=this._hovered=r?{x:t,y:n}:this.findHover(t,n),s=a.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),i&&s!==i&&this.dispatchToElement(o,"mouseout",e),this.dispatchToElement(a,"mousemove",e),s&&s!==i&&this.dispatchToElement(a,"mouseover",e)},mouseout:function(e){var t=e.zrEventControl,n=e.zrIsToLocalDOM;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&!n&&this.trigger("globalout",{type:"globalout",event:e})},resize:function(e){this._hovered={}},dispatch:function(e,t){var n=this[e];n&&n.call(this,t)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},dispatchToElement:function(e,t,n){var r=(e=e||{}).target;if(!r||!r.silent){for(var o="on"+t,i=function(e,t,n){return{type:e,event:n,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:nt}}(t,e,n);r&&(r[o]&&(i.cancelBubble=r[o].call(r,i)),r.trigger(t,i),r=r.parent,!i.cancelBubble););i.cancelBubble||(this.trigger(t,i),this.painter&&this.painter.eachOtherLayer(function(e){"function"==typeof e[o]&&e[o].call(e,i),e.trigger&&e.trigger(t,i)}))}},findHover:function(e,t,n){for(var r=this.storage.getDisplayList(),o={x:e,y:t},i=r.length-1;i>=0;i--){var a;if(r[i]!==n&&!r[i].ignore&&(a=at(r[i],e,t))&&(!o.topTarget&&(o.topTarget=r[i]),a!==tt)){o.target=r[i];break}}return o},processGesture:function(e,t){this._gestureMgr||(this._gestureMgr=new Ke);var n=this._gestureMgr;"start"===t&&n.clear();var r=n.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&n.clear(),r){var o=r.type;e.gestureEvent=o,this.dispatchToElement({target:r.target},o,r.event)}}},M(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){it.prototype[e]=function(t){var n,r,o=t.zrX,i=t.zrY,a=st(this,o,i);if("mouseup"===e&&a||(r=(n=this.findHover(o,i)).target),"mousedown"===e)this._downEl=r,this._downPoint=[t.zrX,t.zrY],this._upEl=r;else if("mouseup"===e)this._upEl=r;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||xe(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,e,t)}}),E(it,Ie),E(it,Ae);var lt="undefined"==typeof Float32Array?Array:Float32Array;function ut(){var e=new lt(6);return ct(e),e}function ct(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function ft(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function ht(e,t,n){var r=t[0]*n[0]+t[2]*n[1],o=t[1]*n[0]+t[3]*n[1],i=t[0]*n[2]+t[2]*n[3],a=t[1]*n[2]+t[3]*n[3],s=t[0]*n[4]+t[2]*n[5]+t[4],l=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e}function pt(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function dt(e,t,n){var r=t[0],o=t[2],i=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*u,e[1]=-r*u+a*c,e[2]=o*c+s*u,e[3]=-o*u+c*s,e[4]=c*i+u*l,e[5]=c*l-u*i,e}function yt(e,t,n){var r=n[0],o=n[1];return e[0]=t[0]*r,e[1]=t[1]*o,e[2]=t[2]*r,e[3]=t[3]*o,e[4]=t[4]*r,e[5]=t[5]*o,e}function vt(e,t){var n=t[0],r=t[2],o=t[4],i=t[1],a=t[3],s=t[5],l=n*a-i*r;return l?(l=1/l,e[0]=a*l,e[1]=-i*l,e[2]=-r*l,e[3]=n*l,e[4]=(r*s-a*o)*l,e[5]=(i*o-n*s)*l,e):null}function gt(e){var t=ut();return ft(t,e),t}var mt=(Object.freeze||Object)({create:ut,identity:ct,copy:ft,mul:ht,translate:pt,rotate:dt,scale:yt,invert:vt,clone:gt}),bt=ct,wt=5e-5;function _t(e){return e>wt||e<-wt}var xt=function(e){(e=e||{}).position||(this.position=[0,0]),null==e.rotation&&(this.rotation=0),e.scale||(this.scale=[1,1]),this.origin=this.origin||null},St=xt.prototype;St.transform=null,St.needLocalTransform=function(){return _t(this.rotation)||_t(this.position[0])||_t(this.position[1])||_t(this.scale[0]-1)||_t(this.scale[1]-1)};var Ot=[];St.updateTransform=function(){var e=this.parent,t=e&&e.transform,n=this.needLocalTransform(),r=this.transform;if(n||t){r=r||ut(),n?this.getLocalTransform(r):bt(r),t&&(n?ht(r,e.transform,r):ft(r,e.transform)),this.transform=r;var o=this.globalScaleRatio;if(null!=o&&1!==o){this.getGlobalScale(Ot);var i=Ot[0]<0?-1:1,a=Ot[1]<0?-1:1,s=((Ot[0]-i)*o+i)/Ot[0]||0,l=((Ot[1]-a)*o+a)/Ot[1]||0;r[0]*=s,r[1]*=s,r[2]*=l,r[3]*=l}this.invTransform=this.invTransform||ut(),vt(this.invTransform,r)}else r&&bt(r)},St.getLocalTransform=function(e){return xt.getLocalTransform(this,e)},St.setTransform=function(e){var t=this.transform,n=e.dpr||1;t?e.setTransform(n*t[0],n*t[1],n*t[2],n*t[3],n*t[4],n*t[5]):e.setTransform(n,0,0,n,0,0)},St.restoreTransform=function(e){var t=e.dpr||1;e.setTransform(t,0,0,t,0,0)};var Pt=[],Tt=ut();St.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],r=this.position,o=this.scale;_t(t-1)&&(t=Math.sqrt(t)),_t(n-1)&&(n=Math.sqrt(n)),e[0]<0&&(t=-t),e[3]<0&&(n=-n),r[0]=e[4],r[1]=e[5],o[0]=t,o[1]=n,this.rotation=Math.atan2(-e[1]/n,e[0]/t)}},St.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(ht(Pt,e.invTransform,t),t=Pt);var n=this.origin;n&&(n[0]||n[1])&&(Tt[4]=n[0],Tt[5]=n[1],ht(Pt,t,Tt),Pt[4]-=n[0],Pt[5]-=n[1],t=Pt),this.setLocalTransform(t)}},St.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},St.transformCoordToLocal=function(e,t){var n=[e,t],r=this.invTransform;return r&&Te(n,n,r),n},St.transformCoordToGlobal=function(e,t){var n=[e,t],r=this.transform;return r&&Te(n,n,r),n},xt.getLocalTransform=function(e,t){bt(t=t||[]);var n=e.origin,r=e.scale||[1,1],o=e.rotation||0,i=e.position||[0,0];return n&&(t[4]-=n[0],t[5]-=n[1]),yt(t,t,r),o&&dt(t,t,o),n&&(t[4]+=n[0],t[5]+=n[1]),t[4]+=i[0],t[5]+=i[1],t};var kt={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-kt.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*kt.bounceIn(2*e):.5*kt.bounceOut(2*e-1)+.5}};function Ct(e){this._target=e.target,this._life=e.life||1e3,this._delay=e.delay||0,this._initialized=!1,this.loop=null!=e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this._pausedTime=0,this._paused=!1}Ct.prototype={constructor:Ct,step:function(e,t){if(this._initialized||(this._startTime=e+this._delay,this._initialized=!0),this._paused)this._pausedTime+=t;else{var n=(e-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r=this.easing,o="string"==typeof r?kt[r]:r,i="function"==typeof o?o(n):n;return this.fire("frame",i),1===n?this.loop?(this.restart(e),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(e){var t=(e-this._startTime-this._pausedTime)%this._life;this._startTime=e-t+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(e,t){this[e="on"+e]&&this[e](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var Et=function(){this.head=null,this.tail=null,this._len=0},At=Et.prototype;At.insert=function(e){var t=new Mt(e);return this.insertEntry(t),t},At.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},At.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._len--},At.len=function(){return this._len},At.clear=function(){this.head=this.tail=null,this._len=0};var Mt=function(e){this.value=e,this.next,this.prev},Rt=function(e){this._list=new Et,this._map={},this._maxSize=e||10,this._lastRemovedEntry=null},It=Rt.prototype;It.put=function(e,t){var n=this._list,r=this._map,o=null;if(null==r[e]){var i=n.len(),a=this._lastRemovedEntry;if(i>=this._maxSize&&i>0){var s=n.head;n.remove(s),delete r[s.key],o=s.value,this._lastRemovedEntry=s}a?a.value=t:a=new Mt(t),a.key=e,n.insertEntry(a),r[e]=a}return o},It.get=function(e){var t=this._map[e],n=this._list;if(null!=t)return t!==n.tail&&(n.remove(t),n.insertEntry(t)),t.value},It.clear=function(){this._list.clear(),this._map={}};var jt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Lt(e){return(e=Math.round(e))<0?0:e>255?255:e}function Dt(e){return e<0?0:e>1?1:e}function Nt(e){return e.length&&"%"===e.charAt(e.length-1)?Lt(parseFloat(e)/100*255):Lt(parseInt(e,10))}function Bt(e){return e.length&&"%"===e.charAt(e.length-1)?Dt(parseFloat(e)/100):Dt(parseFloat(e))}function Ft(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function Gt(e,t,n){return e+(t-e)*n}function zt(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e}function Vt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var Ht=new Rt(20),Wt=null;function Ut(e,t){Wt&&Vt(Wt,t),Wt=Ht.put(e,Wt||t.slice())}function Jt(e,t){if(e){t=t||[];var n=Ht.get(e);if(n)return Vt(t,n);var r,o=(e+="").replace(/ /g,"").toLowerCase();if(o in jt)return Vt(t,jt[o]),Ut(e,t),t;if("#"===o.charAt(0))return 4===o.length?(r=parseInt(o.substr(1),16))>=0&&r<=4095?(zt(t,(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1),Ut(e,t),t):void zt(t,0,0,0,1):7===o.length?(r=parseInt(o.substr(1),16))>=0&&r<=16777215?(zt(t,(16711680&r)>>16,(65280&r)>>8,255&r,1),Ut(e,t),t):void zt(t,0,0,0,1):void 0;var i=o.indexOf("("),a=o.indexOf(")");if(-1!==i&&a+1===o.length){var s=o.substr(0,i),l=o.substr(i+1,a-(i+1)).split(","),u=1;switch(s){case"rgba":if(4!==l.length)return void zt(t,0,0,0,1);u=Bt(l.pop());case"rgb":return 3!==l.length?void zt(t,0,0,0,1):(zt(t,Nt(l[0]),Nt(l[1]),Nt(l[2]),u),Ut(e,t),t);case"hsla":return 4!==l.length?void zt(t,0,0,0,1):(l[3]=Bt(l[3]),qt(l,t),Ut(e,t),t);case"hsl":return 3!==l.length?void zt(t,0,0,0,1):(qt(l,t),Ut(e,t),t);default:return}}zt(t,0,0,0,1)}}function qt(e,t){var n=(parseFloat(e[0])%360+360)%360/360,r=Bt(e[1]),o=Bt(e[2]),i=o<=.5?o*(r+1):o+r-o*r,a=2*o-i;return zt(t=t||[],Lt(255*Ft(a,i,n+1/3)),Lt(255*Ft(a,i,n)),Lt(255*Ft(a,i,n-1/3)),1),4===e.length&&(t[3]=e[3]),t}function Yt(e,t){var n=Jt(e);if(n){for(var r=0;r<3;r++)n[r]=t<0?n[r]*(1-t)|0:(255-n[r])*t+n[r]|0,n[r]>255?n[r]=255:e[r]<0&&(n[r]=0);return nn(n,4===n.length?"rgba":"rgb")}}function Xt(e){var t=Jt(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function Zt(e,t,n){if(t&&t.length&&e>=0&&e<=1){n=n||[];var r=e*(t.length-1),o=Math.floor(r),i=Math.ceil(r),a=t[o],s=t[i],l=r-o;return n[0]=Lt(Gt(a[0],s[0],l)),n[1]=Lt(Gt(a[1],s[1],l)),n[2]=Lt(Gt(a[2],s[2],l)),n[3]=Dt(Gt(a[3],s[3],l)),n}}var Qt=Zt;function Kt(e,t,n){if(t&&t.length&&e>=0&&e<=1){var r=e*(t.length-1),o=Math.floor(r),i=Math.ceil(r),a=Jt(t[o]),s=Jt(t[i]),l=r-o,u=nn([Lt(Gt(a[0],s[0],l)),Lt(Gt(a[1],s[1],l)),Lt(Gt(a[2],s[2],l)),Dt(Gt(a[3],s[3],l))],"rgba");return n?{color:u,leftIndex:o,rightIndex:i,value:r}:u}}var $t=Kt;function en(e,t,n,r){if(e=Jt(e))return e=function(e){if(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),l=s-a,u=(s+a)/2;if(0===l)t=0,n=0;else{n=u<.5?l/(s+a):l/(2-s-a);var c=((s-r)/6+l/2)/l,f=((s-o)/6+l/2)/l,h=((s-i)/6+l/2)/l;r===s?t=h-f:o===s?t=1/3+c-h:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}var p=[360*t,n,u];return null!=e[3]&&p.push(e[3]),p}}(e),null!=t&&(e[0]=(o=t,(o=Math.round(o))<0?0:o>360?360:o)),null!=n&&(e[1]=Bt(n)),null!=r&&(e[2]=Bt(r)),nn(qt(e),"rgba");var o}function tn(e,t){if((e=Jt(e))&&null!=t)return e[3]=Dt(t),nn(e,"rgba")}function nn(e,t){if(e&&e.length){var n=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(n+=","+e[3]),t+"("+n+")"}}var rn=(Object.freeze||Object)({parse:Jt,lift:Yt,toHex:Xt,fastLerp:Zt,fastMapToColor:Qt,lerp:Kt,mapToColor:$t,modifyHSL:en,modifyAlpha:tn,stringify:nn}),on=Array.prototype.slice;function an(e,t){return e[t]}function sn(e,t,n){e[t]=n}function ln(e,t,n){return(t-e)*n+e}function un(e,t,n){return n>.5?t:e}function cn(e,t,n,r,o){var i=e.length;if(1===o)for(var a=0;a<i;a++)r[a]=ln(e[a],t[a],n);else{var s=i&&e[0].length;for(a=0;a<i;a++)for(var l=0;l<s;l++)r[a][l]=ln(e[a][l],t[a][l],n)}}function fn(e,t,n){var r=e.length,o=t.length;if(r!==o)if(r>o)e.length=o;else for(var i=r;i<o;i++)e.push(1===n?t[i]:on.call(t[i]));var a=e[0]&&e[0].length;for(i=0;i<e.length;i++)if(1===n)isNaN(e[i])&&(e[i]=t[i]);else for(var s=0;s<a;s++)isNaN(e[i][s])&&(e[i][s]=t[i][s])}function hn(e,t,n){if(e===t)return!0;var r=e.length;if(r!==t.length)return!1;if(1===n){for(var o=0;o<r;o++)if(e[o]!==t[o])return!1}else{var i=e[0].length;for(o=0;o<r;o++)for(var a=0;a<i;a++)if(e[o][a]!==t[o][a])return!1}return!0}function pn(e,t,n,r,o,i,a,s,l){var u=e.length;if(1===l)for(var c=0;c<u;c++)s[c]=dn(e[c],t[c],n[c],r[c],o,i,a);else{var f=e[0].length;for(c=0;c<u;c++)for(var h=0;h<f;h++)s[c][h]=dn(e[c][h],t[c][h],n[c][h],r[c][h],o,i,a)}}function dn(e,t,n,r,o,i,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*i+s*o+t}function yn(e){if(A(e)){var t=e.length;if(A(e[0])){for(var n=[],r=0;r<t;r++)n.push(on.call(e[r]));return n}return on.call(e)}return e}function vn(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function gn(e,t,n,r,o,i){var a=e._getter,s=e._setter,l="spline"===t,u=r.length;if(u){var c,f=A(r[0].value),h=!1,p=!1,d=f?function(e){var t=e[e.length-1].value;return A(t&&t[0])?2:1}(r):0;r.sort(function(e,t){return e.time-t.time}),c=r[u-1].time;for(var y=[],v=[],g=r[0].value,m=!0,b=0;b<u;b++){y.push(r[b].time/c);var w=r[b].value;if(f&&hn(w,g,d)||!f&&w===g||(m=!1),g=w,"string"==typeof w){var _=Jt(w);_?(w=_,h=!0):p=!0}v.push(w)}if(i||!m){var x=v[u-1];for(b=0;b<u-1;b++)f?fn(v[b],x,d):!isNaN(v[b])||isNaN(x)||p||h||(v[b]=x);f&&fn(a(e._target,o),x,d);var S,O,P,T,k,C=0,E=0;if(h)var M=[0,0,0,0];var R=new Ct({target:e._target,life:c,loop:e._loop,delay:e._delay,onframe:function(e,t){var n;if(t<0)n=0;else if(t<E){for(n=Math.min(C+1,u-1);n>=0&&!(y[n]<=t);n--);n=Math.min(n,u-2)}else{for(n=C;n<u&&!(y[n]>t);n++);n=Math.min(n-1,u-2)}C=n,E=t;var r=y[n+1]-y[n];if(0!==r)if(S=(t-y[n])/r,l)if(P=v[n],O=v[0===n?n:n-1],T=v[n>u-2?u-1:n+1],k=v[n>u-3?u-1:n+2],f)pn(O,P,T,k,S,S*S,S*S*S,a(e,o),d);else{if(h)i=pn(O,P,T,k,S,S*S,S*S*S,M,1),i=vn(M);else{if(p)return un(P,T,S);i=dn(O,P,T,k,S,S*S,S*S*S)}s(e,o,i)}else if(f)cn(v[n],v[n+1],S,a(e,o),d);else{var i;if(h)cn(v[n],v[n+1],S,M,1),i=vn(M);else{if(p)return un(v[n],v[n+1],S);i=ln(v[n],v[n+1],S)}s(e,o,i)}},ondestroy:n});return t&&"spline"!==t&&(R.easing=t),R}}}var mn=function(e,t,n,r){this._tracks={},this._target=e,this._loop=t||!1,this._getter=n||an,this._setter=r||sn,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};mn.prototype={when:function(e,t){var n=this._tracks;for(var r in t)if(t.hasOwnProperty(r)){if(!n[r]){n[r]=[];var o=this._getter(this._target,r);if(null==o)continue;0!==e&&n[r].push({time:0,value:yn(o)})}n[r].push({time:e,value:t[r]})}return this},during:function(e){return this._onframeList.push(e),this},pause:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].pause();this._paused=!0},resume:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var e=this._doneList,t=e.length,n=0;n<t;n++)e[n].call(this)},start:function(e,t){var n,r=this,o=0,i=function(){--o||r._doneCallback()};for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=gn(this,e,i,this._tracks[a],a,t);s&&(this._clipList.push(s),o++,this.animation&&this.animation.addClip(s),n=s)}if(n){var l=n.onframe;n.onframe=function(e,t){l(e,t);for(var n=0;n<r._onframeList.length;n++)r._onframeList[n](e,t)}}return o||this._doneCallback(),this},stop:function(e){for(var t=this._clipList,n=this.animation,r=0;r<t.length;r++){var o=t[r];e&&o.onframe(this._target,1),n&&n.removeClip(o)}t.length=0},delay:function(e){return this._delay=e,this},done:function(e){return e&&this._doneList.push(e),this},getClips:function(){return this._clipList}};var bn=1;"undefined"!=typeof window&&(bn=Math.max(window.devicePixelRatio||1,1));var wn=bn,_n=function(){};var xn=_n,Sn=function(){this.animators=[]};function On(e,t,n,r,o,i,a,s){G(r)?(i=o,o=r,r=0):F(o)?(i=o,o="linear",r=0):F(r)?(i=r,r=0):F(n)?(i=n,n=500):n||(n=500),e.stopAnimation(),function e(t,n,r,o,i,a,s){var l={};var u=0;for(var c in o)o.hasOwnProperty(c)&&(null!=r[c]?z(o[c])&&!A(o[c])?e(t,n?n+"."+c:c,r[c],o[c],i,a,s):(s?(l[c]=r[c],Pn(t,n,c,o[c])):l[c]=o[c],u++):null==o[c]||s||Pn(t,n,c,o[c]));u>0&&t.animate(n,!1).when(null==i?500:i,l).delay(a||0)}(e,"",e,t,n,r,s);var l=e.animators.slice(),u=l.length;function c(){--u||i&&i()}u||i&&i();for(var f=0;f<l.length;f++)l[f].done(c).start(o,a)}function Pn(e,t,n,r){if(t){var o={};o[t]={},o[t][n]=r,e.attr(o)}else e.attr(n,r)}Sn.prototype={constructor:Sn,animate:function(e,t){var n,r=!1,o=this,i=this.__zr;if(e){var a=e.split("."),s=o;r="shape"===a[0];for(var l=0,u=a.length;l<u;l++)s&&(s=s[a[l]]);s&&(n=s)}else n=o;if(n){var c=o.animators,f=new mn(n,t);return f.during(function(e){o.dirty(r)}).done(function(){c.splice(k(c,f),1)}),c.push(f),i&&i.animation.addAnimator(f),f}xn('Property "'+e+'" is not existed in element '+o.id)},stopAnimation:function(e){for(var t=this.animators,n=t.length,r=0;r<n;r++)t[r].stop(e);return t.length=0,this},animateTo:function(e,t,n,r,o,i){On(this,e,t,n,r,o,i)},animateFrom:function(e,t,n,r,o,i){On(this,e,t,n,r,o,i,!0)}};var Tn=function(e){xt.call(this,e),Ie.call(this,e),Sn.call(this,e),this.id=e.id||i()};Tn.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(e,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=e,n[5]+=t,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(e,t){},attrKV:function(e,t){if("position"===e||"scale"===e||"origin"===e){if(t){var n=this[e];n||(n=this[e]=[]),n[0]=t[0],n[1]=t[1]}}else this[e]=t},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(z(e))for(var n in e)e.hasOwnProperty(n)&&this.attrKV(n,e[n]);return this.dirty(!1),this},setClipPath:function(e){var t=this.__zr;t&&e.addSelfToZr(t),this.clipPath&&this.clipPath!==e&&this.removeClipPath(),this.clipPath=e,e.__zr=t,e.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var e=this.clipPath;e&&(e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(e){this.__zr=e;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.addAnimator(t[n]);this.clipPath&&this.clipPath.addSelfToZr(e)},removeSelfFromZr:function(e){this.__zr=null;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.removeAnimator(t[n]);this.clipPath&&this.clipPath.removeSelfFromZr(e)}},E(Tn,Sn),E(Tn,xt),E(Tn,Ie);var kn,Cn,En,An,Mn=Te,Rn=Math.min,In=Math.max;function jn(e,t,n,r){n<0&&(e+=n,n=-n),r<0&&(t+=r,r=-r),this.x=e,this.y=t,this.width=n,this.height=r}jn.prototype={constructor:jn,union:function(e){var t=Rn(e.x,this.x),n=Rn(e.y,this.y);this.width=In(e.x+e.width,this.x+this.width)-t,this.height=In(e.y+e.height,this.y+this.height)-n,this.x=t,this.y=n},applyTransform:(kn=[],Cn=[],En=[],An=[],function(e){if(e){kn[0]=En[0]=this.x,kn[1]=An[1]=this.y,Cn[0]=An[0]=this.x+this.width,Cn[1]=En[1]=this.y+this.height,Mn(kn,kn,e),Mn(Cn,Cn,e),Mn(En,En,e),Mn(An,An,e),this.x=Rn(kn[0],Cn[0],En[0],An[0]),this.y=Rn(kn[1],Cn[1],En[1],An[1]);var t=In(kn[0],Cn[0],En[0],An[0]),n=In(kn[1],Cn[1],En[1],An[1]);this.width=t-this.x,this.height=n-this.y}}),calculateTransform:function(e){var t=this,n=e.width/t.width,r=e.height/t.height,o=ut();return pt(o,o,[-t.x,-t.y]),yt(o,o,[n,r]),pt(o,o,[e.x,e.y]),o},intersect:function(e){if(!e)return!1;e instanceof jn||(e=jn.create(e));var t=this,n=t.x,r=t.x+t.width,o=t.y,i=t.y+t.height,a=e.x,s=e.x+e.width,l=e.y,u=e.y+e.height;return!(r<a||s<n||i<l||u<o)},contain:function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height},clone:function(){return new jn(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},jn.create=function(e){return new jn(e.x,e.y,e.width,e.height)};var Ln=function(e){for(var t in e=e||{},Tn.call(this,e),e)e.hasOwnProperty(t)&&(this[t]=e[t]);this._children=[],this.__storage=null,this.__dirty=!0};Ln.prototype={constructor:Ln,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},childOfName:function(e){for(var t=this._children,n=0;n<t.length;n++)if(t[n].name===e)return t[n]},childCount:function(){return this._children.length},add:function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},addBefore:function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var n=this._children,r=n.indexOf(t);r>=0&&(n.splice(r,0,e),this._doAdd(e))}return this},_doAdd:function(e){e.parent&&e.parent.remove(e),e.parent=this;var t=this.__storage,n=this.__zr;t&&t!==e.__storage&&(t.addToStorage(e),e instanceof Ln&&e.addChildrenToStorage(t)),n&&n.refresh()},remove:function(e){var t=this.__zr,n=this.__storage,r=this._children,o=k(r,e);return o<0?this:(r.splice(o,1),e.parent=null,n&&(n.delFromStorage(e),e instanceof Ln&&e.delChildrenFromStorage(n)),t&&t.refresh(),this)},removeAll:function(){var e,t,n=this._children,r=this.__storage;for(t=0;t<n.length;t++)e=n[t],r&&(r.delFromStorage(e),e instanceof Ln&&e.delChildrenFromStorage(r)),e.parent=null;return n.length=0,this},eachChild:function(e,t){for(var n=this._children,r=0;r<n.length;r++){var o=n[r];e.call(t,o,r)}return this},traverse:function(e,t){for(var n=0;n<this._children.length;n++){var r=this._children[n];e.call(t,r),"group"===r.type&&r.traverse(e,t)}return this},addChildrenToStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToStorage(n),n instanceof Ln&&n.addChildrenToStorage(e)}},delChildrenFromStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromStorage(n),n instanceof Ln&&n.delChildrenFromStorage(e)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(e){for(var t=null,n=new jn(0,0,0,0),r=e||this._children,o=[],i=0;i<r.length;i++){var a=r[i];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),l=a.getLocalTransform(o);l?(n.copy(s),n.applyTransform(l),(t=t||n.clone()).union(n)):(t=t||s.clone()).union(s)}}return t||n}},C(Ln,Tn);var Dn=32,Nn=7;function Bn(e,t,n,r){var o=t+1;if(o===n)return 1;if(r(e[o++],e[t])<0){for(;o<n&&r(e[o],e[o-1])<0;)o++;!function(e,t,n){n--;for(;t<n;){var r=e[t];e[t++]=e[n],e[n--]=r}}(e,t,o)}else for(;o<n&&r(e[o],e[o-1])>=0;)o++;return o-t}function Fn(e,t,n,r,o){for(r===t&&r++;r<n;r++){for(var i,a=e[r],s=t,l=r;s<l;)o(a,e[i=s+l>>>1])<0?l=i:s=i+1;var u=r-s;switch(u){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;u>0;)e[s+u]=e[s+u-1],u--}e[s]=a}}function Gn(e,t,n,r,o,i){var a=0,s=0,l=1;if(i(e,t[n+o])>0){for(s=r-o;l<s&&i(e,t[n+o+l])>0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),a+=o,l+=o}else{for(s=o+1;l<s&&i(e,t[n+o-l])<=0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var u=a;a=o-l,l=o-u}for(a++;a<l;){var c=a+(l-a>>>1);i(e,t[n+c])>0?a=c+1:l=c}return l}function zn(e,t,n,r,o,i){var a=0,s=0,l=1;if(i(e,t[n+o])<0){for(s=o+1;l<s&&i(e,t[n+o-l])<0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var u=a;a=o-l,l=o-u}else{for(s=r-o;l<s&&i(e,t[n+o+l])>=0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),a+=o,l+=o}for(a++;a<l;){var c=a+(l-a>>>1);i(e,t[n+c])<0?l=c:a=c+1}return l}function Vn(e,t){var n,r,o=Nn,i=0,a=[];function s(s){var l=n[s],u=r[s],c=n[s+1],f=r[s+1];r[s]=u+f,s===i-3&&(n[s+1]=n[s+2],r[s+1]=r[s+2]),i--;var h=zn(e[c],e,l,u,0,t);l+=h,0!==(u-=h)&&0!==(f=Gn(e[l+u-1],e,c,f,f-1,t))&&(u<=f?function(n,r,i,s){var l=0;for(l=0;l<r;l++)a[l]=e[n+l];var u=0,c=i,f=n;if(e[f++]=e[c++],0==--s){for(l=0;l<r;l++)e[f+l]=a[u+l];return}if(1===r){for(l=0;l<s;l++)e[f+l]=e[c+l];return void(e[f+s]=a[u])}var h,p,d,y=o;for(;;){h=0,p=0,d=!1;do{if(t(e[c],a[u])<0){if(e[f++]=e[c++],p++,h=0,0==--s){d=!0;break}}else if(e[f++]=a[u++],h++,p=0,1==--r){d=!0;break}}while((h|p)<y);if(d)break;do{if(0!==(h=zn(e[c],a,u,r,0,t))){for(l=0;l<h;l++)e[f+l]=a[u+l];if(f+=h,u+=h,(r-=h)<=1){d=!0;break}}if(e[f++]=e[c++],0==--s){d=!0;break}if(0!==(p=Gn(a[u],e,c,s,0,t))){for(l=0;l<p;l++)e[f+l]=e[c+l];if(f+=p,c+=p,0===(s-=p)){d=!0;break}}if(e[f++]=a[u++],1==--r){d=!0;break}y--}while(h>=Nn||p>=Nn);if(d)break;y<0&&(y=0),y+=2}if((o=y)<1&&(o=1),1===r){for(l=0;l<s;l++)e[f+l]=e[c+l];e[f+s]=a[u]}else{if(0===r)throw new Error;for(l=0;l<r;l++)e[f+l]=a[u+l]}}(l,u,c,f):function(n,r,i,s){var l=0;for(l=0;l<s;l++)a[l]=e[i+l];var u=n+r-1,c=s-1,f=i+s-1,h=0,p=0;if(e[f--]=e[u--],0==--r){for(h=f-(s-1),l=0;l<s;l++)e[h+l]=a[l];return}if(1===s){for(p=(f-=r)+1,h=(u-=r)+1,l=r-1;l>=0;l--)e[p+l]=e[h+l];return void(e[f]=a[c])}var d=o;for(;;){var y=0,v=0,g=!1;do{if(t(a[c],e[u])<0){if(e[f--]=e[u--],y++,v=0,0==--r){g=!0;break}}else if(e[f--]=a[c--],v++,y=0,1==--s){g=!0;break}}while((y|v)<d);if(g)break;do{if(0!==(y=r-zn(a[c],e,n,r,r-1,t))){for(r-=y,p=(f-=y)+1,h=(u-=y)+1,l=y-1;l>=0;l--)e[p+l]=e[h+l];if(0===r){g=!0;break}}if(e[f--]=a[c--],1==--s){g=!0;break}if(0!==(v=s-Gn(e[u],a,0,s,s-1,t))){for(s-=v,p=(f-=v)+1,h=(c-=v)+1,l=0;l<v;l++)e[p+l]=a[h+l];if(s<=1){g=!0;break}}if(e[f--]=e[u--],0==--r){g=!0;break}d--}while(y>=Nn||v>=Nn);if(g)break;d<0&&(d=0),d+=2}(o=d)<1&&(o=1);if(1===s){for(p=(f-=r)+1,h=(u-=r)+1,l=r-1;l>=0;l--)e[p+l]=e[h+l];e[f]=a[c]}else{if(0===s)throw new Error;for(h=f-(s-1),l=0;l<s;l++)e[h+l]=a[l]}}(l,u,c,f))}n=[],r=[],this.mergeRuns=function(){for(;i>1;){var e=i-2;if(e>=1&&r[e-1]<=r[e]+r[e+1]||e>=2&&r[e-2]<=r[e]+r[e-1])r[e-1]<r[e+1]&&e--;else if(r[e]>r[e+1])break;s(e)}},this.forceMergeRuns=function(){for(;i>1;){var e=i-2;e>0&&r[e-1]<r[e+1]&&e--,s(e)}},this.pushRun=function(e,t){n[i]=e,r[i]=t,i+=1}}function Hn(e,t,n,r){n||(n=0),r||(r=e.length);var o=r-n;if(!(o<2)){var i=0;if(o<Dn)Fn(e,n,r,n+(i=Bn(e,n,r,t)),t);else{var a=new Vn(e,t),s=function(e){for(var t=0;e>=Dn;)t|=1&e,e>>=1;return e+t}(o);do{if((i=Bn(e,n,r,t))<s){var l=o;l>s&&(l=s),Fn(e,n,n+l,n+i,t),i=l}a.pushRun(n,i),a.mergeRuns(),o-=i,n+=i}while(0!==o);a.forceMergeRuns()}}}function Wn(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var Un=function(){this._roots=[],this._displayList=[],this._displayListLen=0};Un.prototype={constructor:Un,traverse:function(e,t){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,t)},getDisplayList:function(e,t){return t=t||!1,e&&this.updateDisplayList(t),this._displayList},updateDisplayList:function(e){this._displayListLen=0;for(var t=this._roots,n=this._displayList,r=0,o=t.length;r<o;r++)this._updateAndAddDisplayable(t[r],null,e);n.length=this._displayListLen,a.canvasSupported&&Hn(n,Wn)},_updateAndAddDisplayable:function(e,t,n){if(!e.ignore||n){e.beforeUpdate(),e.__dirty&&e.update(),e.afterUpdate();var r=e.clipPath;if(r){t=t?t.slice():[];for(var o=r,i=e;o;)o.parent=i,o.updateTransform(),t.push(o),i=o,o=o.clipPath}if(e.isGroup){for(var a=e._children,s=0;s<a.length;s++){var l=a[s];e.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,t,n)}e.__dirty=!1}else e.__clipPaths=t,this._displayList[this._displayListLen++]=e}},addRoot:function(e){e.__storage!==this&&(e instanceof Ln&&e.addChildrenToStorage(this),this.addToStorage(e),this._roots.push(e))},delRoot:function(e){if(null==e){for(var t=0;t<this._roots.length;t++){var n=this._roots[t];n instanceof Ln&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(e instanceof Array){t=0;for(var r=e.length;t<r;t++)this.delRoot(e[t])}else{var o=k(this._roots,e);o>=0&&(this.delFromStorage(e),this._roots.splice(o,1),e instanceof Ln&&e.delChildrenFromStorage(this))}},addToStorage:function(e){return e&&(e.__storage=this,e.dirty(!1)),this},delFromStorage:function(e){return e&&(e.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:Wn};var Jn={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},qn=function(e,t,n){return Jn.hasOwnProperty(t)?n*e.dpr:n},Yn={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},Xn=9,Zn=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Qn=function(e){this.extendFrom(e,!1)};function Kn(e,t,n){var r=null==t.x?0:t.x,o=null==t.x2?1:t.x2,i=null==t.y?0:t.y,a=null==t.y2?0:t.y2;return t.global||(r=r*n.width+n.x,o=o*n.width+n.x,i=i*n.height+n.y,a=a*n.height+n.y),r=isNaN(r)?0:r,o=isNaN(o)?1:o,i=isNaN(i)?0:i,a=isNaN(a)?0:a,e.createLinearGradient(r,i,o,a)}function $n(e,t,n){var r=n.width,o=n.height,i=Math.min(r,o),a=null==t.x?.5:t.x,s=null==t.y?.5:t.y,l=null==t.r?.5:t.r;return t.global||(a=a*r+n.x,s=s*o+n.y,l*=i),e.createRadialGradient(a,s,0,a,s,l)}Qn.prototype={constructor:Qn,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(e,t,n){var r=n&&n.style,o=!r||e.__attrCachedBy!==Yn.STYLE_BIND;e.__attrCachedBy=Yn.STYLE_BIND;for(var i=0;i<Zn.length;i++){var a=Zn[i],s=a[0];(o||this[s]!==r[s])&&(e[s]=qn(e,s,this[s]||a[1]))}if((o||this.fill!==r.fill)&&(e.fillStyle=this.fill),(o||this.stroke!==r.stroke)&&(e.strokeStyle=this.stroke),(o||this.opacity!==r.opacity)&&(e.globalAlpha=null==this.opacity?1:this.opacity),(o||this.blend!==r.blend)&&(e.globalCompositeOperation=this.blend||"source-over"),this.hasStroke()){var l=this.lineWidth;e.lineWidth=l/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1)}},hasFill:function(){var e=this.fill;return null!=e&&"none"!==e},hasStroke:function(){var e=this.stroke;return null!=e&&"none"!==e&&this.lineWidth>0},extendFrom:function(e,t){if(e)for(var n in e)!e.hasOwnProperty(n)||!0!==t&&(!1===t?this.hasOwnProperty(n):null==e[n])||(this[n]=e[n])},set:function(e,t){"string"==typeof e?this[e]=t:this.extendFrom(e,!0)},clone:function(){var e=new this.constructor;return e.extendFrom(this,!0),e},getGradient:function(e,t,n){for(var r=("radial"===t.type?$n:Kn)(e,t,n),o=t.colorStops,i=0;i<o.length;i++)r.addColorStop(o[i].offset,o[i].color);return r}};for(var er=Qn.prototype,tr=0;tr<Zn.length;tr++){var nr=Zn[tr];nr[0]in er||(er[nr[0]]=nr[1])}Qn.getGradient=er.getGradient;var rr=function(e,t){this.image=e,this.repeat=t,this.type="pattern"};function or(){return!1}function ir(e,t,n){var r=P(),o=t.getWidth(),i=t.getHeight(),a=r.style;return a&&(a.position="absolute",a.left=0,a.top=0,a.width=o+"px",a.height=i+"px",r.setAttribute("data-zr-dom-id",e)),r.width=o*n,r.height=i*n,r}rr.prototype.getCanvasPattern=function(e){return e.createPattern(this.image,this.repeat||"repeat")};var ar=function(e,t,n){var r;n=n||wn,"string"==typeof e?r=ir(e,t,n):z(e)&&(e=(r=e).id),this.id=e,this.dom=r;var o=r.style;o&&(r.onselectstart=or,o["-webkit-user-select"]="none",o["user-select"]="none",o["-webkit-touch-callout"]="none",o["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",o.padding=0,o.margin=0,o["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=t,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n};ar.prototype={constructor:ar,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var e=this.dpr;this.domBack=ir("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},resize:function(e,t){var n=this.dpr,r=this.dom,o=r.style,i=this.domBack;o&&(o.width=e+"px",o.height=t+"px"),r.width=e*n,r.height=t*n,i&&(i.width=e*n,i.height=t*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(e,t){var n,r=this.dom,o=this.ctx,i=r.width,a=r.height,s=(t=t||this.clearColor,this.motionBlur&&!e),l=this.lastFrameAlpha,u=this.dpr;(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,i/u,a/u)),o.clearRect(0,0,i,a),t&&"transparent"!==t)&&(t.colorStops?(n=t.__canvasGradient||Qn.getGradient(o,t,{x:0,y:0,width:i,height:a}),t.__canvasGradient=n):t.image&&(n=rr.prototype.getCanvasPattern.call(t,o)),o.save(),o.fillStyle=n||t,o.fillRect(0,0,i,a),o.restore());if(s){var c=this.domBack;o.save(),o.globalAlpha=l,o.drawImage(c,0,0,i,a),o.restore()}}};var sr="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)},lr=new Rt(50);function ur(e){if("string"==typeof e){var t=lr.get(e);return t&&t.image}return e}function cr(e,t,n,r,o){if(e){if("string"==typeof e){if(t&&t.__zrImageSrc===e||!n)return t;var i=lr.get(e),a={hostEl:n,cb:r,cbPayload:o};return i?!hr(t=i.image)&&i.pending.push(a):((t=new Image).onload=t.onerror=fr,lr.put(e,t.__cachedImgObj={image:t,pending:[a]}),t.src=t.__zrImageSrc=e),t}return e}return t}function fr(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function hr(e){return e&&e.width&&e.height}var pr={},dr=0,yr=5e3,vr=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,gr="12px sans-serif",mr={};function br(e,t){var n=e+":"+(t=t||gr);if(pr[n])return pr[n];for(var r=(e+"").split("\n"),o=0,i=0,a=r.length;i<a;i++)o=Math.max(Er(r[i],t).width,o);return dr>yr&&(dr=0,pr={}),dr++,pr[n]=o,o}function wr(e,t,n,r,o,i,a,s){return a?function(e,t,n,r,o,i,a,s){var l=Mr(e,{rich:a,truncate:s,font:t,textAlign:n,textPadding:o,textLineHeight:i}),u=l.outerWidth,c=l.outerHeight,f=_r(0,u,n),h=xr(0,c,r);return new jn(f,h,u,c)}(e,t,n,r,o,i,a,s):function(e,t,n,r,o,i,a){var s=Ar(e,t,o,i,a),l=br(e,t);o&&(l+=o[1]+o[3]);var u=s.outerHeight,c=_r(0,l,n),f=xr(0,u,r),h=new jn(c,f,l,u);return h.lineHeight=s.lineHeight,h}(e,t,n,r,o,i,s)}function _r(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function xr(e,t,n){return"middle"===n?e-=t/2:"bottom"===n&&(e-=t),e}function Sr(e,t,n){var r=t.textPosition,o=t.textDistance,i=n.x,a=n.y;o=o||0;var s=n.height,l=n.width,u=s/2,c="left",f="top";switch(r){case"left":i-=o,a+=u,c="right",f="middle";break;case"right":i+=o+l,a+=u,f="middle";break;case"top":i+=l/2,a-=o,c="center",f="bottom";break;case"bottom":i+=l/2,a+=s+o,c="center";break;case"inside":i+=l/2,a+=u,c="center",f="middle";break;case"insideLeft":i+=o,a+=u,f="middle";break;case"insideRight":i+=l-o,a+=u,c="right",f="middle";break;case"insideTop":i+=l/2,a+=o,c="center";break;case"insideBottom":i+=l/2,a+=s-o,c="center",f="bottom";break;case"insideTopLeft":i+=o,a+=o;break;case"insideTopRight":i+=l-o,a+=o,c="right";break;case"insideBottomLeft":i+=o,a+=s-o,f="bottom";break;case"insideBottomRight":i+=l-o,a+=s-o,c="right",f="bottom"}return(e=e||{}).x=i,e.y=a,e.textAlign=c,e.textVerticalAlign=f,e}function Or(e,t,n,r,o){if(!t)return"";var i=(e+"").split("\n");o=Pr(t,n,r,o);for(var a=0,s=i.length;a<s;a++)i[a]=Tr(i[a],o);return i.join("\n")}function Pr(e,t,n,r){(r=x({},r)).font=t;n=q(n,"...");r.maxIterations=q(r.maxIterations,2);var o=r.minChar=q(r.minChar,0);r.cnCharWidth=br("å½",t);var i=r.ascCharWidth=br("a",t);r.placeholder=q(r.placeholder,"");for(var a=e=Math.max(0,e-1),s=0;s<o&&a>=i;s++)a-=i;var l=br(n,t);return l>a&&(n="",l=0),a=e-l,r.ellipsis=n,r.ellipsisWidth=l,r.contentWidth=a,r.containerWidth=e,r}function Tr(e,t){var n=t.containerWidth,r=t.font,o=t.contentWidth;if(!n)return"";var i=br(e,r);if(i<=n)return e;for(var a=0;;a++){if(i<=o||a>=t.maxIterations){e+=t.ellipsis;break}var s=0===a?kr(e,o,t.ascCharWidth,t.cnCharWidth):i>0?Math.floor(e.length*o/i):0;i=br(e=e.substr(0,s),r)}return""===e&&(e=t.placeholder),e}function kr(e,t,n,r){for(var o=0,i=0,a=e.length;i<a&&o<t;i++){var s=e.charCodeAt(i);o+=0<=s&&s<=127?n:r}return i}function Cr(e){return br("å½",e)}function Er(e,t){return mr.measureText(e,t)}function Ar(e,t,n,r,o){null!=e&&(e+="");var i=q(r,Cr(t)),a=e?e.split("\n"):[],s=a.length*i,l=s,u=!0;if(n&&(l+=n[0]+n[2]),e&&o){u=!1;var c=o.outerHeight,f=o.outerWidth;if(null!=c&&l>c)e="",a=[];else if(null!=f)for(var h=Pr(f-(n?n[1]+n[3]:0),t,o.ellipsis,{minChar:o.minChar,placeholder:o.placeholder}),p=0,d=a.length;p<d;p++)a[p]=Tr(a[p],h)}return{lines:a,height:s,outerHeight:l,lineHeight:i,canCacheByTextString:u}}function Mr(e,t){var n={lines:[],width:0,height:0};if(null!=e&&(e+=""),!e)return n;for(var r,o=vr.lastIndex=0;null!=(r=vr.exec(e));){var i=r.index;i>o&&Rr(n,e.substring(o,i)),Rr(n,r[2],r[1]),o=vr.lastIndex}o<e.length&&Rr(n,e.substring(o,e.length));var a=n.lines,s=0,l=0,u=[],c=t.textPadding,f=t.truncate,h=f&&f.outerWidth,p=f&&f.outerHeight;c&&(null!=h&&(h-=c[1]+c[3]),null!=p&&(p-=c[0]+c[2]));for(var d=0;d<a.length;d++){for(var y=a[d],v=0,g=0,m=0;m<y.tokens.length;m++){var b=(E=y.tokens[m]).styleName&&t.rich[E.styleName]||{},w=E.textPadding=b.textPadding,_=E.font=b.font||t.font,x=E.textHeight=q(b.textHeight,Cr(_));if(w&&(x+=w[0]+w[2]),E.height=x,E.lineHeight=Y(b.textLineHeight,t.textLineHeight,x),E.textAlign=b&&b.textAlign||t.textAlign,E.textVerticalAlign=b&&b.textVerticalAlign||"middle",null!=p&&s+E.lineHeight>p)return{lines:[],width:0,height:0};E.textWidth=br(E.text,_);var S=b.textWidth,O=null==S||"auto"===S;if("string"==typeof S&&"%"===S.charAt(S.length-1))E.percentWidth=S,u.push(E),S=0;else{if(O){S=E.textWidth;var P=b.textBackgroundColor,T=P&&P.image;T&&hr(T=ur(T))&&(S=Math.max(S,T.width*x/T.height))}var k=w?w[1]+w[3]:0;S+=k;var C=null!=h?h-g:null;null!=C&&C<S&&(!O||C<k?(E.text="",E.textWidth=S=0):(E.text=Or(E.text,C-k,_,f.ellipsis,{minChar:f.minChar}),E.textWidth=br(E.text,_),S=E.textWidth+k))}g+=E.width=S,b&&(v=Math.max(v,E.lineHeight))}y.width=g,y.lineHeight=v,s+=v,l=Math.max(l,g)}n.outerWidth=n.width=q(t.textWidth,l),n.outerHeight=n.height=q(t.textHeight,s),c&&(n.outerWidth+=c[1]+c[3],n.outerHeight+=c[0]+c[2]);for(d=0;d<u.length;d++){var E,A=(E=u[d]).percentWidth;E.width=parseInt(A,10)/100*l}return n}function Rr(e,t,n){for(var r=""===t,o=t.split("\n"),i=e.lines,a=0;a<o.length;a++){var s=o[a],l={styleName:n,text:s,isLineHolder:!s&&!r};if(a)i.push({tokens:[l]});else{var u=(i[i.length-1]||(i[0]={tokens:[]})).tokens,c=u.length;1===c&&u[0].isLineHolder?u[0]=l:(s||!c||r)&&u.push(l)}}}function Ir(e){var t=(e.fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" ");return t&&K(t)||e.textFont||e.font}function jr(e,t){var n,r,o,i,a,s=t.x,l=t.y,u=t.width,c=t.height,f=t.r;u<0&&(s+=u,u=-u),c<0&&(l+=c,c=-c),"number"==typeof f?n=r=o=i=f:f instanceof Array?1===f.length?n=r=o=i=f[0]:2===f.length?(n=o=f[0],r=i=f[1]):3===f.length?(n=f[0],r=i=f[1],o=f[2]):(n=f[0],r=f[1],o=f[2],i=f[3]):n=r=o=i=0,n+r>u&&(n*=u/(a=n+r),r*=u/a),o+i>u&&(o*=u/(a=o+i),i*=u/a),r+o>c&&(r*=c/(a=r+o),o*=c/a),n+i>c&&(n*=c/(a=n+i),i*=c/a),e.moveTo(s+n,l),e.lineTo(s+u-r,l),0!==r&&e.arc(s+u-r,l+r,r,-Math.PI/2,0),e.lineTo(s+u,l+c-o),0!==o&&e.arc(s+u-o,l+c-o,o,0,Math.PI/2),e.lineTo(s+i,l+c),0!==i&&e.arc(s+i,l+c-i,i,Math.PI/2,Math.PI),e.lineTo(s,l+n),0!==n&&e.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}mr.measureText=function(e,t){var n=T();return n.font=t||gr,n.measureText(e)};var Lr=gr,Dr={left:1,right:1,center:1},Nr={top:1,bottom:1,middle:1},Br=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],Fr={},Gr={};function zr(e){return Vr(e),M(e.rich,Vr),e}function Vr(e){if(e){e.font=Ir(e);var t=e.textAlign;"middle"===t&&(t="center"),e.textAlign=null==t||Dr[t]?t:"left";var n=e.textVerticalAlign||e.textBaseline;"center"===n&&(n="middle"),e.textVerticalAlign=null==n||Nr[n]?n:"top",e.textPadding&&(e.textPadding=Z(e.textPadding))}}function Hr(e,t,n,r,o,i){r.rich?function(e,t,n,r,o,i){i!==Xn&&(t.__attrCachedBy=Yn.NONE);var a=e.__textCotentBlock;a&&!e.__dirtyText||(a=e.__textCotentBlock=Mr(n,r));!function(e,t,n,r,o){var i=n.width,a=n.outerWidth,s=n.outerHeight,l=r.textPadding,u=Xr(Gr,e,r,o),c=u.baseX,f=u.baseY,h=u.textAlign,p=u.textVerticalAlign;Wr(t,r,o,c,f);var d=_r(c,a,h),y=xr(f,s,p),v=d,g=y;l&&(v+=l[3],g+=l[0]);var m=v+i;Jr(r)&&qr(e,t,r,d,y,a,s);for(var b=0;b<n.lines.length;b++){for(var w,_=n.lines[b],x=_.tokens,S=x.length,O=_.lineHeight,P=_.width,T=0,k=v,C=m,E=S-1;T<S&&(!(w=x[T]).textAlign||"left"===w.textAlign);)Ur(e,t,w,r,O,g,k,"left"),P-=w.width,k+=w.width,T++;for(;E>=0&&"right"===(w=x[E]).textAlign;)Ur(e,t,w,r,O,g,C,"right"),P-=w.width,C-=w.width,E--;for(k+=(i-(k-v)-(m-C)-P)/2;T<=E;)w=x[T],Ur(e,t,w,r,O,g,k+w.width/2,"center"),k+=w.width,T++;g+=O}}(e,t,a,r,o)}(e,t,n,r,o,i):function(e,t,n,r,o,i){var a,s=Jr(r),l=!1,u=t.__attrCachedBy===Yn.PLAIN_TEXT;i!==Xn?(i&&(a=i.style,l=!s&&u&&a),t.__attrCachedBy=s?Yn.NONE:Yn.PLAIN_TEXT):u&&(t.__attrCachedBy=Yn.NONE);var c=r.font||Lr;l&&c===(a.font||Lr)||(t.font=c);var f=e.__computedFont;e.__styleFont!==c&&(e.__styleFont=c,f=e.__computedFont=t.font);var h=r.textPadding,p=r.textLineHeight,d=e.__textCotentBlock;d&&!e.__dirtyText||(d=e.__textCotentBlock=Ar(n,f,h,p,r.truncate));var y=d.outerHeight,v=d.lines,g=d.lineHeight,m=Xr(Gr,e,r,o),b=m.baseX,w=m.baseY,_=m.textAlign||"left",x=m.textVerticalAlign;Wr(t,r,o,b,w);var S=xr(w,y,x),O=b,P=S;if(s||h){var T=br(n,f),k=T;h&&(k+=h[1]+h[3]);var C=_r(b,k,_);s&&qr(e,t,r,C,S,k,y),h&&(O=eo(b,_,h),P+=h[0])}t.textAlign=_,t.textBaseline="middle",t.globalAlpha=r.opacity||1;for(var E=0;E<Br.length;E++){var A=Br[E],M=A[0],R=A[1],I=r[M];l&&I===a[M]||(t[R]=qn(t,R,I||A[2]))}P+=g/2;var j=r.textStrokeWidth,L=l?a.textStrokeWidth:null,D=!l||j!==L,N=!l||D||r.textStroke!==a.textStroke,B=Qr(r.textStroke,j),F=Kr(r.textFill);B&&(D&&(t.lineWidth=j),N&&(t.strokeStyle=B));F&&(l&&r.textFill===a.textFill||(t.fillStyle=F));if(1===v.length)B&&t.strokeText(v[0],O,P),F&&t.fillText(v[0],O,P);else for(var E=0;E<v.length;E++)B&&t.strokeText(v[E],O,P),F&&t.fillText(v[E],O,P),P+=g}(e,t,n,r,o,i)}function Wr(e,t,n,r,o){if(n&&t.textRotation){var i=t.textOrigin;"center"===i?(r=n.width/2+n.x,o=n.height/2+n.y):i&&(r=i[0]+n.x,o=i[1]+n.y),e.translate(r,o),e.rotate(-t.textRotation),e.translate(-r,-o)}}function Ur(e,t,n,r,o,i,a,s){var l=r.rich[n.styleName]||{};l.text=n.text;var u=n.textVerticalAlign,c=i+o/2;"top"===u?c=i+n.height/2:"bottom"===u&&(c=i+o-n.height/2),!n.isLineHolder&&Jr(l)&&qr(e,t,l,"right"===s?a-n.width:"center"===s?a-n.width/2:a,c-n.height/2,n.width,n.height);var f=n.textPadding;f&&(a=eo(a,s,f),c-=n.height/2-f[2]-n.textHeight/2),Zr(t,"shadowBlur",Y(l.textShadowBlur,r.textShadowBlur,0)),Zr(t,"shadowColor",l.textShadowColor||r.textShadowColor||"transparent"),Zr(t,"shadowOffsetX",Y(l.textShadowOffsetX,r.textShadowOffsetX,0)),Zr(t,"shadowOffsetY",Y(l.textShadowOffsetY,r.textShadowOffsetY,0)),Zr(t,"textAlign",s),Zr(t,"textBaseline","middle"),Zr(t,"font",n.font||Lr);var h=Qr(l.textStroke||r.textStroke,d),p=Kr(l.textFill||r.textFill),d=q(l.textStrokeWidth,r.textStrokeWidth);h&&(Zr(t,"lineWidth",d),Zr(t,"strokeStyle",h),t.strokeText(n.text,a,c)),p&&(Zr(t,"fillStyle",p),t.fillText(n.text,a,c))}function Jr(e){return!!(e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor)}function qr(e,t,n,r,o,i,a){var s=n.textBackgroundColor,l=n.textBorderWidth,u=n.textBorderColor,c=G(s);if(Zr(t,"shadowBlur",n.textBoxShadowBlur||0),Zr(t,"shadowColor",n.textBoxShadowColor||"transparent"),Zr(t,"shadowOffsetX",n.textBoxShadowOffsetX||0),Zr(t,"shadowOffsetY",n.textBoxShadowOffsetY||0),c||l&&u){t.beginPath();var f=n.textBorderRadius;f?jr(t,{x:r,y:o,width:i,height:a,r:f}):t.rect(r,o,i,a),t.closePath()}if(c)if(Zr(t,"fillStyle",s),null!=n.fillOpacity){var h=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=h}else t.fill();else if(z(s)){var p=s.image;(p=cr(p,null,e,Yr,s))&&hr(p)&&t.drawImage(p,r,o,i,a)}if(l&&u)if(Zr(t,"lineWidth",l),Zr(t,"strokeStyle",u),null!=n.strokeOpacity){h=t.globalAlpha;t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=h}else t.stroke()}function Yr(e,t){t.image=e}function Xr(e,t,n,r){var o=n.x||0,i=n.y||0,a=n.textAlign,s=n.textVerticalAlign;if(r){var l=n.textPosition;if(l instanceof Array)o=r.x+$r(l[0],r.width),i=r.y+$r(l[1],r.height);else{var u=t&&t.calculateTextPosition?t.calculateTextPosition(Fr,n,r):Sr(Fr,n,r);o=u.x,i=u.y,a=a||u.textAlign,s=s||u.textVerticalAlign}var c=n.textOffset;c&&(o+=c[0],i+=c[1])}return(e=e||{}).baseX=o,e.baseY=i,e.textAlign=a,e.textVerticalAlign=s,e}function Zr(e,t,n){return e[t]=qn(e,t,n),e[t]}function Qr(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function Kr(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function $r(e,t){return"string"==typeof e?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function eo(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}function to(e,t){return null!=e&&(e||t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor||t.textPadding)}var no=new jn,ro=function(){};function oo(e){for(var t in e=e||{},Tn.call(this,e),e)e.hasOwnProperty(t)&&"style"!==t&&(this[t]=e[t]);this.style=new Qn(e.style,this),this._rect=null,this.__clipPaths=null}function io(e){oo.call(this,e)}ro.prototype={constructor:ro,drawRectText:function(e,t){var n=this.style;t=n.textRect||t,this.__dirty&&zr(n);var r=n.text;if(null!=r&&(r+=""),to(r,n)){e.save();var o=this.transform;n.transformText?this.setTransform(e):o&&(no.copy(t),no.applyTransform(o),t=no),Hr(this,e,r,n,t,Xn),e.restore()}}},oo.prototype={constructor:oo,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(e){},afterBrush:function(e){},brush:function(e,t){},getBoundingRect:function(){},contain:function(e,t){return this.rectContain(e,t)},traverse:function(e,t){e.call(t,this)},rectContain:function(e,t){var n=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(e){return this.animate("style",e)},attrKV:function(e,t){"style"!==e?Tn.prototype.attrKV.call(this,e,t):this.style.set(t)},setStyle:function(e,t){return this.style.set(e,t),this.dirty(!1),this},useStyle:function(e){return this.style=new Qn(e,this),this.dirty(!1),this},calculateTextPosition:null},C(oo,Tn),E(oo,ro),io.prototype={constructor:io,type:"image",brush:function(e,t){var n=this.style,r=n.image;n.bind(e,this,t);var o=this._image=cr(r,this._image,this,this.onload);if(o&&hr(o)){var i=n.x||0,a=n.y||0,s=n.width,l=n.height,u=o.width/o.height;if(null==s&&null!=l?s=l*u:null==l&&null!=s?l=s/u:null==s&&null==l&&(s=o.width,l=o.height),this.setTransform(e),n.sWidth&&n.sHeight){var c=n.sx||0,f=n.sy||0;e.drawImage(o,c,f,n.sWidth,n.sHeight,i,a,s,l)}else if(n.sx&&n.sy){var h=s-(c=n.sx),p=l-(f=n.sy);e.drawImage(o,c,f,h,p,i,a,s,l)}else e.drawImage(o,i,a,s,l);null!=n.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))}},getBoundingRect:function(){var e=this.style;return this._rect||(this._rect=new jn(e.x||0,e.y||0,e.width||0,e.height||0)),this._rect}},C(io,oo);function ao(e){return parseInt(e,10)}var so=new jn(0,0,0,0),lo=new jn(0,0,0,0);var uo=function(e,t,n){this.type="canvas";var r=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=n=x({},n||{}),this.dpr=n.devicePixelRatio||wn,this._singleCanvas=r,this.root=e;var o=e.style;o&&(o["-webkit-tap-highlight-color"]="transparent",o["-webkit-user-select"]=o["user-select"]=o["-webkit-touch-callout"]="none",e.innerHTML=""),this.storage=t;var i=this._zlevelList=[],a=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,r){var s=e.width,l=e.height;null!=n.width&&(s=n.width),null!=n.height&&(l=n.height),this.dpr=n.devicePixelRatio||1,e.width=s*this.dpr,e.height=l*this.dpr,this._width=s,this._height=l;var u=new ar(e,this,this.dpr);u.__builtin__=!0,u.initContext(),a[314159]=u,u.zlevel=314159,i.push(314159),this._domRoot=e}else{this._width=this._getSize(0),this._height=this._getSize(1);var c=this._domRoot=function(e,t){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);e.appendChild(c)}this._hoverlayer=null,this._hoverElements=[]};uo.prototype={constructor:uo,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(e){var t=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,e,this._redrawId);for(var r=0;r<n.length;r++){var o=n[r],i=this._layers[o];if(!i.__builtin__&&i.refresh){var a=0===r?this._backgroundColor:null;i.refresh(a)}}return this.refreshHover(),this},addHover:function(e,t){if(!e.__hoverMir){var n=new e.constructor({style:e.style,shape:e.shape,z:e.z,z2:e.z2,silent:e.silent});return n.__from=e,e.__hoverMir=n,t&&n.setStyle(t),this._hoverElements.push(n),n}},removeHover:function(e){var t=e.__hoverMir,n=this._hoverElements,r=k(n,t);r>=0&&n.splice(r,1),e.__hoverMir=null},clearHover:function(e){for(var t=this._hoverElements,n=0;n<t.length;n++){var r=t[n].__from;r&&(r.__hoverMir=null)}t.length=0},refreshHover:function(){var e=this._hoverElements,t=e.length,n=this._hoverlayer;if(n&&n.clear(),t){Hn(e,this.storage.displayableSortFunc),n||(n=this._hoverlayer=this.getLayer(1e5));var r={};n.ctx.save();for(var o=0;o<t;){var i=e[o],a=i.__from;a&&a.__zr?(o++,a.invisible||(i.transform=a.transform,i.invTransform=a.invTransform,i.__clipPaths=a.__clipPaths,this._doPaintEl(i,n,!0,r))):(e.splice(o,1),a.__hoverMir=null,t--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(e,t,n){if(this._redrawId===n){t=t||!1,this._updateLayerStatus(e);var r=this._doPaintList(e,t);if(this._needsManuallyCompositing&&this._compositeManually(),!r){var o=this;sr(function(){o._paintList(e,t,n)})}}},_compositeManually:function(){var e=this.getLayer(314159).ctx,t=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,t,n),this.eachBuiltinLayer(function(r){r.virtual&&e.drawImage(r.dom,0,0,t,n)})},_doPaintList:function(e,t){for(var n=[],r=0;r<this._zlevelList.length;r++){var o=this._zlevelList[r];(l=this._layers[o]).__builtin__&&l!==this._hoverlayer&&(l.__dirty||t)&&n.push(l)}for(var i=!0,s=0;s<n.length;s++){var l,u=(l=n[s]).ctx,c={};u.save();var f=t?l.__startIndex:l.__drawIndex,h=!t&&l.incremental&&Date.now,p=h&&Date.now(),d=l.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(l.__startIndex===l.__endIndex)l.clear(!1,d);else if(f===l.__startIndex){var y=e[f];y.incremental&&y.notClear&&!t||l.clear(!1,d)}-1===f&&(console.error("For some unknown reason. drawIndex is -1"),f=l.__startIndex);for(var v=f;v<l.__endIndex;v++){var g=e[v];if(this._doPaintEl(g,l,t,c),g.__dirty=g.__dirtyText=!1,h)if(Date.now()-p>15)break}l.__drawIndex=v,l.__drawIndex<l.__endIndex&&(i=!1),c.prevElClipPaths&&u.restore(),u.restore()}return a.wxa&&M(this._layers,function(e){e&&e.ctx&&e.ctx.draw&&e.ctx.draw()}),i},_doPaintEl:function(e,t,n,r){var o=t.ctx,i=e.transform;if((t.__dirty||n)&&!e.invisible&&0!==e.style.opacity&&(!i||i[0]||i[3])&&(!e.culling||!function(e,t,n){return so.copy(e.getBoundingRect()),e.transform&&so.applyTransform(e.transform),lo.width=t,lo.height=n,!so.intersect(lo)}(e,this._width,this._height))){var a=e.__clipPaths,s=r.prevElClipPaths;s&&!function(e,t){if(e===t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}(a,s)||(s&&(o.restore(),r.prevElClipPaths=null,r.prevEl=null),a&&(o.save(),function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.setTransform(t),t.beginPath(),r.buildPath(t,r.shape),t.clip(),r.restoreTransform(t)}}(a,o),r.prevElClipPaths=a)),e.beforeBrush&&e.beforeBrush(o),e.brush(o,r.prevEl||null),r.prevEl=e,e.afterBrush&&e.afterBrush(o)}},getLayer:function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=314159);var n=this._layers[e];return n||((n=new ar("zr_"+e,this,this.dpr)).zlevel=e,n.__builtin__=!0,this._layerConfig[e]?w(n,this._layerConfig[e],!0):this._layerConfig[e-.01]&&w(n,this._layerConfig[e-.01],!0),t&&(n.virtual=t),this.insertLayer(e,n),n.initContext()),n},insertLayer:function(e,t){var n=this._layers,r=this._zlevelList,o=r.length,i=null,a=-1,s=this._domRoot;if(n[e])xn("ZLevel "+e+" has been used already");else if(function(e){return!!e&&(!!e.__builtin__||"function"==typeof e.resize&&"function"==typeof e.refresh)}(t)){if(o>0&&e>r[0]){for(a=0;a<o-1&&!(r[a]<e&&r[a+1]>e);a++);i=n[r[a]]}if(r.splice(a+1,0,e),n[e]=t,!t.virtual)if(i){var l=i.dom;l.nextSibling?s.insertBefore(t.dom,l.nextSibling):s.appendChild(t.dom)}else s.firstChild?s.insertBefore(t.dom,s.firstChild):s.appendChild(t.dom)}else xn("Layer of zlevel "+e+" is not valid")},eachLayer:function(e,t){var n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],e.call(t,this._layers[n],n)},eachBuiltinLayer:function(e,t){var n,r,o,i=this._zlevelList;for(o=0;o<i.length;o++)r=i[o],(n=this._layers[r]).__builtin__&&e.call(t,n,r)},eachOtherLayer:function(e,t){var n,r,o,i=this._zlevelList;for(o=0;o<i.length;o++)r=i[o],(n=this._layers[r]).__builtin__||e.call(t,n,r)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){function t(e){o&&(o.__endIndex!==e&&(o.__dirty=!0),o.__endIndex=e)}if(this.eachBuiltinLayer(function(e,t){e.__dirty=e.__used=!1}),this._singleCanvas)for(var n=1;n<e.length;n++){if((a=e[n]).zlevel!==e[n-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}}var r,o=null,i=0;for(n=0;n<e.length;n++){var a,s,l=(a=e[n]).zlevel;r!==l&&(r=l,i=0),a.incremental?((s=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,i=1):s=this.getLayer(l+(i>0?.01:0),this._needsManuallyCompositing),s.__builtin__||xn("ZLevel "+l+" has been used by unkown layer "+s.id),s!==o&&(s.__used=!0,s.__startIndex!==n&&(s.__dirty=!0),s.__startIndex=n,s.incremental?s.__drawIndex=-1:s.__drawIndex=n,t(n),o=s),a.__dirty&&(s.__dirty=!0,s.incremental&&s.__drawIndex<0&&(s.__drawIndex=n))}t(n),this.eachBuiltinLayer(function(e,t){!e.__used&&e.getElementCount()>0&&(e.__dirty=!0,e.__startIndex=e.__endIndex=e.__drawIndex=0),e.__dirty&&e.__drawIndex<0&&(e.__drawIndex=e.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(e){e.clear()},setBackgroundColor:function(e){this._backgroundColor=e},configLayer:function(e,t){if(t){var n=this._layerConfig;n[e]?w(n[e],t,!0):n[e]=t;for(var r=0;r<this._zlevelList.length;r++){var o=this._zlevelList[r];if(o===e||o===e+.01)w(this._layers[o],n[e],!0)}}},delLayer:function(e){var t=this._layers,n=this._zlevelList,r=t[e];r&&(r.dom.parentNode.removeChild(r.dom),delete t[e],n.splice(k(n,e),1))},resize:function(e,t){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts;if(null!=e&&(r.width=e),null!=t&&(r.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||t!==this._height){for(var o in n.style.width=e+"px",n.style.height=t+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);M(this._progressiveLayers,function(n){n.resize(e,t)}),this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(314159).resize(e,t)}return this},clearLayer:function(e){var t=this._layers[e];t&&t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var t=new ar("image",this,e.pixelRatio||this.dpr);if(t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor),e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,r=t.dom.height,o=t.ctx;this.eachLayer(function(e){e.__builtin__?o.drawImage(e.dom,0,0,n,r):e.renderToCanvas&&(t.ctx.save(),e.renderToCanvas(t.ctx),t.ctx.restore())})}else for(var i={},a=this.storage.getDisplayList(!0),s=0;s<a.length;s++){var l=a[s];this._doPaintEl(l,t,!0,i)}return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],r=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],i=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[r]||ao(s[n])||ao(a.style[n]))-(ao(s[o])||0)-(ao(s[i])||0)|0},pathToImage:function(e,t){t=t||this.dpr;var n=document.createElement("canvas"),r=n.getContext("2d"),o=e.getBoundingRect(),i=e.style,a=i.shadowBlur*t,s=i.shadowOffsetX*t,l=i.shadowOffsetY*t,u=i.hasStroke()?i.lineWidth:0,c=Math.max(u/2,-s+a),f=Math.max(u/2,s+a),h=Math.max(u/2,-l+a),p=Math.max(u/2,l+a),d=o.width+c+f,y=o.height+h+p;n.width=d*t,n.height=y*t,r.scale(t,t),r.clearRect(0,0,d,y),r.dpr=t;var v={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[c-o.x,h-o.y],e.rotation=0,e.scale=[1,1],e.updateTransform(),e&&e.brush(r);var g=new io({style:{x:0,y:0,image:n}});return null!=v.position&&(g.position=e.position=v.position),null!=v.rotation&&(g.rotation=e.rotation=v.rotation),null!=v.scale&&(g.scale=e.scale=v.scale),g}};var co=function(e){e=e||{},this.stage=e.stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,Ie.call(this)};co.prototype={constructor:co,addClip:function(e){this._clips.push(e)},addAnimator:function(e){e.animation=this;for(var t=e.getClips(),n=0;n<t.length;n++)this.addClip(t[n])},removeClip:function(e){var t=k(this._clips,e);t>=0&&this._clips.splice(t,1)},removeAnimator:function(e){for(var t=e.getClips(),n=0;n<t.length;n++)this.removeClip(t[n]);e.animation=null},_update:function(){for(var e=(new Date).getTime()-this._pausedTime,t=e-this._time,n=this._clips,r=n.length,o=[],i=[],a=0;a<r;a++){var s=n[a],l=s.step(e,t);l&&(o.push(l),i.push(s))}for(a=0;a<r;)n[a]._needsRemove?(n[a]=n[r-1],n.pop(),r--):a++;r=o.length;for(a=0;a<r;a++)i[a].fire(o[a]);this._time=e,this.onframe(t),this.trigger("frame",t),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,sr(function t(){e._running&&(sr(t),!e._paused&&e._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(e,t){var n=new mn(e,(t=t||{}).loop,t.getter,t.setter);return this.addAnimator(n),n}},E(co,Ie);var fo,ho,po=a.domSupported,yo=(ho={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:fo=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:R(fo,function(e){var t=e.replace("mouse","pointer");return ho.hasOwnProperty(t)?t:e})}),vo={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]};function go(e){return"mousewheel"===e&&a.browser.firefox?"DOMMouseScroll":e}function mo(e){var t=e.pointerType;return"pen"===t||"touch"===t}function bo(e){e&&(e.zrByTouch=!0)}function wo(e,t){for(var n=t,r=!1;n&&9!==n.nodeType&&!(r=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return r}function _o(e,t){this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}var xo=_o.prototype;xo.stopPropagation=xo.stopImmediatePropagation=xo.preventDefault=ie;var So={mousedown:function(e){e=Ye(this.dom,e),this._mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Ye(this.dom,e);var t=this._mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||Eo(this,!0),this.trigger("mousemove",e)},mouseup:function(e){e=Ye(this.dom,e),Eo(this,!1),this.trigger("mouseup",e)},mouseout:function(e){e=Ye(this.dom,e),this._pointerCapturing&&(e.zrEventControl="no_globalout");var t=e.toElement||e.relatedTarget;e.zrIsToLocalDOM=wo(this,t),this.trigger("mouseout",e)},touchstart:function(e){bo(e=Ye(this.dom,e)),this._lastTouchMoment=new Date,this.handler.processGesture(e,"start"),So.mousemove.call(this,e),So.mousedown.call(this,e)},touchmove:function(e){bo(e=Ye(this.dom,e)),this.handler.processGesture(e,"change"),So.mousemove.call(this,e)},touchend:function(e){bo(e=Ye(this.dom,e)),this.handler.processGesture(e,"end"),So.mouseup.call(this,e),+new Date-this._lastTouchMoment<300&&So.click.call(this,e)},pointerdown:function(e){So.mousedown.call(this,e)},pointermove:function(e){mo(e)||So.mousemove.call(this,e)},pointerup:function(e){So.mouseup.call(this,e)},pointerout:function(e){mo(e)||So.mouseout.call(this,e)}};M(["click","mousewheel","dblclick","contextmenu"],function(e){So[e]=function(t){t=Ye(this.dom,t),this.trigger(e,t)}});var Oo={pointermove:function(e){mo(e)||Oo.mousemove.call(this,e)},pointerup:function(e){Oo.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this._pointerCapturing;Eo(this,!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function Po(e,t){var n=t.domHandlers;a.pointerEventsSupported?M(yo.pointer,function(r){ko(t,r,function(t){n[r].call(e,t)})}):(a.touchEventsSupported&&M(yo.touch,function(r){ko(t,r,function(o){n[r].call(e,o),function(e){e.touching=!0,null!=e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}(t)})}),M(yo.mouse,function(r){ko(t,r,function(o){o=qe(o),t.touching||n[r].call(e,o)})}))}function To(e,t){function n(n){ko(t,n,function(r){r=qe(r),wo(e,r.target)||(r=function(e,t){return Ye(e.dom,new _o(e,t),!0)}(e,r),t.domHandlers[n].call(e,r))},{capture:!0})}a.pointerEventsSupported?M(vo.pointer,n):a.touchEventsSupported||M(vo.mouse,n)}function ko(e,t,n,r){e.mounted[t]=n,e.listenerOpts[t]=r,Xe(e.domTarget,go(t),n,r)}function Co(e){var t,n,r,o,i=e.mounted;for(var a in i)i.hasOwnProperty(a)&&(t=e.domTarget,n=go(a),r=i[a],o=e.listenerOpts[a],Ve?t.removeEventListener(n,r,o):t.detachEvent("on"+n,r));e.mounted={}}function Eo(e,t){if(e._mayPointerCapture=null,po&&e._pointerCapturing^t){e._pointerCapturing=t;var n=e._globalHandlerScope;t?To(e,n):Co(n)}}function Ao(e,t){this.domTarget=e,this.domHandlers=t,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function Mo(e,t){Ie.call(this),this.dom=e,this.painterRoot=t,this._localHandlerScope=new Ao(e,So),po&&(this._globalHandlerScope=new Ao(document,Oo)),this._pointerCapturing=!1,this._mayPointerCapture=null,Po(this,this._localHandlerScope)}var Ro=Mo.prototype;Ro.dispose=function(){Co(this._localHandlerScope),po&&Co(this._globalHandlerScope)},Ro.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},E(Mo,Ie);var Io=!a.canvasSupported,jo={canvas:uo},Lo={},Do="4.3.2";function No(e,t){var n=new Fo(i(),e,t);return Lo[n.id]=n,n}function Bo(e,t){jo[e]=t}var Fo=function(e,t,n){n=n||{},this.dom=t,this.id=e;var r=this,o=new Un,i=n.renderer;if(Io){if(!jo.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");i="vml"}else i&&jo[i]||(i="canvas");var s=new jo[i](t,o,n,e);this.storage=o,this.painter=s;var l=a.node||a.worker?null:new Mo(s.getViewportRoot(),s.root);this.handler=new it(o,s,l,s.root),this.animation=new co({stage:{update:D(this.flush,this)}}),this.animation.start(),this._needsRefresh;var u=o.delFromStorage,c=o.addToStorage;o.delFromStorage=function(e){u.call(o,e),e&&e.removeSelfFromZr(r)},o.addToStorage=function(e){c.call(o,e),e.addSelfToZr(r)}};Fo.prototype={constructor:Fo,getId:function(){return this.id},add:function(e){this.storage.addRoot(e),this._needsRefresh=!0},remove:function(e){this.storage.delRoot(e),this._needsRefresh=!0},configLayer:function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this._needsRefresh=!0},setBackgroundColor:function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var e;this._needsRefresh&&(e=!0,this.refreshImmediately()),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately()),e&&this.trigger("rendered")},addHover:function(e,t){if(this.painter.addHover){var n=this.painter.addHover(e,t);return this.refreshHover(),n}},removeHover:function(e){this.painter.removeHover&&(this.painter.removeHover(e),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,t){return this.painter.pathToImage(e,t)},setCursorStyle:function(e){this.handler.setCursorStyle(e)},findHover:function(e,t){return this.handler.findHover(e,t)},on:function(e,t,n){this.handler.on(e,t,n)},off:function(e,t){this.handler.off(e,t)},trigger:function(e,t){this.handler.trigger(e,t)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){var e;this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,e=this.id,delete Lo[e]}};var Go=(Object.freeze||Object)({version:Do,init:No,dispose:function(e){if(e)e.dispose();else{for(var t in Lo)Lo.hasOwnProperty(t)&&Lo[t].dispose();Lo={}}return this},getInstance:function(e){return Lo[e]},registerPainter:Bo}),zo=M,Vo=z,Ho=B,Wo="series\0";function Uo(e){return e instanceof Array?e:null==e?[]:[e]}function Jo(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var r=0,o=n.length;r<o;r++){var i=n[r];!e.emphasis[t].hasOwnProperty(i)&&e[t].hasOwnProperty(i)&&(e.emphasis[t][i]=e[t][i])}}}var qo=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Yo(e){return!Vo(e)||Ho(e)||e instanceof Date?e:e.value}function Xo(e,t){t=(t||[]).slice();var n=R(e||[],function(e,t){return{exist:e}});return zo(t,function(e,r){if(Vo(e)){for(var o=0;o<n.length;o++)if(!n[o].option&&null!=e.id&&n[o].exist.id===e.id+"")return n[o].option=e,void(t[r]=null);for(o=0;o<n.length;o++){var i=n[o].exist;if(!(n[o].option||null!=i.id&&null!=e.id||null==e.name||Ko(e)||Ko(i)||i.name!==e.name+""))return n[o].option=e,void(t[r]=null)}}}),zo(t,function(e,t){if(Vo(e)){for(var r=0;r<n.length;r++){var o=n[r].exist;if(!n[r].option&&!Ko(o)&&null==e.id){n[r].option=e;break}}r>=n.length&&n.push({option:e})}}),n}function Zo(e){var t=re();zo(e,function(e,n){var r=e.exist;r&&t.set(r.id,e)}),zo(e,function(e,n){var r=e.option;Q(!r||null==r.id||!t.get(r.id)||t.get(r.id)===e,"id duplicates: "+(r&&r.id)),r&&null!=r.id&&t.set(r.id,e),!e.keyInfo&&(e.keyInfo={})}),zo(e,function(e,n){var r=e.exist,o=e.option,i=e.keyInfo;if(Vo(o)){if(i.name=null!=o.name?o.name+"":r?r.name:Wo+n,r)i.id=r.id;else if(null!=o.id)i.id=o.id+"";else{var a=0;do{i.id="\0"+i.name+"\0"+a++}while(t.get(i.id))}t.set(i.id,e)}})}function Qo(e){var t=e.name;return!(!t||!t.indexOf(Wo))}function Ko(e){return Vo(e)&&e.id&&0===(e.id+"").indexOf("\0_ec_\0")}function $o(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?B(t.dataIndex)?R(t.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?B(t.name)?R(t.name,function(t){return e.indexOfName(t)}):e.indexOfName(t.name):void 0}function ei(){var e="__\0ec_inner_"+ti+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var ti=0;function ni(e,t,n){if(G(t)){var r={};r[t+"Index"]=0,t=r}var o=n&&n.defaultMainType;!o||ri(t,o+"Index")||ri(t,o+"Id")||ri(t,o+"Name")||(t[o+"Index"]=0);var i={};return zo(t,function(r,o){r=t[o];if("dataIndex"!==o&&"dataIndexInside"!==o){var a=o.match(/^(\w+)(Index|Id|Name)$/)||[],s=a[1],l=(a[2]||"").toLowerCase();if(!(!s||!l||null==r||"index"===l&&"none"===r||n&&n.includeMainTypes&&k(n.includeMainTypes,s)<0)){var u={mainType:s};"index"===l&&"all"===r||(u[l]=r);var c=e.queryComponents(u);i[s+"Models"]=c,i[s+"Model"]=c[0]}}else i[o]=r}),i}function ri(e,t){return e&&e.hasOwnProperty(t)}function oi(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function ii(e){return"auto"===e?a.domSupported?"html":"richText":e||"html"}function ai(e,t){var n=re(),r=[];return M(e,function(e){var o=t(e);(n.get(o)||(r.push(o),n.set(o,[]))).push(e)}),{keys:r,buckets:n}}var si=".",li="___EC__COMPONENT__CONTAINER___";function ui(e){var t={main:"",sub:""};return e&&(e=e.split(si),t.main=e[0]||"",t.sub=e[1]||""),t}function ci(e,t){e.$constructor=e,e.extend=function(e){r&&M(t,function(t){e[t]||console.warn("Method `"+t+"` should be implemented"+(e.type?" in "+e.type:"")+".")});var n=this,o=function(){e.$constructor?e.$constructor.apply(this,arguments):n.apply(this,arguments)};return x(o.prototype,e),o.extend=this.extend,o.superCall=pi,o.superApply=di,C(o,this),o.superClass=n,o}}var fi=0;function hi(e){var t=["__\0is_clz",fi++,Math.random().toFixed(3)].join("_");e.prototype[t]=!0,r&&Q(!e.isInstance,'The method "is" can not be defined.'),e.isInstance=function(e){return!(!e||!e[t])}}function pi(e,t){var n=X(arguments,2);return this.superClass.prototype[t].apply(e,n)}function di(e,t,n){return this.superClass.prototype[t].apply(e,n)}function yi(e,t){t=t||{};var n={};if(e.registerClass=function(e,t){if(t)if(function(e){Q(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}(t),(t=ui(t)).sub){if(t.sub!==li){((function(e){var t=n[e.main];t&&t[li]||((t=n[e.main]={})[li]=!0);return t})(t))[t.sub]=e}}else r&&n[t.main]&&console.warn(t.main+" exists."),n[t.main]=e;return e},e.getClass=function(e,t,r){var o=n[e];if(o&&o[li]&&(o=t?o[t]:null),r&&!o)throw new Error(t?"Component "+e+"."+(t||"")+" not exists. Load it first.":e+".type should be specified.");return o},e.getClassesByMainType=function(e){e=ui(e);var t=[],r=n[e.main];return r&&r[li]?M(r,function(e,n){n!==li&&t.push(e)}):t.push(r),t},e.hasClass=function(e){return e=ui(e),!!n[e.main]},e.getAllClassMainTypes=function(){var e=[];return M(n,function(t,n){e.push(n)}),e},e.hasSubTypes=function(e){e=ui(e);var t=n[e.main];return t&&t[li]},e.parseClassType=ui,t.registerWhenExtend){var o=e.extend;o&&(e.extend=function(t){var n=o.call(this,t);return e.registerClass(n,t.type)})}return e}var vi=function(e){for(var t=0;t<e.length;t++)e[t][1]||(e[t][1]=e[t][0]);return function(t,n,r){for(var o={},i=0;i<e.length;i++){var a=e[i][1];if(!(n&&k(n,a)>=0||r&&k(r,a)<0)){var s=t.getShallow(a);null!=s&&(o[e[i][0]]=s)}}return o}},gi=vi([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),mi={getLineStyle:function(e){var t=gi(this,e);return t.lineDash=this.getLineDash(t.lineWidth),t},getLineDash:function(e){null==e&&(e=1);var t=this.get("type"),n=Math.max(e,2),r=4*e;return"solid"!==t&&null!=t&&("dashed"===t?[r,r]:[n,n])}},bi=vi([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),wi={getAreaStyle:function(e,t){return bi(this,e,t)}},_i=Math.pow,xi=Math.sqrt,Si=1e-8,Oi=1e-4,Pi=xi(3),Ti=1/3,ki=le(),Ci=le(),Ei=le();function Ai(e){return e>-Si&&e<Si}function Mi(e){return e>Si||e<-Si}function Ri(e,t,n,r,o){var i=1-o;return i*i*(i*e+3*o*t)+o*o*(o*r+3*i*n)}function Ii(e,t,n,r,o){var i=1-o;return 3*(((t-e)*i+2*(n-t)*o)*i+(r-n)*o*o)}function ji(e,t,n,r,o){var i=6*n-12*t+6*e,a=9*t+3*r-3*e-9*n,s=3*t-3*e,l=0;if(Ai(a)){if(Mi(i))(c=-s/i)>=0&&c<=1&&(o[l++]=c)}else{var u=i*i-4*a*s;if(Ai(u))o[0]=-i/(2*a);else if(u>0){var c,f=xi(u),h=(-i-f)/(2*a);(c=(-i+f)/(2*a))>=0&&c<=1&&(o[l++]=c),h>=0&&h<=1&&(o[l++]=h)}}return l}function Li(e,t,n,r,o,i){var a=(t-e)*o+e,s=(n-t)*o+t,l=(r-n)*o+n,u=(s-a)*o+a,c=(l-s)*o+s,f=(c-u)*o+u;i[0]=e,i[1]=a,i[2]=u,i[3]=f,i[4]=f,i[5]=c,i[6]=l,i[7]=r}function Di(e,t,n,r){var o=1-r;return o*(o*e+2*r*t)+r*r*n}function Ni(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}function Bi(e,t,n){var r=e+n-2*t;return 0===r?.5:(e-t)/r}function Fi(e,t,n,r,o){var i=(t-e)*r+e,a=(n-t)*r+t,s=(a-i)*r+i;o[0]=e,o[1]=i,o[2]=s,o[3]=s,o[4]=a,o[5]=n}var Gi=Math.min,zi=Math.max,Vi=Math.sin,Hi=Math.cos,Wi=2*Math.PI,Ui=le(),Ji=le(),qi=le();function Yi(e,t,n){if(0!==e.length){var r,o=e[0],i=o[0],a=o[0],s=o[1],l=o[1];for(r=1;r<e.length;r++)o=e[r],i=Gi(i,o[0]),a=zi(a,o[0]),s=Gi(s,o[1]),l=zi(l,o[1]);t[0]=i,t[1]=s,n[0]=a,n[1]=l}}function Xi(e,t,n,r,o,i){o[0]=Gi(e,n),o[1]=Gi(t,r),i[0]=zi(e,n),i[1]=zi(t,r)}var Zi=[],Qi=[];function Ki(e,t,n,r,o,i,a,s,l,u){var c,f=ji,h=Ri,p=f(e,n,o,a,Zi);for(l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0,c=0;c<p;c++){var d=h(e,n,o,a,Zi[c]);l[0]=Gi(d,l[0]),u[0]=zi(d,u[0])}for(p=f(t,r,i,s,Qi),c=0;c<p;c++){var y=h(t,r,i,s,Qi[c]);l[1]=Gi(y,l[1]),u[1]=zi(y,u[1])}l[0]=Gi(e,l[0]),u[0]=zi(e,u[0]),l[0]=Gi(a,l[0]),u[0]=zi(a,u[0]),l[1]=Gi(t,l[1]),u[1]=zi(t,u[1]),l[1]=Gi(s,l[1]),u[1]=zi(s,u[1])}function $i(e,t,n,r,o,i,a,s){var l=Bi,u=Di,c=zi(Gi(l(e,n,o),1),0),f=zi(Gi(l(t,r,i),1),0),h=u(e,n,o,c),p=u(t,r,i,f);a[0]=Gi(e,o,h),a[1]=Gi(t,i,p),s[0]=zi(e,o,h),s[1]=zi(t,i,p)}function ea(e,t,n,r,o,i,a,s,l){var u=ke,c=Ce,f=Math.abs(o-i);if(f%Wi<1e-4&&f>1e-4)return s[0]=e-n,s[1]=t-r,l[0]=e+n,void(l[1]=t+r);if(Ui[0]=Hi(o)*n+e,Ui[1]=Vi(o)*r+t,Ji[0]=Hi(i)*n+e,Ji[1]=Vi(i)*r+t,u(s,Ui,Ji),c(l,Ui,Ji),(o%=Wi)<0&&(o+=Wi),(i%=Wi)<0&&(i+=Wi),o>i&&!a?i+=Wi:o<i&&a&&(o+=Wi),a){var h=i;i=o,o=h}for(var p=0;p<i;p+=Math.PI/2)p>o&&(qi[0]=Hi(p)*n+e,qi[1]=Vi(p)*r+t,u(s,qi,s),c(l,qi,l))}var ta={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},na=[],ra=[],oa=[],ia=[],aa=Math.min,sa=Math.max,la=Math.cos,ua=Math.sin,ca=Math.sqrt,fa=Math.abs,ha="undefined"!=typeof Float32Array,pa=function(e){this._saveData=!e,this._saveData&&(this.data=[]),this._ctx=null};function da(e,t,n,r,o,i,a){if(0===o)return!1;var s=o,l=0;if(a>t+s&&a>r+s||a<t-s&&a<r-s||i>e+s&&i>n+s||i<e-s&&i<n-s)return!1;if(e===n)return Math.abs(i-e)<=s/2;var u=(l=(t-r)/(e-n))*i-a+(e*r-n*t)/(e-n);return u*u/(l*l+1)<=s/2*s/2}function ya(e,t,n,r,o,i,a,s,l,u,c){if(0===l)return!1;var f=l;return!(c>t+f&&c>r+f&&c>i+f&&c>s+f||c<t-f&&c<r-f&&c<i-f&&c<s-f||u>e+f&&u>n+f&&u>o+f&&u>a+f||u<e-f&&u<n-f&&u<o-f&&u<a-f)&&function(e,t,n,r,o,i,a,s,l,u,c){var f,h,p,d,y,v=.005,g=1/0;ki[0]=l,ki[1]=u;for(var m=0;m<1;m+=.05)Ci[0]=Ri(e,n,o,a,m),Ci[1]=Ri(t,r,i,s,m),(d=Oe(ki,Ci))<g&&(f=m,g=d);g=1/0;for(var b=0;b<32&&!(v<Oi);b++)h=f-v,p=f+v,Ci[0]=Ri(e,n,o,a,h),Ci[1]=Ri(t,r,i,s,h),d=Oe(Ci,ki),h>=0&&d<g?(f=h,g=d):(Ei[0]=Ri(e,n,o,a,p),Ei[1]=Ri(t,r,i,s,p),y=Oe(Ei,ki),p<=1&&y<g?(f=p,g=y):v*=.5);return c&&(c[0]=Ri(e,n,o,a,f),c[1]=Ri(t,r,i,s,f)),xi(g)}(e,t,n,r,o,i,a,s,u,c,null)<=f/2}function va(e,t,n,r,o,i,a,s,l){if(0===a)return!1;var u=a;return!(l>t+u&&l>r+u&&l>i+u||l<t-u&&l<r-u&&l<i-u||s>e+u&&s>n+u&&s>o+u||s<e-u&&s<n-u&&s<o-u)&&function(e,t,n,r,o,i,a,s,l){var u,c=.005,f=1/0;ki[0]=a,ki[1]=s;for(var h=0;h<1;h+=.05)Ci[0]=Di(e,n,o,h),Ci[1]=Di(t,r,i,h),(v=Oe(ki,Ci))<f&&(u=h,f=v);f=1/0;for(var p=0;p<32&&!(c<Oi);p++){var d=u-c,y=u+c;Ci[0]=Di(e,n,o,d),Ci[1]=Di(t,r,i,d);var v=Oe(Ci,ki);if(d>=0&&v<f)u=d,f=v;else{Ei[0]=Di(e,n,o,y),Ei[1]=Di(t,r,i,y);var g=Oe(Ei,ki);y<=1&&g<f?(u=y,f=g):c*=.5}}return l&&(l[0]=Di(e,n,o,u),l[1]=Di(t,r,i,u)),xi(f)}(e,t,n,r,o,i,s,l,null)<=u/2}pa.prototype={constructor:pa,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(e,t,n){n=n||0,this._ux=fa(n/wn/e)||0,this._uy=fa(n/wn/t)||0},getContext:function(){return this._ctx},beginPath:function(e){return this._ctx=e,e&&e.beginPath(),e&&(this.dpr=e.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(e,t){return this.addData(ta.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},lineTo:function(e,t){var n=fa(e-this._xi)>this._ux||fa(t-this._yi)>this._uy||this._len<5;return this.addData(ta.L,e,t),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(e,t):this._ctx.lineTo(e,t)),n&&(this._xi=e,this._yi=t),this},bezierCurveTo:function(e,t,n,r,o,i){return this.addData(ta.C,e,t,n,r,o,i),this._ctx&&(this._needsDash()?this._dashedBezierTo(e,t,n,r,o,i):this._ctx.bezierCurveTo(e,t,n,r,o,i)),this._xi=o,this._yi=i,this},quadraticCurveTo:function(e,t,n,r){return this.addData(ta.Q,e,t,n,r),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(e,t,n,r):this._ctx.quadraticCurveTo(e,t,n,r)),this._xi=n,this._yi=r,this},arc:function(e,t,n,r,o,i){return this.addData(ta.A,e,t,n,n,r,o-r,0,i?0:1),this._ctx&&this._ctx.arc(e,t,n,r,o,i),this._xi=la(o)*n+e,this._yi=ua(o)*n+t,this},arcTo:function(e,t,n,r,o){return this._ctx&&this._ctx.arcTo(e,t,n,r,o),this},rect:function(e,t,n,r){return this._ctx&&this._ctx.rect(e,t,n,r),this.addData(ta.R,e,t,n,r),this},closePath:function(){this.addData(ta.Z);var e=this._ctx,t=this._x0,n=this._y0;return e&&(this._needsDash()&&this._dashedLineTo(t,n),e.closePath()),this._xi=t,this._yi=n,this},fill:function(e){e&&e.fill(),this.toStatic()},stroke:function(e){e&&e.stroke(),this.toStatic()},setLineDash:function(e){if(e instanceof Array){this._lineDash=e,this._dashIdx=0;for(var t=0,n=0;n<e.length;n++)t+=e[n];this._dashSum=t}return this},setLineDashOffset:function(e){return this._dashOffset=e,this},len:function(){return this._len},setData:function(e){var t=e.length;this.data&&this.data.length===t||!ha||(this.data=new Float32Array(t));for(var n=0;n<t;n++)this.data[n]=e[n];this._len=t},appendPath:function(e){e instanceof Array||(e=[e]);for(var t=e.length,n=0,r=this._len,o=0;o<t;o++)n+=e[o].len();ha&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n));for(o=0;o<t;o++)for(var i=e[o].data,a=0;a<i.length;a++)this.data[r++]=i[a];this._len=r},addData:function(e){if(this._saveData){var t=this.data;this._len+arguments.length>t.length&&(this._expandData(),t=this.data);for(var n=0;n<arguments.length;n++)t[this._len++]=arguments[n];this._prevCmd=e}},_expandData:function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(e,t){var n,r,o=this._dashSum,i=this._dashOffset,a=this._lineDash,s=this._ctx,l=this._xi,u=this._yi,c=e-l,f=t-u,h=ca(c*c+f*f),p=l,d=u,y=a.length;for(c/=h,f/=h,i<0&&(i=o+i),p-=(i%=o)*c,d-=i*f;c>0&&p<=e||c<0&&p>=e||0===c&&(f>0&&d<=t||f<0&&d>=t);)p+=c*(n=a[r=this._dashIdx]),d+=f*n,this._dashIdx=(r+1)%y,c>0&&p<l||c<0&&p>l||f>0&&d<u||f<0&&d>u||s[r%2?"moveTo":"lineTo"](c>=0?aa(p,e):sa(p,e),f>=0?aa(d,t):sa(d,t));c=p-e,f=d-t,this._dashOffset=-ca(c*c+f*f)},_dashedBezierTo:function(e,t,n,r,o,i){var a,s,l,u,c,f=this._dashSum,h=this._dashOffset,p=this._lineDash,d=this._ctx,y=this._xi,v=this._yi,g=Ri,m=0,b=this._dashIdx,w=p.length,_=0;for(h<0&&(h=f+h),h%=f,a=0;a<1;a+=.1)s=g(y,e,n,o,a+.1)-g(y,e,n,o,a),l=g(v,t,r,i,a+.1)-g(v,t,r,i,a),m+=ca(s*s+l*l);for(;b<w&&!((_+=p[b])>h);b++);for(a=(_-h)/m;a<=1;)u=g(y,e,n,o,a),c=g(v,t,r,i,a),b%2?d.moveTo(u,c):d.lineTo(u,c),a+=p[b]/m,b=(b+1)%w;b%2!=0&&d.lineTo(o,i),s=o-u,l=i-c,this._dashOffset=-ca(s*s+l*l)},_dashedQuadraticTo:function(e,t,n,r){var o=n,i=r;n=(n+2*e)/3,r=(r+2*t)/3,e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,this._dashedBezierTo(e,t,n,r,o,i)},toStatic:function(){var e=this.data;e instanceof Array&&(e.length=this._len,ha&&(this.data=new Float32Array(e)))},getBoundingRect:function(){na[0]=na[1]=oa[0]=oa[1]=Number.MAX_VALUE,ra[0]=ra[1]=ia[0]=ia[1]=-Number.MAX_VALUE;for(var e=this.data,t=0,n=0,r=0,o=0,i=0;i<e.length;){var a=e[i++];switch(1===i&&(r=t=e[i],o=n=e[i+1]),a){case ta.M:t=r=e[i++],n=o=e[i++],oa[0]=r,oa[1]=o,ia[0]=r,ia[1]=o;break;case ta.L:Xi(t,n,e[i],e[i+1],oa,ia),t=e[i++],n=e[i++];break;case ta.C:Ki(t,n,e[i++],e[i++],e[i++],e[i++],e[i],e[i+1],oa,ia),t=e[i++],n=e[i++];break;case ta.Q:$i(t,n,e[i++],e[i++],e[i],e[i+1],oa,ia),t=e[i++],n=e[i++];break;case ta.A:var s=e[i++],l=e[i++],u=e[i++],c=e[i++],f=e[i++],h=e[i++]+f;i+=1;var p=1-e[i++];1===i&&(r=la(f)*u+s,o=ua(f)*c+l),ea(s,l,u,c,f,h,p,oa,ia),t=la(h)*u+s,n=ua(h)*c+l;break;case ta.R:Xi(r=t=e[i++],o=n=e[i++],r+e[i++],o+e[i++],oa,ia);break;case ta.Z:t=r,n=o}ke(na,na,oa),Ce(ra,ra,ia)}return 0===i&&(na[0]=na[1]=ra[0]=ra[1]=0),new jn(na[0],na[1],ra[0]-na[0],ra[1]-na[1])},rebuildPath:function(e){for(var t,n,r,o,i,a,s=this.data,l=this._ux,u=this._uy,c=this._len,f=0;f<c;){var h=s[f++];switch(1===f&&(t=r=s[f],n=o=s[f+1]),h){case ta.M:t=r=s[f++],n=o=s[f++],e.moveTo(r,o);break;case ta.L:i=s[f++],a=s[f++],(fa(i-r)>l||fa(a-o)>u||f===c-1)&&(e.lineTo(i,a),r=i,o=a);break;case ta.C:e.bezierCurveTo(s[f++],s[f++],s[f++],s[f++],s[f++],s[f++]),r=s[f-2],o=s[f-1];break;case ta.Q:e.quadraticCurveTo(s[f++],s[f++],s[f++],s[f++]),r=s[f-2],o=s[f-1];break;case ta.A:var p=s[f++],d=s[f++],y=s[f++],v=s[f++],g=s[f++],m=s[f++],b=s[f++],w=s[f++],_=y>v?y:v,x=y>v?1:y/v,S=y>v?v/y:1,O=g+m;Math.abs(y-v)>.001?(e.translate(p,d),e.rotate(b),e.scale(x,S),e.arc(0,0,_,g,O,1-w),e.scale(1/x,1/S),e.rotate(-b),e.translate(-p,-d)):e.arc(p,d,_,g,O,1-w),1===f&&(t=la(g)*y+p,n=ua(g)*v+d),r=la(O)*y+p,o=ua(O)*v+d;break;case ta.R:t=r=s[f],n=o=s[f+1],e.rect(s[f++],s[f++],s[f++],s[f++]);break;case ta.Z:e.closePath(),r=t,o=n}}}},pa.CMD=ta;var ga=2*Math.PI;function ma(e){return(e%=ga)<0&&(e+=ga),e}var ba=2*Math.PI;function wa(e,t,n,r,o,i,a,s,l){if(0===a)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>n||c+u<n)return!1;if(Math.abs(r-o)%ba<1e-4)return!0;if(i){var f=r;r=ma(o),o=ma(f)}else r=ma(r),o=ma(o);r>o&&(o+=ba);var h=Math.atan2(l,s);return h<0&&(h+=ba),h>=r&&h<=o||h+ba>=r&&h+ba<=o}function _a(e,t,n,r,o,i){if(i>t&&i>r||i<t&&i<r)return 0;if(r===t)return 0;var a=r<t?1:-1,s=(i-t)/(r-t);1!==s&&0!==s||(a=r<t?.5:-.5);var l=s*(n-e)+e;return l===o?1/0:l>o?a:0}var xa=pa.CMD,Sa=2*Math.PI,Oa=1e-4;var Pa=[-1,-1,-1],Ta=[-1,-1];function ka(e,t,n,r,o,i,a,s,l,u){if(u>t&&u>r&&u>i&&u>s||u<t&&u<r&&u<i&&u<s)return 0;var c,f=function(e,t,n,r,o,i){var a=r+3*(t-n)-e,s=3*(n-2*t+e),l=3*(t-e),u=e-o,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,p=0;if(Ai(c)&&Ai(f))Ai(s)?i[0]=0:(O=-l/s)>=0&&O<=1&&(i[p++]=O);else{var d=f*f-4*c*h;if(Ai(d)){var y=f/c,v=-y/2;(O=-s/a+y)>=0&&O<=1&&(i[p++]=O),v>=0&&v<=1&&(i[p++]=v)}else if(d>0){var g=xi(d),m=c*s+1.5*a*(-f+g),b=c*s+1.5*a*(-f-g);(O=(-s-((m=m<0?-_i(-m,Ti):_i(m,Ti))+(b=b<0?-_i(-b,Ti):_i(b,Ti))))/(3*a))>=0&&O<=1&&(i[p++]=O)}else{var w=(2*c*s-3*a*f)/(2*xi(c*c*c)),_=Math.acos(w)/3,x=xi(c),S=Math.cos(_),O=(-s-2*x*S)/(3*a),P=(v=(-s+x*(S+Pi*Math.sin(_)))/(3*a),(-s+x*(S-Pi*Math.sin(_)))/(3*a));O>=0&&O<=1&&(i[p++]=O),v>=0&&v<=1&&(i[p++]=v),P>=0&&P<=1&&(i[p++]=P)}}return p}(t,r,i,s,u,Pa);if(0===f)return 0;for(var h,p,d=0,y=-1,v=0;v<f;v++){var g=Pa[v],m=0===g||1===g?.5:1;Ri(e,n,o,a,g)<l||(y<0&&(y=ji(t,r,i,s,Ta),Ta[1]<Ta[0]&&y>1&&(void 0,c=Ta[0],Ta[0]=Ta[1],Ta[1]=c),h=Ri(t,r,i,s,Ta[0]),y>1&&(p=Ri(t,r,i,s,Ta[1]))),2===y?g<Ta[0]?d+=h<t?m:-m:g<Ta[1]?d+=p<h?m:-m:d+=s<p?m:-m:g<Ta[0]?d+=h<t?m:-m:d+=s<h?m:-m)}return d}function Ca(e,t,n,r,o,i,a,s){if(s>t&&s>r&&s>i||s<t&&s<r&&s<i)return 0;var l=function(e,t,n,r,o){var i=e-2*t+n,a=2*(t-e),s=e-r,l=0;if(Ai(i))Mi(a)&&(c=-s/a)>=0&&c<=1&&(o[l++]=c);else{var u=a*a-4*i*s;if(Ai(u))(c=-a/(2*i))>=0&&c<=1&&(o[l++]=c);else if(u>0){var c,f=xi(u),h=(-a-f)/(2*i);(c=(-a+f)/(2*i))>=0&&c<=1&&(o[l++]=c),h>=0&&h<=1&&(o[l++]=h)}}return l}(t,r,i,s,Pa);if(0===l)return 0;var u=Bi(t,r,i);if(u>=0&&u<=1){for(var c=0,f=Di(t,r,i,u),h=0;h<l;h++){var p=0===Pa[h]||1===Pa[h]?.5:1;Di(e,n,o,Pa[h])<a||(Pa[h]<u?c+=f<t?p:-p:c+=i<f?p:-p)}return c}p=0===Pa[0]||1===Pa[0]?.5:1;return Di(e,n,o,Pa[0])<a?0:i<t?p:-p}function Ea(e,t,n,r,o,i,a,s){if((s-=t)>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);Pa[0]=-l,Pa[1]=l;var u=Math.abs(r-o);if(u<1e-4)return 0;if(u%Sa<1e-4){r=0,o=Sa;var c=i?1:-1;return a>=Pa[0]+e&&a<=Pa[1]+e?c:0}if(i){l=r;r=ma(o),o=ma(l)}else r=ma(r),o=ma(o);r>o&&(o+=Sa);for(var f=0,h=0;h<2;h++){var p=Pa[h];if(p+e>a){var d=Math.atan2(s,p);c=i?1:-1;d<0&&(d=Sa+d),(d>=r&&d<=o||d+Sa>=r&&d+Sa<=o)&&(d>Math.PI/2&&d<1.5*Math.PI&&(c=-c),f+=c)}}return f}function Aa(e,t,n,r,o){for(var i,a,s=0,l=0,u=0,c=0,f=0,h=0;h<e.length;){var p=e[h++];switch(p===xa.M&&h>1&&(n||(s+=_a(l,u,c,f,r,o))),1===h&&(c=l=e[h],f=u=e[h+1]),p){case xa.M:l=c=e[h++],u=f=e[h++];break;case xa.L:if(n){if(da(l,u,e[h],e[h+1],t,r,o))return!0}else s+=_a(l,u,e[h],e[h+1],r,o)||0;l=e[h++],u=e[h++];break;case xa.C:if(n){if(ya(l,u,e[h++],e[h++],e[h++],e[h++],e[h],e[h+1],t,r,o))return!0}else s+=ka(l,u,e[h++],e[h++],e[h++],e[h++],e[h],e[h+1],r,o)||0;l=e[h++],u=e[h++];break;case xa.Q:if(n){if(va(l,u,e[h++],e[h++],e[h],e[h+1],t,r,o))return!0}else s+=Ca(l,u,e[h++],e[h++],e[h],e[h+1],r,o)||0;l=e[h++],u=e[h++];break;case xa.A:var d=e[h++],y=e[h++],v=e[h++],g=e[h++],m=e[h++],b=e[h++];h+=1;var w=1-e[h++],_=Math.cos(m)*v+d,x=Math.sin(m)*g+y;h>1?s+=_a(l,u,_,x,r,o):(c=_,f=x);var S=(r-d)*g/v+d;if(n){if(wa(d,y,g,m,m+b,w,t,S,o))return!0}else s+=Ea(d,y,g,m,m+b,w,S,o);l=Math.cos(m+b)*v+d,u=Math.sin(m+b)*g+y;break;case xa.R:c=l=e[h++],f=u=e[h++];_=c+e[h++],x=f+e[h++];if(n){if(da(c,f,_,f,t,r,o)||da(_,f,_,x,t,r,o)||da(_,x,c,x,t,r,o)||da(c,x,c,f,t,r,o))return!0}else s+=_a(_,f,_,x,r,o),s+=_a(c,x,c,f,r,o);break;case xa.Z:if(n){if(da(l,u,c,f,t,r,o))return!0}else s+=_a(l,u,c,f,r,o);l=c,u=f}}return n||(i=u,a=f,Math.abs(i-a)<Oa)||(s+=_a(l,u,c,f,r,o)||0),0!==s}var Ma=rr.prototype.getCanvasPattern,Ra=Math.abs,Ia=new pa(!0);function ja(e){oo.call(this,e),this.path=null}ja.prototype={constructor:ja,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(e,t){var n,r=this.style,o=this.path||Ia,i=r.hasStroke(),a=r.hasFill(),s=r.fill,l=r.stroke,u=a&&!!s.colorStops,c=i&&!!l.colorStops,f=a&&!!s.image,h=i&&!!l.image;(r.bind(e,this,t),this.setTransform(e),this.__dirty)&&(u&&(n=n||this.getBoundingRect(),this._fillGradient=r.getGradient(e,s,n)),c&&(n=n||this.getBoundingRect(),this._strokeGradient=r.getGradient(e,l,n)));u?e.fillStyle=this._fillGradient:f&&(e.fillStyle=Ma.call(s,e)),c?e.strokeStyle=this._strokeGradient:h&&(e.strokeStyle=Ma.call(l,e));var p=r.lineDash,d=r.lineDashOffset,y=!!e.setLineDash,v=this.getGlobalScale();if(o.setScale(v[0],v[1],this.segmentIgnoreThreshold),this.__dirtyPath||p&&!y&&i?(o.beginPath(e),p&&!y&&(o.setLineDash(p),o.setLineDashOffset(d)),this.buildPath(o,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(e.beginPath(),this.path.rebuildPath(e)),a)if(null!=r.fillOpacity){var g=e.globalAlpha;e.globalAlpha=r.fillOpacity*r.opacity,o.fill(e),e.globalAlpha=g}else o.fill(e);if(p&&y&&(e.setLineDash(p),e.lineDashOffset=d),i)if(null!=r.strokeOpacity){g=e.globalAlpha;e.globalAlpha=r.strokeOpacity*r.opacity,o.stroke(e),e.globalAlpha=g}else o.stroke(e);p&&y&&e.setLineDash([]),null!=r.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))},buildPath:function(e,t,n){},createPathProxy:function(){this.path=new pa},getBoundingRect:function(){var e=this._rect,t=this.style,n=!e;if(n){var r=this.path;r||(r=this.path=new pa),this.__dirtyPath&&(r.beginPath(),this.buildPath(r,this.shape,!1)),e=r.getBoundingRect()}if(this._rect=e,t.hasStroke()){var o=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||n){o.copy(e);var i=t.lineWidth,a=t.strokeNoScale?this.getLineScale():1;t.hasFill()||(i=Math.max(i,this.strokeContainThreshold||4)),a>1e-10&&(o.width+=i/a,o.height+=i/a,o.x-=i/a/2,o.y-=i/a/2)}return o}return e},contain:function(e,t){var n=this.transformCoordToLocal(e,t),r=this.getBoundingRect(),o=this.style;if(e=n[0],t=n[1],r.contain(e,t)){var i=this.path.data;if(o.hasStroke()){var a=o.lineWidth,s=o.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(o.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),function(e,t,n,r){return Aa(e,t,!0,n,r)}(i,a/s,e,t)))return!0}if(o.hasFill())return function(e,t,n){return Aa(e,0,!1,t,n)}(i,e,t)}return!1},dirty:function(e){null==e&&(e=!0),e&&(this.__dirtyPath=e,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(e){return this.animate("shape",e)},attrKV:function(e,t){"shape"===e?(this.setShape(t),this.__dirtyPath=!0,this._rect=null):oo.prototype.attrKV.call(this,e,t)},setShape:function(e,t){var n=this.shape;if(n){if(z(e))for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);else n[e]=t;this.dirty(!0)}return this},getLineScale:function(){var e=this.transform;return e&&Ra(e[0]-1)>1e-10&&Ra(e[3]-1)>1e-10?Math.sqrt(Ra(e[0]*e[3]-e[2]*e[1])):1}},ja.extend=function(e){var t=function(t){ja.call(this,t),e.style&&this.style.extendFrom(e.style,!1);var n=e.shape;if(n){this.shape=this.shape||{};var r=this.shape;for(var o in n)!r.hasOwnProperty(o)&&n.hasOwnProperty(o)&&(r[o]=n[o])}e.init&&e.init.call(this,t)};for(var n in C(t,ja),e)"style"!==n&&"shape"!==n&&(t.prototype[n]=e[n]);return t},C(ja,oo);var La=pa.CMD,Da=[[],[],[]],Na=Math.sqrt,Ba=Math.atan2,Fa=function(e,t){var n,r,o,i,a,s=e.data,l=La.M,u=La.C,c=La.L,f=La.R,h=La.A,p=La.Q;for(o=0,i=0;o<s.length;){switch(n=s[o++],i=o,r=0,n){case l:case c:r=1;break;case u:r=3;break;case p:r=2;break;case h:var d=t[4],y=t[5],v=Na(t[0]*t[0]+t[1]*t[1]),g=Na(t[2]*t[2]+t[3]*t[3]),m=Ba(-t[1]/g,t[0]/v);s[o]*=v,s[o++]+=d,s[o]*=g,s[o++]+=y,s[o++]*=v,s[o++]*=g,s[o++]+=m,s[o++]+=m,i=o+=2;break;case f:b[0]=s[o++],b[1]=s[o++],Te(b,b,t),s[i++]=b[0],s[i++]=b[1],b[0]+=s[o++],b[1]+=s[o++],Te(b,b,t),s[i++]=b[0],s[i++]=b[1]}for(a=0;a<r;a++){var b;(b=Da[a])[0]=s[o++],b[1]=s[o++],Te(b,b,t),s[i++]=b[0],s[i++]=b[1]}}},Ga=Math.sqrt,za=Math.sin,Va=Math.cos,Ha=Math.PI,Wa=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},Ua=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(Wa(e)*Wa(t))},Ja=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Ua(e,t))};function qa(e,t,n,r,o,i,a,s,l,u,c){var f=l*(Ha/180),h=Va(f)*(e-n)/2+za(f)*(t-r)/2,p=-1*za(f)*(e-n)/2+Va(f)*(t-r)/2,d=h*h/(a*a)+p*p/(s*s);d>1&&(a*=Ga(d),s*=Ga(d));var y=(o===i?-1:1)*Ga((a*a*(s*s)-a*a*(p*p)-s*s*(h*h))/(a*a*(p*p)+s*s*(h*h)))||0,v=y*a*p/s,g=y*-s*h/a,m=(e+n)/2+Va(f)*v-za(f)*g,b=(t+r)/2+za(f)*v+Va(f)*g,w=Ja([1,0],[(h-v)/a,(p-g)/s]),_=[(h-v)/a,(p-g)/s],x=[(-1*h-v)/a,(-1*p-g)/s],S=Ja(_,x);Ua(_,x)<=-1&&(S=Ha),Ua(_,x)>=1&&(S=0),0===i&&S>0&&(S-=2*Ha),1===i&&S<0&&(S+=2*Ha),c.addData(u,m,b,a,s,w,S,f,i)}var Ya=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,Xa=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Za(e,t){var n=function(e){if(!e)return new pa;for(var t,n=0,r=0,o=n,i=r,a=new pa,s=pa.CMD,l=e.match(Ya),u=0;u<l.length;u++){for(var c,f=l[u],h=f.charAt(0),p=f.match(Xa)||[],d=p.length,y=0;y<d;y++)p[y]=parseFloat(p[y]);for(var v=0;v<d;){var g,m,b,w,_,x,S,O=n,P=r;switch(h){case"l":n+=p[v++],r+=p[v++],c=s.L,a.addData(c,n,r);break;case"L":n=p[v++],r=p[v++],c=s.L,a.addData(c,n,r);break;case"m":n+=p[v++],r+=p[v++],c=s.M,a.addData(c,n,r),o=n,i=r,h="l";break;case"M":n=p[v++],r=p[v++],c=s.M,a.addData(c,n,r),o=n,i=r,h="L";break;case"h":n+=p[v++],c=s.L,a.addData(c,n,r);break;case"H":n=p[v++],c=s.L,a.addData(c,n,r);break;case"v":r+=p[v++],c=s.L,a.addData(c,n,r);break;case"V":r=p[v++],c=s.L,a.addData(c,n,r);break;case"C":c=s.C,a.addData(c,p[v++],p[v++],p[v++],p[v++],p[v++],p[v++]),n=p[v-2],r=p[v-1];break;case"c":c=s.C,a.addData(c,p[v++]+n,p[v++]+r,p[v++]+n,p[v++]+r,p[v++]+n,p[v++]+r),n+=p[v-2],r+=p[v-1];break;case"S":g=n,m=r;var T=a.len(),k=a.data;t===s.C&&(g+=n-k[T-4],m+=r-k[T-3]),c=s.C,O=p[v++],P=p[v++],n=p[v++],r=p[v++],a.addData(c,g,m,O,P,n,r);break;case"s":g=n,m=r,T=a.len(),k=a.data,t===s.C&&(g+=n-k[T-4],m+=r-k[T-3]),c=s.C,O=n+p[v++],P=r+p[v++],n+=p[v++],r+=p[v++],a.addData(c,g,m,O,P,n,r);break;case"Q":O=p[v++],P=p[v++],n=p[v++],r=p[v++],c=s.Q,a.addData(c,O,P,n,r);break;case"q":O=p[v++]+n,P=p[v++]+r,n+=p[v++],r+=p[v++],c=s.Q,a.addData(c,O,P,n,r);break;case"T":g=n,m=r,T=a.len(),k=a.data,t===s.Q&&(g+=n-k[T-4],m+=r-k[T-3]),n=p[v++],r=p[v++],c=s.Q,a.addData(c,g,m,n,r);break;case"t":g=n,m=r,T=a.len(),k=a.data,t===s.Q&&(g+=n-k[T-4],m+=r-k[T-3]),n+=p[v++],r+=p[v++],c=s.Q,a.addData(c,g,m,n,r);break;case"A":b=p[v++],w=p[v++],_=p[v++],x=p[v++],S=p[v++],qa(O=n,P=r,n=p[v++],r=p[v++],x,S,b,w,_,c=s.A,a);break;case"a":b=p[v++],w=p[v++],_=p[v++],x=p[v++],S=p[v++],qa(O=n,P=r,n+=p[v++],r+=p[v++],x,S,b,w,_,c=s.A,a)}}"z"!==h&&"Z"!==h||(c=s.Z,a.addData(c),n=o,r=i),t=c}return a.toStatic(),a}(e);return(t=t||{}).buildPath=function(e){if(e.setData){e.setData(n.data),(t=e.getContext())&&e.rebuildPath(t)}else{var t=e;n.rebuildPath(t)}},t.applyTransform=function(e){Fa(n,e),this.dirty(!0)},t}function Qa(e,t){return new ja(Za(e,t))}var Ka=function(e){oo.call(this,e)};Ka.prototype={constructor:Ka,type:"text",brush:function(e,t){var n=this.style;this.__dirty&&zr(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var r=n.text;null!=r&&(r+=""),to(r,n)?(this.setTransform(e),Hr(this,e,r,n,null,t),this.restoreTransform(e)):e.__attrCachedBy=Yn.NONE},getBoundingRect:function(){var e=this.style;if(this.__dirty&&zr(e),!this._rect){var t=e.text;null!=t?t+="":t="";var n=wr(e.text+"",e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich);if(n.x+=e.x||0,n.y+=e.y||0,Qr(e.textStroke,e.textStrokeWidth)){var r=e.textStrokeWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect}},C(Ka,oo);var $a=ja.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(e,t,n){n&&e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!0)}}),es=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],ts=function(e){return a.browser.ie&&a.browser.version>=11?function(){var t,n=this.__clipPaths,r=this.style;if(n)for(var o=0;o<n.length;o++){var i=n[o],a=i&&i.shape,s=i&&i.type;if(a&&("sector"===s&&a.startAngle===a.endAngle||"rect"===s&&(!a.width||!a.height))){for(var l=0;l<es.length;l++)es[l][2]=r[es[l][0]],r[es[l][0]]=es[l][1];t=!0;break}}if(e.apply(this,arguments),t)for(l=0;l<es.length;l++)r[es[l][0]]=es[l][2]}:e},ns=ja.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:ts(ja.prototype.brush),buildPath:function(e,t){var n=t.cx,r=t.cy,o=Math.max(t.r0||0,0),i=Math.max(t.r,0),a=t.startAngle,s=t.endAngle,l=t.clockwise,u=Math.cos(a),c=Math.sin(a);e.moveTo(u*o+n,c*o+r),e.lineTo(u*i+n,c*i+r),e.arc(n,r,i,a,s,!l),e.lineTo(Math.cos(s)*o+n,Math.sin(s)*o+r),0!==o&&e.arc(n,r,o,s,a,l),e.closePath()}}),rs=ja.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=2*Math.PI;e.moveTo(n+t.r,r),e.arc(n,r,t.r,0,o,!1),e.moveTo(n+t.r0,r),e.arc(n,r,t.r0,0,o,!0)}});function os(e,t,n,r,o,i,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*i+s*o+t}var is=function(e,t){for(var n=e.length,r=[],o=0,i=1;i<n;i++)o+=_e(e[i-1],e[i]);var a=o/2;a=a<n?n:a;for(i=0;i<a;i++){var s,l,u,c=i/(a-1)*(t?n:n-1),f=Math.floor(c),h=c-f,p=e[f%n];t?(s=e[(f-1+n)%n],l=e[(f+1)%n],u=e[(f+2)%n]):(s=e[0===f?f:f-1],l=e[f>n-2?n-1:f+1],u=e[f>n-3?n-1:f+2]);var d=h*h,y=h*d;r.push([os(s[0],p[0],l[0],u[0],h,d,y),os(s[1],p[1],l[1],u[1],h,d,y)])}return r},as=function(e,t,n,r){var o,i,a,s,l=[],u=[],c=[],f=[];if(r){a=[1/0,1/0],s=[-1/0,-1/0];for(var h=0,p=e.length;h<p;h++)ke(a,a,e[h]),Ce(s,s,e[h]);ke(a,a,r[0]),Ce(s,s,r[1])}for(h=0,p=e.length;h<p;h++){var d=e[h];if(n)o=e[h?h-1:p-1],i=e[(h+1)%p];else{if(0===h||h===p-1){l.push(ce(e[h]));continue}o=e[h-1],i=e[h+1]}de(u,i,o),be(u,u,t);var y=_e(d,o),v=_e(d,i),g=y+v;0!==g&&(y/=g,v/=g),be(c,u,-y),be(f,u,v);var m=he([],d,c),b=he([],d,f);r&&(Ce(m,m,a),ke(m,m,s),Ce(b,b,a),ke(b,b,s)),l.push(m),l.push(b)}return n&&l.push(l.shift()),l};function ss(e,t,n){var r=t.points,o=t.smooth;if(r&&r.length>=2){if(o&&"spline"!==o){var i=as(r,o,n,t.smoothConstraint);e.moveTo(r[0][0],r[0][1]);for(var a=r.length,s=0;s<(n?a:a-1);s++){var l=i[2*s],u=i[2*s+1],c=r[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{"spline"===o&&(r=is(r,n)),e.moveTo(r[0][0],r[0][1]);s=1;for(var f=r.length;s<f;s++)e.lineTo(r[s][0],r[s][1])}n&&e.closePath()}}var ls=ja.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(e,t){ss(e,t,!0)}}),us=ja.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(e,t){ss(e,t,!1)}}),cs=Math.round;function fs(e,t,n){if(t){var r=t.x1,o=t.x2,i=t.y1,a=t.y2;e.x1=r,e.x2=o,e.y1=i,e.y2=a;var s=n&&n.lineWidth;s&&(cs(2*r)===cs(2*o)&&(e.x1=e.x2=ps(r,s,!0)),cs(2*i)===cs(2*a)&&(e.y1=e.y2=ps(i,s,!0)))}}function hs(e,t,n){if(t){var r=t.x,o=t.y,i=t.width,a=t.height;e.x=r,e.y=o,e.width=i,e.height=a;var s=n&&n.lineWidth;s&&(e.x=ps(r,s,!0),e.y=ps(o,s,!0),e.width=Math.max(ps(r+i,s,!1)-e.x,0===i?0:1),e.height=Math.max(ps(o+a,s,!1)-e.y,0===a?0:1))}}function ps(e,t,n){if(!t)return e;var r=cs(2*e);return(r+cs(t))%2==0?r/2:(r+(n?1:-1))/2}var ds={},ys=ja.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(e,t){var n,r,o,i;this.subPixelOptimize?(hs(ds,t,this.style),n=ds.x,r=ds.y,o=ds.width,i=ds.height,ds.r=t.r,t=ds):(n=t.x,r=t.y,o=t.width,i=t.height),t.r?jr(e,t):e.rect(n,r,o,i),e.closePath()}}),vs={},gs=ja.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n,r,o,i;this.subPixelOptimize?(fs(vs,t,this.style),n=vs.x1,r=vs.y1,o=vs.x2,i=vs.y2):(n=t.x1,r=t.y1,o=t.x2,i=t.y2);var a=t.percent;0!==a&&(e.moveTo(n,r),a<1&&(o=n*(1-a)+o*a,i=r*(1-a)+i*a),e.lineTo(o,i))},pointAt:function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]}}),ms=[];function bs(e,t,n){var r=e.cpx2,o=e.cpy2;return null===r||null===o?[(n?Ii:Ri)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?Ii:Ri)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?Ni:Di)(e.x1,e.cpx1,e.x2,t),(n?Ni:Di)(e.y1,e.cpy1,e.y2,t)]}var ws=ja.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.x1,r=t.y1,o=t.x2,i=t.y2,a=t.cpx1,s=t.cpy1,l=t.cpx2,u=t.cpy2,c=t.percent;0!==c&&(e.moveTo(n,r),null==l||null==u?(c<1&&(Fi(n,a,o,c,ms),a=ms[1],o=ms[2],Fi(r,s,i,c,ms),s=ms[1],i=ms[2]),e.quadraticCurveTo(a,s,o,i)):(c<1&&(Li(n,a,l,o,c,ms),a=ms[1],l=ms[2],o=ms[3],Li(r,s,u,i,c,ms),s=ms[1],u=ms[2],i=ms[3]),e.bezierCurveTo(a,s,l,u,o,i)))},pointAt:function(e){return bs(this.shape,e,!1)},tangentAt:function(e){var t=bs(this.shape,e,!0);return we(t,t)}}),_s=ja.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.cx,r=t.cy,o=Math.max(t.r,0),i=t.startAngle,a=t.endAngle,s=t.clockwise,l=Math.cos(i),u=Math.sin(i);e.moveTo(l*o+n,u*o+r),e.arc(n,r,o,i,a,!s)}}),xs=ja.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var e=this.__dirtyPath,t=this.shape.paths,n=0;n<t.length;n++)e=e||t[n].__dirtyPath;this.__dirtyPath=e,this.__dirty=this.__dirty||e},beforeBrush:function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),n=0;n<e.length;n++)e[n].path||e[n].createPathProxy(),e[n].path.setScale(t[0],t[1],e[n].segmentIgnoreThreshold)},buildPath:function(e,t){for(var n=t.paths||[],r=0;r<n.length;r++)n[r].buildPath(e,n[r].shape,!0)},afterBrush:function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),ja.prototype.getBoundingRect.call(this)}}),Ss=function(e){this.colorStops=e||[]};Ss.prototype={constructor:Ss,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}};var Os=function(e,t,n,r,o,i){this.x=null==e?0:e,this.y=null==t?0:t,this.x2=null==n?1:n,this.y2=null==r?0:r,this.type="linear",this.global=i||!1,Ss.call(this,o)};Os.prototype={constructor:Os},C(Os,Ss);var Ps=function(e,t,n,r,o){this.x=null==e?.5:e,this.y=null==t?.5:t,this.r=null==n?.5:n,this.type="radial",this.global=o||!1,Ss.call(this,r)};function Ts(e){oo.call(this,e),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}Ps.prototype={constructor:Ps},C(Ps,Ss),Ts.prototype.incremental=!0,Ts.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Ts.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.dirty()},Ts.prototype.addDisplayables=function(e,t){t=t||!1;for(var n=0;n<e.length;n++)this.addDisplayable(e[n],t)},Ts.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},Ts.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){(t=this._displayables[e]).parent=this,t.update(),t.parent=null}for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},Ts.prototype.brush=function(e,t){for(var n=this._cursor;n<this._displayables.length;n++){(r=this._displayables[n]).beforeBrush&&r.beforeBrush(e),r.brush(e,n===this._cursor?null:this._displayables[n-1]),r.afterBrush&&r.afterBrush(e)}this._cursor=n;for(n=0;n<this._temporaryDisplayables.length;n++){var r;(r=this._temporaryDisplayables[n]).beforeBrush&&r.beforeBrush(e),r.brush(e,0===n?null:this._temporaryDisplayables[n-1]),r.afterBrush&&r.afterBrush(e)}this._temporaryDisplayables=[],this.notClear=!0};var ks=[];Ts.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new jn(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var n=this._displayables[t],r=n.getBoundingRect().clone();n.needLocalTransform()&&r.applyTransform(n.getLocalTransform(ks)),e.union(r)}this._rect=e}return this._rect},Ts.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(n[0],n[1]))for(var r=0;r<this._displayables.length;r++){if(this._displayables[r].contain(e,t))return!0}return!1},C(Ts,oo);var Cs=Math.max,Es=Math.min,As={},Ms=1,Rs={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},Is="emphasis",js="normal",Ls=1,Ds={},Ns={};function Bs(e){return ja.extend(e)}function Fs(e,t){Ns[e]=t}function Gs(e){if(Ns.hasOwnProperty(e))return Ns[e]}function zs(e,t,n,r){var o=Qa(e,t);return n&&("center"===r&&(n=Hs(n,o.getBoundingRect())),Us(o,n)),o}function Vs(e,t,n){var r=new io({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(e){if("center"===n){var o={width:e.width,height:e.height};r.setStyle(Hs(t,o))}}});return r}function Hs(e,t){var n,r=t.width/t.height,o=e.height*r;return n=o<=e.width?e.height:(o=e.width)/r,{x:e.x+e.width/2-o/2,y:e.y+e.height/2-n/2,width:o,height:n}}var Ws=function(e,t){for(var n=[],r=e.length,o=0;o<r;o++){var i=e[o];i.path||i.createPathProxy(),i.__dirtyPath&&i.buildPath(i.path,i.shape,!0),n.push(i.path)}var a=new ja(t);return a.createPathProxy(),a.buildPath=function(e){e.appendPath(n);var t=e.getContext();t&&e.rebuildPath(t)},a};function Us(e,t){if(e.applyTransform){var n=e.getBoundingRect().calculateTransform(t);e.applyTransform(n)}}var Js=ps;function qs(e){return null!=e&&"none"!==e}var Ys=re(),Xs=0;function Zs(e){var t=e.__hoverStl;if(t&&!e.__highlighted){var n=e.__zr,r=e.useHoverLayer&&n&&"canvas"===n.painter.type;if(e.__highlighted=r?"layer":"plain",!(e.isGroup||!n&&e.useHoverLayer)){var o=e,i=e.style;r&&(i=(o=n.addHover(e)).style),gl(i),r||function(e){if(e.__hoverStlDirty){e.__hoverStlDirty=!1;var t=e.__hoverStl;if(t){var n=e.__cachedNormalStl={};e.__cachedNormalZ2=e.z2;var r=e.style;for(var o in t)null!=t[o]&&(n[o]=r[o]);n.fill=r.fill,n.stroke=r.stroke}else e.__cachedNormalStl=e.__cachedNormalZ2=null}}(o),i.extendFrom(t),Qs(i,t,"fill"),Qs(i,t,"stroke"),vl(i),r||(e.dirty(!1),e.z2+=Ms)}}}function Qs(e,t,n){!qs(t[n])&&qs(e[n])&&(e[n]=function(e){if("string"!=typeof e)return e;var t=Ys.get(e);return t||(t=Yt(e,-.1),Xs<1e4&&(Ys.set(e,t),Xs++)),t}(e[n]))}function Ks(e){var t=e.__highlighted;if(t&&(e.__highlighted=!1,!e.isGroup))if("layer"===t)e.__zr&&e.__zr.removeHover(e);else{var n=e.style,r=e.__cachedNormalStl;r&&(gl(n),e.setStyle(r),vl(n));var o=e.__cachedNormalZ2;null!=o&&e.z2-o===Ms&&(e.z2=o)}}function $s(e,t,n){var r,o=js,i=js;e.__highlighted&&(o=Is,r=!0),t(e,n),e.__highlighted&&(i=Is,r=!0),e.isGroup&&e.traverse(function(e){!e.isGroup&&t(e,n)}),r&&e.__highDownOnUpdate&&e.__highDownOnUpdate(o,i)}function el(e,t){t=e.__hoverStl=!1!==t&&(e.hoverStyle||t||{}),e.__hoverStlDirty=!0,e.__highlighted&&(e.__cachedNormalStl=null,Ks(e),Zs(e))}function tl(e){!il(this,e)&&!this.__highByOuter&&$s(this,Zs)}function nl(e){!il(this,e)&&!this.__highByOuter&&$s(this,Ks)}function rl(e){this.__highByOuter|=1<<(e||0),$s(this,Zs)}function ol(e){!(this.__highByOuter&=~(1<<(e||0)))&&$s(this,Ks)}function il(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function al(e,t){sl(e,!0),$s(e,el,t)}function sl(e,t){var n=!1===t;if(e.__highDownSilentOnTouch=e.highDownSilentOnTouch,e.__highDownOnUpdate=e.highDownOnUpdate,!n||e.__highDownDispatcher){var r=n?"off":"on";e[r]("mouseover",tl)[r]("mouseout",nl),e[r]("emphasis",rl)[r]("normal",ol),e.__highByOuter=e.__highByOuter||0,e.__highDownDispatcher=!n}}function ll(e){return!(!e||!e.__highDownDispatcher)}function ul(e){var t=Ds[e];return null==t&&Ls<=32&&(t=Ds[e]=Ls++),t}function cl(e,t,n,r,o,i,a){var s,l=(o=o||As).labelFetcher,u=o.labelDataIndex,c=o.labelDimIndex,f=o.labelProp,h=n.getShallow("show"),p=r.getShallow("show");(h||p)&&(l&&(s=l.getFormattedLabel(u,"normal",null,c,f)),null==s&&(s=F(o.defaultText)?o.defaultText(u,o):o.defaultText));var d=h?s:null,y=p?q(l?l.getFormattedLabel(u,"emphasis",null,c,f):null,s):null;null==d&&null==y||(hl(e,n,i,o),hl(t,r,a,o,!0)),e.text=d,t.text=y}function fl(e,t,n){var r=e.style;t&&(gl(r),e.setStyle(t),vl(r)),r=e.__hoverStl,n&&r&&(gl(r),x(r,n),vl(r))}function hl(e,t,n,r,o){return pl(e,t,r,o),n&&x(e,n),e}function pl(e,t,n,r){if((n=n||As).isRectText){var o;n.getTextPosition?o=n.getTextPosition(t,r):"outside"===(o=t.getShallow("position")||(r?null:"inside"))&&(o="top"),e.textPosition=o,e.textOffset=t.getShallow("offset");var i=t.getShallow("rotate");null!=i&&(i*=Math.PI/180),e.textRotation=i,e.textDistance=q(t.getShallow("distance"),r?null:5)}var a,s=t.ecModel,l=s&&s.option.textStyle,u=function(e){var t;for(;e&&e!==e.ecModel;){var n=(e.option||As).rich;if(n)for(var r in t=t||{},n)n.hasOwnProperty(r)&&(t[r]=1);e=e.parentModel}return t}(t);if(u)for(var c in a={},u)if(u.hasOwnProperty(c)){var f=t.getModel(["rich",c]);dl(a[c]={},f,l,n,r)}return e.rich=a,dl(e,t,l,n,r,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),e}function dl(e,t,n,r,o,i){n=!o&&n||As,e.textFill=yl(t.getShallow("color"),r)||n.color,e.textStroke=yl(t.getShallow("textBorderColor"),r)||n.textBorderColor,e.textStrokeWidth=q(t.getShallow("textBorderWidth"),n.textBorderWidth),o||(i&&(e.insideRollbackOpt=r,vl(e)),null==e.textFill&&(e.textFill=r.autoColor)),e.fontStyle=t.getShallow("fontStyle")||n.fontStyle,e.fontWeight=t.getShallow("fontWeight")||n.fontWeight,e.fontSize=t.getShallow("fontSize")||n.fontSize,e.fontFamily=t.getShallow("fontFamily")||n.fontFamily,e.textAlign=t.getShallow("align"),e.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline"),e.textLineHeight=t.getShallow("lineHeight"),e.textWidth=t.getShallow("width"),e.textHeight=t.getShallow("height"),e.textTag=t.getShallow("tag"),i&&r.disableBox||(e.textBackgroundColor=yl(t.getShallow("backgroundColor"),r),e.textPadding=t.getShallow("padding"),e.textBorderColor=yl(t.getShallow("borderColor"),r),e.textBorderWidth=t.getShallow("borderWidth"),e.textBorderRadius=t.getShallow("borderRadius"),e.textBoxShadowColor=t.getShallow("shadowColor"),e.textBoxShadowBlur=t.getShallow("shadowBlur"),e.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),e.textBoxShadowOffsetY=t.getShallow("shadowOffsetY")),e.textShadowColor=t.getShallow("textShadowColor")||n.textShadowColor,e.textShadowBlur=t.getShallow("textShadowBlur")||n.textShadowBlur,e.textShadowOffsetX=t.getShallow("textShadowOffsetX")||n.textShadowOffsetX,e.textShadowOffsetY=t.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function yl(e,t){return"auto"!==e?e:t&&t.autoColor?t.autoColor:null}function vl(e){var t,n=e.textPosition,r=e.insideRollbackOpt;if(r&&null==e.textFill){var o=r.autoColor,i=r.isRectText,a=r.useInsideStyle,s=!1!==a&&(!0===a||i&&n&&"string"==typeof n&&n.indexOf("inside")>=0),l=!s&&null!=o;(s||l)&&(t={textFill:e.textFill,textStroke:e.textStroke,textStrokeWidth:e.textStrokeWidth}),s&&(e.textFill="#fff",null==e.textStroke&&(e.textStroke=o,null==e.textStrokeWidth&&(e.textStrokeWidth=2))),l&&(e.textFill=o)}e.insideRollback=t}function gl(e){var t=e.insideRollback;t&&(e.textFill=t.textFill,e.textStroke=t.textStroke,e.textStrokeWidth=t.textStrokeWidth,e.insideRollback=null)}function ml(e,t){var n=t&&t.getModel("textStyle");return K([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function bl(e,t,n,r,o,i){if("function"==typeof o&&(i=o,o=null),r&&r.isAnimationEnabled()){var a=e?"Update":"",s=r.getShallow("animationDuration"+a),l=r.getShallow("animationEasing"+a),u=r.getShallow("animationDelay"+a);"function"==typeof u&&(u=u(o,r.getAnimationDelayParams?r.getAnimationDelayParams(t,o):null)),"function"==typeof s&&(s=s(o)),s>0?t.animateTo(n,s,u||0,l,i,!!i):(t.stopAnimation(),t.attr(n),i&&i())}else t.stopAnimation(),t.attr(n),i&&i()}function wl(e,t,n,r,o){bl(!0,e,t,n,r,o)}function _l(e,t,n,r,o){bl(!1,e,t,n,r,o)}function xl(e,t){for(var n=ct([]);e&&e!==t;)ht(n,e.getLocalTransform(),n),e=e.parent;return n}function Sl(e,t,n){return t&&!A(t)&&(t=xt.getLocalTransform(t)),n&&(t=vt([],t)),Te([],e,t)}function Ol(e,t,n){var r=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),o=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),i=["left"===e?-r:"right"===e?r:0,"top"===e?-o:"bottom"===e?o:0];return i=Sl(i,t,n),Math.abs(i[0])>Math.abs(i[1])?i[0]>0?"right":"left":i[1]>0?"bottom":"top"}function Pl(e,t,n,r){if(e&&t){var o,i=(o={},e.traverse(function(e){!e.isGroup&&e.anid&&(o[e.anid]=e)}),o);t.traverse(function(e){if(!e.isGroup&&e.anid){var t=i[e.anid];if(t){var r=a(e);e.attr(a(t)),wl(e,r,n,e.dataIndex)}}})}function a(e){var t={position:ce(e.position),rotation:e.rotation};return e.shape&&(t.shape=x({},e.shape)),t}}function Tl(e,t){return R(e,function(e){var n=e[0];n=Cs(n,t.x),n=Es(n,t.x+t.width);var r=e[1];return r=Cs(r,t.y),[n,r=Es(r,t.y+t.height)]})}function kl(e,t,n){var r=(t=x({rectHover:!0},t)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(r.image=e.slice(8),S(r,n),new io(t)):zs(e.replace("path://",""),t,n,"center")}function Cl(e,t,n,r,o){for(var i=0,a=o[o.length-1];i<o.length;i++){var s=o[i];if(El(e,t,n,r,s[0],s[1],a[0],a[1]))return!0;a=s}}function El(e,t,n,r,o,i,a,s){var l,u=n-e,c=r-t,f=a-o,h=s-i,p=Al(f,h,u,c);if((l=p)<=1e-6&&l>=-1e-6)return!1;var d=e-o,y=t-i,v=Al(d,y,u,c)/p;if(v<0||v>1)return!1;var g=Al(d,y,f,h)/p;return!(g<0||g>1)}function Al(e,t,n,r){return e*r-n*t}Fs("circle",$a),Fs("sector",ns),Fs("ring",rs),Fs("polygon",ls),Fs("polyline",us),Fs("rect",ys),Fs("line",gs),Fs("bezierCurve",ws),Fs("arc",_s);var Ml=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:Ms,CACHED_LABEL_STYLE_PROPERTIES:Rs,extendShape:Bs,extendPath:function(e,t){return function(e,t){return ja.extend(Za(e,t))}(e,t)},registerShape:Fs,getShapeClass:Gs,makePath:zs,makeImage:Vs,mergePath:Ws,resizePath:Us,subPixelOptimizeLine:function(e){return fs(e.shape,e.shape,e.style),e},subPixelOptimizeRect:function(e){return hs(e.shape,e.shape,e.style),e},subPixelOptimize:Js,setElementHoverStyle:el,setHoverStyle:al,setAsHighDownDispatcher:sl,isHighDownDispatcher:ll,getHighlightDigit:ul,setLabelStyle:cl,modifyLabelStyle:fl,setTextStyle:hl,setText:function(e,t,n){var r,o={isRectText:!0};!1===n?r=!0:o.autoColor=n,pl(e,t,o,r)},getFont:ml,updateProps:wl,initProps:_l,getTransform:xl,applyTransform:Sl,transformDirection:Ol,groupTransition:Pl,clipPointsByRect:Tl,clipRectByRect:function(e,t){var n=Cs(e.x,t.x),r=Es(e.x+e.width,t.x+t.width),o=Cs(e.y,t.y),i=Es(e.y+e.height,t.y+t.height);if(r>=n&&i>=o)return{x:n,y:o,width:r-n,height:i-o}},createIcon:kl,linePolygonIntersect:Cl,lineLineIntersect:El,Group:Ln,Image:io,Text:Ka,Circle:$a,Sector:ns,Ring:rs,Polygon:ls,Polyline:us,Rect:ys,Line:gs,BezierCurve:ws,Arc:_s,IncrementalDisplayable:Ts,CompoundPath:xs,LinearGradient:Os,RadialGradient:Ps,BoundingRect:jn}),Rl=["textStyle","color"],Il={getTextColor:function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(Rl):null)},getFont:function(){return ml({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(e){return wr(e,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},jl=vi([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),Ll={getItemStyle:function(e,t){var n=jl(this,e,t),r=this.getBorderLineDash();return r&&(n.lineDash=r),n},getBorderLineDash:function(){var e=this.get("borderType");return"solid"===e||null==e?null:"dashed"===e?[5,5]:[1,1]}},Dl=E,Nl=ei();function Bl(e,t,n){this.parentModel=t,this.ecModel=n,this.option=e}function Fl(e,t,n){for(var r=0;r<t.length&&(!t[r]||null!=(e=e&&"object"===s(e)?e[t[r]]:null));r++);return null==e&&n&&(e=n.get(t)),e}function Gl(e,t){var n=Nl(e).getParent;return n?n.call(e,t):e.parentModel}Bl.prototype={constructor:Bl,init:null,mergeOption:function(e){w(this.option,e,!0)},get:function(e,t){return null==e?this.option:Fl(this.option,this.parsePath(e),!t&&Gl(this,e))},getShallow:function(e,t){var n=this.option,r=null==n?n:n[e],o=!t&&Gl(this,e);return null==r&&o&&(r=o.getShallow(e)),r},getModel:function(e,t){var n;return new Bl(null==e?this.option:Fl(this.option,e=this.parsePath(e)),t=t||(n=Gl(this,e))&&n.getModel(e),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new(0,this.constructor)(b(this.option))},setReadOnly:function(e){},parsePath:function(e){return"string"==typeof e&&(e=e.split(".")),e},customizeGetParent:function(e){Nl(this).getParent=e},isAnimationEnabled:function(){if(!a.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},ci(Bl),hi(Bl),Dl(Bl,mi),Dl(Bl,wi),Dl(Bl,Il),Dl(Bl,Ll);var zl=0;function Vl(e){return[e||"",zl++,Math.random().toFixed(5)].join("_")}var Hl=1e-4;function Wl(e,t,n,r){var o=t[1]-t[0],i=n[1]-n[0];if(0===o)return 0===i?n[0]:(n[0]+n[1])/2;if(r)if(o>0){if(e<=t[0])return n[0];if(e>=t[1])return n[1]}else{if(e>=t[0])return n[0];if(e<=t[1])return n[1]}else{if(e===t[0])return n[0];if(e===t[1])return n[1]}return(e-t[0])/o*i+n[0]}function Ul(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e?(n=e,n.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e;var n}function Jl(e,t,n){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),n?e:+e}function ql(e){return e.sort(function(e,t){return e-t}),e}function Yl(e){if(e=+e,isNaN(e))return 0;for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Xl(e){var t=e.toString(),n=t.indexOf("e");if(n>0){var r=+t.slice(n+1);return r<0?-r:0}var o=t.indexOf(".");return o<0?0:t.length-1-o}function Zl(e,t){var n=Math.log,r=Math.LN10,o=Math.floor(n(e[1]-e[0])/r),i=Math.round(n(Math.abs(t[1]-t[0]))/r),a=Math.min(Math.max(-o+i,0),20);return isFinite(a)?a:20}function Ql(e,t,n){if(!e[t])return 0;var r=I(e,function(e,t){return e+(isNaN(t)?0:t)},0);if(0===r)return 0;for(var o=Math.pow(10,n),i=R(e,function(e){return(isNaN(e)?0:e)/r*o*100}),a=100*o,s=R(i,function(e){return Math.floor(e)}),l=I(s,function(e,t){return e+t},0),u=R(i,function(e,t){return e-s[t]});l<a;){for(var c=Number.NEGATIVE_INFINITY,f=null,h=0,p=u.length;h<p;++h)u[h]>c&&(c=u[h],f=h);++s[f],u[f]=0,++l}return s[t]/o}var Kl=9007199254740991;function $l(e){var t=2*Math.PI;return(e%t+t)%t}function eu(e){return e>-Hl&&e<Hl}var tu=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function nu(e){if(e instanceof Date)return e;if("string"==typeof e){var t=tu.exec(e);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(n-=t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,+t[7]||0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}return null==e?new Date(NaN):new Date(Math.round(e))}function ru(e){return Math.pow(10,ou(e))}function ou(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function iu(e,t){var n=ou(e),r=Math.pow(10,n),o=e/r;return e=(t?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10)*r,n>=-20?+e.toFixed(n<0?-n:0):e}function au(e){e.sort(function(e,t){return function e(t,n,r){return t.interval[r]<n.interval[r]||t.interval[r]===n.interval[r]&&(t.close[r]-n.close[r]==(r?-1:1)||!r&&e(t,n,1))}(e,t,0)?-1:1});for(var t=-1/0,n=1,r=0;r<e.length;){for(var o=e[r].interval,i=e[r].close,a=0;a<2;a++)o[a]<=t&&(o[a]=t,i[a]=a?1:1-n),t=o[a],n=i[a];o[0]===o[1]&&i[0]*i[1]!=1?e.splice(r,1):r++}return e}function su(e){return e-parseFloat(e)>=0}var lu=(Object.freeze||Object)({linearMap:Wl,parsePercent:Ul,round:Jl,asc:ql,getPrecision:Yl,getPrecisionSafe:Xl,getPixelPrecision:Zl,getPercentWithPrecision:Ql,MAX_SAFE_INTEGER:Kl,remRadian:$l,isRadianAroundZero:eu,parseDate:nu,quantity:ru,quantityExponent:ou,nice:iu,quantile:function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),o=+e[r-1],i=n-r;return i?o+i*(e[r]-o):o},reformIntervals:au,isNumeric:su});function uu(e){return isNaN(e)?"-":(e=(e+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function cu(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var fu=Z,hu=/([&<>"'])/g,pu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function du(e){return null==e?"":(e+"").replace(hu,function(e,t){return pu[t]})}var yu=["a","b","c","d","e","f","g"],vu=function(e,t){return"{"+e+(null==t?"":t)+"}"};function gu(e,t,n){B(t)||(t=[t]);var r=t.length;if(!r)return"";for(var o=t[0].$vars||[],i=0;i<o.length;i++){var a=yu[i];e=e.replace(vu(a),vu(a,0))}for(var s=0;s<r;s++)for(var l=0;l<o.length;l++){var u=t[s][o[l]];e=e.replace(vu(yu[l],s),n?du(u):u)}return e}function mu(e,t,n){return M(t,function(t,r){e=e.replace("{"+r+"}",n?du(t):t)}),e}function bu(e,t){var n=(e=G(e)?{color:e,extraCssText:t}:e||{}).color,r=e.type,o=(t=e.extraCssText,e.renderMode||"html"),i=e.markerId||"X";return n?"html"===o?"subItem"===r?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+du(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+du(n)+";"+(t||"")+'"></span>':{renderMode:o,content:"{marker"+i+"|}  ",style:{color:n}}:""}function wu(e,t){return"0000".substr(0,t-(e+="").length)+e}function _u(e,t,n){"week"!==e&&"month"!==e&&"quarter"!==e&&"half-year"!==e&&"year"!==e||(e="MM-dd\nyyyy");var r=nu(t),o=n?"UTC":"",i=r["get"+o+"FullYear"](),a=r["get"+o+"Month"]()+1,s=r["get"+o+"Date"](),l=r["get"+o+"Hours"](),u=r["get"+o+"Minutes"](),c=r["get"+o+"Seconds"](),f=r["get"+o+"Milliseconds"]();return e=e.replace("MM",wu(a,2)).replace("M",a).replace("yyyy",i).replace("yy",i%100).replace("dd",wu(s,2)).replace("d",s).replace("hh",wu(l,2)).replace("h",l).replace("mm",wu(u,2)).replace("m",u).replace("ss",wu(c,2)).replace("s",c).replace("SSS",wu(f,3))}function xu(e){return e?e.charAt(0).toUpperCase()+e.substr(1):e}var Su=Or;function Ou(e,t){if("_blank"===t||"blank"===t){var n=window.open();n.opener=null,n.location=e}else window.open(e,t)}var Pu=(Object.freeze||Object)({addCommas:uu,toCamelCase:cu,normalizeCssArray:fu,encodeHTML:du,formatTpl:gu,formatTplSimple:mu,getTooltipMarker:bu,formatTime:_u,capitalFirst:xu,truncateText:Su,getTextBoundingRect:function(e){return wr(e.text,e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich,e.truncate)},getTextRect:function(e,t,n,r,o,i,a,s){return wr(e,t,n,r,o,s,i,a)},windowOpen:Ou}),Tu=M,ku=["left","right","top","bottom","width","height"],Cu=[["width","left","right"],["height","top","bottom"]];function Eu(e,t,n,r,o){var i=0,a=0;null==r&&(r=1/0),null==o&&(o=1/0);var s=0;t.eachChild(function(l,u){var c,f,h=l.position,p=l.getBoundingRect(),d=t.childAt(u+1),y=d&&d.getBoundingRect();if("horizontal"===e){var v=p.width+(y?-y.x+p.x:0);(c=i+v)>r||l.newline?(i=0,c=v,a+=s+n,s=p.height):s=Math.max(s,p.height)}else{var g=p.height+(y?-y.y+p.y:0);(f=a+g)>o||l.newline?(i+=s+n,a=0,f=g,s=p.width):s=Math.max(s,p.width)}l.newline||(h[0]=i,h[1]=a,"horizontal"===e?i=c+n:a=f+n)})}var Au=Eu;N(Eu,"vertical"),N(Eu,"horizontal");function Mu(e,t,n){n=fu(n||0);var r=t.width,o=t.height,i=Ul(e.left,r),a=Ul(e.top,o),s=Ul(e.right,r),l=Ul(e.bottom,o),u=Ul(e.width,r),c=Ul(e.height,o),f=n[2]+n[0],h=n[1]+n[3],p=e.aspect;switch(isNaN(u)&&(u=r-s-h-i),isNaN(c)&&(c=o-l-f-a),null!=p&&(isNaN(u)&&isNaN(c)&&(p>r/o?u=.8*r:c=.8*o),isNaN(u)&&(u=p*c),isNaN(c)&&(c=u/p)),isNaN(i)&&(i=r-s-u-h),isNaN(a)&&(a=o-l-c-f),e.left||e.right){case"center":i=r/2-u/2-n[3];break;case"right":i=r-u-h}switch(e.top||e.bottom){case"middle":case"center":a=o/2-c/2-n[0];break;case"bottom":a=o-c-f}i=i||0,a=a||0,isNaN(u)&&(u=r-h-i-(s||0)),isNaN(c)&&(c=o-f-a-(l||0));var d=new jn(i+n[3],a+n[0],u,c);return d.margin=n,d}function Ru(e,t,n,r,o){var i=!o||!o.hv||o.hv[0],a=!o||!o.hv||o.hv[1],s=o&&o.boundingMode||"all";if(i||a){var l;if("raw"===s)l="group"===e.type?new jn(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(l=e.getBoundingRect(),e.needLocalTransform()){var u=e.getLocalTransform();(l=l.clone()).applyTransform(u)}t=Mu(S({width:l.width,height:l.height},t),n,r);var c=e.position,f=i?t.x-l.x:0,h=a?t.y-l.y:0;e.attr("position","raw"===s?[f,h]:[c[0]+f,c[1]+h])}}function Iu(e,t,n){!z(n)&&(n={});var r=n.ignoreSize;!B(r)&&(r=[r,r]);var o=a(Cu[0],0),i=a(Cu[1],1);function a(n,o){var i={},a=0,u={},c=0;if(Tu(n,function(t){u[t]=e[t]}),Tu(n,function(e){s(t,e)&&(i[e]=u[e]=t[e]),l(i,e)&&a++,l(u,e)&&c++}),r[o])return l(t,n[1])?u[n[2]]=null:l(t,n[2])&&(u[n[1]]=null),u;if(2!==c&&a){if(a>=2)return i;for(var f=0;f<n.length;f++){var h=n[f];if(!s(i,h)&&s(e,h)){i[h]=e[h];break}}return i}return u}function s(e,t){return e.hasOwnProperty(t)}function l(e,t){return null!=e[t]&&"auto"!==e[t]}function u(e,t,n){Tu(e,function(e){t[e]=n[e]})}u(Cu[0],e,o),u(Cu[1],e,i)}function ju(e){return Lu({},e)}function Lu(e,t){return t&&e&&Tu(ku,function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}var Du,Nu,Bu=ei(),Fu=Bl.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,t,n,r){Bl.call(this,e,t,n,r),this.uid=Vl("ec_cpt_model")},init:function(e,t,n,r){this.mergeDefaultAndTheme(e,n)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,r=n?ju(e):{};w(e,t.getTheme().get(this.mainType)),w(e,this.getDefaultOption()),n&&Iu(e,r,n)},mergeOption:function(e,t){w(this.option,e,!0);var n=this.layoutMode;n&&Iu(this.option,e,n)},optionUpdated:function(e,t){},getDefaultOption:function(){var e=Bu(this);if(!e.defaultOption){for(var t=[],n=this.constructor;n;){var r=n.prototype.defaultOption;r&&t.push(r),n=n.superClass}for(var o={},i=t.length-1;i>=0;i--)o=w(o,t[i],!0);e.defaultOption=o}return e.defaultOption},getReferringComponents:function(e){return this.ecModel.queryComponents({mainType:e,index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)})}});yi(Fu,{registerWhenExtend:!0}),Nu={},(Du=Fu).registerSubTypeDefaulter=function(e,t){e=ui(e),Nu[e.main]=t},Du.determineSubType=function(e,t){var n=t.type;if(!n){var r=ui(e).main;Du.hasSubTypes(e)&&Nu[r]&&(n=Nu[r](t))}return n},function(e,t){function n(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}e.topologicalTravel=function(e,r,o,i){if(e.length){var a=function(e){var r={},o=[];return M(e,function(i){var a=n(r,i),s=function(e,t){var n=[];return M(e,function(e){k(t,e)>=0&&n.push(e)}),n}(a.originalDeps=t(i),e);a.entryCount=s.length,0===a.entryCount&&o.push(i),M(s,function(e){k(a.predecessor,e)<0&&a.predecessor.push(e);var t=n(r,e);k(t.successor,e)<0&&t.successor.push(i)})}),{graph:r,noEntryList:o}}(r),s=a.graph,l=a.noEntryList,u={};for(M(e,function(e){u[e]=!0});l.length;){var c=l.pop(),f=s[c],h=!!u[c];h&&(o.call(i,c,f.originalDeps.slice()),delete u[c]),M(f.successor,h?d:p)}M(u,function(){throw new Error("Circle dependency may exists")})}function p(e){s[e].entryCount--,0===s[e].entryCount&&l.push(e)}function d(e){u[e]=!0,p(e)}}}(Fu,function(e){var t=[];M(Fu.getClassesByMainType(e),function(e){t=t.concat(e.prototype.dependencies||[])}),t=R(t,function(e){return ui(e).main}),"dataset"!==e&&k(t,"dataset")<=0&&t.unshift("dataset");return t}),E(Fu,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var Gu="";"undefined"!=typeof navigator&&(Gu=navigator.platform||"");var zu={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:Gu.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Vu=ei();var Hu={clearColorPalette:function(){Vu(this).colorIdx=0,Vu(this).colorNameMap={}},getColorFromPalette:function(e,t,n){var r=Vu(t=t||this),o=r.colorIdx||0,i=r.colorNameMap=r.colorNameMap||{};if(i.hasOwnProperty(e))return i[e];var a=Uo(this.get("color",!0)),s=this.get("colorLayer",!0),l=null!=n&&s?function(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r].length>t)return e[r];return e[n-1]}(s,n):a;if((l=l||a)&&l.length){var u=l[o];return e&&(i[e]=u),r.colorIdx=(o+1)%l.length,u}}},Wu="original",Uu="arrayRows",Ju="objectRows",qu="keyedColumns",Yu="unknown",Xu="typedArray",Zu="column",Qu="row";function Ku(e){this.fromDataset=e.fromDataset,this.data=e.data||(e.sourceFormat===qu?{}:[]),this.sourceFormat=e.sourceFormat||Yu,this.seriesLayoutBy=e.seriesLayoutBy||Zu,this.dimensionsDefine=e.dimensionsDefine,this.encodeDefine=e.encodeDefine&&re(e.encodeDefine),this.startIndex=e.startIndex||0,this.dimensionsDetectCount=e.dimensionsDetectCount}Ku.seriesDataToSource=function(e){return new Ku({data:e,sourceFormat:H(e)?Xu:Wu,fromDataset:!1})},hi(Ku);var $u={Must:1,Might:2,Not:3},ec=ei();function tc(e){var t=e.option,n=t.data,o=H(n)?Xu:Wu,i=!1,a=t.seriesLayoutBy,s=t.sourceHeader,l=t.dimensions,u=ac(e);if(u){var c=u.option;n=c.source,o=ec(u).sourceFormat,i=!0,a=a||c.seriesLayoutBy,null==s&&(s=c.sourceHeader),l=l||c.dimensions}var f=function(e,t,n,o,i){if(!e)return{dimensionsDefine:nc(i)};var a,s;if(t===Uu)"auto"===o||null==o?rc(function(e){null!=e&&"-"!==e&&(G(e)?null==s&&(s=1):s=0)},n,e,10):s=o?1:0,i||1!==s||(i=[],rc(function(e,t){i[t]=null!=e?e:""},n,e)),a=i?i.length:n===Qu?e.length:e[0]?e[0].length:null;else if(t===Ju)i||(i=function(e){var t,n=0;for(;n<e.length&&!(t=e[n++]););if(t){var r=[];return M(t,function(e,t){r.push(t)}),r}}(e));else if(t===qu)i||(i=[],M(e,function(e,t){i.push(t)}));else if(t===Wu){var l=Yo(e[0]);a=B(l)&&l.length||1}else t===Xu&&r&&Q(!!i,"dimensions must be given if data is TypedArray.");return{startIndex:s,dimensionsDefine:nc(i),dimensionsDetectCount:a}}(n,o,a,s,l);ec(e).source=new Ku({data:n,fromDataset:i,seriesLayoutBy:a,sourceFormat:o,dimensionsDefine:f.dimensionsDefine,startIndex:f.startIndex,dimensionsDetectCount:f.dimensionsDetectCount,encodeDefine:t.encode})}function nc(e){if(e){var t=re();return R(e,function(e,n){if(null==(e=x({},z(e)?e:{name:e})).name)return e;e.name+="",null==e.displayName&&(e.displayName=e.name);var r=t.get(e.name);return r?e.name+="-"+r.count++:t.set(e.name,{count:1}),e})}}function rc(e,t,n,r){if(null==r&&(r=1/0),t===Qu)for(var o=0;o<n.length&&o<r;o++)e(n[o]?n[o][0]:null,o);else{var i=n[0]||[];for(o=0;o<i.length&&o<r;o++)e(i[o],o)}}function oc(e,t,n){var r={},o=ac(t);if(!o||!e)return r;var i,a,s=[],l=[],u=t.ecModel,c=ec(u).datasetMap,f=o.uid+"_"+n.seriesLayoutBy;M(e=e.slice(),function(t,n){!z(t)&&(e[n]={name:t}),"ordinal"===t.type&&null==i&&(i=n,a=d(e[n])),r[t.name]=[]});var h=c.get(f)||c.set(f,{categoryWayDim:a,valueWayDim:0});function p(e,t,n){for(var r=0;r<n;r++)e.push(t+r)}function d(e){var t=e.dimsDef;return t?t.length:1}return M(e,function(e,t){var n=e.name,o=d(e);if(null==i){var a=h.valueWayDim;p(r[n],a,o),p(l,a,o),h.valueWayDim+=o}else if(i===t)p(r[n],0,o),p(s,0,o);else{a=h.categoryWayDim;p(r[n],a,o),p(l,a,o),h.categoryWayDim+=o}}),s.length&&(r.itemName=s),l.length&&(r.seriesName=l),r}function ic(e,t,n){var r={};if(!ac(e))return r;var o,i=t.sourceFormat,a=t.dimensionsDefine;i!==Ju&&i!==qu||M(a,function(e,t){"name"===(z(e)?e.name:e)&&(o=t)});var s=function(){for(var e={},r={},s=[],l=0,u=Math.min(5,n);l<u;l++){var c=lc(t.data,i,t.seriesLayoutBy,a,t.startIndex,l);s.push(c);var f=c===$u.Not;if(f&&null==e.v&&l!==o&&(e.v=l),(null==e.n||e.n===e.v||!f&&s[e.n]===$u.Not)&&(e.n=l),h(e)&&s[e.n]!==$u.Not)return e;f||(c===$u.Might&&null==r.v&&l!==o&&(r.v=l),null!=r.n&&r.n!==r.v||(r.n=l))}function h(e){return null!=e.v&&null!=e.n}return h(e)?e:h(r)?r:null}();if(s){r.value=s.v;var l=null!=o?o:s.n;r.itemName=[l],r.seriesName=[l]}return r}function ac(e){var t=e.option;if(!t.data)return e.ecModel.getComponent("dataset",t.datasetIndex||0)}function sc(e,t){return lc(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function lc(e,t,n,r,o,i){var a,s,l;if(H(e))return $u.Not;if(r){var u=r[i];z(u)?(s=u.name,l=u.type):G(u)&&(s=u)}if(null!=l)return"ordinal"===l?$u.Must:$u.Not;if(t===Uu)if(n===Qu){for(var c=e[i],f=0;f<(c||[]).length&&f<5;f++)if(null!=(a=y(c[o+f])))return a}else for(f=0;f<e.length&&f<5;f++){var h=e[o+f];if(h&&null!=(a=y(h[i])))return a}else if(t===Ju){if(!s)return $u.Not;for(f=0;f<e.length&&f<5;f++){if((p=e[f])&&null!=(a=y(p[s])))return a}}else if(t===qu){if(!s)return $u.Not;if(!(c=e[s])||H(c))return $u.Not;for(f=0;f<c.length&&f<5;f++)if(null!=(a=y(c[f])))return a}else if(t===Wu)for(f=0;f<e.length&&f<5;f++){var p,d=Yo(p=e[f]);if(!B(d))return $u.Not;if(null!=(a=y(d[i])))return a}function y(e){var t=G(e);return null!=e&&isFinite(e)&&""!==e?t?$u.Might:$u.Not:t&&"-"!==e?$u.Must:void 0}return $u.Not}var uc="\0_ec_inner",cc=Bl.extend({init:function(e,t,n,r){n=n||{},this.option=null,this._theme=new Bl(n),this._optionManager=r},setOption:function(e,t){Q(!(uc in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null)},resetOption:function(e){var t=!1,n=this._optionManager;if(!e||"recreate"===e){var r=n.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this.mergeOption(r)):function(e){e=e,this.option={},this.option[uc]=1,this._componentsMap=re({series:[]}),this._seriesIndices,this._seriesIndicesMap,t=e,n=this._theme.option,r=t.color&&!t.colorLayer,M(n,function(e,n){"colorLayer"===n&&r||Fu.hasClass(n)||("object"===s(e)?t[n]=t[n]?w(t[n],e,!1):b(e):null==t[n]&&(t[n]=e))}),w(e,zu,!1),this.mergeOption(e);var t,n,r}.call(this,r),t=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var o=n.getTimelineOption(this);o&&(this.mergeOption(o),t=!0)}if(!e||"recreate"===e||"media"===e){var i=n.getMediaOption(this,this._api);i.length&&M(i,function(e){this.mergeOption(e,t=!0)},this)}return t},mergeOption:function(e){var t=this.option,n=this._componentsMap,r=[];ec(this).datasetMap=re(),M(e,function(e,n){null!=e&&(Fu.hasClass(n)?n&&r.push(n):t[n]=null==t[n]?b(e):w(t[n],e,!0))}),Fu.topologicalTravel(r,Fu.getAllClassMainTypes(),function(r,o){var i=Uo(e[r]),a=Xo(n.get(r),i);Zo(a),M(a,function(e,t){var n=e.option;z(n)&&(e.keyInfo.mainType=r,e.keyInfo.subType=function(e,t,n){return t.type?t.type:n?n.subType:Fu.determineSubType(e,t)}(r,n,e.exist))});var s=function(e,t){B(t)||(t=t?[t]:[]);var n={};return M(t,function(t){n[t]=(e.get(t)||[]).slice()}),n}(n,o);t[r]=[],n.set(r,[]),M(a,function(e,o){var i=e.exist,a=e.option;if(Q(z(a)||i,"Empty component definition"),a){var l=Fu.getClass(r,e.keyInfo.subType,!0);if(i&&i.constructor===l)i.name=e.keyInfo.name,i.mergeOption(a,this),i.optionUpdated(a,!1);else{var u=x({dependentModels:s,componentIndex:o},e.keyInfo);x(i=new l(a,this,this,u),u),i.init(a,this,this,u),i.optionUpdated(null,!0)}}else i.mergeOption({},this),i.optionUpdated({},!1);n.get(r)[o]=i,t[r][o]=i.option},this),"series"===r&&fc(this,n.get("series"))},this),this._seriesIndicesMap=re(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var e=b(this.option);return M(e,function(t,n){if(Fu.hasClass(n)){for(var r=(t=Uo(t)).length-1;r>=0;r--)Ko(t[r])&&t.splice(r,1);e[n]=t}}),delete e[uc],e},getTheme:function(){return this._theme},getComponent:function(e,t){var n=this._componentsMap.get(e);if(n)return n[t||0]},queryComponents:function(e){var t=e.mainType;if(!t)return[];var n,r=e.index,o=e.id,i=e.name,a=this._componentsMap.get(t);if(!a||!a.length)return[];if(null!=r)B(r)||(r=[r]),n=j(R(r,function(e){return a[e]}),function(e){return!!e});else if(null!=o){var s=B(o);n=j(a,function(e){return s&&k(o,e.id)>=0||!s&&e.id===o})}else if(null!=i){var l=B(i);n=j(a,function(e){return l&&k(i,e.name)>=0||!l&&e.name===i})}else n=a.slice();return hc(n,e)},findComponents:function(e){var t,n,r,o,i,a=e.query,s=e.mainType,l=(n=s+"Index",r=s+"Id",o=s+"Name",!(t=a)||null==t[n]&&null==t[r]&&null==t[o]?null:{mainType:s,index:t[n],id:t[r],name:t[o]}),u=l?this.queryComponents(l):this._componentsMap.get(s);return i=hc(u,e),e.filter?j(i,e.filter):i},eachComponent:function(e,t,n){var r=this._componentsMap;if("function"==typeof e)n=t,t=e,r.each(function(e,r){M(e,function(e,o){t.call(n,r,e,o)})});else if(G(e))M(r.get(e),t,n);else if(z(e)){M(this.findComponents(e),t,n)}},getSeriesByName:function(e){return j(this._componentsMap.get("series"),function(t){return t.name===e})},getSeriesByIndex:function(e){return this._componentsMap.get("series")[e]},getSeriesByType:function(e){return j(this._componentsMap.get("series"),function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(e,t){pc(this),M(this._seriesIndices,function(n){var r=this._componentsMap.get("series")[n];e.call(t,r,n)},this)},eachRawSeries:function(e,t){M(this._componentsMap.get("series"),e,t)},eachSeriesByType:function(e,t,n){pc(this),M(this._seriesIndices,function(r){var o=this._componentsMap.get("series")[r];o.subType===e&&t.call(n,o,r)},this)},eachRawSeriesByType:function(e,t,n){return M(this.getSeriesByType(e),t,n)},isSeriesFiltered:function(e){return pc(this),null==this._seriesIndicesMap.get(e.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(e,t){pc(this),fc(this,j(this._componentsMap.get("series"),e,t))},restoreData:function(e){var t=this._componentsMap;fc(this,t.get("series"));var n=[];t.each(function(e,t){n.push(t)}),Fu.topologicalTravel(n,Fu.getAllClassMainTypes(),function(n,r){M(t.get(n),function(t){("series"!==n||!function(e,t){if(t){var n=t.seiresIndex,r=t.seriesId,o=t.seriesName;return null!=n&&e.componentIndex!==n||null!=r&&e.id!==r||null!=o&&e.name!==o}}(t,e))&&t.restoreData()})})}});function fc(e,t){e._seriesIndicesMap=re(e._seriesIndices=R(t,function(e){return e.componentIndex})||[])}function hc(e,t){return t.hasOwnProperty("subType")?j(e,function(e){return e.subType===t.subType}):e}function pc(e){if(r&&!e._seriesIndices)throw new Error("Option should contains series.")}E(cc,Hu);var dc=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function yc(e){M(dc,function(t){this[t]=D(e[t],e)},this)}var vc={};function gc(){this._coordinateSystems=[]}gc.prototype={constructor:gc,create:function(e,t){var n=[];M(vc,function(r,o){var i=r.create(e,t);n=n.concat(i||[])}),this._coordinateSystems=n},update:function(e,t){M(this._coordinateSystems,function(n){n.update&&n.update(e,t)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},gc.register=function(e,t){vc[e]=t},gc.get=function(e){return vc[e]};var mc=M,bc=b,wc=R,_c=w,xc=/^(min|max)?(.+)$/;function Sc(e){this._api=e,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function Oc(e,t,n){var r={width:t,height:n,aspectratio:t/n},o=!0;return M(e,function(e,t){var n=t.match(xc);if(n&&n[1]&&n[2]){var i=n[1],a=n[2].toLowerCase();(function(e,t,n){return"min"===n?e>=t:"max"===n?e<=t:e===t})(r[a],e,i)||(o=!1)}}),o}Sc.prototype={constructor:Sc,setOption:function(e,t){e&&M(Uo(e.series),function(e){e&&e.data&&H(e.data)&&ee(e.data)}),e=bc(e);var n,r,o=this._optionBackup,i=function(e,t,n){var r,o,i=[],a=[],s=e.timeline;e.baseOption&&(o=e.baseOption);(s||e.options)&&(o=o||{},i=(e.options||[]).slice());if(e.media){o=o||{};var l=e.media;mc(l,function(e){e&&e.option&&(e.query?a.push(e):r||(r=e))})}o||(o=e);o.timeline||(o.timeline=s);return mc([o].concat(i).concat(R(a,function(e){return e.option})),function(e){mc(t,function(t){t(e,n)})}),{baseOption:o,timelineOptions:i,mediaDefault:r,mediaList:a}}.call(this,e,t,!o);this._newBaseOption=i.baseOption,o?(n=o.baseOption,r=i.baseOption,mc(r=r||{},function(e,t){if(null!=e){var r=n[t];if(Fu.hasClass(t)){e=Uo(e);var o=Xo(r=Uo(r),e);n[t]=wc(o,function(e){return e.option&&e.exist?_c(e.exist,e.option,!0):e.exist||e.option})}else n[t]=_c(r,e,!0)}}),i.timelineOptions.length&&(o.timelineOptions=i.timelineOptions),i.mediaList.length&&(o.mediaList=i.mediaList),i.mediaDefault&&(o.mediaDefault=i.mediaDefault)):this._optionBackup=i},mountOption:function(e){var t=this._optionBackup;return this._timelineOptions=wc(t.timelineOptions,bc),this._mediaList=wc(t.mediaList,bc),this._mediaDefault=bc(t.mediaDefault),this._currentMediaIndices=[],bc(e?t.baseOption:this._newBaseOption)},getTimelineOption:function(e){var t,n=this._timelineOptions;if(n.length){var r=e.getComponent("timeline");r&&(t=bc(n[r.getCurrentIndex()],!0))}return t},getMediaOption:function(e){var t,n,r=this._api.getWidth(),o=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,s=[],l=[];if(!i.length&&!a)return l;for(var u=0,c=i.length;u<c;u++)Oc(i[u].query,r,o)&&s.push(u);return!s.length&&a&&(s=[-1]),s.length&&(t=s,n=this._currentMediaIndices,t.join(",")!==n.join(","))&&(l=wc(s,function(e){return bc(-1===e?a.option:i[e].option)})),this._currentMediaIndices=s,l}};var Pc=M,Tc=z,kc=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Cc(e){var t=e&&e.itemStyle;if(t)for(var n=0,r=kc.length;n<r;n++){var o=kc[n],i=t.normal,a=t.emphasis;i&&i[o]&&(e[o]=e[o]||{},e[o].normal?w(e[o].normal,i[o]):e[o].normal=i[o],i[o]=null),a&&a[o]&&(e[o]=e[o]||{},e[o].emphasis?w(e[o].emphasis,a[o]):e[o].emphasis=a[o],a[o]=null)}}function Ec(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var r=e[t].normal,o=e[t].emphasis;r&&(n?(e[t].normal=e[t].emphasis=null,S(e[t],r)):e[t]=r),o&&(e.emphasis=e.emphasis||{},e.emphasis[t]=o)}}function Ac(e){Ec(e,"itemStyle"),Ec(e,"lineStyle"),Ec(e,"areaStyle"),Ec(e,"label"),Ec(e,"labelLine"),Ec(e,"upperLabel"),Ec(e,"edgeLabel")}function Mc(e,t){var n=Tc(e)&&e[t],r=Tc(n)&&n.textStyle;if(r)for(var o=0,i=qo.length;o<i;o++){t=qo[o];r.hasOwnProperty(t)&&(n[t]=r[t])}}function Rc(e){e&&(Ac(e),Mc(e,"label"),e.emphasis&&Mc(e.emphasis,"label"))}function Ic(e){return B(e)?e:e?[e]:[]}function jc(e){return(B(e)?e[0]:e)||{}}var Lc=function(e,t){Pc(Ic(e.series),function(e){Tc(e)&&function(e){if(Tc(e)){Cc(e),Ac(e),Mc(e,"label"),Mc(e,"upperLabel"),Mc(e,"edgeLabel"),e.emphasis&&(Mc(e.emphasis,"label"),Mc(e.emphasis,"upperLabel"),Mc(e.emphasis,"edgeLabel")),(n=e.markPoint)&&(Cc(n),Rc(n)),(r=e.markLine)&&(Cc(r),Rc(r));var t=e.markArea;t&&Rc(t);var n,r,o=e.data;if("graph"===e.type){o=o||e.nodes;var i=e.links||e.edges;if(i&&!H(i))for(var a=0;a<i.length;a++)Rc(i[a]);M(e.categories,function(e){Ac(e)})}if(o&&!H(o))for(a=0;a<o.length;a++)Rc(o[a]);if((n=e.markPoint)&&n.data){var s=n.data;for(a=0;a<s.length;a++)Rc(s[a])}if((r=e.markLine)&&r.data){var l=r.data;for(a=0;a<l.length;a++)B(l[a])?(Rc(l[a][0]),Rc(l[a][1])):Rc(l[a])}"gauge"===e.type?(Mc(e,"axisLabel"),Mc(e,"title"),Mc(e,"detail")):"treemap"===e.type?(Ec(e.breadcrumb,"itemStyle"),M(e.levels,function(e){Ac(e)})):"tree"===e.type&&Ac(e.leaves)}}(e)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Pc(n,function(t){Pc(Ic(e[t]),function(e){e&&(Mc(e,"axisLabel"),Mc(e.axisPointer,"label"))})}),Pc(Ic(e.parallel),function(e){var t=e&&e.parallelAxisDefault;Mc(t,"axisLabel"),Mc(t&&t.axisPointer,"label")}),Pc(Ic(e.calendar),function(e){Ec(e,"itemStyle"),Mc(e,"dayLabel"),Mc(e,"monthLabel"),Mc(e,"yearLabel")}),Pc(Ic(e.radar),function(e){Mc(e,"name")}),Pc(Ic(e.geo),function(e){Tc(e)&&(Rc(e),Pc(Ic(e.regions),function(e){Rc(e)}))}),Pc(Ic(e.timeline),function(e){Rc(e),Ec(e,"label"),Ec(e,"itemStyle"),Ec(e,"controlStyle",!0);var t=e.data;B(t)&&M(t,function(e){z(e)&&(Ec(e,"label"),Ec(e,"itemStyle"))})}),Pc(Ic(e.toolbox),function(e){Ec(e,"iconStyle"),Pc(e.feature,function(e){Ec(e,"iconStyle")})}),Mc(jc(e.axisPointer),"label"),Mc(jc(e.tooltip).axisPointer,"label")};function Dc(e){M(Nc,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var Nc=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Bc=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Fc=function(e,t){Lc(e,t),e.series=Uo(e.series),M(e.series,function(e){if(z(e)){var t=e.type;if("line"===t)null!=e.clipOverflow&&(e.clip=e.clipOverflow);else if("pie"===t||"gauge"===t)null!=e.clockWise&&(e.clockwise=e.clockWise);else if("gauge"===t){var n=function(e,t){t=t.split(",");for(var n=e,r=0;r<t.length&&null!=(n=n&&n[t[r]]);r++);return n}(e,"pointer.color");null!=n&&function(e,t,n,r){t=t.split(",");for(var o,i=e,a=0;a<t.length-1;a++)null==i[o=t[a]]&&(i[o]={}),i=i[o];(r||null==i[t[a]])&&(i[t[a]]=n)}(e,"itemStyle.color",n)}Dc(e)}}),e.dataRange&&(e.visualMap=e.dataRange),M(Bc,function(t){var n=e[t];n&&(B(n)||(n=[n]),M(n,function(e){Dc(e)}))})};function Gc(e){M(e,function(t,n){var r=[],o=[NaN,NaN],i=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=a.map(i,function(i,l,u){var c,f,h=a.get(t.stackedDimension,u);if(isNaN(h))return o;s?f=a.getRawIndex(u):c=a.get(t.stackedByDimension,u);for(var p=NaN,d=n-1;d>=0;d--){var y=e[d];if(s||(f=y.data.rawIndexOf(y.stackedByDimension,c)),f>=0){var v=y.data.getByRawIndex(y.stackResultDimension,f);if(h>=0&&v>0||h<=0&&v<0){h+=v,p=v;break}}}return r[0]=h,r[1]=p,r});a.hostModel.setData(l),t.data=l})}function zc(e,t){Ku.isInstance(e)||(e=Ku.seriesDataToSource(e)),this._source=e;var n=this._data=e.data,o=e.sourceFormat;if(o===Xu){if(r&&null==t)throw new Error("Typed array data must specify dimension size");this._offset=0,this._dimSize=t,this._data=n}var i=Hc[o===Uu?o+"_"+e.seriesLayoutBy:o];r&&Q(i,"Invalide sourceFormat: "+o),x(this,i)}var Vc=zc.prototype;Vc.pure=!1,Vc.persistent=!0,Vc.getSource=function(){return this._source};var Hc={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(e){return this._data[e+this._source.startIndex]},appendData:Jc},arrayRows_row:{pure:!0,count:function(){var e=this._data[0];return e?Math.max(0,e.length-this._source.startIndex):0},getItem:function(e){e+=this._source.startIndex;for(var t=[],n=this._data,r=0;r<n.length;r++){var o=n[r];t.push(o?o[e]:null)}return t},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:Wc,getItem:Uc,appendData:Jc},keyedColumns:{pure:!0,count:function(){var e=this._source.dimensionsDefine[0].name,t=this._data[e];return t?t.length:0},getItem:function(e){for(var t=[],n=this._source.dimensionsDefine,r=0;r<n.length;r++){var o=this._data[n[r].name];t.push(o?o[e]:null)}return t},appendData:function(e){var t=this._data;M(e,function(e,n){for(var r=t[n]||(t[n]=[]),o=0;o<(e||[]).length;o++)r.push(e[o])})}},original:{count:Wc,getItem:Uc,appendData:Jc},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(e,t){e-=this._offset,t=t||[];for(var n=this._dimSize*e,r=0;r<this._dimSize;r++)t[r]=this._data[n+r];return t},appendData:function(e){r&&Q(H(e),"Added data must be TypedArray if data in initialization is TypedArray"),this._data=e},clean:function(){this._offset+=this.count(),this._data=null}}};function Wc(){return this._data.length}function Uc(e){return this._data[e]}function Jc(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}var qc={arrayRows:Yc,objectRows:function(e,t,n,r){return null!=n?e[r]:e},keyedColumns:Yc,original:function(e,t,n,r){var o=Yo(e);return null!=n&&o instanceof Array?o[n]:o},typedArray:Yc};function Yc(e,t,n,r){return null!=n?e[n]:e}var Xc={arrayRows:Zc,objectRows:function(e,t,n,r){return Qc(e[t],this._dimensionInfos[t])},keyedColumns:Zc,original:function(e,t,n,r){var o=e&&(null==e.value?e:e.value);return!this._rawData.pure&&function(e){return Vo(e)&&!(e instanceof Array)}(e)&&(this.hasItemOption=!0),Qc(o instanceof Array?o[r]:o,this._dimensionInfos[t])},typedArray:function(e,t,n,r){return e[r]}};function Zc(e,t,n,r){return Qc(e[r],this._dimensionInfos[t])}function Qc(e,t){var n=t&&t.type;if("ordinal"===n){var r=t&&t.ordinalMeta;return r?r.parseAndCollect(e):e}return"time"===n&&"number"!=typeof e&&null!=e&&"-"!==e&&(e=+nu(e)),null==e||""===e?NaN:+e}function Kc(e,t,n){if(e){var r=e.getRawDataItem(t);if(null!=r){var o,i,a=e.getProvider().getSource().sourceFormat,s=e.getDimensionInfo(n);return s&&(o=s.name,i=s.index),qc[a](r,t,i,o)}}}function $c(e,t,n){if(e){var r=e.getProvider().getSource().sourceFormat;if(r===Wu||r===Ju){var o=e.getRawDataItem(t);return r!==Wu||z(o)||(o=null),o?o[n]:void 0}}}var ef=/\{@(.+?)\}/g,tf={getDataParams:function(e,t){var n=this.getData(t),r=this.getRawValue(e,t),o=n.getRawIndex(e),i=n.getName(e),a=n.getRawDataItem(e),s=n.getItemVisual(e,"color"),l=n.getItemVisual(e,"borderColor"),u=this.ecModel.getComponent("tooltip"),c=ii(u&&u.get("renderMode")),f=this.mainType,h="series"===f,p=n.userOutput;return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:i,dataIndex:o,data:a,dataType:t,value:r,color:s,borderColor:l,dimensionNames:p?p.dimensionNames:null,encode:p?p.encode:null,marker:bu({color:s,renderMode:c}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(e,t,n,r,o){t=t||"normal";var i=this.getData(n),a=i.getItemModel(e),s=this.getDataParams(e,n);null!=r&&s.value instanceof Array&&(s.value=s.value[r]);var l=a.get("normal"===t?[o||"label","formatter"]:[t,o||"label","formatter"]);return"function"==typeof l?(s.status=t,s.dimensionIndex=r,l(s)):"string"==typeof l?gu(l,s).replace(ef,function(t,n){var r=n.length;return"["===n.charAt(0)&&"]"===n.charAt(r-1)&&(n=+n.slice(1,r-1)),Kc(i,e,n)}):void 0},getRawValue:function(e,t){return Kc(this.getData(t),e)},formatTooltip:function(){}};function nf(e){return new rf(e)}function rf(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0,this.context}var of=rf.prototype;of.perform=function(e){var t,n=this._upstream,o=e&&e.skip;if(this._dirty&&n){var i=this.context;i.data=i.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!o&&(t=this._plan(this.context));var a,s=f(this._modBy),l=this._modDataCount||0,u=f(e&&e.modBy),c=e&&e.modDataCount||0;function f(e){return!(e>=1)&&(e=1),e}s===u&&l===c||(t="reset"),(this._dirty||"reset"===t)&&(this._dirty=!1,a=function(e,t){var n,r;e._dueIndex=e._outputDueEnd=e._dueEnd=0,e._settedOutputEnd=null,!t&&e._reset&&((n=e._reset(e.context))&&n.progress&&(r=n.forceFirstProgress,n=n.progress),B(n)&&!n.length&&(n=null));e._progress=n,e._modBy=e._modDataCount=null;var o=e._downstream;return o&&o.dirty(),r}(this,o)),this._modBy=u,this._modDataCount=c;var h=e&&e.step;if(n?(r&&Q(null!=n._outputDueEnd),this._dueEnd=n._outputDueEnd):(r&&Q(!this._progress||this._count),this._dueEnd=this._count?this._count(this.context):1/0),this._progress){var p=this._dueIndex,d=Math.min(null!=h?this._dueIndex+h:1/0,this._dueEnd);if(!o&&(a||p<d)){var y=this._progress;if(B(y))for(var v=0;v<y.length;v++)sf(this,y[v],p,d,u,c);else sf(this,y,p,d,u,c)}this._dueIndex=d;var g=null!=this._settedOutputEnd?this._settedOutputEnd:d;r&&Q(g>=this._outputDueEnd),this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var af=function(){var e,t,n,r,o,i={reset:function(l,u,c,f){t=l,e=u,n=c,r=f,o=Math.ceil(r/n),i.next=n>1&&r>0?s:a}};return i;function a(){return t<e?t++:null}function s(){var i=t%o*n+Math.ceil(t/o),a=t>=e?null:i<r?i:t;return t++,a}}();function sf(e,t,n,r,o,i){af.reset(n,r,o,i),e._callingProgress=t,e._callingProgress({start:n,end:r,count:r-n,next:af.next},e.context)}of.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},of.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},of.pipe=function(e){r&&Q(e&&!e._disposed&&e!==this),(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},of.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},of.getUpstream=function(){return this._upstream},of.getDownstream=function(){return this._downstream},of.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e};var lf=ei(),uf=Fu.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(e,t,n,o){this.seriesIndex=this.componentIndex,this.dataTask=nf({count:ff,reset:hf}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,n),tc(this);var i=this.getInitialData(e,n);df(i,this),this.dataTask.context.data=i,r&&Q(i,"getInitialData returned invalid data."),lf(this).dataBeforeProcessed=i,cf(this)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,r=n?ju(e):{},o=this.subType;Fu.hasClass(o)&&(o+="Series"),w(e,t.getTheme().get(this.subType)),w(e,this.getDefaultOption()),Jo(e,"label",["show"]),this.fillDataTextStyle(e.data),n&&Iu(e,r,n)},mergeOption:function(e,t){e=w(this.option,e,!0),this.fillDataTextStyle(e.data);var n=this.layoutMode;n&&Iu(this.option,e,n),tc(this);var r=this.getInitialData(e,t);df(r,this),this.dataTask.dirty(),this.dataTask.context.data=r,lf(this).dataBeforeProcessed=r,cf(this)},fillDataTextStyle:function(e){if(e&&!H(e))for(var t=["show"],n=0;n<e.length;n++)e[n]&&e[n].label&&Jo(e[n],"label",t)},getInitialData:function(){},appendData:function(e){this.getRawData().appendData(e.data)},getData:function(e){var t=vf(this);if(t){var n=t.context.data;return null==e?n:n.getLinkedData(e)}return lf(this).data},setData:function(e){var t=vf(this);if(t){var n=t.context;n.data!==e&&t.modifyOutputEnd&&t.setOutputEnd(e.count()),n.outputData=e,t!==this.dataTask&&(n.data=e)}lf(this).data=e},getSource:function(){return ec(this).source},getRawData:function(){return lf(this).dataBeforeProcessed},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(e,t,n,r){var o=this,i="html"===(r=r||"html")?"<br/>":"\n",a="richText"===r,s={},l=0;function u(e){return{renderMode:r,content:du(uu(e)),style:s}}var c=this.getData(),f=c.mapDimension("defaultedTooltip",!0),h=f.length,p=this.getRawValue(e),d=B(p),y=c.getItemVisual(e,"color");z(y)&&y.colorStops&&(y=(y.colorStops[0]||{}).color),y=y||"transparent";var v=(h>1||d&&!h?function(n){var i=I(n,function(e,t,n){var r=c.getDimensionInfo(n);return e|(r&&!1!==r.tooltip&&null!=r.displayName)},0),u=[];function h(e,n){var f=c.getDimensionInfo(n);if(f&&!1!==f.otherDims.tooltip){var h=f.type,p="sub"+o.seriesIndex+"at"+l,d=bu({color:y,type:"subItem",renderMode:r,markerId:p}),v="string"==typeof d?d:d.content,g=(i?v+du(f.displayName||"-")+": ":"")+du("ordinal"===h?e+"":"time"===h?t?"":_u("yyyy/MM/dd hh:mm:ss",e):uu(e));g&&u.push(g),a&&(s[p]=y,++l)}}f.length?M(f,function(t){h(Kc(c,e,t),t)}):M(n,h);var p=i?a?"\n":"<br/>":"",d=p+u.join(p||", ");return{renderMode:r,content:d,style:s}}(p):u(h?Kc(c,e,f[0]):d?p[0]:p)).content,g=o.seriesIndex+"at"+l,m=bu({color:y,type:"item",renderMode:r,markerId:g});s[g]=y,++l;var b=c.getName(e),w=this.name;Qo(this)||(w=""),w=w?du(w)+(t?": ":i):"";var _="string"==typeof m?m:m.content;return{html:t?_+w+v:w+_+(b?du(b)+": "+v:v),markers:s}},isAnimationEnabled:function(){if(a.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),e},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,t,n){var r=this.ecModel,o=Hu.getColorFromPalette.call(this,e,t,n);return o||(o=r.getColorFromPalette(e,t,n)),o},coordDimToDataDim:function(e){return this.getRawData().mapDimension(e,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function cf(e){var t=e.name;Qo(e)||(e.name=function(e){var t=e.getRawData(),n=[];return M(t.mapDimension("seriesName",!0),function(e){var r=t.getDimensionInfo(e);r.displayName&&n.push(r.displayName)}),n.join(" ")}(e)||t)}function ff(e){return e.model.getRawData().count()}function hf(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),pf}function pf(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function df(e,t){M(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,N(yf,t))})}function yf(e){var t=vf(e);t&&t.setOutputEnd(this.count())}function vf(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var r=n.currentTask;if(r){var o=r.agentStubMap;o&&(r=o.get(e.uid))}return r}}E(uf,tf),E(uf,Hu);var gf=function(){this.group=new Ln,this.uid=Vl("viewComponent")};gf.prototype={constructor:gf,init:function(e,t){},render:function(e,t,n,r){},dispose:function(){},filterForExposedEvent:null};var mf=gf.prototype;mf.updateView=mf.updateLayout=mf.updateVisual=function(e,t,n,r){},ci(gf),yi(gf,{registerWhenExtend:!0});var bf=function(){var e=ei();return function(t){var n=e(t),r=t.pipelineContext,o=n.large,i=n.progressiveRender,a=n.large=r&&r.large,s=n.progressiveRender=r&&r.progressiveRender;return!!(o^a||i^s)&&"reset"}},wf=ei(),_f=bf();function xf(){this.group=new Ln,this.uid=Vl("viewChart"),this.renderTask=nf({plan:Tf,reset:kf}),this.renderTask.context={view:this}}xf.prototype={type:"chart",init:function(e,t){},render:function(e,t,n,r){},highlight:function(e,t,n,r){Pf(e.getData(),r,"emphasis")},downplay:function(e,t,n,r){Pf(e.getData(),r,"normal")},remove:function(e,t){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var Sf=xf.prototype;function Of(e,t,n){if(e&&(e.trigger(t,n),e.isGroup&&!ll(e)))for(var r=0,o=e.childCount();r<o;r++)Of(e.childAt(r),t,n)}function Pf(e,t,n){var r=$o(e,t),o=t&&null!=t.highlightKey?ul(t.highlightKey):null;null!=r?M(Uo(r),function(t){Of(e.getItemGraphicEl(t),n,o)}):e.eachItemGraphicEl(function(e){Of(e,n,o)})}function Tf(e){return _f(e.model)}function kf(e){var t=e.model,n=e.ecModel,r=e.api,o=e.payload,i=t.pipelineContext.progressiveRender,a=e.view,s=o&&wf(o).updateMethod,l=i?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==l&&a[l](t,n,r,o),Cf[l]}Sf.updateView=Sf.updateLayout=Sf.updateVisual=function(e,t,n,r){this.render(e,t,n,r)},ci(xf,["dispose"]),yi(xf,{registerWhenExtend:!0}),xf.markUpdateMethod=function(e,t){wf(e).updateMethod=t};var Cf={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},Ef="\0__throttleOriginMethod",Af="\0__throttleRate",Mf="\0__throttleType";function Rf(e,t,n){var r,o,i,a,s,l=0,u=0,c=null;function f(){u=(new Date).getTime(),c=null,e.apply(i,a||[])}t=t||0;var h=function(){r=(new Date).getTime(),i=this,a=arguments;var e=s||t,h=s||n;s=null,o=r-(h?l:u)-e,clearTimeout(c),h?c=setTimeout(f,e):o>=0?f():c=setTimeout(f,-o),l=r};return h.clear=function(){c&&(clearTimeout(c),c=null)},h.debounceNextCall=function(e){s=e},h}function If(e,t,n,r){var o=e[t];if(o){var i=o[Ef]||o,a=o[Mf];if(o[Af]!==n||a!==r){if(null==n||!r)return e[t]=i;(o=e[t]=Rf(i,n,"debounce"===r))[Ef]=i,o[Mf]=r,o[Af]=n}return o}}function jf(e,t){var n=e[t];n&&n[Ef]&&(e[t]=n[Ef])}var Lf={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),r=(e.visualColorAccessPath||"itemStyle.color").split("."),o=e.get(r),i=!F(o)||o instanceof Ss?null:o;o&&!i||(o=e.getColorFromPalette(e.name,null,t.getSeriesCount())),n.setVisual("color",o);var a=(e.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),s=e.get(a);if(n.setVisual("borderColor",s),!t.isSeriesFiltered(e)){i&&n.each(function(t){n.setItemVisual(t,"color",i(e.getDataParams(t)))});return{dataEach:n.hasItemOption?function(e,t){var n=e.getItemModel(t),o=n.get(r,!0),i=n.get(a,!0);null!=o&&e.setItemVisual(t,"color",o),null!=i&&e.setItemVisual(t,"borderColor",i)}:null}}}},Df={legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Guage",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:",",end:"."}}}},Nf=function(e,t){var n=t.getModel("aria");if(n.get("show"))if(n.get("description"))e.setAttribute("aria-label",n.get("description"));else{var r=0;t.eachSeries(function(e,t){++r},this);var o,i=n.get("data.maxCount")||10,a=n.get("series.maxCount")||10,s=Math.min(r,a);if(!(r<1)){var l=function(){var e=t.getModel("title").option;e&&e.length&&(e=e[0]);return e&&e.text}();o=l?c(f("general.withTitle"),{title:l}):f("general.withoutTitle");var u=[];o+=c(f(r>1?"series.multiple.prefix":"series.single.prefix"),{seriesCount:r}),t.eachSeries(function(e,t){if(t<s){var n,o=e.get("name"),a="series."+(r>1?"multiple":"single")+".";n=c(n=f(o?a+"withName":a+"withoutName"),{seriesId:e.seriesIndex,seriesName:e.get("name"),seriesType:(v=e.subType,Df.series.typeNames[v]||"èªå®ä¹å¾")});var l=e.getData();window.data=l,l.count()>i?n+=c(f("data.partialData"),{displayCnt:i}):n+=f("data.allData");for(var h=[],p=0;p<l.count();p++)if(p<i){var d=l.getName(p),y=Kc(l,p);h.push(c(f(d?"data.withName":"data.withoutName"),{name:d,value:y}))}n+=h.join(f("data.separator.middle"))+f("data.separator.end"),u.push(n)}var v}),o+=u.join(f("series.multiple.separator.middle"))+f("series.multiple.separator.end"),e.setAttribute("aria-label",o)}}function c(e,t){if("string"!=typeof e)return e;var n=e;return M(t,function(e,t){n=n.replace(new RegExp("\\{\\s*"+t+"\\s*\\}","g"),e)}),n}function f(e){var t=n.get(e);if(null==t){for(var r=e.split("."),o=Df.aria,i=0;i<r.length;++i)o=o[r[i]];return o}return t}},Bf=Math.PI;function Ff(e,t,n,r){this.ecInstance=e,this.api=t,this.unfinished;n=this._dataProcessorHandlers=n.slice(),r=this._visualHandlers=r.slice();this._allHandlers=n.concat(r),this._stageTaskMap=re()}var Gf=Ff.prototype;function zf(e,t,n,r,o){var i;function a(e,t){return e.setDirty&&(!e.dirtyMap||e.dirtyMap.get(t.__pipeline.id))}o=o||{},M(t,function(t,s){if(!o.visualType||o.visualType===t.visualType){var l=e._stageTaskMap.get(t.uid),u=l.seriesTaskMap,c=l.overallTask;if(c){var f,h=c.agentStubMap;h.each(function(e){a(o,e)&&(e.dirty(),f=!0)}),f&&c.dirty(),Vf(c,r);var p=e.getPerformArgs(c,o.block);h.each(function(e){e.perform(p)}),i|=c.perform(p)}else u&&u.each(function(s,l){a(o,s)&&s.dirty();var u=e.getPerformArgs(s,o.block);u.skip=!t.performRawSeries&&n.isSeriesFiltered(s.context.model),Vf(s,r),i|=s.perform(u)})}}),e.unfinished|=i}Gf.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(e){var t=e.overallTask;t&&t.dirty()})},Gf.getPerformArgs=function(e,t){if(e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),r=n.context,o=!t&&n.progressiveEnabled&&(!r||r.progressiveRender)&&e.__idxInPipeline>n.blockIndex?n.step:null,i=r&&r.modDataCount;return{step:o,modBy:null!=i?Math.ceil(i/o):null,modDataCount:i}}},Gf.getPipeline=function(e){return this._pipelineMap.get(e)},Gf.updateStreamModes=function(e,t){var n=this._pipelineMap.get(e.uid),r=e.getData().count(),o=n.progressiveEnabled&&t.incrementalPrepareRender&&r>=n.threshold,i=e.get("large")&&r>=e.get("largeThreshold"),a="mod"===e.get("progressiveChunkMode")?r:null;e.pipelineContext=n.context={progressiveRender:o,modDataCount:a,large:i}},Gf.restorePipelines=function(e){var t=this,n=t._pipelineMap=re();e.eachSeries(function(e){var r=e.getProgressive(),o=e.uid;n.set(o,{id:o,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:r&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(r||700),count:0}),Kf(t,e,e.dataTask)})},Gf.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.ecInstance.getModel(),n=this.api;M(this._allHandlers,function(r){var o=e.get(r.uid)||e.set(r.uid,[]);r.reset&&function(e,t,n,r,o){var i=n.seriesTaskMap||(n.seriesTaskMap=re()),a=t.seriesType,s=t.getTargetSeries;t.createOnAllSeries?r.eachRawSeries(l):a?r.eachRawSeriesByType(a,l):s&&s(r,o).each(l);function l(n){var a=n.uid,s=i.get(a)||i.set(a,nf({plan:qf,reset:Yf,count:Qf}));s.context={model:n,ecModel:r,api:o,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:e},Kf(e,n,s)}var u=e._pipelineMap;i.each(function(e,t){u.get(t)||(e.dispose(),i.removeKey(t))})}(this,r,o,t,n),r.overallReset&&function(e,t,n,r,o){var i=n.overallTask=n.overallTask||nf({reset:Hf});i.context={ecModel:r,api:o,overallReset:t.overallReset,scheduler:e};var a=i.agentStubMap=i.agentStubMap||re(),s=t.seriesType,l=t.getTargetSeries,u=!0,c=t.modifyOutputEnd;s?r.eachRawSeriesByType(s,f):l?l(r,o).each(f):(u=!1,M(r.getSeries(),f));function f(t){var n=t.uid,r=a.get(n);r||(r=a.set(n,nf({reset:Wf,onDirty:Jf})),i.dirty()),r.context={model:t,overallProgress:u,modifyOutputEnd:c},r.agent=i,r.__block=u,Kf(e,t,r)}var h=e._pipelineMap;a.each(function(e,t){h.get(t)||(e.dispose(),i.dirty(),a.removeKey(t))})}(this,r,o,t,n)},this)},Gf.prepareView=function(e,t,n,r){var o=e.renderTask,i=o.context;i.model=t,i.ecModel=n,i.api=r,o.__block=!e.incrementalPrepareRender,Kf(this,t,o)},Gf.performDataProcessorTasks=function(e,t){zf(this,this._dataProcessorHandlers,e,t,{block:!0})},Gf.performVisualTasks=function(e,t,n){zf(this,this._visualHandlers,e,t,n)},Gf.performSeriesTasks=function(e){var t;e.eachSeries(function(e){t|=e.dataTask.perform()}),this.unfinished|=t},Gf.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})};var Vf=Gf.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)};function Hf(e){e.overallReset(e.ecModel,e.api,e.payload)}function Wf(e,t){return e.overallProgress&&Uf}function Uf(){this.agent.dirty(),this.getDownstream().dirty()}function Jf(){this.agent&&this.agent.dirty()}function qf(e){return e.plan&&e.plan(e.model,e.ecModel,e.api,e.payload)}function Yf(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Uo(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?R(t,function(e,t){return Zf(t)}):Xf}var Xf=Zf(0);function Zf(e){return function(t,n){var r=n.data,o=n.resetDefines[e];if(o&&o.dataEach)for(var i=t.start;i<t.end;i++)o.dataEach(r,i);else o&&o.progress&&o.progress(t,r)}}function Qf(e){return e.data.count()}function Kf(e,t,n){var r=t.uid,o=e._pipelineMap.get(r);!o.head&&(o.head=n),o.tail&&o.tail.pipe(n),o.tail=n,n.__idxInPipeline=o.count++,n.__pipeline=o}Ff.wrapStageHandler=function(e,t){return F(e)&&(e={overallReset:e,seriesType:function(e){$f=null;try{e(eh,th)}catch(e){}return $f}(e)}),e.uid=Vl("stageHandler"),t&&(e.visualType=t),e};var $f,eh={},th={};function nh(e,t){for(var n in t.prototype)e[n]=ie}nh(eh,cc),nh(th,yc),eh.eachSeriesByType=eh.eachRawSeriesByType=function(e){$f=e},eh.eachComponent=function(e){"series"===e.mainType&&e.subType&&($f=e.subType)};var rh=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],oh={color:rh,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],rh]},ih=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],ah={color:ih,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:"#eee"},crossStyle:{color:"#eee"},label:{color:"#000"}}},legend:{textStyle:{color:"#eee"}},textStyle:{color:"#eee"},title:{textStyle:{color:"#eee"}},toolbox:{iconStyle:{normal:{borderColor:"#eee"}}},dataZoom:{textStyle:{color:"#eee"}},visualMap:{textStyle:{color:"#eee"}},timeline:{lineStyle:{color:"#eee"},itemStyle:{normal:{color:ih[1]}},label:{normal:{textStyle:{color:"#eee"}}},controlStyle:{normal:{color:"#eee",borderColor:"#eee"}}},timeAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},logAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},valueAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},categoryAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},line:{symbol:"circle"},graph:{color:ih},gauge:{title:{textStyle:{color:"#eee"}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};ah.categoryAxis.splitLine.show=!1,Fu.extend({type:"dataset",defaultOption:{seriesLayoutBy:Zu,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(e){var t=e.option.source,n=Yu;if(H(t))n=Xu;else if(B(t)){0===t.length&&(n=Uu);for(var r=0,o=t.length;r<o;r++){var i=t[r];if(null!=i){if(B(i)){n=Uu;break}if(z(i)){n=Ju;break}}}}else if(z(t)){for(var a in t)if(t.hasOwnProperty(a)&&A(t[a])){n=qu;break}}else if(null!=t)throw new Error("Invalid data");ec(e).sourceFormat=n}(this)}}),gf.extend({type:"dataset"});var sh=ja.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(e,t){var n=.5522848,r=t.cx,o=t.cy,i=t.rx,a=t.ry,s=i*n,l=a*n;e.moveTo(r-i,o),e.bezierCurveTo(r-i,o-l,r-s,o-a,r,o-a),e.bezierCurveTo(r+s,o-a,r+i,o-l,r+i,o),e.bezierCurveTo(r+i,o+l,r+s,o+a,r,o+a),e.bezierCurveTo(r-s,o+a,r-i,o+l,r-i,o),e.closePath()}}),lh=/[\s,]+/;function uh(e){G(e)&&(e=(new DOMParser).parseFromString(e,"text/xml"));for(9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}function ch(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}ch.prototype.parse=function(e,t){t=t||{};var n=uh(e);if(!n)throw new Error("Illegal svg");var r=new Ln;this._root=r;var o=n.getAttribute("viewBox")||"",i=parseFloat(n.getAttribute("width")||t.width),a=parseFloat(n.getAttribute("height")||t.height);isNaN(i)&&(i=null),isNaN(a)&&(a=null),vh(n,r,null,!0);for(var s,l,u=n.firstChild;u;)this._parseNode(u,r),u=u.nextSibling;if(o){var c=K(o).split(lh);c.length>=4&&(s={x:parseFloat(c[0]||0),y:parseFloat(c[1]||0),width:parseFloat(c[2]),height:parseFloat(c[3])})}if(s&&null!=i&&null!=a&&(l=_h(s,i,a),!t.ignoreViewBox)){var f=r;(r=new Ln).add(f),f.scale=l.scale.slice(),f.position=l.position.slice()}return t.ignoreRootClip||null==i||null==a||r.setClipPath(new ys({shape:{x:0,y:0,width:i,height:a}})),{root:r,width:i,height:a,viewBoxRect:s,viewBoxTransform:l}},ch.prototype._parseNode=function(e,t){var n,r,o=e.nodeName.toLowerCase();if("defs"===o?this._isDefine=!0:"text"===o&&(this._isText=!0),this._isDefine){if(r=hh[o]){var i=r.call(this,e),a=e.getAttribute("id");a&&(this._defs[a]=i)}}else(r=fh[o])&&(n=r.call(this,e,t),t.add(n));for(var s=e.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===o?this._isDefine=!1:"text"===o&&(this._isText=!1)},ch.prototype._parseText=function(e,t){if(1===e.nodeType){var n=e.getAttribute("dx")||0,r=e.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(r)}var o=new Ka({style:{text:e.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});ph(t,o),vh(e,o,this._defs);var i=o.style.fontSize;i&&i<9&&(o.style.fontSize=9,o.scale=o.scale||[1,1],o.scale[0]*=i/9,o.scale[1]*=i/9);var a=o.getBoundingRect();return this._textX+=a.width,t.add(o),o};var fh={g:function(e,t){var n=new Ln;return ph(t,n),vh(e,n,this._defs),n},rect:function(e,t){var n=new ys;return ph(t,n),vh(e,n,this._defs),n.setShape({x:parseFloat(e.getAttribute("x")||0),y:parseFloat(e.getAttribute("y")||0),width:parseFloat(e.getAttribute("width")||0),height:parseFloat(e.getAttribute("height")||0)}),n},circle:function(e,t){var n=new $a;return ph(t,n),vh(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),r:parseFloat(e.getAttribute("r")||0)}),n},line:function(e,t){var n=new gs;return ph(t,n),vh(e,n,this._defs),n.setShape({x1:parseFloat(e.getAttribute("x1")||0),y1:parseFloat(e.getAttribute("y1")||0),x2:parseFloat(e.getAttribute("x2")||0),y2:parseFloat(e.getAttribute("y2")||0)}),n},ellipse:function(e,t){var n=new sh;return ph(t,n),vh(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),rx:parseFloat(e.getAttribute("rx")||0),ry:parseFloat(e.getAttribute("ry")||0)}),n},polygon:function(e,t){var n=e.getAttribute("points");n&&(n=dh(n));var r=new ls({shape:{points:n||[]}});return ph(t,r),vh(e,r,this._defs),r},polyline:function(e,t){var n=new ja;ph(t,n),vh(e,n,this._defs);var r=e.getAttribute("points");r&&(r=dh(r));var o=new us({shape:{points:r||[]}});return o},image:function(e,t){var n=new io;return ph(t,n),vh(e,n,this._defs),n.setStyle({image:e.getAttribute("xlink:href"),x:e.getAttribute("x"),y:e.getAttribute("y"),width:e.getAttribute("width"),height:e.getAttribute("height")}),n},text:function(e,t){var n=e.getAttribute("x")||0,r=e.getAttribute("y")||0,o=e.getAttribute("dx")||0,i=e.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(o),this._textY=parseFloat(r)+parseFloat(i);var a=new Ln;return ph(t,a),vh(e,a,this._defs),a},tspan:function(e,t){var n=e.getAttribute("x"),r=e.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=r&&(this._textY=parseFloat(r));var o=e.getAttribute("dx")||0,i=e.getAttribute("dy")||0,a=new Ln;return ph(t,a),vh(e,a,this._defs),this._textX+=o,this._textY+=i,a},path:function(e,t){var n=Qa(e.getAttribute("d")||"");return ph(t,n),vh(e,n,this._defs),n}},hh={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||0,10),n=parseInt(e.getAttribute("y1")||0,10),r=parseInt(e.getAttribute("x2")||10,10),o=parseInt(e.getAttribute("y2")||0,10),i=new Os(t,n,r,o);return function(e,t){var n=e.firstChild;for(;n;){if(1===n.nodeType){var r=n.getAttribute("offset");r=r.indexOf("%")>0?parseInt(r,10)/100:r?parseFloat(r):0;var o=n.getAttribute("stop-color")||"#000000";t.addColorStop(r,o)}n=n.nextSibling}}(e,i),i},radialgradient:function(e){}};function ph(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),S(t.__inheritedStyle,e.__inheritedStyle))}function dh(e){for(var t=K(e).split(lh),n=[],r=0;r<t.length;r+=2){var o=parseFloat(t[r]),i=parseFloat(t[r+1]);n.push([o,i])}return n}var yh={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function vh(e,t,n,r){var o=t.__inheritedStyle||{},i="text"===t.type;if(1===e.nodeType&&(function(e,t){var n=e.getAttribute("transform");if(n){var r=null,o=[];(n=n.replace(/,/g," ")).replace(bh,function(e,t,n){o.push(t,n)});for(var i=o.length-1;i>0;i-=2){var a=o[i],s=o[i-1];switch(r=r||ut(),s){case"translate":a=K(a).split(lh),pt(r,r,[parseFloat(a[0]),parseFloat(a[1]||0)]);break;case"scale":a=K(a).split(lh),yt(r,r,[parseFloat(a[0]),parseFloat(a[1]||a[0])]);break;case"rotate":a=K(a).split(lh),dt(r,r,parseFloat(a[0]));break;case"skew":a=K(a).split(lh),console.warn("Skew transform is not supported yet");break;case"matrix":var a=K(a).split(lh);r[0]=parseFloat(a[0]),r[1]=parseFloat(a[1]),r[2]=parseFloat(a[2]),r[3]=parseFloat(a[3]),r[4]=parseFloat(a[4]),r[5]=parseFloat(a[5])}}t.setLocalTransform(r)}}(e,t),x(o,function(e){var t=e.getAttribute("style"),n={};if(!t)return n;var r,o={};wh.lastIndex=0;for(;null!=(r=wh.exec(t));)o[r[1]]=r[2];for(var i in yh)yh.hasOwnProperty(i)&&null!=o[i]&&(n[yh[i]]=o[i]);return n}(e)),!r))for(var a in yh)if(yh.hasOwnProperty(a)){var s=e.getAttribute(a);null!=s&&(o[yh[a]]=s)}var l=i?"textFill":"fill",u=i?"textStroke":"stroke";t.style=t.style||new Qn;var c=t.style;null!=o.fill&&c.set(l,mh(o.fill,n)),null!=o.stroke&&c.set(u,mh(o.stroke,n)),M(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(e){var t="lineWidth"===e&&i?"textStrokeWidth":e;null!=o[e]&&c.set(t,parseFloat(o[e]))}),o.textBaseline&&"auto"!==o.textBaseline||(o.textBaseline="alphabetic"),"alphabetic"===o.textBaseline&&(o.textBaseline="bottom"),"start"===o.textAlign&&(o.textAlign="left"),"end"===o.textAlign&&(o.textAlign="right"),M(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(e){null!=o[e]&&c.set(e,o[e])}),o.lineDash&&(t.style.lineDash=K(o.lineDash).split(lh)),c[u]&&"none"!==c[u]&&(t[u]=!0),t.__inheritedStyle=o}var gh=/url\(\s*#(.*?)\)/;function mh(e,t){var n=t&&e&&e.match(gh);return n?t[K(n[1])]:e}var bh=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;var wh=/([^\s:;]+)\s*:\s*([^:;]+)/g;function _h(e,t,n){var r=t/e.width,o=n/e.height,i=Math.min(r,o);return{scale:[i,i],position:[-(e.x+e.width/2)*i+t/2,-(e.y+e.height/2)*i+n/2]}}var xh=re(),Sh={registerMap:function(e,t,n){var o;return B(t)?o=t:t.svg?o=[{type:"svg",source:t.svg,specialAreas:t.specialAreas}]:(t.geoJson&&!t.features&&(n=t.specialAreas,t=t.geoJson),o=[{type:"geoJSON",source:t,specialAreas:n}]),M(o,function(e){var t=e.type;"geoJson"===t&&(t=e.type="geoJSON");var n=Oh[t];r&&Q(n,"Illegal map type: "+t),n(e)}),xh.set(e,o)},retrieveMap:function(e){return xh.get(e)}},Oh={geoJSON:function(e){var t=e.source;e.geoJSON=G(t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t},svg:function(e){e.svgXML=uh(e.source)}},Ph=Q,Th=M,kh=F,Ch=z,Eh=Fu.parseClassType,Ah="4.9.0",Mh={zrender:"4.3.2"},Rh=1e3,Ih=1e3,jh=3e3,Lh={PROCESSOR:{FILTER:Rh,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:Ih,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:jh,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},Dh="__flagInMainProcess",Nh="__optionUpdated",Bh=/^[a-zA-Z0-9_]+$/;function Fh(e,t){return function(n,r,o){t||!this._disposed?(n=n&&n.toLowerCase(),Ie.prototype[e].call(this,n,r,o)):rp(this.id)}}function Gh(){Ie.call(this)}function zh(e,t,o){o=o||{},"string"==typeof t&&(t=hp[t]),this.id,this.group,this._dom=e;var i="canvas";r&&(i=("undefined"==typeof window?n.g:window).__ECHARTS__DEFAULT__RENDERER__||i);var a=this._zr=No(e,{renderer:o.renderer||i,devicePixelRatio:o.devicePixelRatio,width:o.width,height:o.height});this._throttledZrFlush=Rf(D(a.flush,a),17),(t=b(t))&&Fc(t,!0),this._theme=t,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new gc;var s,l,u=this._api=(l=(s=this)._coordSysMgr,x(new yc(s),{getCoordinateSystems:D(l.getCoordinateSystems,l),getComponentByElement:function(e){for(;e;){var t=e.__ecComponentInfo;if(null!=t)return s._model.getComponent(t.mainType,t.index);e=e.parent}}}));function c(e,t){return e.__prio-t.__prio}Hn(fp,c),Hn(lp,c),this._scheduler=new Ff(this,u,lp,fp),Ie.call(this,this._ecEventProcessor=new ip),this._messageCenter=new Gh,this._initEvents(),this.resize=D(this.resize,this),this._pendingActions=[],a.animation.on("frame",this._onframe,this),function(e,t){e.on("rendered",function(){t.trigger("rendered"),!e.animation.isFinished()||t[Nh]||t._scheduler.unfinished||t._pendingActions.length||t.trigger("finished")})}(a,this),ee(this)}Gh.prototype.on=Fh("on",!0),Gh.prototype.off=Fh("off",!0),Gh.prototype.one=Fh("one",!0),E(Gh,Ie);var Vh=zh.prototype;function Hh(e,t,n){if(this._disposed)rp(this.id);else{var o,i=this._model,a=this._coordSysMgr.getCoordinateSystems();t=ni(i,t);for(var s=0;s<a.length;s++){var l=a[s];if(l[e]&&null!=(o=l[e](i,t,n)))return o}r&&console.warn("No coordinate system that supports "+e+" found by the given finder.")}}Vh._onframe=function(){if(!this._disposed){var e=this._scheduler;if(this[Nh]){var t=this[Nh].silent;this[Dh]=!0,Uh(this),Wh.update.call(this),this[Dh]=!1,this[Nh]=!1,Xh.call(this,t),Zh.call(this,t)}else if(e.unfinished){var n=1,r=this._model,o=this._api;e.unfinished=!1;do{var i=+new Date;e.performSeriesTasks(r),e.performDataProcessorTasks(r),qh(this,r),e.performVisualTasks(r),ep(this,this._model,o,"remain"),n-=+new Date-i}while(n>0&&e.unfinished);e.unfinished||this._zr.flush()}}},Vh.getDom=function(){return this._dom},Vh.getZr=function(){return this._zr},Vh.setOption=function(e,t,n){if(r&&Ph(!this[Dh],"`setOption` should not be called during main process."),this._disposed)rp(this.id);else{var o;if(Ch(t)&&(n=t.lazyUpdate,o=t.silent,t=t.notMerge),this[Dh]=!0,!this._model||t){var i=new Sc(this._api),a=this._theme,s=this._model=new cc;s.scheduler=this._scheduler,s.init(null,null,a,i)}this._model.setOption(e,up),n?(this[Nh]={silent:o},this[Dh]=!1):(Uh(this),Wh.update.call(this),this._zr.flush(),this[Nh]=!1,this[Dh]=!1,Xh.call(this,o),Zh.call(this,o))}},Vh.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Vh.getModel=function(){return this._model},Vh.getOption=function(){return this._model&&this._model.getOption()},Vh.getWidth=function(){return this._zr.getWidth()},Vh.getHeight=function(){return this._zr.getHeight()},Vh.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},Vh.getRenderedCanvas=function(e){if(a.canvasSupported)return(e=e||{}).pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(e)},Vh.getSvgDataURL=function(){if(a.svgSupported){var e=this._zr;return M(e.storage.getDisplayList(),function(e){e.stopAnimation(!0)}),e.painter.toDataURL()}},Vh.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,n=this._model,r=[],o=this;Th(t,function(e){n.eachComponent({mainType:e},function(e){var t=o._componentsMap[e.__viewId];t.group.ignore||(r.push(t),t.group.ignore=!0)})});var i="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Th(r,function(e){e.group.ignore=!1}),i}rp(this.id)},Vh.getConnectedDataURL=function(e){if(this._disposed)rp(this.id);else if(a.canvasSupported){var t="svg"===e.type,n=this.group,r=Math.min,o=Math.max;if(yp[n]){var i=1/0,s=1/0,l=-1/0,u=-1/0,c=[],f=e&&e.pixelRatio||1;M(dp,function(a,f){if(a.group===n){var h=t?a.getZr().painter.getSvgDom().innerHTML:a.getRenderedCanvas(b(e)),p=a.getDom().getBoundingClientRect();i=r(p.left,i),s=r(p.top,s),l=o(p.right,l),u=o(p.bottom,u),c.push({dom:h,left:p.left,top:p.top})}});var h=(l*=f)-(i*=f),p=(u*=f)-(s*=f),d=P(),y=No(d,{renderer:t?"svg":"canvas"});if(y.resize({width:h,height:p}),t){var v="";return Th(c,function(e){var t=e.left-i,n=e.top-s;v+='<g transform="translate('+t+","+n+')">'+e.dom+"</g>"}),y.painter.getSvgRoot().innerHTML=v,e.connectedBackgroundColor&&y.painter.setBackgroundColor(e.connectedBackgroundColor),y.refreshImmediately(),y.painter.toDataURL()}return e.connectedBackgroundColor&&y.add(new ys({shape:{x:0,y:0,width:h,height:p},style:{fill:e.connectedBackgroundColor}})),Th(c,function(e){var t=new io({style:{x:e.left*f-i,y:e.top*f-s,image:e.dom}});y.add(t)}),y.refreshImmediately(),d.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},Vh.convertToPixel=N(Hh,"convertToPixel"),Vh.convertFromPixel=N(Hh,"convertFromPixel"),Vh.containPixel=function(e,t){var n;if(!this._disposed)return M(e=ni(this._model,e),function(e,o){o.indexOf("Models")>=0&&M(e,function(e){var i=e.coordinateSystem;if(i&&i.containPoint)n|=!!i.containPoint(t);else if("seriesModels"===o){var a=this._chartsMap[e.__viewId];a&&a.containPoint?n|=a.containPoint(t,e):r&&console.warn(o+": "+(a?"The found component do not support containPoint.":"No view mapping to the found component."))}else r&&console.warn(o+": containPoint is not supported")},this)},this),!!n;rp(this.id)},Vh.getVisual=function(e,t){var n=(e=ni(this._model,e,{defaultMainType:"series"})).seriesModel;r&&(n||console.warn("There is no specified seires model"));var o=n.getData(),i=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?o.indexOfRawIndex(e.dataIndex):null;return null!=i?o.getItemVisual(i,t):o.getVisual(t)},Vh.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},Vh.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var Wh={prepareAndUpdate:function(e){Uh(this),Wh.update.call(this,e)},update:function(e){var t=this._model,n=this._api,r=this._zr,o=this._coordSysMgr,i=this._scheduler;if(t){i.restoreData(t,e),i.performSeriesTasks(t),o.create(t,n),i.performDataProcessorTasks(t,e),qh(this,t),o.update(t,n),Kh(t),i.performVisualTasks(t,e),$h(this,t,n,e);var s=t.get("backgroundColor")||"transparent";if(a.canvasSupported)r.setBackgroundColor(s);else{var l=Jt(s);s=nn(l,"rgb"),0===l[3]&&(s="transparent")}tp(t,n)}},updateTransform:function(e){var t=this._model,n=this,r=this._api;if(t){var o=[];t.eachComponent(function(i,a){var s=n.getViewOfComponentModel(a);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(a,t,r,e);l&&l.update&&o.push(s)}else o.push(s)});var i=re();t.eachSeries(function(o){var a=n._chartsMap[o.__viewId];if(a.updateTransform){var s=a.updateTransform(o,t,r,e);s&&s.update&&i.set(o.uid,1)}else i.set(o.uid,1)}),Kh(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0,dirtyMap:i}),ep(n,t,r,e,i),tp(t,this._api)}},updateView:function(e){var t=this._model;t&&(xf.markUpdateMethod(e,"updateView"),Kh(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0}),$h(this,this._model,this._api,e),tp(t,this._api))},updateVisual:function(e){Wh.update.call(this,e)},updateLayout:function(e){Wh.update.call(this,e)}};function Uh(e){var t=e._model,n=e._scheduler;n.restorePipelines(t),n.prepareStageTasks(),Qh(e,"component",t,n),Qh(e,"chart",t,n),n.plan()}function Jh(e,t,n,r,o){var i=e._model;if(r){var a={};a[r+"Id"]=n[r+"Id"],a[r+"Index"]=n[r+"Index"],a[r+"Name"]=n[r+"Name"];var s={mainType:r,query:a};o&&(s.subType=o);var l=n.excludeSeriesId;null!=l&&(l=re(Uo(l))),i&&i.eachComponent(s,function(t){l&&null!=l.get(t.id)||u(e["series"===r?"_chartsMap":"_componentsMap"][t.__viewId])},e)}else Th(e._componentsViews.concat(e._chartsViews),u);function u(r){r&&r.__alive&&r[t]&&r[t](r.__model,i,e._api,n)}}function qh(e,t){var n=e._chartsMap,r=e._scheduler;t.eachSeries(function(e){r.updateStreamModes(e,n[e.__viewId])})}function Yh(e,t){var n=e.type,r=e.escapeConnect,o=ap[n],i=o.actionInfo,a=(i.update||"update").split(":"),s=a.pop();a=null!=a[0]&&Eh(a[0]),this[Dh]=!0;var l=[e],u=!1;e.batch&&(u=!0,l=R(e.batch,function(t){return(t=S(x({},t),e)).batch=null,t}));var c,f=[],h="highlight"===n||"downplay"===n;Th(l,function(e){(c=(c=o.action(e,this._model,this._api))||x({},e)).type=i.event||c.type,f.push(c),h?Jh(this,s,e,"series"):a&&Jh(this,s,e,a.main,a.sub)},this),"none"===s||h||a||(this[Nh]?(Uh(this),Wh.update.call(this,e),this[Nh]=!1):Wh[s].call(this,e)),c=u?{type:i.event||n,escapeConnect:r,batch:f}:f[0],this[Dh]=!1,!t&&this._messageCenter.trigger(c.type,c)}function Xh(e){for(var t=this._pendingActions;t.length;){var n=t.shift();Yh.call(this,n,e)}}function Zh(e){!e&&this.trigger("updated")}function Qh(e,t,n,o){for(var i="component"===t,a=i?e._componentsViews:e._chartsViews,s=i?e._componentsMap:e._chartsMap,l=e._zr,u=e._api,c=0;c<a.length;c++)a[c].__alive=!1;function f(e){var t="_ec_"+e.id+"_"+e.type,c=s[t];if(!c){var f=Eh(e.type),h=i?gf.getClass(f.main,f.sub):xf.getClass(f.sub);r&&Ph(h,f.sub+" does not exist."),(c=new h).init(n,u),s[t]=c,a.push(c),l.add(c.group)}e.__viewId=c.__id=t,c.__alive=!0,c.__model=e,c.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex},!i&&o.prepareView(c,e,n,u)}i?n.eachComponent(function(e,t){"series"!==e&&f(t)}):n.eachSeries(f);for(c=0;c<a.length;){var h=a[c];h.__alive?c++:(!i&&h.renderTask.dispose(),l.remove(h.group),h.dispose(n,u),a.splice(c,1),delete s[h.__id],h.__id=h.group.__ecComponentInfo=null)}}function Kh(e){e.clearColorPalette(),e.eachSeries(function(e){e.clearColorPalette()})}function $h(e,t,n,r){!function(e,t,n,r,o){Th(o||e._componentsViews,function(e){var o=e.__model;e.render(o,t,n,r),op(o,e)})}(e,t,n,r),Th(e._chartsViews,function(e){e.__alive=!1}),ep(e,t,n,r),Th(e._chartsViews,function(e){e.__alive||e.remove(t,n)})}function ep(e,t,n,o,i){var s,l=e._scheduler;t.eachSeries(function(t){var n=e._chartsMap[t.__viewId];n.__alive=!0;var u=n.renderTask;l.updatePayload(u,o),i&&i.get(t.uid)&&u.dirty(),s|=u.perform(l.getPerformArgs(u)),n.group.silent=!!t.get("silent"),op(t,n),function(e,t){var n=e.get("blendMode")||null;r&&!a.canvasSupported&&n&&"source-over"!==n&&console.warn("Only canvas support blendMode");t.group.traverse(function(e){e.isGroup||e.style.blend!==n&&e.setStyle("blend",n),e.eachPendingDisplayable&&e.eachPendingDisplayable(function(e){e.setStyle("blend",n)})})}(t,n)}),l.unfinished|=s,function(e,t){var n=0;e._zr.storage.traverse(function(e){n++}),n>t.get("hoverLayerThreshold")&&!a.node&&t.eachSeries(function(t){if(!t.preventUsingHoverLayer){var n=e._chartsMap[t.__viewId];n.__alive&&n.group.traverse(function(e){e.useHoverLayer=!0})}})}(e,t),Nf(e._zr.dom,t)}function tp(e,t){Th(cp,function(n){n(e,t)})}Vh.resize=function(e){if(r&&Ph(!this[Dh],"`resize` should not be called during main process."),this._disposed)rp(this.id);else{this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var n=t.resetOption("media"),o=e&&e.silent;this[Dh]=!0,n&&Uh(this),Wh.update.call(this),this[Dh]=!1,Xh.call(this,o),Zh.call(this,o)}}},Vh.showLoading=function(e,t){if(this._disposed)rp(this.id);else if(Ch(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),pp[e]){var n=pp[e](this._api,t),o=this._zr;this._loadingFX=n,o.add(n)}else r&&console.warn("Loading effects "+e+" not exists.")},Vh.hideLoading=function(){this._disposed?rp(this.id):(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},Vh.makeActionFromEvent=function(e){var t=x({},e);return t.type=sp[e.type],t},Vh.dispatchAction=function(e,t){this._disposed?rp(this.id):(Ch(t)||(t={silent:!!t}),ap[e.type]&&this._model&&(this[Dh]?this._pendingActions.push(e):(Yh.call(this,e,t.silent),t.flush?this._zr.flush(!0):!1!==t.flush&&a.browser.weChat&&this._throttledZrFlush(),Xh.call(this,t.silent),Zh.call(this,t.silent))))},Vh.appendData=function(e){if(this._disposed)rp(this.id);else{var t=e.seriesIndex,n=this.getModel().getSeriesByIndex(t);r&&Ph(e.data&&n),n.appendData(e),this._scheduler.unfinished=!0}},Vh.on=Fh("on",!1),Vh.off=Fh("off",!1),Vh.one=Fh("one",!1);var np=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function rp(e){r&&console.warn("Instance "+e+" has been disposed")}function op(e,t){var n=e.get("z"),r=e.get("zlevel");t.group.traverse(function(e){"group"!==e.type&&(null!=n&&(e.z=n),null!=r&&(e.zlevel=r))})}function ip(){this.eventInfo}Vh._initEvents=function(){Th(np,function(e){var t=function(t){var n,o=this.getModel(),i=t.target,a="globalout"===e;if(a)n={};else if(i&&null!=i.dataIndex){var s=i.dataModel||o.getSeriesByIndex(i.seriesIndex);n=s&&s.getDataParams(i.dataIndex,i.dataType,i)||{}}else i&&i.eventData&&(n=x({},i.eventData));if(n){var l=n.componentType,u=n.componentIndex;"markLine"!==l&&"markPoint"!==l&&"markArea"!==l||(l="series",u=n.seriesIndex);var c=l&&null!=u&&o.getComponent(l,u),f=c&&this["series"===c.mainType?"_chartsMap":"_componentsMap"][c.__viewId];r&&(a||c&&f||console.warn("model or view can not be found by params")),n.event=t,n.type=e,this._ecEventProcessor.eventInfo={targetEl:i,packedEvent:n,model:c,view:f},this.trigger(e,n)}};t.zrEventfulCallAtLast=!0,this._zr.on(e,t,this)},this),Th(sp,function(e,t){this._messageCenter.on(t,function(e){this.trigger(t,e)},this)},this)},Vh.isDisposed=function(){return this._disposed},Vh.clear=function(){this._disposed?rp(this.id):this.setOption({series:[]},!0)},Vh.dispose=function(){if(this._disposed)rp(this.id);else{this._disposed=!0,oi(this.getDom(),mp,"");var e=this._api,t=this._model;Th(this._componentsViews,function(n){n.dispose(t,e)}),Th(this._chartsViews,function(n){n.dispose(t,e)}),this._zr.dispose(),delete dp[this.id]}},E(zh,Ie),ip.prototype={constructor:ip,normalizeQuery:function(e){var t={},n={},r={};if(G(e)){var o=Eh(e);t.mainType=o.main||null,t.subType=o.sub||null}else{var i=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};M(e,function(e,o){for(var s=!1,l=0;l<i.length;l++){var u=i[l],c=o.lastIndexOf(u);if(c>0&&c===o.length-u.length){var f=o.slice(0,c);"data"!==f&&(t.mainType=f,t[u.toLowerCase()]=e,s=!0)}}a.hasOwnProperty(o)&&(n[o]=e,s=!0),s||(r[o]=e)})}return{cptQuery:t,dataQuery:n,otherQuery:r}},filter:function(e,t,n){var r=this.eventInfo;if(!r)return!0;var o=r.targetEl,i=r.packedEvent,a=r.model,s=r.view;if(!a||!s)return!0;var l=t.cptQuery,u=t.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,i,"name")&&c(u,i,"dataIndex")&&c(u,i,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,o,i));function c(e,t,n,r){return null==e[n]||t[r||n]===e[n]}},afterTrigger:function(){this.eventInfo=null}};var ap={},sp={},lp=[],up=[],cp=[],fp=[],hp={},pp={},dp={},yp={},vp=new Date-0,gp=new Date-0,mp="_echarts_instance_";function bp(e){yp[e]=!1}var wp=bp;function _p(e){return dp[function(e,t){return e.getAttribute?e.getAttribute(t):e[t]}(e,mp)]}function xp(e,t){hp[e]=t}function Sp(e){up.push(e)}function Op(e,t){Ep(lp,e,t,Rh)}function Pp(e,t,n){"function"==typeof t&&(n=t,t="");var r=Ch(e)?e.type:[e,e={event:t}][0];e.event=(e.event||r).toLowerCase(),t=e.event,Ph(Bh.test(r)&&Bh.test(t)),ap[r]||(ap[r]={action:n,actionInfo:e}),sp[t]=r}function Tp(e,t){gc.register(e,t)}function kp(e,t){Ep(fp,e,t,Ih,"layout")}function Cp(e,t){Ep(fp,e,t,jh,"visual")}function Ep(e,t,n,o,i){if((kh(t)||Ch(t))&&(n=t,t=o),r){if(isNaN(t)||null==t)throw new Error("Illegal priority");Th(e,function(e){Ph(e.__raw!==n)})}var a=Ff.wrapStageHandler(n,i);return a.__prio=t,a.__raw=n,e.push(a),a}function Ap(e,t){pp[e]=t}function Mp(e){return Fu.extend(e)}function Rp(e){return gf.extend(e)}function Ip(e){return uf.extend(e)}function jp(e){return xf.extend(e)}Cp(2e3,Lf),Sp(Fc),Op(900,function(e){var t=re();e.eachSeries(function(e){var n=e.get("stack");if(n){var r=t.get(n)||t.set(n,[]),o=e.getData(),i={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:e};if(!i.stackedDimension||!i.isStackedByIndex&&!i.stackedByDimension)return;r.length&&o.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(i)}}),t.each(Gc)}),Ap("default",function(e,t){S(t=t||{},{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Ln,r=new ys({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(r);var o=t.fontSize+" sans-serif",i=new ys({style:{fill:"none",text:t.text,font:o,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});if(n.add(i),t.showSpinner){var a=new _s({shape:{startAngle:-Bf/2,endAngle:-Bf/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001});a.animateShape(!0).when(1e3,{endAngle:3*Bf/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:3*Bf/2}).delay(300).start("circularInOut"),n.add(a)}return n.resize=function(){var n=br(t.text,o),s=t.showSpinner?t.spinnerRadius:0,l=(e.getWidth()-2*s-(t.showSpinner&&n?10:0)-n)/2-(t.showSpinner?0:n/2),u=e.getHeight()/2;t.showSpinner&&a.setShape({cx:l,cy:u}),i.setShape({x:l-s,y:u-s,width:2*s,height:2*s}),r.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},n.resize(),n}),Pp({type:"highlight",event:"highlight",update:"highlight"},ie),Pp({type:"downplay",event:"downplay",update:"downplay"},ie),xp("light",oh),xp("dark",ah);function Lp(e){return e}function Dp(e,t,n,r,o){this._old=e,this._new=t,this._oldKeyGetter=n||Lp,this._newKeyGetter=r||Lp,this.context=o}function Np(e,t,n,r,o){for(var i=0;i<e.length;i++){var a="_ec_"+o[r](e[i],i),s=t[a];null==s?(n.push(a),t[a]=i):(s.length||(t[a]=s=[s]),s.push(i))}}Dp.prototype={constructor:Dp,add:function(e){return this._add=e,this},update:function(e){return this._update=e,this},remove:function(e){return this._remove=e,this},execute:function(){var e=this._old,t=this._new,n={},r=[],o=[];for(Np(e,{},r,"_oldKeyGetter",this),Np(t,n,o,"_newKeyGetter",this),i=0;i<e.length;i++){if(null!=(s=n[a=r[i]]))(u=s.length)?(1===u&&(n[a]=null),s=s.shift()):n[a]=null,this._update&&this._update(s,i);else this._remove&&this._remove(i)}for(var i=0;i<o.length;i++){var a=o[i];if(n.hasOwnProperty(a)){var s;if(null==(s=n[a]))continue;if(s.length)for(var l=0,u=s.length;l<u;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var Bp=re(["tooltip","label","itemName","itemId","seriesName"]);function Fp(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Gp(e){return"category"===e?"ordinal":"time"===e?"time":"float"}function zp(e){null!=e&&x(this,e),this.otherDims={}}var Vp=z,Hp=-1,Wp="e\0\0",Up={float:"undefined"===("undefined"==typeof Float64Array?"undefined":s(Float64Array))?Array:Float64Array,int:"undefined"===("undefined"==typeof Int32Array?"undefined":s(Int32Array))?Array:Int32Array,ordinal:Array,number:Array,time:Array},Jp="undefined"===("undefined"==typeof Uint32Array?"undefined":s(Uint32Array))?Array:Uint32Array,qp="undefined"===("undefined"==typeof Int32Array?"undefined":s(Int32Array))?Array:Int32Array,Yp="undefined"===("undefined"==typeof Uint16Array?"undefined":s(Uint16Array))?Array:Uint16Array;function Xp(e){return e._rawCount>65535?Jp:Yp}var Zp=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],Qp=["_extent","_approximateExtent","_rawExtent"];function Kp(e,t){M(Zp.concat(t.__wrappedMethods||[]),function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e.__wrappedMethods=t.__wrappedMethods,M(Qp,function(n){e[n]=b(t[n])}),e._calculationInfo=x(t._calculationInfo)}var $p=function(e,t){e=e||["x","y"];for(var n={},o=[],i={},a=0;a<e.length;a++){var s=e[a];G(s)?s=new zp({name:s}):s instanceof zp||(s=new zp(s));var l=s.name;s.type=s.type||"float",s.coordDim||(s.coordDim=l,s.coordDimIndex=0),s.otherDims=s.otherDims||{},o.push(l),n[l]=s,s.index=a,s.createInvertedIndices&&(i[l]=[])}this.dimensions=o,this._dimensionInfos=n,this.hostModel=t,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(e){var t={},n=t.encode={},o=re(),i=[],a=[],s=t.userOutput={dimensionNames:e.dimensions.slice(),encode:{}};M(e.dimensions,function(t){var l,u=e.getDimensionInfo(t),c=u.coordDim;if(c){r&&Q(null==Bp.get(c));var f=u.coordDimIndex;Fp(n,c)[f]=t,u.isExtraCoord||(o.set(c,1),"ordinal"!==(l=u.type)&&"time"!==l&&(i[0]=t),Fp(s.encode,c)[f]=u.index),u.defaultTooltip&&a.push(t)}Bp.each(function(e,t){var r=Fp(n,t),o=u.otherDims[t];null!=o&&!1!==o&&(r[o]=u.name)})});var l=[],u={};o.each(function(e,t){var r=n[t];u[t]=r[0],l=l.concat(r)}),t.dataDimsOnCoord=l,t.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(i=c.slice());var f=n.tooltip;return f&&f.length?a=f.slice():a.length||(a=i.slice()),n.defaultedLabel=i,n.defaultedTooltip=a,t}(this),this._invertedIndicesMap=i,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},ed=$p.prototype;function td(e,t,n,r,o){var i=Up[t.type],a=r-1,s=t.name,l=e[s][a];if(l&&l.length<n){for(var u=new i(Math.min(o-a*n,n)),c=0;c<l.length;c++)u[c]=l[c];e[s][a]=u}for(var f=r*n;f<o;f+=n)e[s].push(new i(Math.min(o-f,n)))}function nd(e){var t=e._invertedIndicesMap;M(t,function(n,r){var o=e._dimensionInfos[r].ordinalMeta;if(o){n=t[r]=new qp(o.categories.length);for(var i=0;i<n.length;i++)n[i]=Hp;for(i=0;i<e._count;i++)n[e.get(r,i)]=i}})}function rd(e,t,n){var r;if(null!=t){var o=e._chunkSize,i=Math.floor(n/o),a=n%o,s=e.dimensions[t],l=e._storage[s][i];if(l){r=l[a];var u=e._dimensionInfos[s].ordinalMeta;u&&u.categories.length&&(r=u.categories[r])}}return r}function od(e){return e}function id(e){return e<this._count&&e>=0?this._indices[e]:-1}function ad(e,t){var n=e._idList[t];return null==n&&(n=rd(e,e._idDimIdx,t)),null==n&&(n=Wp+t),n}function sd(e){return B(e)||(e=[e]),e}function ld(e,t){for(var n=0;n<t.length;n++)e._dimensionInfos[t[n]]||console.error("Unkown dimension "+t[n])}function ud(e,t){var n=e.dimensions,r=new $p(R(n,e.getDimensionInfo,e),e.hostModel);Kp(r,e);for(var o=r._storage={},i=e._storage,a=0;a<n.length;a++){var s=n[a];i[s]&&(k(t,s)>=0?(o[s]=cd(i[s]),r._rawExtent[s]=fd(),r._extent[s]=null):o[s]=i[s])}return r}function cd(e){for(var t,n,r=new Array(e.length),o=0;o<e.length;o++)r[o]=(t=e[o],n=void 0,(n=t.constructor)===Array?t.slice():new n(t));return r}function fd(){return[1/0,-1/0]}ed.type="list",ed.hasItemOption=!0,ed.getDimension=function(e){return"number"!=typeof e&&(isNaN(e)||this._dimensionInfos.hasOwnProperty(e))||(e=this.dimensions[e]),e},ed.getDimensionInfo=function(e){return this._dimensionInfos[this.getDimension(e)]},ed.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},ed.mapDimension=function(e,t){var n=this._dimensionsSummary;if(null==t)return n.encodeFirstDimNotExtra[e];var r=n.encode[e];return!0===t?(r||[]).slice():r&&r[t]},ed.initData=function(e,t,n){var o=Ku.isInstance(e)||A(e);if(o&&(e=new zc(e,this.dimensions.length)),r&&!o&&("function"!=typeof e.getItem||"function"!=typeof e.count))throw new Error("Inavlid data provider.");this._rawData=e,this._storage={},this._indices=null,this._nameList=t||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=Xc[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=Xc.arrayRows,this._rawExtent={},this._initDataFromProvider(0,e.count()),e.pure&&(this.hasItemOption=!1)},ed.getProvider=function(){return this._rawData},ed.appendData=function(e){r&&Q(!this._indices,"appendData can only be called on raw data.");var t=this._rawData,n=this.count();t.appendData(e);var o=t.count();t.persistent||(o+=n),this._initDataFromProvider(n,o)},ed.appendValues=function(e,t){for(var n=this._chunkSize,r=this._storage,o=this.dimensions,i=o.length,a=this._rawExtent,s=this.count(),l=s+Math.max(e.length,t?t.length:0),u=this._chunkCount,c=0;c<i;c++){a[g=o[c]]||(a[g]=fd()),r[g]||(r[g]=[]),td(r,this._dimensionInfos[g],n,u,l),this._chunkCount=r[g].length}for(var f=new Array(i),h=s;h<l;h++){for(var p=h-s,d=Math.floor(h/n),y=h%n,v=0;v<i;v++){var g=o[v],m=this._dimValueGetterArrayRows(e[p]||f,g,p,v);r[g][d][y]=m;var b=a[g];m<b[0]&&(b[0]=m),m>b[1]&&(b[1]=m)}t&&(this._nameList[h]=t[p])}this._rawCount=this._count=l,this._extent={},nd(this)},ed._initDataFromProvider=function(e,t){if(!(e>=t)){for(var n,r=this._chunkSize,o=this._rawData,i=this._storage,a=this.dimensions,s=a.length,l=this._dimensionInfos,u=this._nameList,c=this._idList,f=this._rawExtent,h=this._nameRepeatCount={},p=this._chunkCount,d=0;d<s;d++){f[_=a[d]]||(f[_]=fd());var y=l[_];0===y.otherDims.itemName&&(n=this._nameDimIdx=d),0===y.otherDims.itemId&&(this._idDimIdx=d),i[_]||(i[_]=[]),td(i,y,r,p,t),this._chunkCount=i[_].length}for(var v=new Array(s),g=e;g<t;g++){v=o.getItem(g,v);for(var m=Math.floor(g/r),b=g%r,w=0;w<s;w++){var _,x=i[_=a[w]][m],S=this._dimValueGetter(v,_,g,w);x[b]=S;var O=f[_];S<O[0]&&(O[0]=S),S>O[1]&&(O[1]=S)}if(!o.pure){var P=u[g];if(v&&null==P)if(null!=v.name)u[g]=P=v.name;else if(null!=n){var T=a[n],k=i[T][m];if(k){P=k[b];var C=l[T].ordinalMeta;C&&C.categories.length&&(P=C.categories[P])}}var E=null==v?null:v.id;null==E&&null!=P&&(h[P]=h[P]||0,E=P,h[P]>0&&(E+="__ec__"+h[P]),h[P]++),null!=E&&(c[g]=E)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=t,this._extent={},nd(this)}},ed.count=function(){return this._count},ed.getIndices=function(){var e=this._indices;if(e){var t=e.constructor,n=this._count;if(t===Array){o=new t(n);for(var r=0;r<n;r++)o[r]=e[r]}else o=new t(e.buffer,0,n)}else{var o=new(t=Xp(this))(this.count());for(r=0;r<o.length;r++)o[r]=r}return o},ed.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var n=this._storage;if(!n[e])return NaN;t=this.getRawIndex(t);var r=Math.floor(t/this._chunkSize),o=t%this._chunkSize;return n[e][r][o]},ed.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var n=this._storage[e];if(!n)return NaN;var r=Math.floor(t/this._chunkSize),o=t%this._chunkSize;return n[r][o]},ed._getFast=function(e,t){var n=Math.floor(t/this._chunkSize),r=t%this._chunkSize;return this._storage[e][n][r]},ed.getValues=function(e,t){var n=[];B(e)||(t=e,e=this.dimensions);for(var r=0,o=e.length;r<o;r++)n.push(this.get(e[r],t));return n},ed.hasValue=function(e){for(var t=this._dimensionsSummary.dataDimsOnCoord,n=0,r=t.length;n<r;n++)if(isNaN(this.get(t[n],e)))return!1;return!0},ed.getDataExtent=function(e){e=this.getDimension(e);var t=this._storage[e],n=fd();if(!t)return n;var r,o=this.count();if(!this._indices)return this._rawExtent[e].slice();if(r=this._extent[e])return r.slice();for(var i=(r=n)[0],a=r[1],s=0;s<o;s++){var l=this._getFast(e,this.getRawIndex(s));l<i&&(i=l),l>a&&(a=l)}return r=[i,a],this._extent[e]=r,r},ed.getApproximateExtent=function(e){return e=this.getDimension(e),this._approximateExtent[e]||this.getDataExtent(e)},ed.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},ed.getCalculationInfo=function(e){return this._calculationInfo[e]},ed.setCalculationInfo=function(e,t){Vp(e)?x(this._calculationInfo,e):this._calculationInfo[e]=t},ed.getSum=function(e){var t=0;if(this._storage[e])for(var n=0,r=this.count();n<r;n++){var o=this.get(e,n);isNaN(o)||(t+=o)}return t},ed.getMedian=function(e){var t=[];this.each(e,function(e,n){isNaN(e)||t.push(e)});var n=[].concat(t).sort(function(e,t){return e-t}),r=this.count();return 0===r?0:r%2==1?n[(r-1)/2]:(n[r/2]+n[r/2-1])/2},ed.rawIndexOf=function(e,t){var n=e&&this._invertedIndicesMap[e];if(r&&!n)throw new Error("Do not supported yet");var o=n[t];return null==o||isNaN(o)?Hp:o},ed.indexOfName=function(e){for(var t=0,n=this.count();t<n;t++)if(this.getName(t)===e)return t;return-1},ed.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,n=t[e];if(null!=n&&n<this._count&&n===e)return e;for(var r=0,o=this._count-1;r<=o;){var i=(r+o)/2|0;if(t[i]<e)r=i+1;else{if(!(t[i]>e))return i;o=i-1}}return-1},ed.indicesOfNearest=function(e,t,n){var r=[];if(!this._storage[e])return r;null==n&&(n=1/0);for(var o=1/0,i=-1,a=0,s=0,l=this.count();s<l;s++){var u=t-this.get(e,s),c=Math.abs(u);c<=n&&((c<o||c===o&&u>=0&&i<0)&&(o=c,i=u,a=0),u===i&&(r[a++]=s))}return r.length=a,r},ed.getRawIndex=od,ed.getRawDataItem=function(e){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(e));for(var t=[],n=0;n<this.dimensions.length;n++){var r=this.dimensions[n];t.push(this.get(r,e))}return t},ed.getName=function(e){var t=this.getRawIndex(e);return this._nameList[t]||rd(this,this._nameDimIdx,t)||""},ed.getId=function(e){return ad(this,this.getRawIndex(e))},ed.each=function(e,t,n,o){if(this._count){"function"==typeof e&&(o=n,n=t,t=e,e=[]),n=n||o||this,e=R(sd(e),this.getDimension,this),r&&ld(this,e);for(var i=e.length,a=0;a<this.count();a++)switch(i){case 0:t.call(n,a);break;case 1:t.call(n,this.get(e[0],a),a);break;case 2:t.call(n,this.get(e[0],a),this.get(e[1],a),a);break;default:for(var s=0,l=[];s<i;s++)l[s]=this.get(e[s],a);l[s]=a,t.apply(n,l)}}},ed.filterSelf=function(e,t,n,o){if(this._count){"function"==typeof e&&(o=n,n=t,t=e,e=[]),n=n||o||this,e=R(sd(e),this.getDimension,this),r&&ld(this,e);for(var i=this.count(),a=new(Xp(this))(i),s=[],l=e.length,u=0,c=e[0],f=0;f<i;f++){var h,p=this.getRawIndex(f);if(0===l)h=t.call(n,f);else if(1===l){var d=this._getFast(c,p);h=t.call(n,d,f)}else{for(var y=0;y<l;y++)s[y]=this._getFast(c,p);s[y]=f,h=t.apply(n,s)}h&&(a[u++]=p)}return u<i&&(this._indices=a),this._count=u,this._extent={},this.getRawIndex=this._indices?id:od,this}},ed.selectRange=function(e){if(this._count){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);r&&ld(this,t);var o=t.length;if(o){var i=this.count(),a=new(Xp(this))(i),s=0,l=t[0],u=e[l][0],c=e[l][1],f=!1;if(!this._indices){var h=0;if(1===o){for(var p=this._storage[t[0]],d=0;d<this._chunkCount;d++)for(var y=p[d],v=Math.min(this._count-d*this._chunkSize,this._chunkSize),g=0;g<v;g++){((x=y[g])>=u&&x<=c||isNaN(x))&&(a[s++]=h),h++}f=!0}else if(2===o){p=this._storage[l];var m=this._storage[t[1]],b=e[t[1]][0],w=e[t[1]][1];for(d=0;d<this._chunkCount;d++){y=p[d];var _=m[d];for(v=Math.min(this._count-d*this._chunkSize,this._chunkSize),g=0;g<v;g++){var x=y[g],S=_[g];(x>=u&&x<=c||isNaN(x))&&(S>=b&&S<=w||isNaN(S))&&(a[s++]=h),h++}}f=!0}}if(!f)if(1===o)for(g=0;g<i;g++){var O=this.getRawIndex(g);((x=this._getFast(l,O))>=u&&x<=c||isNaN(x))&&(a[s++]=O)}else for(g=0;g<i;g++){var P=!0;for(O=this.getRawIndex(g),d=0;d<o;d++){var T=t[d];((x=this._getFast(n,O))<e[T][0]||x>e[T][1])&&(P=!1)}P&&(a[s++]=this.getRawIndex(g))}return s<i&&(this._indices=a),this._count=s,this._extent={},this.getRawIndex=this._indices?id:od,this}}},ed.mapArray=function(e,t,n,r){"function"==typeof e&&(r=n,n=t,t=e,e=[]),n=n||r||this;var o=[];return this.each(e,function(){o.push(t&&t.apply(this,arguments))},n),o},ed.map=function(e,t,n,o){n=n||o||this,e=R(sd(e),this.getDimension,this),r&&ld(this,e);var i=ud(this,e);i._indices=this._indices,i.getRawIndex=i._indices?id:od;for(var a=i._storage,l=[],u=this._chunkSize,c=e.length,f=this.count(),h=[],p=i._rawExtent,d=0;d<f;d++){for(var y=0;y<c;y++)h[y]=this.get(e[y],d);h[c]=d;var v=t&&t.apply(n,h);if(null!=v){"object"!==s(v)&&(l[0]=v,v=l);for(var g=this.getRawIndex(d),m=Math.floor(g/u),b=g%u,w=0;w<v.length;w++){var _=e[w],x=v[w],S=p[_],O=a[_];O&&(O[m][b]=x),x<S[0]&&(S[0]=x),x>S[1]&&(S[1]=x)}}}return i},ed.downSample=function(e,t,n,r){for(var o=ud(this,[e]),i=o._storage,a=[],s=Math.floor(1/t),l=i[e],u=this.count(),c=this._chunkSize,f=o._rawExtent[e],h=new(Xp(this))(u),p=0,d=0;d<u;d+=s){s>u-d&&(s=u-d,a.length=s);for(var y=0;y<s;y++){var v=this.getRawIndex(d+y),g=Math.floor(v/c),m=v%c;a[y]=l[g][m]}var b=n(a),w=this.getRawIndex(Math.min(d+r(a,b)||0,u-1)),_=w%c;l[Math.floor(w/c)][_]=b,b<f[0]&&(f[0]=b),b>f[1]&&(f[1]=b),h[p++]=w}return o._count=p,o._indices=h,o.getRawIndex=id,o},ed.getItemModel=function(e){var t=this.hostModel;return new Bl(this.getRawDataItem(e),t,t&&t.ecModel)},ed.diff=function(e){var t=this;return new Dp(e?e.getIndices():[],this.getIndices(),function(t){return ad(e,t)},function(e){return ad(t,e)})},ed.getVisual=function(e){var t=this._visual;return t&&t[e]},ed.setVisual=function(e,t){if(Vp(e))for(var n in e)e.hasOwnProperty(n)&&this.setVisual(n,e[n]);else this._visual=this._visual||{},this._visual[e]=t},ed.setLayout=function(e,t){if(Vp(e))for(var n in e)e.hasOwnProperty(n)&&this.setLayout(n,e[n]);else this._layout[e]=t},ed.getLayout=function(e){return this._layout[e]},ed.getItemLayout=function(e){return this._itemLayouts[e]},ed.setItemLayout=function(e,t,n){this._itemLayouts[e]=n?x(this._itemLayouts[e]||{},t):t},ed.clearItemLayouts=function(){this._itemLayouts.length=0},ed.getItemVisual=function(e,t,n){var r=this._itemVisuals[e],o=r&&r[t];return null!=o||n?o:this.getVisual(t)},ed.setItemVisual=function(e,t,n){var r=this._itemVisuals[e]||{},o=this.hasItemVisual;if(this._itemVisuals[e]=r,Vp(t))for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i],o[i]=!0);else r[t]=n,o[t]=!0},ed.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var hd=function(e){e.seriesIndex=this.seriesIndex,e.dataIndex=this.dataIndex,e.dataType=this.dataType};function pd(e,t,n){Ku.isInstance(t)||(t=Ku.seriesDataToSource(t)),n=n||{},e=(e||[]).slice();for(var r=(n.dimsDef||[]).slice(),o=re(),i=re(),a=[],s=function(e,t,n,r){var o=Math.max(e.dimensionsDetectCount||1,t.length,n.length,r||0);return M(t,function(e){var t=e.dimsDef;t&&(o=Math.max(o,t.length))}),o}(t,e,r,n.dimCount),l=0;l<s;l++){var u=r[l]=x({},z(r[l])?r[l]:{name:r[l]}),c=u.name,f=a[l]=new zp;null!=c&&null==o.get(c)&&(f.name=f.displayName=c,o.set(c,l)),null!=u.type&&(f.type=u.type),null!=u.displayName&&(f.displayName=u.displayName)}var h=n.encodeDef;!h&&n.encodeDefaulter&&(h=n.encodeDefaulter(t,s)),(h=re(h)).each(function(e,t){if(1===(e=Uo(e).slice()).length&&!G(e[0])&&e[0]<0)h.set(t,!1);else{var n=h.set(t,[]);M(e,function(e,r){G(e)&&(e=o.get(e)),null!=e&&e<s&&(n[r]=e,d(a[e],t,r))})}});var p=0;function d(e,t,n){null!=Bp.get(t)?e.otherDims[t]=n:(e.coordDim=t,e.coordDimIndex=n,i.set(t,!0))}M(e,function(e,t){var n,r,o;if(G(e))n=e,e={};else{n=e.name;var i=e.ordinalMeta;e.ordinalMeta=null,(e=b(e)).ordinalMeta=i,r=e.dimsDef,o=e.otherDims,e.name=e.coordDim=e.coordDimIndex=e.dimsDef=e.otherDims=null}if(!1!==(s=h.get(n))){var s;if(!(s=Uo(s)).length)for(var l=0;l<(r&&r.length||1);l++){for(;p<a.length&&null!=a[p].coordDim;)p++;p<a.length&&s.push(p++)}M(s,function(t,i){var s=a[t];if(d(S(s,e),n,i),null==s.name&&r){var l=r[i];!z(l)&&(l={name:l}),s.name=s.displayName=l.name,s.defaultTooltip=l.defaultTooltip}o&&S(s.otherDims,o)})}});var y=n.generateCoord,v=n.generateCoordCount,g=null!=v;v=y?v||1:0;for(var m=y||"value",w=0;w<s;w++){null==(f=a[w]=a[w]||new zp).coordDim&&(f.coordDim=dd(m,i,g),f.coordDimIndex=0,(!y||v<=0)&&(f.isExtraCoord=!0),v--),null==f.name&&(f.name=dd(f.coordDim,o)),null!=f.type||sc(t,w,f.name)!==$u.Must&&(!f.isExtraCoord||null==f.otherDims.itemName&&null==f.otherDims.seriesName)||(f.type="ordinal")}return a}function dd(e,t,n){if(n||null!=t.get(e)){for(var r=0;null!=t.get(e+r);)r++;e+=r}return t.set(e,!0),e}ed.setItemGraphicEl=function(e,t){var n=this.hostModel;t&&(t.dataIndex=e,t.dataType=this.dataType,t.seriesIndex=n&&n.seriesIndex,"group"===t.type&&t.traverse(hd,t)),this._graphicEls[e]=t},ed.getItemGraphicEl=function(e){return this._graphicEls[e]},ed.eachItemGraphicEl=function(e,t){M(this._graphicEls,function(n,r){n&&e&&e.call(t,n,r)})},ed.cloneShallow=function(e){if(!e){var t=R(this.dimensions,this.getDimensionInfo,this);e=new $p(t,this.hostModel)}if(e._storage=this._storage,Kp(e,this),this._indices){var n=this._indices.constructor;e._indices=new n(this._indices)}else e._indices=null;return e.getRawIndex=e._indices?id:od,e},ed.wrapMethod=function(e,t){var n=this[e];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var e=n.apply(this,arguments);return t.apply(this,[e].concat(X(arguments)))})},ed.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],ed.CHANGABLE_METHODS=["filterSelf","selectRange"];var yd=function(e,t){return pd((t=t||{}).coordDimensions||[],e,{dimsDef:t.dimensionsDefine||e.dimensionsDefine,encodeDef:t.encodeDefine||e.encodeDefine,dimCount:t.dimensionsCount,encodeDefaulter:t.encodeDefaulter,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})};function vd(e){var t=e.get("coordinateSystem"),n=new function(e){this.coordSysName=e,this.coordSysDims=[],this.axisMap=re(),this.categoryAxisMap=re(),this.firstCategoryDimIndex=null}(t),r=gd[t];if(r)return r(e,n,n.axisMap,n.categoryAxisMap),n}var gd={cartesian2d:function(e,t,n,o){var i=e.getReferringComponents("xAxis")[0],a=e.getReferringComponents("yAxis")[0];if(r){if(!i)throw new Error('xAxis "'+J(e.get("xAxisIndex"),e.get("xAxisId"),0)+'" not found');if(!a)throw new Error('yAxis "'+J(e.get("xAxisIndex"),e.get("yAxisId"),0)+'" not found')}t.coordSysDims=["x","y"],n.set("x",i),n.set("y",a),md(i)&&(o.set("x",i),t.firstCategoryDimIndex=0),md(a)&&(o.set("y",a),t.firstCategoryDimIndex,t.firstCategoryDimIndex=1)},singleAxis:function(e,t,n,o){var i=e.getReferringComponents("singleAxis")[0];if(r&&!i)throw new Error("singleAxis should be specified.");t.coordSysDims=["single"],n.set("single",i),md(i)&&(o.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,n,o){var i=e.getReferringComponents("polar")[0],a=i.findAxisModel("radiusAxis"),s=i.findAxisModel("angleAxis");if(r){if(!s)throw new Error("angleAxis option not found");if(!a)throw new Error("radiusAxis option not found")}t.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",s),md(a)&&(o.set("radius",a),t.firstCategoryDimIndex=0),md(s)&&(o.set("angle",s),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,r){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,r){var o=e.ecModel,i=o.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=i.dimensions.slice();M(i.parallelAxisIndex,function(e,i){var s=o.getComponent("parallelAxis",e),l=a[i];n.set(l,s),md(s)&&null==t.firstCategoryDimIndex&&(r.set(l,s),t.firstCategoryDimIndex=i)})}};function md(e){return"category"===e.get("type")}function bd(e,t,n){var r,o,i,a,s=(n=n||{}).byIndex,l=n.stackedCoordDimension,u=!(!e||!e.get("stack"));if(M(t,function(e,n){G(e)&&(t[n]=e={name:e}),u&&!e.isExtraCoord&&(s||r||!e.ordinalMeta||(r=e),o||"ordinal"===e.type||"time"===e.type||l&&l!==e.coordDim||(o=e))}),!o||s||r||(s=!0),o){i="__\0ecstackresult",a="__\0ecstackedover",r&&(r.createInvertedIndices=!0);var c=o.coordDim,f=o.type,h=0;M(t,function(e){e.coordDim===c&&h++}),t.push({name:i,coordDim:c,coordDimIndex:h,type:f,isExtraCoord:!0,isCalculationCoord:!0}),h++,t.push({name:a,coordDim:a,coordDimIndex:h,type:f,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:o&&o.name,stackedByDimension:r&&r.name,isStackedByIndex:s,stackedOverDimension:a,stackResultDimension:i}}function wd(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function _d(e,t){return wd(e,t)?e.getCalculationInfo("stackResultDimension"):t}function xd(e,t,n){n=n||{},Ku.isInstance(e)||(e=Ku.seriesDataToSource(e));var r,o=t.get("coordinateSystem"),i=gc.get(o),a=vd(t);a&&(r=R(a.coordSysDims,function(e){var t={name:e},n=a.axisMap.get(e);if(n){var r=n.get("type");t.type=Gp(r)}return t})),r||(r=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]);var s,l,u=yd(e,{coordDimensions:r,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?N(oc,r,t):null});a&&M(u,function(e,t){var n=e.coordDim,r=a.categoryAxisMap.get(n);r&&(null==s&&(s=t),e.ordinalMeta=r.getOrdinalMeta()),null!=e.otherDims.itemName&&(l=!0)}),l||null==s||(u[s].otherDims.itemName=0);var c=bd(t,u),f=new $p(u,t);f.setCalculationInfo(c);var h=null!=s&&function(e){if(e.sourceFormat===Wu){var t=function(e){var t=0;for(;t<e.length&&null==e[t];)t++;return e[t]}(e.data||[]);return null!=t&&!B(Yo(t))}}(e)?function(e,t,n,r){return r===s?n:this.defaultDimValueGetter(e,t,n,r)}:null;return f.hasItemOption=!1,f.initData(e,null,h),f}function Sd(e){this._setting=e||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function Od(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this._map}Sd.prototype.parse=function(e){return e},Sd.prototype.getSetting=function(e){return this._setting[e]},Sd.prototype.contain=function(e){var t=this._extent;return e>=t[0]&&e<=t[1]},Sd.prototype.normalize=function(e){var t=this._extent;return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])},Sd.prototype.scale=function(e){var t=this._extent;return e*(t[1]-t[0])+t[0]},Sd.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},Sd.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},Sd.prototype.getExtent=function(){return this._extent.slice()},Sd.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(t)||(n[1]=t)},Sd.prototype.isBlank=function(){return this._isBlank},Sd.prototype.setBlank=function(e){this._isBlank=e},Sd.prototype.getLabel=null,ci(Sd),yi(Sd,{registerWhenExtend:!0}),Od.createByAxisModel=function(e){var t=e.option,n=t.data,r=n&&R(n,kd);return new Od({categories:r,needCollect:!r,deduplication:!1!==t.dedplication})};var Pd=Od.prototype;function Td(e){return e._map||(e._map=re(e.categories))}function kd(e){return z(e)&&null!=e.value?e.value:e+""}Pd.getOrdinal=function(e){return Td(this).get(e)},Pd.parseAndCollect=function(e){var t,n=this._needCollect;if("string"!=typeof e&&!n)return e;if(n&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var r=Td(this);return null==(t=r.get(e))&&(n?(t=this.categories.length,this.categories[t]=e,r.set(e,t)):t=NaN),t};var Cd=Sd.prototype,Ed=Sd.extend({type:"ordinal",init:function(e,t){e&&!B(e)||(e=new Od({categories:e})),this._ordinalMeta=e,this._extent=t||[0,e.categories.length-1]},parse:function(e){return"string"==typeof e?this._ordinalMeta.getOrdinal(e):Math.round(e)},contain:function(e){return e=this.parse(e),Cd.contain.call(this,e)&&null!=this._ordinalMeta.categories[e]},normalize:function(e){return Cd.normalize.call(this,this.parse(e))},scale:function(e){return Math.round(Cd.scale.call(this,e))},getTicks:function(){for(var e=[],t=this._extent,n=t[0];n<=t[1];)e.push(n),n++;return e},getLabel:function(e){if(!this.isBlank())return this._ordinalMeta.categories[e]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:ie,niceExtent:ie});Ed.create=function(){return new Ed};var Ad=Jl;function Md(e){return Xl(e)+2}function Rd(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function Id(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),Rd(e,0,t),Rd(e,1,t),e[0]>e[1]&&(e[0]=e[1])}var jd=Jl,Ld=Sd.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(e,t){var n=this._extent;isNaN(e)||(n[0]=parseFloat(e)),isNaN(t)||(n[1]=parseFloat(t))},unionExtent:function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),Ld.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){return this._interval},setInterval:function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=Md(e)},getTicks:function(e){var t=this._interval,n=this._extent,r=this._niceExtent,o=this._intervalPrecision,i=[];if(!t)return i;n[0]<r[0]&&(e?i.push(jd(r[0]-t,o)):i.push(n[0]));for(var a=r[0];a<=r[1]&&(i.push(a),(a=jd(a+t,o))!==i[i.length-1]);)if(i.length>1e4)return[];var s=i.length?i[i.length-1]:r[1];return n[1]>s&&(e?i.push(jd(s+t,o)):i.push(n[1])),i},getMinorTicks:function(e){for(var t=this.getTicks(!0),n=[],r=this.getExtent(),o=1;o<t.length;o++){for(var i=t[o],a=t[o-1],s=0,l=[],u=(i-a)/e;s<e-1;){var c=Jl(a+(s+1)*u);c>r[0]&&c<r[1]&&l.push(c),s++}n.push(l)}return n},getLabel:function(e,t){if(null==e)return"";var n=t&&t.precision;return null==n?n=Xl(e)||0:"auto"===n&&(n=this._intervalPrecision),uu(e=jd(e,n,!0))},niceTicks:function(e,t,n){e=e||5;var r=this._extent,o=r[1]-r[0];if(isFinite(o)){o<0&&(o=-o,r.reverse());var i=function(e,t,n,r){var o={},i=e[1]-e[0],a=o.interval=iu(i/t,!0);null!=n&&a<n&&(a=o.interval=n),null!=r&&a>r&&(a=o.interval=r);var s=o.intervalPrecision=Md(a);return Id(o.niceTickExtent=[Ad(Math.ceil(e[0]/a)*a,s),Ad(Math.floor(e[1]/a)*a,s)],e),o}(r,e,t,n);this._intervalPrecision=i.intervalPrecision,this._interval=i.interval,this._niceExtent=i.niceTickExtent}},niceExtent:function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var n=t[0];e.fixMax?t[0]-=n/2:(t[1]+=n/2,t[0]-=n/2)}else t[1]=1;var r=t[1]-t[0];isFinite(r)||(t[0]=0,t[1]=1),this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var o=this._interval;e.fixMin||(t[0]=jd(Math.floor(t[0]/o)*o)),e.fixMax||(t[1]=jd(Math.ceil(t[1]/o)*o))}});Ld.create=function(){return new Ld};var Dd="__ec_stack_",Nd="undefined"!=typeof Float32Array?Float32Array:Array;function Bd(e){return e.get("stack")||Dd+e.seriesIndex}function Fd(e){return e.dim+e.index}function Gd(e,t){var n=[];return t.eachSeriesByType(e,function(e){Jd(e)&&!qd(e)&&n.push(e)}),n}function zd(e){var t=function(e){var t={};M(e,function(e){var n=e.coordinateSystem.getBaseAxis();if("time"===n.type||"value"===n.type)for(var r=e.getData(),o=n.dim+"_"+n.index,i=r.mapDimension(n.dim),a=0,s=r.count();a<s;++a){var l=r.get(i,a);t[o]?t[o].push(l):t[o]=[l]}});var n=[];for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(o){o.sort(function(e,t){return e-t});for(var i=null,a=1;a<o.length;++a){var s=o[a]-o[a-1];s>0&&(i=null===i?s:Math.min(i,s))}n[r]=i}}return n}(e),n=[];return M(e,function(e){var r,o=e.coordinateSystem.getBaseAxis(),i=o.getExtent();if("category"===o.type)r=o.getBandWidth();else if("value"===o.type||"time"===o.type){var a=o.dim+"_"+o.index,s=t[a],l=Math.abs(i[1]-i[0]),u=o.scale.getExtent(),c=Math.abs(u[1]-u[0]);r=s?l/c*s:l}else{var f=e.getData();r=Math.abs(i[1]-i[0])/f.count()}var h=Ul(e.get("barWidth"),r),p=Ul(e.get("barMaxWidth"),r),d=Ul(e.get("barMinWidth")||1,r),y=e.get("barGap"),v=e.get("barCategoryGap");n.push({bandWidth:r,barWidth:h,barMaxWidth:p,barMinWidth:d,barGap:y,barCategoryGap:v,axisKey:Fd(o),stackId:Bd(e)})}),Vd(n)}function Vd(e){var t={};M(e,function(e,n){var r=e.axisKey,o=e.bandWidth,i=t[r]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},a=i.stacks;t[r]=i;var s=e.stackId;a[s]||i.autoWidthCount++,a[s]=a[s]||{width:0,maxWidth:0};var l=e.barWidth;l&&!a[s].width&&(a[s].width=l,l=Math.min(i.remainedWidth,l),i.remainedWidth-=l);var u=e.barMaxWidth;u&&(a[s].maxWidth=u);var c=e.barMinWidth;c&&(a[s].minWidth=c);var f=e.barGap;null!=f&&(i.gap=f);var h=e.barCategoryGap;null!=h&&(i.categoryGap=h)});var n={};return M(t,function(e,t){n[t]={};var r=e.stacks,o=e.bandWidth,i=Ul(e.categoryGap,o),a=Ul(e.gap,1),s=e.remainedWidth,l=e.autoWidthCount,u=(s-i)/(l+(l-1)*a);u=Math.max(u,0),M(r,function(e){var t=e.maxWidth,n=e.minWidth;if(e.width){r=e.width;t&&(r=Math.min(r,t)),n&&(r=Math.max(r,n)),e.width=r,s-=r+a*r,l--}else{var r=u;t&&t<r&&(r=Math.min(t,s)),n&&n>r&&(r=n),r!==u&&(e.width=r,s-=r+a*r,l--)}}),u=(s-i)/(l+(l-1)*a),u=Math.max(u,0);var c,f=0;M(r,function(e,t){e.width||(e.width=u),c=e,f+=e.width*(1+a)}),c&&(f-=c.width*a);var h=-f/2;M(r,function(e,r){n[t][r]=n[t][r]||{bandWidth:o,offset:h,width:e.width},h+=e.width*(1+a)})}),n}function Hd(e,t,n){if(e&&t){var r=e[Fd(t)];return null!=r&&null!=n&&(r=r[Bd(n)]),r}}function Wd(e,t){var n=Gd(e,t),r=zd(n),o={};M(n,function(e){var t=e.getData(),n=e.coordinateSystem,i=n.getBaseAxis(),a=Bd(e),s=r[Fd(i)][a],l=s.offset,u=s.width,c=n.getOtherAxis(i),f=e.get("barMinHeight")||0;o[a]=o[a]||[],t.setLayout({bandWidth:s.bandWidth,offset:l,size:u});for(var h=t.mapDimension(c.dim),p=t.mapDimension(i.dim),d=wd(t,h),y=c.isHorizontal(),v=Yd(i,c,d),g=0,m=t.count();g<m;g++){var b,w,_,x,S,O=t.get(h,g),P=t.get(p,g),T=O>=0?"p":"n",k=v;if(d&&(o[a][P]||(o[a][P]={p:v,n:v}),k=o[a][P][T]),y)b=k,w=(S=n.dataToPoint([O,P]))[1]+l,_=S[0]-v,x=u,Math.abs(_)<f&&(_=(_<0?-1:1)*f),isNaN(_)||d&&(o[a][P][T]+=_);else b=(S=n.dataToPoint([P,O]))[0]+l,w=k,_=u,x=S[1]-v,Math.abs(x)<f&&(x=(x<=0?-1:1)*f),isNaN(x)||d&&(o[a][P][T]+=x);t.setItemLayout(g,{x:b,y:w,width:_,height:x})}},this)}var Ud={seriesType:"bar",plan:bf(),reset:function(e){if(Jd(e)&&qd(e)){var t=e.getData(),n=e.coordinateSystem,r=n.grid.getRect(),o=n.getBaseAxis(),i=n.getOtherAxis(o),a=t.mapDimension(i.dim),s=t.mapDimension(o.dim),l=i.isHorizontal(),u=l?0:1,c=Hd(zd([e]),o,e).width;return c>.5||(c=.5),{progress:function(e,t){var f,h=e.count,p=new Nd(2*h),d=new Nd(2*h),y=new Nd(h),v=[],g=[],m=0,b=0;for(;null!=(f=e.next());)g[u]=t.get(a,f),g[1-u]=t.get(s,f),v=n.dataToPoint(g,null,v),d[m]=l?r.x+r.width:v[0],p[m++]=v[0],d[m]=l?v[1]:r.y+r.height,p[m++]=v[1],y[b++]=f;t.setLayout({largePoints:p,largeDataIndices:y,largeBackgroundPoints:d,barWidth:c,valueAxisStart:Yd(o,i,!1),backgroundStart:l?r.x:r.y,valueAxisHorizontal:l})}}}}};function Jd(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function qd(e){return e.pipelineContext&&e.pipelineContext.large}function Yd(e,t,n){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}var Xd=Ld.prototype,Zd=Math.ceil,Qd=Math.floor,Kd=Ld.extend({type:"time",getLabel:function(e){var t=this._stepLvl,n=new Date(e);return _u(t[0],n,this.getSetting("useUTC"))},niceExtent:function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=864e5,t[1]+=864e5),t[1]===-1/0&&t[0]===1/0){var n=new Date;t[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),t[0]=t[1]-864e5}this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var r=this._interval;e.fixMin||(t[0]=Jl(Qd(t[0]/r)*r)),e.fixMax||(t[1]=Jl(Zd(t[1]/r)*r))},niceTicks:function(e,t,n){e=e||10;var r=this._extent,o=r[1]-r[0],i=o/e;null!=t&&i<t&&(i=t),null!=n&&i>n&&(i=n);var a=$d.length,s=function(e,t,n,r){for(;n<r;){var o=n+r>>>1;e[o][1]<t?n=o+1:r=o}return n}($d,i,0,a),l=$d[Math.min(s,a-1)],u=l[1];"year"===l[0]&&(u*=iu(o/u/e,!0));var c=this.getSetting("useUTC")?0:60*new Date(+r[0]||+r[1]).getTimezoneOffset()*1e3,f=[Math.round(Zd((r[0]-c)/u)*u+c),Math.round(Qd((r[1]-c)/u)*u+c)];Id(f,r),this._stepLvl=l,this._interval=u,this._niceExtent=f},parse:function(e){return+nu(e)}});M(["contain","normalize"],function(e){Kd.prototype[e]=function(t){return Xd[e].call(this,this.parse(t))}});var $d=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",864e5],["MM-dd\nyyyy",1728e5],["MM-dd\nyyyy",2592e5],["MM-dd\nyyyy",3456e5],["MM-dd\nyyyy",432e6],["MM-dd\nyyyy",5184e5],["week",6048e5],["MM-dd\nyyyy",864e6],["week",12096e5],["week",18144e5],["month",26784e5],["week",36288e5],["month",53568e5],["week",6048e6],["quarter",8208e6],["month",107136e5],["month",13392e6],["half-year",16416e6],["month",214272e5],["month",26784e6],["year",32832e6]];Kd.create=function(e){return new Kd({useUTC:e.ecModel.get("useUTC")})};var ey=Sd.prototype,ty=Ld.prototype,ny=Xl,ry=Jl,oy=Math.floor,iy=Math.ceil,ay=Math.pow,sy=Math.log,ly=Sd.extend({type:"log",base:10,$constructor:function(){Sd.apply(this,arguments),this._originalScale=new Ld},getTicks:function(e){var t=this._originalScale,n=this._extent,r=t.getExtent();return R(ty.getTicks.call(this,e),function(e){var o=Jl(ay(this.base,e));return o=e===n[0]&&t.__fixMin?uy(o,r[0]):o,o=e===n[1]&&t.__fixMax?uy(o,r[1]):o},this)},getMinorTicks:ty.getMinorTicks,getLabel:ty.getLabel,scale:function(e){return e=ey.scale.call(this,e),ay(this.base,e)},setExtent:function(e,t){var n=this.base;e=sy(e)/sy(n),t=sy(t)/sy(n),ty.setExtent.call(this,e,t)},getExtent:function(){var e=this.base,t=ey.getExtent.call(this);t[0]=ay(e,t[0]),t[1]=ay(e,t[1]);var n=this._originalScale,r=n.getExtent();return n.__fixMin&&(t[0]=uy(t[0],r[0])),n.__fixMax&&(t[1]=uy(t[1],r[1])),t},unionExtent:function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=sy(e[0])/sy(t),e[1]=sy(e[1])/sy(t),ey.unionExtent.call(this,e)},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},niceTicks:function(e){e=e||10;var t=this._extent,n=t[1]-t[0];if(!(n===1/0||n<=0)){var r=ru(n);for(e/n*r<=.5&&(r*=10);!isNaN(r)&&Math.abs(r)<1&&Math.abs(r)>0;)r*=10;var o=[Jl(iy(t[0]/r)*r),Jl(oy(t[1]/r)*r)];this._interval=r,this._niceExtent=o}},niceExtent:function(e){ty.niceExtent.call(this,e);var t=this._originalScale;t.__fixMin=e.fixMin,t.__fixMax=e.fixMax}});function uy(e,t){return ry(e,ny(t))}function cy(e,t){var n,o,i,a=e.type,s=t.getMin(),l=t.getMax(),u=e.getExtent();"ordinal"===a?n=t.getCategories().length:(B(o=t.get("boundaryGap"))||(o=[o||0,o||0]),"boolean"==typeof o[0]&&(r&&console.warn('Boolean type for boundaryGap is only allowed for ordinal axis. Please use string in percentage instead, e.g., "20%". Currently, boundaryGap is set to be 0.'),o=[0,0]),o[0]=Ul(o[0],1),o[1]=Ul(o[1],1),i=u[1]-u[0]||Math.abs(u[0])),"dataMin"===s?s=u[0]:"function"==typeof s&&(s=s({min:u[0],max:u[1]})),"dataMax"===l?l=u[1]:"function"==typeof l&&(l=l({min:u[0],max:u[1]}));var c=null!=s,f=null!=l;null==s&&(s="ordinal"===a?n?0:NaN:u[0]-o[0]*i),null==l&&(l="ordinal"===a?n?n-1:NaN:u[1]+o[1]*i),(null==s||!isFinite(s))&&(s=NaN),(null==l||!isFinite(l))&&(l=NaN),e.setBlank(U(s)||U(l)||"ordinal"===a&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(s>0&&l>0&&!c&&(s=0),s<0&&l<0&&!f&&(l=0));var h=t.ecModel;if(h&&"time"===a){var p,d=Gd("bar",h);if(M(d,function(e){p|=e.getBaseAxis()===t.axis}),p){var y=zd(d),v=function(e,t,n,r){var o=n.axis.getExtent(),i=o[1]-o[0],a=Hd(r,n.axis);if(void 0===a)return{min:e,max:t};var s=1/0;M(a,function(e){s=Math.min(e.offset,s)});var l=-1/0;M(a,function(e){l=Math.max(e.offset+e.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,f=c/(1-(s+l)/i)-c;return{min:e-=f*(s/u),max:t+=f*(l/u)}}(s,l,t,y);s=v.min,l=v.max}}return{extent:[s,l],fixMin:c,fixMax:f}}function fy(e,t){var n=cy(e,t),r=n.extent,o=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var i=e.type;e.setExtent(r[0],r[1]),e.niceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===i||"time"===i?t.get("minInterval"):null,maxInterval:"interval"===i||"time"===i?t.get("maxInterval"):null});var a=t.get("interval");null!=a&&e.setInterval&&e.setInterval(a)}function hy(e,t){if(t=t||e.get("type"))switch(t){case"category":return new Ed(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new Ld;default:return(Sd.getClass(t)||Ld).create(e)}}function py(e){var t,n=e.getLabelModel().get("formatter"),r="category"===e.type?e.scale.getExtent()[0]:null;return"string"==typeof n?(t=n,n=function(n){return n=e.scale.getLabel(n),t.replace("{value}",null!=n?n:"")}):"function"==typeof n?function(t,o){return null!=r&&(o=t-r),n(dy(e,t),o)}:function(t){return e.scale.getLabel(t)}}function dy(e,t){return"category"===e.type?e.scale.getLabel(t):t}function yy(e){var t=e.get("interval");return null==t?"auto":t}function vy(e){return"category"===e.type&&0===yy(e.getLabelModel())}M(["contain","normalize"],function(e){ly.prototype[e]=function(t){return t=sy(t)/sy(this.base),ey[e].call(this,t)}}),ly.create=function(){return new ly};var gy={getMin:function(e){var t=this.option,n=e||null==t.rangeStart?t.min:t.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!U(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(e){var t=this.option,n=e||null==t.rangeEnd?t.max:t.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!U(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var e=this.option;return null==e.rangeStart&&null==e.rangeEnd&&!e.scale},getCoordSysModel:ie,setRange:function(e,t){this.option.rangeStart=e,this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},my=Bs({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=t.width/2,i=t.height/2;e.moveTo(n,r-i),e.lineTo(n+o,r+i),e.lineTo(n-o,r+i),e.closePath()}}),by=Bs({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=t.width/2,i=t.height/2;e.moveTo(n,r-i),e.lineTo(n+o,r),e.lineTo(n,r+i),e.lineTo(n-o,r),e.closePath()}}),wy=Bs({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,r=t.y,o=t.width/5*3,i=Math.max(o,t.height),a=o/2,s=a*a/(i-a),l=r-i+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,f=Math.sin(u),h=Math.cos(u),p=.6*a,d=.7*a;e.moveTo(n-c,l+s),e.arc(n,l,a,Math.PI-u,2*Math.PI+u),e.bezierCurveTo(n+c-f*p,l+s+h*p,n,r-d,n,r),e.bezierCurveTo(n,r-d,n-c+f*p,l+s+h*p,n-c,l+s),e.closePath()}}),_y=Bs({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,r=t.width,o=t.x,i=t.y,a=r/3*2;e.moveTo(o,i),e.lineTo(o+a,i+n),e.lineTo(o,i+n/4*3),e.lineTo(o-a,i+n),e.lineTo(o,i),e.closePath()}}),xy={line:function(e,t,n,r,o){o.x1=e,o.y1=t+r/2,o.x2=e+n,o.y2=t+r/2},rect:function(e,t,n,r,o){o.x=e,o.y=t,o.width=n,o.height=r},roundRect:function(e,t,n,r,o){o.x=e,o.y=t,o.width=n,o.height=r,o.r=Math.min(n,r)/4},square:function(e,t,n,r,o){var i=Math.min(n,r);o.x=e,o.y=t,o.width=i,o.height=i},circle:function(e,t,n,r,o){o.cx=e+n/2,o.cy=t+r/2,o.r=Math.min(n,r)/2},diamond:function(e,t,n,r,o){o.cx=e+n/2,o.cy=t+r/2,o.width=n,o.height=r},pin:function(e,t,n,r,o){o.x=e+n/2,o.y=t+r/2,o.width=n,o.height=r},arrow:function(e,t,n,r,o){o.x=e+n/2,o.y=t+r/2,o.width=n,o.height=r},triangle:function(e,t,n,r,o){o.cx=e+n/2,o.cy=t+r/2,o.width=n,o.height=r}},Sy={};M({line:gs,rect:ys,roundRect:ys,square:ys,circle:$a,diamond:by,pin:wy,arrow:_y,triangle:my},function(e,t){Sy[t]=new e});var Oy=Bs({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var r=Sr(e,t,n),o=this.shape;return o&&"pin"===o.symbolType&&"inside"===t.textPosition&&(r.y=n.y+.4*n.height),r},buildPath:function(e,t,n){var r=t.symbolType;if("none"!==r){var o=Sy[r];o||(o=Sy[r="rect"]),xy[r](t.x,t.y,t.width,t.height,o.shape),o.buildPath(e,o.shape,n)}}});function Py(e,t){if("image"!==this.type){var n=this.style,r=this.shape;r&&"line"===r.symbolType?n.stroke=e:this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff"):(n.fill&&(n.fill=e),n.stroke&&(n.stroke=e)),this.dirty(!1)}}function Ty(e,t,n,r,o,i,a){var s,l=0===e.indexOf("empty");return l&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(s=0===e.indexOf("image://")?Vs(e.slice(8),new jn(t,n,r,o),a?"center":"cover"):0===e.indexOf("path://")?zs(e.slice(7),{},new jn(t,n,r,o),a?"center":"cover"):new Oy({shape:{symbolType:e,x:t,y:n,width:r,height:o}})).__isEmptyBrush=l,s.setColor=Py,s.setColor(i),s}var ky={isDimensionStacked:wd,enableDataStack:bd,getStackedDimension:_d};var Cy=(Object.freeze||Object)({createList:function(e){return xd(e.getSource(),e)},getLayoutRect:Mu,dataStack:ky,createScale:function(e,t){var n=t;Bl.isInstance(t)||E(n=new Bl(t),gy);var r=hy(n);return r.setExtent(e[0],e[1]),fy(r,n),r},mixinAxisModelCommonMethods:function(e){E(e,gy)},completeDimensions:pd,createDimensions:yd,createSymbol:Ty}),Ey=1e-8;function Ay(e,t){return Math.abs(e-t)<Ey}function My(e,t,n){var r=0,o=e[0];if(!o)return!1;for(var i=1;i<e.length;i++){var a=e[i];r+=_a(o[0],o[1],a[0],a[1],t,n),o=a}var s=e[0];return Ay(o[0],s[0])&&Ay(o[1],s[1])||(r+=_a(o[0],o[1],s[0],s[1],t,n)),0!==r}function Ry(e,t,n){if(this.name=e,this.geometries=t,n)n=[n[0],n[1]];else{var r=this.getBoundingRect();n=[r.x+r.width/2,r.y+r.height/2]}this.center=n}function Iy(e,t,n){for(var r=[],o=t[0],i=t[1],a=0;a<e.length;a+=2){var s=e.charCodeAt(a)-64,l=e.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),o=s+=o,i=l+=i,r.push([s/n,l/n])}return r}Ry.prototype={constructor:Ry,properties:null,getBoundingRect:function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,n=[t,t],r=[-t,-t],o=[],i=[],a=this.geometries,s=0;s<a.length;s++){if("polygon"===a[s].type)Yi(a[s].exterior,o,i),ke(n,n,o),Ce(r,r,i)}return 0===s&&(n[0]=n[1]=r[0]=r[1]=0),this._rect=new jn(n[0],n[1],r[0]-n[0],r[1]-n[1])},contain:function(e){var t=this.getBoundingRect(),n=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var r=0,o=n.length;r<o;r++)if("polygon"===n[r].type){var i=n[r].exterior,a=n[r].interiors;if(My(i,e[0],e[1])){for(var s=0;s<(a?a.length:0);s++)if(My(a[s]))continue e;return!0}}return!1},transformTo:function(e,t,n,r){var o=this.getBoundingRect(),i=o.width/o.height;n?r||(r=n/i):n=i*r;for(var a=new jn(e,t,n,r),s=o.calculateTransform(a),l=this.geometries,u=0;u<l.length;u++)if("polygon"===l[u].type){for(var c=l[u].exterior,f=l[u].interiors,h=0;h<c.length;h++)Te(c[h],c[h],s);for(var p=0;p<(f?f.length:0);p++)for(h=0;h<f[p].length;h++)Te(f[p][h],f[p][h],s)}(o=this._rect).copy(a),this.center=[o.x+o.width/2,o.y+o.height/2]},cloneShallow:function(e){null==e&&(e=this.name);var t=new Ry(e,this.geometries,this.center);return t._rect=this._rect,t.transformTo=null,t}};var jy=function(e,t){return function(e){if(!e.UTF8Encoding)return e;var t=e.UTF8Scale;null==t&&(t=1024);for(var n=e.features,r=0;r<n.length;r++)for(var o=n[r].geometry,i=o.coordinates,a=o.encodeOffsets,s=0;s<i.length;s++){var l=i[s];if("Polygon"===o.type)i[s]=Iy(l,a[s],t);else if("MultiPolygon"===o.type)for(var u=0;u<l.length;u++){var c=l[u];l[u]=Iy(c,a[s][u],t)}}e.UTF8Encoding=!1}(e),R(j(e.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var n=e.properties,r=e.geometry,o=r.coordinates,i=[];"Polygon"===r.type&&i.push({type:"polygon",exterior:o[0],interiors:o.slice(1)}),"MultiPolygon"===r.type&&M(o,function(e){e[0]&&i.push({type:"polygon",exterior:e[0],interiors:e.slice(1)})});var a=new Ry(n[t||"name"],i,n.cp);return a.properties=n,a})},Ly=ei();function Dy(e){return"category"===e.type?function(e){var t=e.getLabelModel(),n=By(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(e):function(e){var t=e.scale.getTicks(),n=py(e);return{labels:R(t,function(t,r){return{formattedLabel:n(t,r),rawLabel:e.scale.getLabel(t),tickValue:t}})}}(e)}function Ny(e,t){return"category"===e.type?function(e,t){var n,r,o=Fy(e,"ticks"),i=yy(t),a=Gy(o,i);if(a)return a;t.get("show")&&!e.scale.isBlank()||(n=[]);if(F(i))n=Hy(e,i,!0);else if("auto"===i){var s=By(e,e.getLabelModel());r=s.labelCategoryInterval,n=R(s.labels,function(e){return e.tickValue})}else n=Vy(e,r=i,!0);return zy(o,i,{ticks:n,tickCategoryInterval:r})}(e,t):{ticks:e.scale.getTicks()}}function By(e,t){var n,r=Fy(e,"labels"),o=yy(t),i=Gy(r,o);return i||zy(r,o,{labels:F(o)?Hy(e,o):Vy(e,n="auto"===o?function(e){var t=Ly(e).autoInterval;return null!=t?t:Ly(e).autoInterval=e.calculateCategoryInterval()}(e):o),labelCategoryInterval:n})}function Fy(e,t){return Ly(e)[t]||(Ly(e)[t]=[])}function Gy(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function zy(e,t,n){return e.push({key:t,value:n}),n}function Vy(e,t,n){var r=py(e),o=e.scale,i=o.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=i[0],c=o.count();0!==u&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=vy(e),h=a.get("showMinLabel")||f,p=a.get("showMaxLabel")||f;h&&u!==i[0]&&y(i[0]);for(var d=u;d<=i[1];d+=l)y(d);function y(e){s.push(n?e:{formattedLabel:r(e),rawLabel:o.getLabel(e),tickValue:e})}return p&&d-l!==i[1]&&y(i[1]),s}function Hy(e,t,n){var r=e.scale,o=py(e),i=[];return M(r.getTicks(),function(e){var a=r.getLabel(e);t(e,a)&&i.push(n?e:{formattedLabel:o(e),rawLabel:a,tickValue:e})}),i}var Wy=[0,1],Uy=function(e,t,n){this.dim=e,this.scale=t,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function Jy(e,t){var n=(e[1]-e[0])/t/2;e[0]+=n,e[1]-=n}Uy.prototype={constructor:Uy,contain:function(e){var t=this._extent,n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return e>=n&&e<=r},containData:function(e){return this.scale.contain(e)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(e){return Zl(e||this.scale.getExtent(),this._extent)},setExtent:function(e,t){var n=this._extent;n[0]=e,n[1]=t},dataToCoord:function(e,t){var n=this._extent,r=this.scale;return e=r.normalize(e),this.onBand&&"ordinal"===r.type&&Jy(n=n.slice(),r.count()),Wl(e,Wy,n,t)},coordToData:function(e,t){var n=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&Jy(n=n.slice(),r.count());var o=Wl(e,n,Wy,t);return this.scale.scale(o)},pointToData:function(e,t){},getTicksCoords:function(e){var t=(e=e||{}).tickModel||this.getTickModel(),n=R(Ny(this,t).ticks,function(e){return{coord:this.dataToCoord(e),tickValue:e}},this);return function(e,t,n,r){var o=t.length;if(!e.onBand||n||!o)return;var i,a,s=e.getExtent();if(1===o)t[0].coord=s[0],i=t[1]={coord:s[0]};else{var l=t[o-1].tickValue-t[0].tickValue,u=(t[o-1].coord-t[0].coord)/l;M(t,function(e){e.coord-=u/2});var c=e.scale.getExtent();a=1+c[1]-t[o-1].tickValue,i={coord:t[o-1].coord+u*a},t.push(i)}var f=s[0]>s[1];h(t[0].coord,s[0])&&(r?t[0].coord=s[0]:t.shift());r&&h(s[0],t[0].coord)&&t.unshift({coord:s[0]});h(s[1],i.coord)&&(r?i.coord=s[1]:t.pop());r&&h(i.coord,s[1])&&t.push({coord:s[1]});function h(e,t){return e=Jl(e),t=Jl(t),f?e>t:e<t}}(this,n,t.get("alignWithLabel"),e.clamp),n},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return e>0&&e<100||(e=5),R(this.scale.getMinorTicks(e),function(e){return R(e,function(e){return{coord:this.dataToCoord(e),tickValue:e}},this)},this)},getViewLabels:function(){return Dy(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var e=this._extent,t=this.scale.getExtent(),n=t[1]-t[0]+(this.onBand?1:0);0===n&&(n=1);var r=Math.abs(e[1]-e[0]);return Math.abs(r)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(e){var t=function(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}(e),n=py(e),r=(t.axisRotate-t.labelRotate)/180*Math.PI,o=e.scale,i=o.getExtent(),a=o.count();if(i[1]-i[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=i[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(r)),f=Math.abs(u*Math.sin(r)),h=0,p=0;l<=i[1];l+=s){var d,y,v=wr(n(l),t.font,"center","top");d=1.3*v.width,y=1.3*v.height,h=Math.max(h,d,7),p=Math.max(p,y,7)}var g=h/c,m=p/f;isNaN(g)&&(g=1/0),isNaN(m)&&(m=1/0);var b=Math.max(0,Math.floor(Math.min(g,m))),w=Ly(e.model),_=e.getExtent(),x=w.lastAutoInterval,S=w.lastTickCount;return null!=x&&null!=S&&Math.abs(x-b)<=1&&Math.abs(S-a)<=1&&x>b&&w.axisExtend0===_[0]&&w.axisExtend1===_[1]?b=x:(w.lastTickCount=a,w.lastAutoInterval=b,w.axisExtend0=_[0],w.axisExtend1=_[1]),b}(this)}};var qy=jy,Yy={};M(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(e){Yy[e]=ae[e]});var Xy={};function Zy(e,t){var n=e.mapDimension("defaultedLabel",!0),r=n.length;if(1===r)return Kc(e,t,n[0]);if(r){for(var o=[],i=0;i<n.length;i++){var a=Kc(e,t,n[i]);o.push(a)}return o.join(" ")}}function Qy(e,t,n){Ln.call(this),this.updateData(e,t,n)}M(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(e){Xy[e]=Ml[e]}),uf.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(e,t){if(r){var n=e.coordinateSystem;if("polar"!==n&&"cartesian2d"!==n)throw new Error("Line not support coordinateSystem besides cartesian and polar")}return xd(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var Ky=Qy.prototype,$y=Qy.getSymbolSize=function(e,t){var n=e.getItemVisual(t,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function ev(e){return[e[0]/2,e[1]/2]}function tv(e,t){this.parent.drift(e,t)}Ky._createSymbol=function(e,t,n,r,o){this.removeAll();var i=Ty(e,-1,-1,2,2,t.getItemVisual(n,"color"),o);i.attr({z2:100,culling:!0,scale:ev(r)}),i.drift=tv,this._symbolType=e,this.add(i)},Ky.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(e)},Ky.getSymbolPath=function(){return this.childAt(0)},Ky.getScale=function(){return this.childAt(0).scale},Ky.highlight=function(){this.childAt(0).trigger("emphasis")},Ky.downplay=function(){this.childAt(0).trigger("normal")},Ky.setZ=function(e,t){var n=this.childAt(0);n.zlevel=e,n.z=t},Ky.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":t.cursor},Ky.updateData=function(e,t,n){this.silent=!1;var r=e.getItemVisual(t,"symbol")||"circle",o=e.hostModel,i=$y(e,t),a=r!==this._symbolType;if(a){var s=e.getItemVisual(t,"symbolKeepAspect");this._createSymbol(r,e,t,i,s)}else{(l=this.childAt(0)).silent=!1,wl(l,{scale:ev(i)},o,t)}if(this._updateCommon(e,t,i,n),a){var l=this.childAt(0),u=n&&n.fadeIn,c={scale:l.scale.slice()};u&&(c.style={opacity:l.style.opacity}),l.scale=[0,0],u&&(l.style.opacity=0),_l(l,c,o,t)}this._seriesModel=o};var nv=["itemStyle"],rv=["emphasis","itemStyle"],ov=["label"],iv=["emphasis","label"];function av(e,t){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===t){var n=this.__symbolOriginalScale,r=n[1]/n[0],o={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*r)]};this.animateTo(o,400,"elasticOut")}else"normal"===t&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function sv(e){this.group=new Ln,this._symbolCtor=e||Qy}Ky._updateCommon=function(e,t,n,r){var o=this.childAt(0),i=e.hostModel,a=e.getItemVisual(t,"color");"image"!==o.type?o.useStyle({strokeNoScale:!0}):o.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var s=r&&r.itemStyle,l=r&&r.hoverItemStyle,u=r&&r.symbolOffset,c=r&&r.labelModel,f=r&&r.hoverLabelModel,h=r&&r.hoverAnimation,p=r&&r.cursorStyle;if(!r||e.hasItemOption){var d=r&&r.itemModel?r.itemModel:e.getItemModel(t);s=d.getModel(nv).getItemStyle(["color"]),l=d.getModel(rv).getItemStyle(),u=d.getShallow("symbolOffset"),c=d.getModel(ov),f=d.getModel(iv),h=d.getShallow("hoverAnimation"),p=d.getShallow("cursor")}else l=x({},l);var y=o.style,v=e.getItemVisual(t,"symbolRotate");o.attr("rotation",(v||0)*Math.PI/180||0),u&&o.attr("position",[Ul(u[0],n[0]),Ul(u[1],n[1])]),p&&o.attr("cursor",p),o.setColor(a,r&&r.symbolInnerColor),o.setStyle(s);var g=e.getItemVisual(t,"opacity");null!=g&&(y.opacity=g);var m=e.getItemVisual(t,"liftZ"),b=o.__z2Origin;null!=m?null==b&&(o.__z2Origin=o.z2,o.z2+=m):null!=b&&(o.z2=b,o.__z2Origin=null);var w=r&&r.useNameLabel;cl(y,l,c,f,{labelFetcher:i,labelDataIndex:t,defaultText:function(t,n){return w?e.getName(t):Zy(e,t)},isRectText:!0,autoColor:a}),o.__symbolOriginalScale=ev(n),o.hoverStyle=l,o.highDownOnUpdate=h&&i.isAnimationEnabled()?av:null,al(o)},Ky.fadeOut=function(e,t){var n=this.childAt(0);this.silent=n.silent=!0,(!t||!t.keepLabel)&&(n.style.text=null),wl(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,e)},C(Qy,Ln);var lv=sv.prototype;function uv(e,t,n,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(n,"symbol")}function cv(e){return null==e||z(e)||(e={isIgnore:e}),e||{}}function fv(e){var t=e.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}function hv(e,t,n){var r,o=e.getBaseAxis(),i=e.getOtherAxis(o),a=function(e,t){var n=0,r=e.scale.getExtent();"start"===t?n=r[0]:"end"===t?n=r[1]:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]);return n}(i,n),s=o.dim,l=i.dim,u=t.mapDimension(l),c=t.mapDimension(s),f="x"===l||"radius"===l?1:0,h=R(e.dimensions,function(e){return t.mapDimension(e)}),p=t.getCalculationInfo("stackResultDimension");return(r|=wd(t,h[0]))&&(h[0]=p),(r|=wd(t,h[1]))&&(h[1]=p),{dataDimsForPoint:h,valueStart:a,valueAxisDim:l,baseAxisDim:s,stacked:!!r,valueDim:u,baseDim:c,baseDataOffset:f,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function pv(e,t,n,r){var o=NaN;e.stacked&&(o=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(o)&&(o=e.valueStart);var i=e.baseDataOffset,a=[];return a[i]=n.get(e.baseDim,r),a[1-i]=o,t.dataToPoint(a)}lv.updateData=function(e,t){t=cv(t);var n=this.group,r=e.hostModel,o=this._data,i=this._symbolCtor,a=fv(e);o||n.removeAll(),e.diff(o).add(function(r){var o=e.getItemLayout(r);if(uv(e,o,r,t)){var s=new i(e,r,a);s.attr("position",o),e.setItemGraphicEl(r,s),n.add(s)}}).update(function(s,l){var u=o.getItemGraphicEl(l),c=e.getItemLayout(s);uv(e,c,s,t)?(u?(u.updateData(e,s,a),wl(u,{position:c},r)):(u=new i(e,s)).attr("position",c),n.add(u),e.setItemGraphicEl(s,u)):n.remove(u)}).remove(function(e){var t=o.getItemGraphicEl(e);t&&t.fadeOut(function(){n.remove(t)})}).execute(),this._data=e},lv.isPersistent=function(){return!0},lv.updateLayout=function(){var e=this._data;e&&e.eachItemGraphicEl(function(t,n){var r=e.getItemLayout(n);t.attr("position",r)})},lv.incrementalPrepareUpdate=function(e){this._seriesScope=fv(e),this._data=null,this.group.removeAll()},lv.incrementalUpdate=function(e,t,n){function r(e){e.isGroup||(e.incremental=e.useHoverLayer=!0)}n=cv(n);for(var o=e.start;o<e.end;o++){var i=t.getItemLayout(o);if(uv(t,i,o,n)){var a=new this._symbolCtor(t,o,this._seriesScope);a.traverse(r),a.attr("position",i),this.group.add(a),t.setItemGraphicEl(o,a)}}},lv.remove=function(e){var t=this.group,n=this._data;n&&e?n.eachItemGraphicEl(function(e){e.fadeOut(function(){t.remove(e)})}):t.removeAll()};var dv=ke,yv=Ce,vv=pe,gv=ue,mv=[],bv=[],wv=[];function _v(e){return isNaN(e[0])||isNaN(e[1])}function xv(e,t,n,r,o,i,a,s,l,u,c){return"none"!==u&&u?function(e,t,n,r,o,i,a,s,l,u,c){for(var f=0,h=n,p=0;p<r;p++){var d=t[h];if(h>=o||h<0)break;if(_v(d)){if(c){h+=i;continue}break}if(h===n)e[i>0?"moveTo":"lineTo"](d[0],d[1]);else if(l>0){var y=t[f],v="y"===u?1:0,g=(d[v]-y[v])*l;gv(bv,y),bv[v]=y[v]+g,gv(wv,d),wv[v]=d[v]-g,e.bezierCurveTo(bv[0],bv[1],wv[0],wv[1],d[0],d[1])}else e.lineTo(d[0],d[1]);f=h,h+=i}return p}.apply(this,arguments):function(e,t,n,r,o,i,a,s,l,u,c){for(var f=0,h=n,p=0;p<r;p++){var d=t[h];if(h>=o||h<0)break;if(_v(d)){if(c){h+=i;continue}break}if(h===n)e[i>0?"moveTo":"lineTo"](d[0],d[1]),gv(bv,d);else if(l>0){var y=h+i,v=t[y];if(c)for(;v&&_v(t[y]);)v=t[y+=i];var g=.5,m=t[f],v=t[y];if(!v||_v(v))gv(wv,d);else{var b,w;if(_v(v)&&!c&&(v=d),de(mv,v,m),"x"===u||"y"===u){var _="x"===u?0:1;b=Math.abs(d[_]-m[_]),w=Math.abs(d[_]-v[_])}else b=xe(d,m),w=xe(d,v);vv(wv,d,mv,-l*(1-(g=w/(w+b))))}dv(bv,bv,s),yv(bv,bv,a),dv(wv,wv,s),yv(wv,wv,a),e.bezierCurveTo(bv[0],bv[1],wv[0],wv[1],d[0],d[1]),vv(bv,d,mv,l*g)}else e.lineTo(d[0],d[1]);f=h,h+=i}return p}.apply(this,arguments)}function Sv(e,t){var n=[1/0,1/0],r=[-1/0,-1/0];if(t)for(var o=0;o<e.length;o++){var i=e[o];i[0]<n[0]&&(n[0]=i[0]),i[1]<n[1]&&(n[1]=i[1]),i[0]>r[0]&&(r[0]=i[0]),i[1]>r[1]&&(r[1]=i[1])}return{min:t?n:r,max:t?r:n}}var Ov=ja.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:ts(ja.prototype.brush),buildPath:function(e,t){var n=t.points,r=0,o=n.length,i=Sv(n,t.smoothConstraint);if(t.connectNulls){for(;o>0&&_v(n[o-1]);o--);for(;r<o&&_v(n[r]);r++);}for(;r<o;)r+=xv(e,n,r,o,o,1,i.min,i.max,t.smooth,t.smoothMonotone,t.connectNulls)+1}}),Pv=ja.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:ts(ja.prototype.brush),buildPath:function(e,t){var n=t.points,r=t.stackedOnPoints,o=0,i=n.length,a=t.smoothMonotone,s=Sv(n,t.smoothConstraint),l=Sv(r,t.smoothConstraint);if(t.connectNulls){for(;i>0&&_v(n[i-1]);i--);for(;o<i&&_v(n[o]);o++);}for(;o<i;){var u=xv(e,n,o,i,i,1,s.min,s.max,t.smooth,a,t.connectNulls);xv(e,r,o+u-1,u,i,-1,l.min,l.max,t.stackedOnSmooth,a,t.connectNulls),o+=u+1,e.closePath()}}});function Tv(e,t,n){var r=e.getArea(),o=e.getBaseAxis().isHorizontal(),i=r.x,a=r.y,s=r.width,l=r.height,u=n.get("lineStyle.width")||2;i-=u/2,a-=u/2,s+=u,l+=u,i=Math.floor(i),s=Math.round(s);var c=new ys({shape:{x:i,y:a,width:s,height:l}});return t&&(c.shape[o?"width":"height"]=0,_l(c,{shape:{width:s,height:l}},n)),c}function kv(e,t,n){var r=e.getArea(),o=new ns({shape:{cx:Jl(e.cx,1),cy:Jl(e.cy,1),r0:Jl(r.r0,1),r:Jl(r.r,1),startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});return t&&(o.shape.endAngle=r.startAngle,_l(o,{shape:{endAngle:r.endAngle}},n)),o}function Cv(e,t,n){return e?"polar"===e.type?kv(e,t,n):"cartesian2d"===e.type?Tv(e,t,n):null:null}function Ev(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++){var r=e[n],o=t[n];if(r[0]!==o[0]||r[1]!==o[1])return}return!0}}function Av(e,t){var n=[],r=[],o=[],i=[];return Yi(e,n,r),Yi(t,o,i),Math.max(Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]),Math.abs(r[0]-i[0]),Math.abs(r[1]-i[1]))}function Mv(e){return"number"==typeof e?e:e?.5:0}function Rv(e,t,n){for(var r=t.getBaseAxis(),o="x"===r.dim||"radius"===r.dim?0:1,i=[],a=0;a<e.length-1;a++){var s=e[a+1],l=e[a];i.push(l);var u=[];switch(n){case"end":u[o]=s[o],u[1-o]=l[1-o],i.push(u);break;case"middle":var c=(l[o]+s[o])/2,f=[];u[o]=f[o]=c,u[1-o]=l[1-o],f[1-o]=s[1-o],i.push(u),i.push(f);break;default:u[o]=l[o],u[1-o]=s[1-o],i.push(u)}}return e[a]&&i.push(e[a]),i}function Iv(e,t,n){var r=e.get("showAllSymbol"),o="auto"===r;if(!r||o){var i=n.getAxesByScale("ordinal")[0];if(i&&(!o||!function(e,t){var n=e.getExtent(),r=Math.abs(n[1]-n[0])/e.scale.count();isNaN(r)&&(r=0);for(var o=t.count(),i=Math.max(1,Math.round(o/5)),a=0;a<o;a+=i)if(1.5*Qy.getSymbolSize(t,a)[e.isHorizontal()?1:0]>r)return!1;return!0}(i,t))){var a=t.mapDimension(i.dim),s={};return M(i.getViewLabels(),function(e){s[e.tickValue]=1}),function(e){return!s.hasOwnProperty(t.get(a,e))}}}}function jv(e,t,n){if("cartesian2d"===e.type){var r=e.getBaseAxis().isHorizontal(),o=Tv(e,t,n);if(!n.get("clip",!0)){var i=o.shape,a=Math.max(i.width,i.height);r?(i.y-=a,i.height+=2*a):(i.x-=a,i.width+=2*a)}return o}return kv(e,t,n)}xf.extend({type:"line",init:function(){var e=new Ln,t=new sv;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},render:function(e,t,n){var o=e.coordinateSystem,i=this.group,a=e.getData(),s=e.getModel("lineStyle"),l=e.getModel("areaStyle"),u=a.mapArray(a.getItemLayout),c="polar"===o.type,f=this._coordSys,h=this._symbolDraw,p=this._polyline,d=this._polygon,y=this._lineGroup,v=e.get("animation"),g=!l.isEmpty(),m=l.get("origin"),b=function(e,t,n){if(!n.valueDim)return[];for(var r=[],o=0,i=t.count();o<i;o++)r.push(pv(n,e,t,o));return r}(o,a,hv(o,a,m)),w=e.get("showSymbol"),_=w&&!c&&Iv(e,a,o),x=this._data;x&&x.eachItemGraphicEl(function(e,t){e.__temp&&(i.remove(e),x.setItemGraphicEl(t,null))}),w||h.remove(),i.add(y);var O,P=!c&&e.get("step");o&&o.getArea&&e.get("clip",!0)&&(null!=(O=o.getArea()).width?(O.x-=.1,O.y-=.1,O.width+=.2,O.height+=.2):O.r0&&(O.r0-=.5,O.r1+=.5)),this._clipShapeForSymbol=O,p&&f.type===o.type&&P===this._step?(g&&!d?d=this._newPolygon(u,b,o,v):d&&!g&&(y.remove(d),d=this._polygon=null),y.setClipPath(jv(o,!1,e)),w&&h.updateData(a,{isIgnore:_,clipShape:O}),a.eachItemGraphicEl(function(e){e.stopAnimation(!0)}),Ev(this._stackedOnPoints,b)&&Ev(this._points,u)||(v?this._updateAnimation(a,b,o,n,P,m):(P&&(u=Rv(u,o,P),b=Rv(b,o,P)),p.setShape({points:u}),d&&d.setShape({points:u,stackedOnPoints:b})))):(w&&h.updateData(a,{isIgnore:_,clipShape:O}),P&&(u=Rv(u,o,P),b=Rv(b,o,P)),p=this._newPolyline(u,o,v),g&&(d=this._newPolygon(u,b,o,v)),y.setClipPath(jv(o,!0,e)));var T=function(e,t){var n=e.getVisual("visualMeta");if(n&&n.length&&e.count())if("cartesian2d"===t.type){for(var o,i,a=n.length-1;a>=0;a--){var s=n[a].dimension,l=e.dimensions[s],u=e.getDimensionInfo(l);if("x"===(o=u&&u.coordDim)||"y"===o){i=n[a];break}}if(i){var c=t.getAxis(o),f=R(i.stops,function(e){return{coord:c.toGlobalCoord(c.dataToCoord(e.value)),color:e.color}}),h=f.length,p=i.outerColors.slice();h&&f[0].coord>f[h-1].coord&&(f.reverse(),p.reverse());var d=f[0].coord-10,y=f[h-1].coord+10,v=y-d;if(v<.001)return"transparent";M(f,function(e){e.offset=(e.coord-d)/v}),f.push({offset:h?f[h-1].offset:.5,color:p[1]||"transparent"}),f.unshift({offset:h?f[0].offset:.5,color:p[0]||"transparent"});var g=new Os(0,0,0,0,f,!0);return g[o]=d,g[o+"2"]=y,g}r&&console.warn("Visual map on line style only support x or y dimension.")}else r&&console.warn("Visual map on line style is only supported on cartesian2d.")}(a,o)||a.getVisual("color");p.useStyle(S(s.getLineStyle(),{fill:"none",stroke:T,lineJoin:"bevel"}));var k=e.get("smooth");if(k=Mv(e.get("smooth")),p.setShape({smooth:k,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")}),d){var C=a.getCalculationInfo("stackedOnSeries"),E=0;d.useStyle(S(l.getAreaStyle(),{fill:T,opacity:.7,lineJoin:"bevel"})),C&&(E=Mv(C.get("smooth"))),d.setShape({smooth:k,stackedOnSmooth:E,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")})}this._data=a,this._coordSys=o,this._stackedOnPoints=b,this._points=u,this._step=P,this._valueOrigin=m},dispose:function(){},highlight:function(e,t,n,r){var o=e.getData(),i=$o(o,r);if(!(i instanceof Array)&&null!=i&&i>=0){var a=o.getItemGraphicEl(i);if(!a){var s=o.getItemLayout(i);if(!s)return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s[0],s[1]))return;(a=new Qy(o,i)).position=s,a.setZ(e.get("zlevel"),e.get("z")),a.ignore=isNaN(s[0])||isNaN(s[1]),a.__temp=!0,o.setItemGraphicEl(i,a),a.stopSymbolAnimation(!0),this.group.add(a)}a.highlight()}else xf.prototype.highlight.call(this,e,t,n,r)},downplay:function(e,t,n,r){var o=e.getData(),i=$o(o,r);if(null!=i&&i>=0){var a=o.getItemGraphicEl(i);a&&(a.__temp?(o.setItemGraphicEl(i,null),this.group.remove(a)):a.downplay())}else xf.prototype.downplay.call(this,e,t,n,r)},_newPolyline:function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new Ov({shape:{points:e},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t,t},_newPolygon:function(e,t){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Pv({shape:{points:e,stackedOnPoints:t},silent:!0}),this._lineGroup.add(n),this._polygon=n,n},_updateAnimation:function(e,t,n,r,o,i){var a=this._polyline,s=this._polygon,l=e.hostModel,u=function(e,t,n,r,o,i,a,s){for(var l=function(e,t){var n=[];return t.diff(e).add(function(e){n.push({cmd:"+",idx:e})}).update(function(e,t){n.push({cmd:"=",idx:t,idx1:e})}).remove(function(e){n.push({cmd:"-",idx:e})}).execute(),n}(e,t),u=[],c=[],f=[],h=[],p=[],d=[],y=[],v=hv(o,t,a),g=hv(i,e,s),m=0;m<l.length;m++){var b=l[m],w=!0;switch(b.cmd){case"=":var _=e.getItemLayout(b.idx),x=t.getItemLayout(b.idx1);(isNaN(_[0])||isNaN(_[1]))&&(_=x.slice()),u.push(_),c.push(x),f.push(n[b.idx]),h.push(r[b.idx1]),y.push(t.getRawIndex(b.idx1));break;case"+":var S=b.idx;u.push(o.dataToPoint([t.get(v.dataDimsForPoint[0],S),t.get(v.dataDimsForPoint[1],S)])),c.push(t.getItemLayout(S).slice()),f.push(pv(v,o,t,S)),h.push(r[S]),y.push(t.getRawIndex(S));break;case"-":S=b.idx;var O=e.getRawIndex(S);O!==S?(u.push(e.getItemLayout(S)),c.push(i.dataToPoint([e.get(g.dataDimsForPoint[0],S),e.get(g.dataDimsForPoint[1],S)])),f.push(n[S]),h.push(pv(g,i,e,S)),y.push(O)):w=!1}w&&(p.push(b),d.push(d.length))}d.sort(function(e,t){return y[e]-y[t]});var P=[],T=[],k=[],C=[],E=[];for(m=0;m<d.length;m++)S=d[m],P[m]=u[S],T[m]=c[S],k[m]=f[S],C[m]=h[S],E[m]=p[S];return{current:P,next:T,stackedOnCurrent:k,stackedOnNext:C,status:E}}(this._data,e,this._stackedOnPoints,t,this._coordSys,n,this._valueOrigin,i),c=u.current,f=u.stackedOnCurrent,h=u.next,p=u.stackedOnNext;if(o&&(c=Rv(u.current,n,o),f=Rv(u.stackedOnCurrent,n,o),h=Rv(u.next,n,o),p=Rv(u.stackedOnNext,n,o)),Av(c,h)>3e3||s&&Av(f,p)>3e3)return a.setShape({points:h}),void(s&&s.setShape({points:h,stackedOnPoints:p}));a.shape.__points=u.current,a.shape.points=c,wl(a,{shape:{points:h}},l),s&&(s.setShape({points:c,stackedOnPoints:f}),wl(s,{shape:{points:h,stackedOnPoints:p}},l));for(var d=[],y=u.status,v=0;v<y.length;v++){if("="===y[v].cmd){var g=e.getItemGraphicEl(y[v].idx1);g&&d.push({el:g,ptIdx:v})}}a.animators&&a.animators.length&&a.animators[0].during(function(){for(var e=0;e<d.length;e++){d[e].el.attr("position",a.shape.__points[d[e].ptIdx])}})},remove:function(e){var t=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(e,r){e.__temp&&(t.remove(e),n.setItemGraphicEl(r,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var Lv=function(e,t,n){return{seriesType:e,performRawSeries:!0,reset:function(e,r,o){var i=e.getData(),a=e.get("symbol"),s=e.get("symbolSize"),l=e.get("symbolKeepAspect"),u=e.get("symbolRotate"),c=F(a),f=F(s),h=F(u),p=c||f||h,d=!c&&a?a:t,y=f?null:s;if(i.setVisual({legendSymbol:n||d,symbol:d,symbolSize:y,symbolKeepAspect:l,symbolRotate:u}),!r.isSeriesFiltered(e))return{dataEach:i.hasItemOption||p?function(t,n){if(p){var r=e.getRawValue(n),o=e.getDataParams(n);c&&t.setItemVisual(n,"symbol",a(r,o)),f&&t.setItemVisual(n,"symbolSize",s(r,o)),h&&t.setItemVisual(n,"symbolRotate",u(r,o))}if(t.hasItemOption){var i=t.getItemModel(n),l=i.getShallow("symbol",!0),d=i.getShallow("symbolSize",!0),y=i.getShallow("symbolRotate",!0),v=i.getShallow("symbolKeepAspect",!0);null!=l&&t.setItemVisual(n,"symbol",l),null!=d&&t.setItemVisual(n,"symbolSize",d),null!=y&&t.setItemVisual(n,"symbolRotate",y),null!=v&&t.setItemVisual(n,"symbolKeepAspect",v)}}:null}}}},Dv=function(e){return{seriesType:e,plan:bf(),reset:function(e){var t=e.getData(),n=e.coordinateSystem,r=e.pipelineContext.large;if(n){var o=R(n.dimensions,function(e){return t.mapDimension(e)}).slice(0,2),i=o.length,a=t.getCalculationInfo("stackResultDimension");return wd(t,o[0])&&(o[0]=a),wd(t,o[1])&&(o[1]=a),i&&{progress:function(e,t){for(var a=e.end-e.start,s=r&&new Float32Array(a*i),l=e.start,u=0,c=[],f=[];l<e.end;l++){var h;if(1===i){var p=t.get(o[0],l);h=!isNaN(p)&&n.dataToPoint(p,null,f)}else{p=c[0]=t.get(o[0],l);var d=c[1]=t.get(o[1],l);h=!isNaN(p)&&!isNaN(d)&&n.dataToPoint(c,null,f)}r?(s[u++]=h?h[0]:NaN,s[u++]=h?h[1]:NaN):t.setItemLayout(l,h&&h.slice()||[NaN,NaN])}r&&t.setLayout("symbolPoints",s)}}}}}},Nv={average:function(e){for(var t=0,n=0,r=0;r<e.length;r++)isNaN(e[r])||(t+=e[r],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},Bv=function(e,t){return Math.round(e.length/2)};function Fv(e){return this._axes[e]}var Gv=function(e){this._axes={},this._dimList=[],this.name=e||""};function zv(e){Gv.call(this,e)}Gv.prototype={constructor:Gv,type:"cartesian",getAxis:function(e){return this._axes[e]},getAxes:function(){return R(this._dimList,Fv,this)},getAxesByScale:function(e){return e=e.toLowerCase(),j(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},dataToCoord:function(e){return this._dataCoordConvert(e,"dataToCoord")},coordToData:function(e){return this._dataCoordConvert(e,"coordToData")},_dataCoordConvert:function(e,t){for(var n=this._dimList,r=e instanceof Array?[]:{},o=0;o<n.length;o++){var i=n[o],a=this._axes[i];r[i]=a[t](e[i])}return r}},zv.prototype={constructor:zv,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(e){var t=this.getAxis("x"),n=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},dataToPoint:function(e,t,n){var r=this.getAxis("x"),o=this.getAxis("y");return(n=n||[])[0]=r.toGlobalCoord(r.dataToCoord(e[0])),n[1]=o.toGlobalCoord(o.dataToCoord(e[1])),n},clampData:function(e,t){var n=this.getAxis("x").scale,r=this.getAxis("y").scale,o=n.getExtent(),i=r.getExtent(),a=n.parse(e[0]),s=r.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(o[0],o[1]),a),Math.max(o[0],o[1])),t[1]=Math.min(Math.max(Math.min(i[0],i[1]),s),Math.max(i[0],i[1])),t},pointToData:function(e,t){var n=this.getAxis("x"),r=this.getAxis("y");return(t=t||[])[0]=n.coordToData(n.toLocalCoord(e[0])),t[1]=r.coordToData(r.toLocalCoord(e[1])),t},getOtherAxis:function(e){return this.getAxis("x"===e.dim?"y":"x")},getArea:function(){var e=this.getAxis("x").getGlobalExtent(),t=this.getAxis("y").getGlobalExtent(),n=Math.min(e[0],e[1]),r=Math.min(t[0],t[1]);return new jn(n,r,Math.max(e[0],e[1])-n,Math.max(t[0],t[1])-r)}},C(zv,Gv);var Vv=function(e,t,n,r,o){Uy.call(this,e,t,n),this.type=r||"value",this.position=o||"bottom"};Vv.prototype={constructor:Vv,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},getGlobalExtent:function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},toLocalCoord:null,toGlobalCoord:null},C(Vv,Uy);var Hv={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},Wv={};Wv.categoryAxis=w({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Hv),Wv.valueAxis=w({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},Hv),Wv.timeAxis=S({scale:!0,min:"dataMin",max:"dataMax"},Wv.valueAxis),Wv.logAxis=S({scale:!0,logBase:10},Wv.valueAxis);var Uv=["value","category","time","log"],Jv=function(e,t,n,r){M(Uv,function(o){t.extend({type:e+"Axis."+o,mergeDefaultAndTheme:function(t,r){var i=this.layoutMode,a=i?ju(t):{};w(t,r.getTheme().get(o+"Axis")),w(t,this.getDefaultOption()),t.type=n(e,t),i&&Iu(t,a,i)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=Od.createByAxisModel(this))},getCategories:function(e){var t=this.option;if("category"===t.type)return e?t.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:_([{},Wv[o+"Axis"],r],!0)})}),Fu.registerSubTypeDefaulter(e+"Axis",N(n,e))},qv=Fu.extend({type:"cartesian2dAxis",axis:null,init:function(){qv.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){qv.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){qv.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function Yv(e,t){return t.type||(t.data?"category":"value")}w(qv.prototype,gy);var Xv={offset:0};function Zv(e,t,n){return e.getCoordSysModel()===t}function Qv(e,t,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(e,t,n),this.model=e}Jv("x",qv,Yv,Xv),Jv("y",qv,Yv,Xv),Fu.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var Kv=Qv.prototype;function $v(e,t,n,r){n.getAxesOnZeroOf=function(){return o?[o]:[]};var o,i=e[t],a=n.model,s=a.get("axisLine.onZero"),l=a.get("axisLine.onZeroAxisIndex");if(s){if(null!=l)eg(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&eg(i[u])&&!r[c(i[u])]){o=i[u];break}o&&(r[c(o)]=!0)}function c(e){return e.dim+"_"+e.index}}function eg(e){return e&&"category"!==e.type&&"time"!==e.type&&function(e){var t=e.scale.getExtent(),n=t[0],r=t[1];return!(n>0&&r>0||n<0&&r<0)}(e)}Kv.type="grid",Kv.axisPointerEnabled=!0,Kv.getRect=function(){return this._rect},Kv.update=function(e,t){var n=this._axesMap;this._updateScale(e,this.model),M(n.x,function(e){fy(e.scale,e.model)}),M(n.y,function(e){fy(e.scale,e.model)});var r={};M(n.x,function(e){$v(n,"y",e,r)}),M(n.y,function(e){$v(n,"x",e,r)}),this.resize(this.model,t)},Kv.resize=function(e,t,n){var r=Mu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._rect=r;var o=this._axesList;function i(){M(o,function(e){var t=e.isHorizontal(),n=t?[0,r.width]:[0,r.height],o=e.inverse?1:0;e.setExtent(n[o],n[1-o]),function(e,t){var n=e.getExtent(),r=n[0]+n[1];e.toGlobalCoord="x"===e.dim?function(e){return e+t}:function(e){return r-e+t},e.toLocalCoord="x"===e.dim?function(e){return e-t}:function(e){return r-e+t}}(e,t?r.x:r.y)})}i(),!n&&e.get("containLabel")&&(M(o,function(e){if(!e.model.get("axisLabel.inside")){var t=function(e){var t=e.model,n=e.scale;if(t.get("axisLabel.show")&&!n.isBlank()){var r,o,i="category"===e.type,a=n.getExtent();o=i?n.count():(r=n.getTicks()).length;var s,l,u,c,f,h,p,d,y,v=e.getLabelModel(),g=py(e),m=1;o>40&&(m=Math.ceil(o/40));for(var b=0;b<o;b+=m){var w=g(r?r[b]:a[0]+b),_=v.getTextRect(w),x=(l=_,u=v.get("rotate")||0,c=u*Math.PI/180,f=l.plain(),h=f.width,p=f.height,d=h*Math.abs(Math.cos(c))+Math.abs(p*Math.sin(c)),y=h*Math.abs(Math.sin(c))+Math.abs(p*Math.cos(c)),new jn(f.x,f.y,d,y));s?s.union(x):s=x}return s}}(e);if(t){var n=e.isHorizontal()?"height":"width",o=e.model.get("axisLabel.margin");r[n]-=t[n]+o,"top"===e.position?r.y+=t.height+o:"left"===e.position&&(r.x+=t.width+o)}}}),i())},Kv.getAxis=function(e,t){var n=this._axesMap[e];if(null!=n){if(null==t)for(var r in n)if(n.hasOwnProperty(r))return n[r];return n[t]}},Kv.getAxes=function(){return this._axesList.slice()},Kv.getCartesian=function(e,t){if(null!=e&&null!=t){var n="x"+e+"y"+t;return this._coordsMap[n]}z(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var r=0,o=this._coordsList;r<o.length;r++)if(o[r].getAxis("x").index===e||o[r].getAxis("y").index===t)return o[r]},Kv.getCartesians=function(){return this._coordsList.slice()},Kv.convertToPixel=function(e,t,n){var r=this._findConvertTarget(e,t);return r.cartesian?r.cartesian.dataToPoint(n):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(n)):null},Kv.convertFromPixel=function(e,t,n){var r=this._findConvertTarget(e,t);return r.cartesian?r.cartesian.pointToData(n):r.axis?r.axis.coordToData(r.axis.toLocalCoord(n)):null},Kv._findConvertTarget=function(e,t){var n,r,o=t.seriesModel,i=t.xAxisModel||o&&o.getReferringComponents("xAxis")[0],a=t.yAxisModel||o&&o.getReferringComponents("yAxis")[0],s=t.gridModel,l=this._coordsList;if(o)k(l,n=o.coordinateSystem)<0&&(n=null);else if(i&&a)n=this.getCartesian(i.componentIndex,a.componentIndex);else if(i)r=this.getAxis("x",i.componentIndex);else if(a)r=this.getAxis("y",a.componentIndex);else if(s){s.coordinateSystem===this&&(n=this._coordsList[0])}return{cartesian:n,axis:r}},Kv.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},Kv._initCartesian=function(e,t,n){var r={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},i={x:0,y:0};if(t.eachComponent("xAxis",a("x"),this),t.eachComponent("yAxis",a("y"),this),!i.x||!i.y)return this._axesMap={},void(this._axesList=[]);function a(t){return function(n,a){if(Zv(n,e)){var s=n.get("position");"x"===t?"top"!==s&&"bottom"!==s&&(s=r.bottom?"top":"bottom"):"left"!==s&&"right"!==s&&(s=r.left?"right":"left"),r[s]=!0;var l=new Vv(t,hy(n),[0,0],n.get("type"),s),u="category"===l.type;l.onBand=u&&n.get("boundaryGap"),l.inverse=n.get("inverse"),n.axis=l,l.model=n,l.grid=this,l.index=a,this._axesList.push(l),o[t][a]=l,i[t]++}}}this._axesMap=o,M(o.x,function(t,n){M(o.y,function(r,o){var i="x"+n+"y"+o,a=new zv(i);a.grid=this,a.model=e,this._coordsMap[i]=a,this._coordsList.push(a),a.addAxis(t),a.addAxis(r)},this)},this)},Kv._updateScale=function(e,t){function n(e,t,n){M(e.mapDimension(t.dim,!0),function(n){t.scale.unionExtentFromData(e,_d(e,n))})}M(this._axesList,function(e){e.scale.setExtent(1/0,-1/0)}),e.eachSeries(function(r){if(rg(r)){var o=ng(r,e),i=o[0],a=o[1];if(!Zv(i,t)||!Zv(a,t))return;var s=this.getCartesian(i.componentIndex,a.componentIndex),l=r.getData(),u=s.getAxis("x"),c=s.getAxis("y");"list"===l.type&&(n(l,u,r),n(l,c,r))}},this)},Kv.getTooltipAxes=function(e){var t=[],n=[];return M(this.getCartesians(),function(r){var o=null!=e&&"auto"!==e?r.getAxis(e):r.getBaseAxis(),i=r.getOtherAxis(o);k(t,o)<0&&t.push(o),k(n,i)<0&&n.push(i)}),{baseAxes:t,otherAxes:n}};var tg=["xAxis","yAxis"];function ng(e,t){return R(tg,function(t){var n=e.getReferringComponents(t)[0];if(r&&!n)throw new Error(t+' "'+J(e.get(t+"Index"),e.get(t+"Id"),0)+'" not found');return n})}function rg(e){return"cartesian2d"===e.get("coordinateSystem")}Qv.create=function(e,t){var n=[];return e.eachComponent("grid",function(r,o){var i=new Qv(r,e,t);i.name="grid_"+o,i.resize(r,t,!0),r.coordinateSystem=i,n.push(i)}),e.eachSeries(function(e){if(rg(e)){var t=ng(e),n=t[0],o=t[1],i=n.getCoordSysModel();if(r){if(!i)throw new Error('Grid "'+J(n.get("gridIndex"),n.get("gridId"),0)+'" not found');if(n.getCoordSysModel()!==o.getCoordSysModel())throw new Error("xAxis and yAxis must use the same grid")}var a=i.coordinateSystem;e.coordinateSystem=a.getCartesian(n.componentIndex,o.componentIndex)}}),n},Qv.dimensions=Qv.prototype.dimensions=zv.prototype.dimensions,gc.register("cartesian2d",Qv);var og=Math.PI,ig=function(e,t){this.opt=t,this.axisModel=e,S(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new Ln;var n=new Ln({position:t.position.slice(),rotation:t.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n};ig.prototype={constructor:ig,hasBuilder:function(e){return!!ag[e]},add:function(e){ag[e].call(this)},getGroup:function(){return this.group}};var ag={axisLine:function(){var e=this.opt,t=this.axisModel;if(t.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),r=this._transform,o=[n[0],0],i=[n[1],0];r&&(Te(o,o,r),Te(i,i,r));var a=x({lineCap:"round"},t.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new gs({anid:"line",subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:i[0],y2:i[1]},style:a,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1}));var s=t.get("axisLine.symbol"),l=t.get("axisLine.symbolSize"),u=t.get("axisLine.symbolOffset")||0;if("number"==typeof u&&(u=[u,u]),null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var c=l[0],f=l[1];M([{rotate:e.rotation+Math.PI/2,offset:u[0],r:0},{rotate:e.rotation-Math.PI/2,offset:u[1],r:Math.sqrt((o[0]-i[0])*(o[0]-i[0])+(o[1]-i[1])*(o[1]-i[1]))}],function(t,n){if("none"!==s[n]&&null!=s[n]){var r=Ty(s[n],-c/2,-f/2,c,f,a.stroke,!0),i=t.r+t.offset,l=[o[0]+i*Math.cos(e.rotation),o[1]-i*Math.sin(e.rotation)];r.attr({rotation:t.rotate,position:l,silent:!0,z2:11}),this.group.add(r)}},this)}}},axisTickLabel:function(){var e=this.axisModel,t=this.opt,n=function(e,t,n){var r=t.axis,o=t.getModel("axisTick");if(!o.get("show")||r.scale.isBlank())return;for(var i=o.getModel("lineStyle"),a=n.tickDirection*o.get("length"),s=pg(r.getTicksCoords(),e._transform,a,S(i.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}),"ticks"),l=0;l<s.length;l++)e.group.add(s[l]);return s}(this,e,t);!function(e,t,n){if(vy(e.axis))return;var r=e.get("axisLabel.showMinLabel"),o=e.get("axisLabel.showMaxLabel");t=t||[],n=n||[];var i=t[0],a=t[1],s=t[t.length-1],l=t[t.length-2],u=n[0],c=n[1],f=n[n.length-1],h=n[n.length-2];!1===r?(cg(i),cg(u)):fg(i,a)&&(r?(cg(a),cg(c)):(cg(i),cg(u)));!1===o?(cg(s),cg(f)):fg(l,s)&&(o?(cg(l),cg(h)):(cg(s),cg(f)))}(e,function(e,t,n){var r=t.axis;if(!J(n.axisLabelShow,t.get("axisLabel.show"))||r.scale.isBlank())return;var o=t.getModel("axisLabel"),i=o.get("margin"),a=r.getViewLabels(),s=(J(n.labelRotate,o.get("rotate"))||0)*og/180,l=lg(n.rotation,s,n.labelDirection),u=t.getCategories&&t.getCategories(!0),c=[],f=ug(t),h=t.get("triggerEvent");return M(a,function(a,s){var p=a.tickValue,d=a.formattedLabel,y=a.rawLabel,v=o;u&&u[p]&&u[p].textStyle&&(v=new Bl(u[p].textStyle,o,t.ecModel));var g=v.getTextColor()||t.get("axisLine.lineStyle.color"),m=[r.dataToCoord(p),n.labelOffset+n.labelDirection*i],b=new Ka({anid:"label_"+p,position:m,rotation:l.rotation,silent:f,z2:10});hl(b.style,v,{text:d,textAlign:v.getShallow("align",!0)||l.textAlign,textVerticalAlign:v.getShallow("verticalAlign",!0)||v.getShallow("baseline",!0)||l.textVerticalAlign,textFill:"function"==typeof g?g("category"===r.type?y:"value"===r.type?p+"":p,s):g}),h&&(b.eventData=sg(t),b.eventData.targetType="axisLabel",b.eventData.value=y),e._dumbGroup.add(b),b.updateTransform(),c.push(b),e.group.add(b),b.decomposeTransform()}),c}(this,e,t),n),function(e,t,n){var r=t.axis,o=t.getModel("minorTick");if(!o.get("show")||r.scale.isBlank())return;var i=r.getMinorTicksCoords();if(!i.length)return;for(var a=o.getModel("lineStyle"),s=n.tickDirection*o.get("length"),l=S(a.getLineStyle(),S(t.getModel("axisTick").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})),u=0;u<i.length;u++)for(var c=pg(i[u],e._transform,s,l,"minorticks_"+u),f=0;f<c.length;f++)e.group.add(c[f])}(this,e,t)},axisName:function(){var e=this.opt,t=this.axisModel,n=J(e.axisName,t.get("name"));if(n){var r,o,i=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=this.axisModel.axis.getExtent(),c=u[0]>u[1]?-1:1,f=["start"===i?u[0]-c*l:"end"===i?u[1]+c*l:(u[0]+u[1])/2,hg(i)?e.labelOffset+a*l:0],h=t.get("nameRotate");null!=h&&(h=h*og/180),hg(i)?r=lg(e.rotation,null!=h?h:e.rotation,a):(r=function(e,t,n,r){var o,i,a=$l(n-e.rotation),s=r[0]>r[1],l="start"===t&&!s||"start"!==t&&s;eu(a-og/2)?(i=l?"bottom":"top",o="center"):eu(a-1.5*og)?(i=l?"top":"bottom",o="center"):(i="middle",o=a<1.5*og&&a>og/2?l?"left":"right":l?"right":"left");return{rotation:a,textAlign:o,textVerticalAlign:i}}(e,i,h||0,u),null!=(o=e.axisNameAvailableWidth)&&(o=Math.abs(o/Math.sin(r.rotation)),!isFinite(o)&&(o=null)));var p=s.getFont(),d=t.get("nameTruncate",!0)||{},y=d.ellipsis,v=J(e.nameTruncateMaxWidth,d.maxWidth,o),g=null!=y&&null!=v?Su(n,v,p,y,{minChar:2,placeholder:d.placeholder}):n,m=t.get("tooltip",!0),b=t.mainType,w={componentType:b,name:n,$vars:["name"]};w[b+"Index"]=t.componentIndex;var _=new Ka({anid:"name",__fullText:n,__truncatedText:g,position:f,rotation:r.rotation,silent:ug(t),z2:1,tooltip:m&&m.show?x({content:n,formatter:function(){return n},formatterParams:w},m):null});hl(_.style,s,{text:g,textFont:p,textFill:s.getTextColor()||t.get("axisLine.lineStyle.color"),textAlign:s.get("align")||r.textAlign,textVerticalAlign:s.get("verticalAlign")||r.textVerticalAlign}),t.get("triggerEvent")&&(_.eventData=sg(t),_.eventData.targetType="axisName",_.eventData.name=n),this._dumbGroup.add(_),_.updateTransform(),this.group.add(_),_.decomposeTransform()}}},sg=ig.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},lg=ig.innerTextLayout=function(e,t,n){var r,o,i=$l(t-e);return eu(i)?(o=n>0?"top":"bottom",r="center"):eu(i-og)?(o=n>0?"bottom":"top",r="center"):(o="middle",r=i>0&&i<og?n>0?"right":"left":n>0?"left":"right"),{rotation:i,textAlign:r,textVerticalAlign:o}};var ug=ig.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)};function cg(e){e&&(e.ignore=!0)}function fg(e,t,n){var r=e&&e.getBoundingRect().clone(),o=t&&t.getBoundingRect().clone();if(r&&o){var i=ct([]);return dt(i,i,-e.rotation),r.applyTransform(ht([],i,e.getLocalTransform())),o.applyTransform(ht([],i,t.getLocalTransform())),r.intersect(o)}}function hg(e){return"middle"===e||"center"===e}function pg(e,t,n,r,o){for(var i=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=n,t&&(Te(a,a,t),Te(s,s,t));var c=new gs({anid:o+"_"+e[l].tickValue,subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:r,z2:2,silent:!0});i.push(c)}return i}var dg=M,yg=N;function vg(e,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(e,t,n){var r=t.getComponent("tooltip"),o=t.getComponent("axisPointer"),i=o.get("link",!0)||[],a=[];dg(n.getCoordinateSystems(),function(n){if(n.axisPointerEnabled){var s=wg(n.model),l=e.coordSysAxesInfo[s]={};e.coordSysMap[s]=n;var u=n.model,c=u.getModel("tooltip",r);if(dg(n.getAxes(),yg(d,!1,null)),n.getTooltipAxes&&r&&c.get("show")){var f="axis"===c.get("trigger"),h="cross"===c.get("axisPointer.type"),p=n.getTooltipAxes(c.get("axisPointer.axis"));(f||h)&&dg(p.baseAxes,yg(d,!h||"cross",f)),h&&dg(p.otherAxes,yg(d,"cross",!1))}}function d(r,s,u){var f=u.model.getModel("axisPointer",o),h=f.get("show");if(h&&("auto"!==h||r||bg(f))){null==s&&(s=f.get("triggerTooltip"));var p=(f=r?function(e,t,n,r,o,i){var a=t.getModel("axisPointer"),s={};dg(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(e){s[e]=b(a.get(e))}),s.snap="category"!==e.type&&!!i,"cross"===a.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===o){var u=a.get("label.show");if(l.show=null==u||u,!i){var c=s.lineStyle=a.get("crossStyle");c&&S(l,c.textStyle)}}return e.model.getModel("axisPointer",new Bl(s,n,r))}(u,c,o,t,r,s):f).get("snap"),d=wg(u.model),y=s||p||"category"===u.type,v=e.axesInfo[d]={key:d,axis:u,coordSys:n,axisPointerModel:f,triggerTooltip:s,involveSeries:y,snap:p,useHandle:bg(f),seriesModels:[]};l[d]=v,e.seriesInvolved|=y;var g=function(e,t){for(var n=t.model,r=t.dim,o=0;o<e.length;o++){var i=e[o]||{};if(gg(i[r+"AxisId"],n.id)||gg(i[r+"AxisIndex"],n.componentIndex)||gg(i[r+"AxisName"],n.name))return o}}(i,u);if(null!=g){var m=a[g]||(a[g]={axesInfo:{}});m.axesInfo[d]=v,m.mapper=i[g].mapper,v.linkGroup=m}}}})}(n,e,t),n.seriesInvolved&&function(e,t){t.eachSeries(function(t){var n=t.coordinateSystem,r=t.get("tooltip.trigger",!0),o=t.get("tooltip.show",!0);n&&"none"!==r&&!1!==r&&"item"!==r&&!1!==o&&!1!==t.get("axisPointer.show",!0)&&dg(e.coordSysAxesInfo[wg(n.model)],function(e){var r=e.axis;n.getAxis(r.dim)===r&&(e.seriesModels.push(t),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=t.getData().count())})},this)}(n,e),n}function gg(e,t){return"all"===e||B(e)&&k(e,t)>=0||e===t}function mg(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[wg(e)]}function bg(e){return!!e.get("handle.show")}function wg(e){return e.type+"||"+e.id}var _g=Rp({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(e,t,n,r){this.axisPointerClass&&function(e){var t=mg(e);if(t){var n=t.axisPointerModel,r=t.axis.scale,o=n.option,i=n.get("status"),a=n.get("value");null!=a&&(a=r.parse(a));var s=bg(n);null==i&&(o.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),o.value=a,s&&(o.status=t.axis.scale.isBlank()?"hide":"show")}}(e),_g.superApply(this,"render",arguments),xg(this,e,t,n,r,!0)},updateAxisPointer:function(e,t,n,r,o){xg(this,e,t,n,r,!1)},remove:function(e,t){var n=this._axisPointer;n&&n.remove(t),_g.superApply(this,"remove",arguments)},dispose:function(e,t){Sg(this,t),_g.superApply(this,"dispose",arguments)}});function xg(e,t,n,r,o,i){var a=_g.getAxisPointerClass(e.axisPointerClass);if(a){var s=function(e){var t=mg(e);return t&&t.axisPointerModel}(t);s?(e._axisPointer||(e._axisPointer=new a)).render(t,s,r,i):Sg(e,r)}}function Sg(e,t,n){var r=e._axisPointer;r&&r.dispose(t,n),e._axisPointer=null}var Og=[];function Pg(e,t,n){n=n||{};var r=e.coordinateSystem,o=t.axis,i={},a=o.getAxesOnZeroOf()[0],s=o.position,l=a?"onZero":s,u=o.dim,c=r.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},p=t.get("offset")||0,d="x"===u?[f[2]-p,f[3]+p]:[f[0]-p,f[1]+p];if(a){var y=a.toGlobalCoord(a.dataToCoord(0));d[h.onZero]=Math.max(Math.min(y,d[1]),d[0])}i.position=["y"===u?d[h[l]]:f[0],"x"===u?d[h[l]]:f[3]],i.rotation=Math.PI/2*("x"===u?0:1);i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],i.labelOffset=a?d[h[s]]-d[h.onZero]:0,t.get("axisTick.inside")&&(i.tickDirection=-i.tickDirection),J(n.labelInside,t.get("axisLabel.inside"))&&(i.labelDirection=-i.labelDirection);var v=t.get("axisLabel.rotate");return i.labelRotate="top"===l?-v:v,i.z2=1,i}function Tg(e,t,n,r){var o=n.axis;if(!o.scale.isBlank()){var i=n.getModel("splitArea"),a=i.getModel("areaStyle"),s=a.get("color"),l=r.coordinateSystem.getRect(),u=o.getTicksCoords({tickModel:i,clamp:!0});if(u.length){var c=s.length,f=e.__splitAreaColors,h=re(),p=0;if(f)for(var d=0;d<u.length;d++){var y=f.get(u[d].tickValue);if(null!=y){p=(y+(c-1)*d)%c;break}}var v=o.toGlobalCoord(u[0].coord),g=a.getAreaStyle();s=B(s)?s:[s];for(d=1;d<u.length;d++){var m,b,w,_,x=o.toGlobalCoord(u[d].coord);o.isHorizontal()?(m=v,b=l.y,w=x-m,_=l.height,v=m+w):(m=l.x,b=v,w=l.width,v=b+(_=x-b));var O=u[d-1].tickValue;null!=O&&h.set(O,p),t.add(new ys({anid:null!=O?"area_"+O:null,shape:{x:m,y:b,width:w,height:_},style:S({fill:s[p]},g),silent:!0})),p=(p+1)%c}e.__splitAreaColors=h}}}function kg(e){e.__splitAreaColors=null}_g.registerAxisPointerClass=function(e,t){if(r&&Og[e])throw new Error("axisPointer "+e+" exists");Og[e]=t},_g.getAxisPointerClass=function(e){return e&&Og[e]};var Cg=["axisLine","axisTickLabel","axisName"],Eg=["splitArea","splitLine","minorSplitLine"],Ag=_g.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,n,r){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Ln,this.group.add(this._axisGroup),e.get("show")){var i=e.getCoordSysModel(),a=Pg(i,e),s=new ig(e,a);M(Cg,s.add,s),this._axisGroup.add(s.getGroup()),M(Eg,function(t){e.get(t+".show")&&this["_"+t](e,i)},this),Pl(o,this._axisGroup,e),Ag.superCall(this,"render",e,t,n,r)}},remove:function(){kg(this)},_splitLine:function(e,t){var n=e.axis;if(!n.scale.isBlank()){var r=e.getModel("splitLine"),o=r.getModel("lineStyle"),i=o.get("color");i=B(i)?i:[i];for(var a=t.coordinateSystem.getRect(),s=n.isHorizontal(),l=0,u=n.getTicksCoords({tickModel:r}),c=[],f=[],h=o.getLineStyle(),p=0;p<u.length;p++){var d=n.toGlobalCoord(u[p].coord);s?(c[0]=d,c[1]=a.y,f[0]=d,f[1]=a.y+a.height):(c[0]=a.x,c[1]=d,f[0]=a.x+a.width,f[1]=d);var y=l++%i.length,v=u[p].tickValue;this._axisGroup.add(new gs({anid:null!=v?"line_"+u[p].tickValue:null,subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:S({stroke:i[y]},h),silent:!0}))}}},_minorSplitLine:function(e,t){var n=e.axis,r=e.getModel("minorSplitLine").getModel("lineStyle"),o=t.coordinateSystem.getRect(),i=n.isHorizontal(),a=n.getMinorTicksCoords();if(a.length)for(var s=[],l=[],u=r.getLineStyle(),c=0;c<a.length;c++)for(var f=0;f<a[c].length;f++){var h=n.toGlobalCoord(a[c][f].coord);i?(s[0]=h,s[1]=o.y,l[0]=h,l[1]=o.y+o.height):(s[0]=o.x,s[1]=h,l[0]=o.x+o.width,l[1]=h),this._axisGroup.add(new gs({anid:"minor_line_"+a[c][f].tickValue,subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,silent:!0}))}},_splitArea:function(e,t){Tg(this,this._axisGroup,e,t)}});Ag.extend({type:"xAxis"}),Ag.extend({type:"yAxis"}),Rp({type:"grid",render:function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new ys({shape:e.coordinateSystem.getRect(),style:S({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))}}),Sp(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})}),Cp(Lv("line","circle","line")),kp(Dv("line")),Op(Lh.PROCESSOR.STATISTIC,function(e){return{seriesType:e,modifyOutputEnd:!0,reset:function(e,t,n){var r=e.getData(),o=e.get("sampling"),i=e.coordinateSystem;if("cartesian2d"===i.type&&o){var a,s=i.getBaseAxis(),l=i.getOtherAxis(s),u=s.getExtent(),c=Math.abs(u[1]-u[0]),f=Math.round(r.count()/c);f>1&&("string"==typeof o?a=Nv[o]:"function"==typeof o&&(a=o),a&&e.setData(r.downSample(r.mapDimension(l.dim),1/f,a,Bv)))}}}}("line"));var Mg=uf.extend({type:"series.__base_bar__",getInitialData:function(e,t){return xd(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(e){var t=this.coordinateSystem;if(t){var n=t.dataToPoint(t.clampData(e)),r=this.getData(),o=r.getLayout("offset"),i=r.getLayout("size");return n[t.getBaseAxis().isHorizontal()?0:1]+=o+i/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function Rg(e,t,n,r,o,i,a){cl(e,t,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:o,labelDataIndex:i,defaultText:Zy(o.getData(),i),isRectText:!0,autoColor:r}),Ig(e),Ig(t)}function Ig(e,t){"outside"===e.textPosition&&(e.textPosition=t)}Mg.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var jg=vi([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Lg={getBarItemStyle:function(e){var t=jg(this,e);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(t.lineDash=n)}return t}},Dg=Bs({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=Math.max(t.r0||0,0),i=Math.max(t.r,0),a=.5*(i-o),s=o+a,l=t.startAngle,u=t.endAngle,c=t.clockwise,f=Math.cos(l),h=Math.sin(l),p=Math.cos(u),d=Math.sin(u);(c?u-l<2*Math.PI:l-u<2*Math.PI)&&(e.moveTo(f*o+n,h*o+r),e.arc(f*s+n,h*s+r,a,-Math.PI+l,l,!c)),e.arc(n,r,i,l,u,!c),e.moveTo(p*i+n,d*i+r),e.arc(p*s+n,d*s+r,a,u-2*Math.PI,u-Math.PI,!c),0!==o&&(e.arc(n,r,o,u,l,c),e.moveTo(f*o+n,d*o+r)),e.closePath()}}),Ng=["itemStyle","barBorderWidth"],Bg=[0,0];x(Bl.prototype,Lg),jp({type:"bar",render:function(e,t,n){this._updateDrawMode(e);var o=e.get("coordinateSystem");return"cartesian2d"===o||"polar"===o?this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n):r&&console.warn("Only cartesian2d and polar supported for bar."),this.group},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,r){this._incrementalRenderLarge(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e,t,n){var r,o=this.group,i=e.getData(),a=this._data,s=e.coordinateSystem,l=s.getBaseAxis();"cartesian2d"===s.type?r=l.isHorizontal():"polar"===s.type&&(r="angle"===l.dim);var u=e.isAnimationEnabled()?e:null,c=e.get("clip",!0),f=function(e,t){var n=e.getArea&&e.getArea();if("cartesian2d"===e.type){var r=e.getBaseAxis();if("category"!==r.type||!r.onBand){var o=t.getLayout("bandWidth");r.isHorizontal()?(n.x-=o,n.width+=2*o):(n.y-=o,n.height+=2*o)}}return n}(s,i);o.removeClipPath();var h=e.get("roundCap",!0),p=e.get("showBackground",!0),d=e.getModel("backgroundStyle"),y=d.get("barBorderRadius")||0,v=[],g=this._backgroundEls||[],m=function(e){var t=Ug[s.type](i,e),n=function(e,t,n){return new("polar"===e.type?ns:ys)({shape:Qg(t,n,e),silent:!0,z2:0})}(s,r,t);return n.useStyle(d.getBarItemStyle()),"cartesian2d"===s.type&&n.setShape("r",y),v[e]=n,n};i.diff(a).add(function(t){var n=i.getItemModel(t),a=Ug[s.type](i,t,n);if(p&&m(t),i.hasValue(t)){if(c)if(zg[s.type](f,a))return void o.remove(l);var l=Vg[s.type](t,a,r,u,!1,h);i.setItemGraphicEl(t,l),o.add(l),qg(l,i,t,n,a,e,r,"polar"===s.type)}}).update(function(t,n){var l=i.getItemModel(t),b=Ug[s.type](i,t,l);if(p){var w;0===g.length?w=m(n):((w=g[n]).useStyle(d.getBarItemStyle()),"cartesian2d"===s.type&&w.setShape("r",y),v[t]=w);var _=Ug[s.type](i,t);wl(w,{shape:Qg(r,_,s)},u,t)}var x=a.getItemGraphicEl(n);if(i.hasValue(t)){if(c)if(zg[s.type](f,b))return void o.remove(x);x?wl(x,{shape:b},u,t):x=Vg[s.type](t,b,r,u,!0,h),i.setItemGraphicEl(t,x),o.add(x),qg(x,i,t,l,b,e,r,"polar"===s.type)}else o.remove(x)}).remove(function(e){var t=a.getItemGraphicEl(e);"cartesian2d"===s.type?t&&Hg(e,u,t):t&&Wg(e,u,t)}).execute();var b=this._backgroundGroup||(this._backgroundGroup=new Ln);b.removeAll();for(var w=0;w<v.length;++w)b.add(v[w]);o.add(b),this._backgroundEls=v,this._data=i},_renderLarge:function(e,t,n){this._clear(),Xg(e,this.group);var r=e.get("clip",!0)?Cv(e.coordinateSystem,!1,e):null;r?this.group.setClipPath(r):this.group.removeClipPath()},_incrementalRenderLarge:function(e,t){this._removeBackground(),Xg(t,this.group,!0)},dispose:ie,remove:function(e){this._clear(e)},_clear:function(e){var t=this.group,n=this._data;e&&e.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(t){"sector"===t.type?Wg(t.dataIndex,e,t):Hg(t.dataIndex,e,t)})):t.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var Fg=Math.max,Gg=Math.min,zg={cartesian2d:function(e,t){var n=t.width<0?-1:1,r=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var o=Fg(t.x,e.x),i=Gg(t.x+t.width,e.x+e.width),a=Fg(t.y,e.y),s=Gg(t.y+t.height,e.y+e.height);t.x=o,t.y=a,t.width=i-o,t.height=s-a;var l=t.width<0||t.height<0;return n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),l},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}r=Gg(t.r,e.r);var o=Fg(t.r0,e.r0);t.r=r,t.r0=o;var i=r-o<0;if(n<0){r=t.r;t.r=t.r0,t.r0=r}return i}},Vg={cartesian2d:function(e,t,n,r,o){var i=new ys({shape:x({},t),z2:1});if(i.name="item",r){var a=i.shape,s=n?"height":"width",l={};a[s]=0,l[s]=t[s],Ml[o?"updateProps":"initProps"](i,{shape:l},r,e)}return i},polar:function(e,t,n,r,o,i){var a=t.startAngle<t.endAngle,s=new(!n&&i?Dg:ns)({shape:S({clockwise:a},t),z2:1});if(s.name="item",r){var l=s.shape,u=n?"r":"endAngle",c={};l[u]=n?0:t.startAngle,c[u]=t[u],Ml[o?"updateProps":"initProps"](s,{shape:c},r,e)}return s}};function Hg(e,t,n){n.style.text=null,wl(n,{shape:{width:0}},t,e,function(){n.parent&&n.parent.remove(n)})}function Wg(e,t,n){n.style.text=null,wl(n,{shape:{r:n.shape.r0}},t,e,function(){n.parent&&n.parent.remove(n)})}var Ug={cartesian2d:function(e,t,n){var r=e.getItemLayout(t),o=n?function(e,t){var n=e.get(Ng)||0,r=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,r,o)}(n,r):0,i=r.width>0?1:-1,a=r.height>0?1:-1;return{x:r.x+i*o/2,y:r.y+a*o/2,width:r.width-i*o,height:r.height-a*o}},polar:function(e,t,n){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle}}};function Jg(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function qg(e,t,n,r,o,i,a,s){var l=t.getItemVisual(n,"color"),u=t.getItemVisual(n,"opacity"),c=t.getVisual("borderColor"),f=r.getModel("itemStyle"),h=r.getModel("emphasis.itemStyle").getBarItemStyle();s||e.setShape("r",f.get("barBorderRadius")||0),e.useStyle(S({stroke:Jg(o)?"none":c,fill:Jg(o)?"none":l,opacity:u},f.getBarItemStyle()));var p=r.getShallow("cursor");p&&e.attr("cursor",p);a?o.height:o.width;s||Rg(e.style,h,r,l,i,n),Jg(o)&&(h.fill=h.stroke="none"),al(e,h)}var Yg=ja.extend({type:"largeBar",shape:{points:[]},buildPath:function(e,t){for(var n=t.points,r=this.__startPoint,o=this.__baseDimIdx,i=0;i<n.length;i+=2)r[o]=n[i+o],e.moveTo(r[0],r[1]),e.lineTo(n[i],n[i+1])}});function Xg(e,t,n){var r=e.getData(),o=[],i=r.getLayout("valueAxisHorizontal")?1:0;o[1-i]=r.getLayout("valueAxisStart");var a=r.getLayout("largeDataIndices"),s=r.getLayout("barWidth"),l=e.getModel("backgroundStyle");if(e.get("showBackground",!0)){var u=r.getLayout("largeBackgroundPoints"),c=[];c[1-i]=r.getLayout("backgroundStart");var f=new Yg({shape:{points:u},incremental:!!n,__startPoint:c,__baseDimIdx:i,__largeDataIndices:a,__barWidth:s,silent:!0,z2:0});!function(e,t,n){var r=t.get("borderColor")||t.get("color"),o=t.getItemStyle(["color","borderColor"]);e.useStyle(o),e.style.fill=null,e.style.stroke=r,e.style.lineWidth=n.getLayout("barWidth")}(f,l,r),t.add(f)}var h=new Yg({shape:{points:r.getLayout("largePoints")},incremental:!!n,__startPoint:o,__baseDimIdx:i,__largeDataIndices:a,__barWidth:s});t.add(h),function(e,t,n){var r=n.getVisual("borderColor")||n.getVisual("color"),o=t.getModel("itemStyle").getItemStyle(["color","borderColor"]);e.useStyle(o),e.style.fill=null,e.style.stroke=r,e.style.lineWidth=n.getLayout("barWidth")}(h,e,r),h.seriesIndex=e.seriesIndex,e.get("silent")||(h.on("mousedown",Zg),h.on("mousemove",Zg))}var Zg=Rf(function(e){var t=function(e,t,n){var r=e.__baseDimIdx,o=1-r,i=e.shape.points,a=e.__largeDataIndices,s=Math.abs(e.__barWidth/2),l=e.__startPoint[o];Bg[0]=t,Bg[1]=n;for(var u=Bg[r],c=Bg[1-r],f=u-s,h=u+s,p=0,d=i.length/2;p<d;p++){var y=2*p,v=i[y+r],g=i[y+o];if(v>=f&&v<=h&&(l<=g?c>=l&&c<=g:c>=g&&c<=l))return a[p]}return-1}(this,e.offsetX,e.offsetY);this.dataIndex=t>=0?t:null},30,!1);function Qg(e,t,n){var r,o="polar"===n.type;return r=o?n.getArea():n.grid.getRect(),o?{cx:r.cx,cy:r.cy,r0:e?r.r0:t.r0,r:e?r.r:t.r,startAngle:e?t.startAngle:0,endAngle:e?t.endAngle:2*Math.PI}:{x:e?t.x:r.x,y:e?r.y:t.y,width:e?t.width:r.width,height:e?r.height:t.height}}kp(Lh.VISUAL.LAYOUT,N(Wd,"bar")),kp(Lh.VISUAL.PROGRESSIVE_LAYOUT,Ud),Cp({seriesType:"bar",reset:function(e){e.getData().setVisual("legendSymbol","roundRect")}});var Kg=function(e,t,n){t=B(t)&&{coordDimensions:t}||x({},t);var r=e.getSource(),o=yd(r,t),i=new $p(o,e);return i.initData(r,n),i},$g={updateSelectedMap:function(e){this._targetList=B(e)?e.slice():[],this._selectTargetMap=I(e||[],function(e,t){return e.set(t.name,t),e},re())},select:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(e){e.selected=!1}),n&&(n.selected=!0)},unSelect:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);n&&(n.selected=!1)},toggleSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=n)return this[n.selected?"unSelect":"select"](e,t),n.selected},isSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return n&&n.selected}};function em(e,t){this.getAllNames=function(){var e=t();return e.mapArray(e.getName)},this.containName=function(e){return t().indexOfName(e)>=0},this.indexOfName=function(t){return e().indexOfName(t)},this.getItemVisual=function(t,n){return e().getItemVisual(t,n)}}var tm=Ip({type:"series.pie",init:function(e){tm.superApply(this,"init",arguments),this.legendVisualProvider=new em(D(this.getData,this),D(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(e)},mergeOption:function(e){tm.superCall(this,"mergeOption",e),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(e,t){return Kg(this,{coordDimensions:["value"],encodeDefaulter:N(ic,this)})},_createSelectableList:function(){for(var e=this.getRawData(),t=e.mapDimension("value"),n=[],r=0,o=e.count();r<o;r++)n.push({name:e.getName(r),value:e.get(t,r),selected:$c(e,r,"selected")});return n},getDataParams:function(e){var t=this.getData(),n=tm.superCall(this,"getDataParams",e),r=[];return t.each(t.mapDimension("value"),function(e){r.push(e)}),n.percent=Ql(r,e,t.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(e){Jo(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function nm(e,t,n,r){var o=t.getData(),i=this.dataIndex,a=o.getName(i),s=t.get("selectedOffset");r.dispatchAction({type:"pieToggleSelect",from:e,name:a,seriesId:t.id}),o.each(function(e){rm(o.getItemGraphicEl(e),o.getItemLayout(e),t.isSelected(o.getName(e)),s,n)})}function rm(e,t,n,r,o){var i=(t.startAngle+t.endAngle)/2,a=Math.cos(i),s=Math.sin(i),l=n?r:0,u=[a*l,s*l];o?e.animate().when(200,{position:u}).start("bounceOut"):e.attr("position",u)}function om(e,t){Ln.call(this);var n=new ns({z2:2}),r=new us,o=new Ka;this.add(n),this.add(r),this.add(o),this.updateData(e,t,!0)}E(tm,$g);var im=om.prototype;im.updateData=function(e,t,n){var r=this.childAt(0),o=this.childAt(1),i=this.childAt(2),a=e.hostModel,s=e.getItemModel(t),l=e.getItemLayout(t),u=x({},l);u.label=null;var c=a.getShallow("animationTypeUpdate");n?(r.setShape(u),"scale"===a.getShallow("animationType")?(r.shape.r=l.r0,_l(r,{shape:{r:l.r}},a,t)):(r.shape.endAngle=l.startAngle,wl(r,{shape:{endAngle:l.endAngle}},a,t))):"expansion"===c?r.setShape(u):wl(r,{shape:u},a,t);var f=e.getItemVisual(t,"color");r.useStyle(S({lineJoin:"bevel",fill:f},s.getModel("itemStyle").getItemStyle())),r.hoverStyle=s.getModel("emphasis.itemStyle").getItemStyle();var h=s.getShallow("cursor");h&&r.attr("cursor",h),rm(this,e.getItemLayout(t),a.isSelected(e.getName(t)),a.get("selectedOffset"),a.get("animation"));var p=!n&&"transition"===c;this._updateLabel(e,t,p),this.highDownOnUpdate=a.get("silent")?null:function(e,t){var n=a.isAnimationEnabled()&&s.get("hoverAnimation");"emphasis"===t?(o.ignore=o.hoverIgnore,i.ignore=i.hoverIgnore,n&&(r.stopAnimation(!0),r.animateTo({shape:{r:l.r+a.get("hoverOffset")}},300,"elasticOut"))):(o.ignore=o.normalIgnore,i.ignore=i.normalIgnore,n&&(r.stopAnimation(!0),r.animateTo({shape:{r:l.r}},300,"elasticOut")))},al(this)},im._updateLabel=function(e,t,n){var r=this.childAt(1),o=this.childAt(2),i=e.hostModel,a=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"color");if(!s||isNaN(s.x)||isNaN(s.y))o.ignore=o.normalIgnore=o.hoverIgnore=r.ignore=r.normalIgnore=r.hoverIgnore=!0;else{var u={points:s.linePoints||[[s.x,s.y],[s.x,s.y],[s.x,s.y]]},c={x:s.x,y:s.y};n?(wl(r,{shape:u},i,t),wl(o,{style:c},i,t)):(r.attr({shape:u}),o.attr({style:c})),o.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var f=a.getModel("label"),h=a.getModel("emphasis.label"),p=a.getModel("labelLine"),d=a.getModel("emphasis.labelLine");l=e.getItemVisual(t,"color");cl(o.style,o.hoverStyle={},f,h,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:s.text,autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),o.ignore=o.normalIgnore=!f.get("show"),o.hoverIgnore=!h.get("show"),r.ignore=r.normalIgnore=!p.get("show"),r.hoverIgnore=!d.get("show"),r.setStyle({stroke:l,opacity:e.getItemVisual(t,"opacity")}),r.setStyle(p.getModel("lineStyle").getLineStyle()),r.hoverStyle=d.getModel("lineStyle").getLineStyle();var y=p.get("smooth");y&&!0===y&&(y=.4),r.setShape({smooth:y})}},C(om,Ln);xf.extend({type:"pie",init:function(){var e=new Ln;this._sectorGroup=e},render:function(e,t,n,r){if(!r||r.from!==this.uid){var o=e.getData(),i=this._data,a=this.group,s=t.get("animation"),l=!i,u=e.get("animationType"),c=e.get("animationTypeUpdate"),f=N(nm,this.uid,e,s,n),h=e.get("selectedMode");if(o.diff(i).add(function(e){var t=new om(o,e);l&&"scale"!==u&&t.eachChild(function(e){e.stopAnimation(!0)}),h&&t.on("click",f),o.setItemGraphicEl(e,t),a.add(t)}).update(function(e,t){var n=i.getItemGraphicEl(t);l||"transition"===c||n.eachChild(function(e){e.stopAnimation(!0)}),n.updateData(o,e),n.off("click"),h&&n.on("click",f),a.add(n),o.setItemGraphicEl(e,n)}).remove(function(e){var t=i.getItemGraphicEl(e);a.remove(t)}).execute(),s&&o.count()>0&&(l?"scale"!==u:"transition"!==c)){for(var p=o.getItemLayout(0),d=1;isNaN(p.startAngle)&&d<o.count();++d)p=o.getItemLayout(d);var y=Math.max(n.getWidth(),n.getHeight())/2,v=D(a.removeClipPath,a);a.setClipPath(this._createClipPath(p.cx,p.cy,y,p.startAngle,p.clockwise,v,e,l))}else a.removeClipPath();this._data=o}},dispose:function(){},_createClipPath:function(e,t,n,r,o,i,a,s){var l=new ns({shape:{cx:e,cy:t,r0:0,r:n,startAngle:r,endAngle:r,clockwise:o}});return(s?_l:wl)(l,{shape:{endAngle:r+(o?1:-1)*Math.PI*2}},a,i),l},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var r=e[0]-n.cx,o=e[1]-n.cy,i=Math.sqrt(r*r+o*o);return i<=n.r&&i>=n.r0}}});var am=function(e,t){M(t,function(t){t.update="updateView",Pp(t,function(n,r){var o={};return r.eachComponent({mainType:"series",subType:e,query:n},function(e){e[t.method]&&e[t.method](n.name,n.dataIndex);var r=e.getData();r.each(function(t){var n=r.getName(t);o[n]=e.isSelected(n)||!1})}),{name:n.name,selected:o,seriesId:n.seriesId}})})},sm=function(e){return{getTargetSeries:function(t){var n={},r=re();return t.eachSeriesByType(e,function(e){e.__paletteScope=n,r.set(e.uid,e)}),r},reset:function(e,t){var n=e.getRawData(),r={},o=e.getData();o.each(function(e){var t=o.getRawIndex(e);r[t]=e}),n.each(function(t){var i,a=r[t],s=null!=a&&o.getItemVisual(a,"color",!0),l=null!=a&&o.getItemVisual(a,"borderColor",!0);if(s&&l||(i=n.getItemModel(t)),!s){var u=i.get("itemStyle.color")||e.getColorFromPalette(n.getName(t)||t+"",e.__paletteScope,n.count());null!=a&&o.setItemVisual(a,"color",u)}if(!l){var c=i.get("itemStyle.borderColor");null!=a&&o.setItemVisual(a,"borderColor",c)}})}}},lm=Math.PI/180;function um(e,t,n,r,o,i,a,s,l,u){function c(t,n,r,o){for(var i=t;i<n&&!(e[i].y+r>l+a);i++)if(e[i].y+=r,i>t&&i+1<n&&e[i+1].y>e[i].y+e[i].height)return void f(i,r/2);f(n-1,r/2)}function f(t,n){for(var r=t;r>=0&&!(e[r].y-n<l)&&(e[r].y-=n,!(r>0&&e[r].y>e[r-1].y+e[r-1].height));r--);}function h(e,t,n,r,o,i){for(var a=t?Number.MAX_VALUE:0,s=0,l=e.length;s<l;s++)if("none"===e[s].labelAlignTo){var u=Math.abs(e[s].y-r),c=e[s].len,f=e[s].len2,h=u<o+c?Math.sqrt((o+c+f)*(o+c+f)-u*u):Math.abs(e[s].x-n);t&&h>=a&&(h=a-10),!t&&h<=a&&(h=a+10),e[s].x=n+h*i,a=h}}e.sort(function(e,t){return e.y-t.y});for(var p,d=0,y=e.length,v=[],g=[],m=0;m<y;m++){if("outer"===e[m].position&&"labelLine"===e[m].labelAlignTo){var b=e[m].x-u;e[m].linePoints[1][0]+=b,e[m].x=u}(p=e[m].y-d)<0&&c(m,y,-p),d=e[m].y+e[m].height}a-d<0&&f(y-1,d-a);for(m=0;m<y;m++)e[m].y>=n?g.push(e[m]):v.push(e[m]);h(v,!1,t,n,r,o),h(g,!0,t,n,r,o)}function cm(e){return"center"===e.position}var fm=function(e,t,n,r,o,i){var a,s,l=e.getData(),u=[],c=!1,f=(e.get("minShowLabelAngle")||0)*lm;l.each(function(r){var i=l.getItemLayout(r),h=l.getItemModel(r),p=h.getModel("label"),d=p.get("position")||h.get("emphasis.label.position"),y=p.get("distanceToLabelLine"),v=p.get("alignTo"),g=Ul(p.get("margin"),n),m=p.get("bleedMargin"),b=p.getFont(),w=h.getModel("labelLine"),_=w.get("length");_=Ul(_,n);var x=w.get("length2");if(x=Ul(x,n),!(i.angle<f)){var S,O,P,T,k=(i.startAngle+i.endAngle)/2,C=Math.cos(k),E=Math.sin(k);a=i.cx,s=i.cy;var A,M=e.getFormattedLabel(r,"normal")||l.getName(r),R=wr(M,b,T,"top"),I="inside"===d||"inner"===d;if("center"===d)S=i.cx,O=i.cy,T="center";else{var j=(I?(i.r+i.r0)/2*C:i.r*C)+a,L=(I?(i.r+i.r0)/2*E:i.r*E)+s;if(S=j+3*C,O=L+3*E,!I){var D=j+C*(_+t-i.r),N=L+E*(_+t-i.r),B=D+(C<0?-1:1)*x;S="edge"===v?C<0?o+g:o+n-g:B+(C<0?-y:y),O=N,P=[[j,L],[D,N],[B,N]]}T=I?"center":"edge"===v?C>0?"right":"left":C>0?"left":"right"}var F=p.get("rotate");A="number"==typeof F?F*(Math.PI/180):F?C<0?-k+Math.PI:-k:0,c=!!A,i.label={x:S,y:O,position:d,height:R.height,len:_,len2:x,linePoints:P,textAlign:T,verticalAlign:"middle",rotation:A,inside:I,labelDistance:y,labelAlignTo:v,labelMargin:g,bleedMargin:m,textRect:R,text:M,font:b},I||u.push(i.label)}}),!c&&e.get("avoidLabelOverlap")&&function(e,t,n,r,o,i,a,s){for(var l=[],u=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,h=0;h<e.length;h++)cm(e[h])||(e[h].x<t?(c=Math.min(c,e[h].x),l.push(e[h])):(f=Math.max(f,e[h].x),u.push(e[h])));for(um(u,t,n,r,1,0,i,0,s,f),um(l,t,n,r,-1,0,i,0,s,c),h=0;h<e.length;h++){var p=e[h];if(!cm(p)){var d=p.linePoints;if(d){var y,v="edge"===p.labelAlignTo,g=p.textRect.width;(y=v?p.x<t?d[2][0]-p.labelDistance-a-p.labelMargin:a+o-p.labelMargin-d[2][0]-p.labelDistance:p.x<t?p.x-a-p.bleedMargin:a+o-p.x-p.bleedMargin)<p.textRect.width&&(p.text=Or(p.text,y,p.font),"edge"===p.labelAlignTo&&(g=br(p.text,p.font)));var m=d[1][0]-d[2][0];v?p.x<t?d[2][0]=a+p.labelMargin+g+p.labelDistance:d[2][0]=a+o-p.labelMargin-g-p.labelDistance:(p.x<t?d[2][0]=p.x+p.labelDistance:d[2][0]=p.x-p.labelDistance,d[1][0]=d[2][0]+m),d[1][1]=d[2][1]=p.y}}}}(u,a,s,t,n,r,o,i)},hm=2*Math.PI,pm=Math.PI/180;var dm=function(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var r=e.getData();r.filterSelf(function(e){for(var t=r.getName(e),o=0;o<n.length;o++)if(!n[o].isSelected(t))return!1;return!0})}}}};am("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),Cp(sm("pie")),kp(N(function(e,t,n,r){t.eachSeriesByType(e,function(e){var t=e.getData(),r=t.mapDimension("value"),o=function(e,t){return Mu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,n),i=e.get("center"),a=e.get("radius");B(a)||(a=[0,a]),B(i)||(i=[i,i]);var s=Ul(o.width,n.getWidth()),l=Ul(o.height,n.getHeight()),u=Math.min(s,l),c=Ul(i[0],s)+o.x,f=Ul(i[1],l)+o.y,h=Ul(a[0],u/2),p=Ul(a[1],u/2),d=-e.get("startAngle")*pm,y=e.get("minAngle")*pm,v=0;t.each(r,function(e){!isNaN(e)&&v++});var g=t.getSum(r),m=Math.PI/(g||v)*2,b=e.get("clockwise"),w=e.get("roseType"),_=e.get("stillShowZeroSum"),x=t.getDataExtent(r);x[0]=0;var S=hm,O=0,P=d,T=b?1:-1;if(t.each(r,function(e,n){var r;if(isNaN(e))t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:c,cy:f,r0:h,r:w?NaN:p,viewRect:o});else{(r="area"!==w?0===g&&_?m:e*m:hm/v)<y?(r=y,S-=y):O+=e;var i=P+T*r;t.setItemLayout(n,{angle:r,startAngle:P,endAngle:i,clockwise:b,cx:c,cy:f,r0:h,r:w?Wl(e,x,[h,p]):p,viewRect:o}),P=i}}),S<hm&&v)if(S<=.001){var k=hm/v;t.each(r,function(e,n){if(!isNaN(e)){var r=t.getItemLayout(n);r.angle=k,r.startAngle=d+T*n*k,r.endAngle=d+T*(n+1)*k}})}else m=S/O,P=d,t.each(r,function(e,n){if(!isNaN(e)){var r=t.getItemLayout(n),o=r.angle===y?y:e*m;r.startAngle=P,r.endAngle=P+T*o,P+=T*o}});fm(e,p,o.width,o.height,o.x,o.y)})},"pie")),Op(dm("pie")),uf.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(e,t){return xd(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var ym=Bs({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(e,t){var n=t.points,r=t.size,o=this.symbolProxy,i=o.shape;if(!((e.getContext?e.getContext():e)&&r[0]<4))for(var a=0;a<n.length;){var s=n[a++],l=n[a++];isNaN(s)||isNaN(l)||(this.softClipShape&&!this.softClipShape.contain(s,l)||(i.x=s-r[0]/2,i.y=l-r[1]/2,i.width=r[0],i.height=r[1],o.buildPath(e,i,!0)))}},afterBrush:function(e){var t=this.shape,n=t.points,r=t.size;if(r[0]<4){this.setTransform(e);for(var o=0;o<n.length;){var i=n[o++],a=n[o++];isNaN(i)||isNaN(a)||(this.softClipShape&&!this.softClipShape.contain(i,a)||e.fillRect(i-r[0]/2,a-r[1]/2,r[0],r[1]))}this.restoreTransform(e)}},findDataIndex:function(e,t){for(var n=this.shape,r=n.points,o=n.size,i=Math.max(o[0],4),a=Math.max(o[1],4),s=r.length/2-1;s>=0;s--){var l=2*s,u=r[l]-i/2,c=r[l+1]-a/2;if(e>=u&&t>=c&&e<=u+i&&t<=c+a)return s}return-1}});function vm(){this.group=new Ln}var gm=vm.prototype;function mm(e,t,n){Uy.call(this,e,t,n),this.type="value",this.angle=0,this.name="",this.model}function bm(e,t,n){this._model=e,this.dimensions=[],this._indicatorAxes=R(e.getIndicatorModels(),function(e,t){var n="indicator_"+t,r=new mm(n,"log"===e.get("axisType")?new ly:new Ld);return r.name=e.get("name"),r.model=e,e.axis=r,this.dimensions.push(n),r},this),this.resize(e,n),this.cx,this.cy,this.r,this.r0,this.startAngle}gm.isPersistent=function(){return!this._incremental},gm.updateData=function(e,t){this.group.removeAll();var n=new ym({rectHover:!0,cursor:"default"});n.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(n,e,!1,t),this.group.add(n),this._incremental=null},gm.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("symbolPoints");this.group.eachChild(function(e){if(null!=e.startIndex){var n=2*(e.endIndex-e.startIndex),r=4*e.startIndex*2;t=new Float32Array(t.buffer,r,n)}e.setShape("points",t)})}},gm.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>2e6?(this._incremental||(this._incremental=new Ts({silent:!0})),this.group.add(this._incremental)):this._incremental=null},gm.incrementalUpdate=function(e,t,n){var r;this._incremental?(r=new ym,this._incremental.addDisplayable(r,!0)):((r=new ym({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(r)),r.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(r,t,!!this._incremental,n)},gm._setCommon=function(e,t,n,r){var o=t.hostModel;r=r||{};var i=t.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=r.clipShape||null,e.symbolProxy=Ty(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var a=e.shape.size[0]<4;e.useStyle(o.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("color");s&&e.setColor(s),n||(e.seriesIndex=o.seriesIndex,e.on("mousemove",function(t){e.dataIndex=null;var n=e.findDataIndex(t.offsetX,t.offsetY);n>=0&&(e.dataIndex=n+(e.startIndex||0))}))},gm.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},gm._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},jp({type:"scatter",render:function(e,t,n){var r=e.getData();this._updateSymbolDraw(r,e).updateData(r,{clipShape:this._getClipShape(e)}),this._finished=!0},incrementalPrepareRender:function(e,t,n){var r=e.getData();this._updateSymbolDraw(r,e).incrementalPrepareUpdate(r),this._finished=!1},incrementalRender:function(e,t,n){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var r=e.getData();if(this.group.dirty(),!this._finished||r.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var o=Dv().reset(e);o.progress&&o.progress({start:0,end:r.count()},r),this._symbolDraw.updateLayout(r)},_getClipShape:function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},_updateSymbolDraw:function(e,t){var n=this._symbolDraw,r=t.pipelineContext.large;return n&&r===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=r?new vm:new sv,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),Cp(Lv("scatter","circle")),kp(Dv("scatter")),C(mm,Uy),bm.prototype.getIndicatorAxes=function(){return this._indicatorAxes},bm.prototype.dataToPoint=function(e,t){var n=this._indicatorAxes[t];return this.coordToPoint(n.dataToCoord(e),t)},bm.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(n),this.cy-e*Math.sin(n)]},bm.prototype.pointToData=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,r=Math.sqrt(t*t+n*n);t/=r,n/=r;for(var o,i=Math.atan2(-n,t),a=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l],c=Math.abs(i-u.angle);c<a&&(o=u,s=l,a=c)}return[s,+(o&&o.coordToData(r))]},bm.prototype.resize=function(e,t){var n=e.get("center"),r=t.getWidth(),o=t.getHeight(),i=Math.min(r,o)/2;this.cx=Ul(n[0],r),this.cy=Ul(n[1],o),this.startAngle=e.get("startAngle")*Math.PI/180;var a=e.get("radius");"string"!=typeof a&&"number"!=typeof a||(a=[0,a]),this.r0=Ul(a[0],i),this.r=Ul(a[1],i),M(this._indicatorAxes,function(e,t){e.setExtent(this.r0,this.r);var n=this.startAngle+t*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),e.angle=n},this)},bm.prototype.update=function(e,t){var n=this._indicatorAxes,r=this._model;M(n,function(e){e.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(t,o){if("radar"===t.get("coordinateSystem")&&e.getComponent("radar",t.get("radarIndex"))===r){var i=t.getData();M(n,function(e){e.scale.unionExtentFromData(i,i.mapDimension(e.dim))})}},this);var o=r.get("splitNumber");function i(e){var t=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),n=e/t;return 2===n?n=5:n*=2,n*t}M(n,function(e,t){var n=cy(e.scale,e.model).extent;fy(e.scale,e.model);var r=e.model,a=e.scale,s=r.getMin(),l=r.getMax(),u=a.getInterval();if(null!=s&&null!=l)a.setExtent(+s,+l),a.setInterval((l-s)/o);else if(null!=s){do{c=s+u*o,a.setExtent(+s,c),a.setInterval(u),u=i(u)}while(c<n[1]&&isFinite(c)&&isFinite(n[1]))}else if(null!=l){do{f=l-u*o,a.setExtent(f,+l),a.setInterval(u),u=i(u)}while(f>n[0]&&isFinite(f)&&isFinite(n[0]))}else{a.getTicks().length-1>o&&(u=i(u));var c,f=Jl((c=Math.ceil(n[1]/u)*u)-u*o);a.setExtent(f,c),a.setInterval(u)}})},bm.dimensions=[],bm.create=function(e,t){var n=[];return e.eachComponent("radar",function(r){var o=new bm(r,e,t);n.push(o),r.coordinateSystem=o}),e.eachSeriesByType("radar",function(e){"radar"===e.get("coordinateSystem")&&(e.coordinateSystem=n[e.get("radarIndex")||0])}),n},gc.register("radar",bm);var wm=Wv.valueAxis;function _m(e,t){return S({show:t},e)}Mp({type:"radar",optionUpdated:function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),n=this.get("scale"),r=this.get("axisLine"),o=this.get("axisTick"),i=this.get("axisType"),a=this.get("axisLabel"),s=this.get("name"),l=this.get("name.show"),u=this.get("name.formatter"),c=this.get("nameGap"),f=this.get("triggerEvent"),h=R(this.get("indicator")||[],function(h){null!=h.max&&h.max>0&&!h.min?h.min=0:null!=h.min&&h.min<0&&!h.max&&(h.max=0);var p=s;if(null!=h.color&&(p=S({color:h.color},s)),h=w(b(h),{boundaryGap:e,splitNumber:t,scale:n,axisLine:r,axisTick:o,axisType:i,axisLabel:a,name:h.text,nameLocation:"end",nameGap:c,nameTextStyle:p,triggerEvent:f},!1),l||(h.name=""),"string"==typeof u){var d=h.name;h.name=u.replace("{value}",null!=d?d:"")}else"function"==typeof u&&(h.name=u(h.name,h));var y=x(new Bl(h,null,this.ecModel),gy);return y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this.getIndicatorModels=function(){return h}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:w({lineStyle:{color:"#bbb"}},wm.axisLine),axisLabel:_m(wm.axisLabel,!1),axisTick:_m(wm.axisTick,!1),axisType:"interval",splitLine:_m(wm.splitLine,!0),splitArea:_m(wm.splitArea,!0),indicator:[]}});var xm=["axisLine","axisTickLabel","axisName"];Rp({type:"radar",render:function(e,t,n){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},_buildAxes:function(e){var t=e.coordinateSystem;M(R(t.getIndicatorAxes(),function(e){return new ig(e.model,{position:[t.cx,t.cy],rotation:e.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(e){M(xm,e.add,e),this.group.add(e.getGroup())},this)},_buildSplitLineAndArea:function(e){var t=e.coordinateSystem,n=t.getIndicatorAxes();if(n.length){var o=e.get("shape"),i=e.getModel("splitLine"),a=e.getModel("splitArea"),s=i.getModel("lineStyle"),l=a.getModel("areaStyle"),u=i.get("show"),c=a.get("show"),f=s.get("color"),h=l.get("color");f=B(f)?f:[f],h=B(h)?h:[h];var p=[],d=[];if("circle"===o)for(var y=n[0].getTicksCoords(),v=t.cx,g=t.cy,m=0;m<y.length;m++){if(u)p[k(p,f,m)].push(new $a({shape:{cx:v,cy:g,r:y[m].coord}}));if(c&&m<y.length-1)d[k(d,h,m)].push(new rs({shape:{cx:v,cy:g,r0:y[m].coord,r:y[m+1].coord}}))}else{var b,w=R(n,function(e,n){var r=e.getTicksCoords();return b=null==b?r.length-1:Math.min(r.length-1,b),R(r,function(e){return t.coordToPoint(e.coord,n)})}),_=[];for(m=0;m<=b;m++){for(var x=[],O=0;O<n.length;O++)x.push(w[O][m]);if(x[0]?x.push(x[0].slice()):r&&console.error("Can't draw value axis "+m),u)p[k(p,f,m)].push(new us({shape:{points:x}}));if(c&&_)d[k(d,h,m-1)].push(new ls({shape:{points:x.concat(_)}}));_=x.slice().reverse()}}var P=s.getLineStyle(),T=l.getAreaStyle();M(d,function(e,t){this.group.add(Ws(e,{style:S({stroke:"none",fill:h[t%h.length]},T),silent:!0}))},this),M(p,function(e,t){this.group.add(Ws(e,{style:S({fill:"none",stroke:f[t%f.length]},P),silent:!0}))},this)}function k(e,t,n){var r=n%t.length;return e[r]=e[r]||[],r}}});var Sm=uf.extend({type:"series.radar",dependencies:["radar"],init:function(e){Sm.superApply(this,"init",arguments),this.legendVisualProvider=new em(D(this.getData,this),D(this.getRawData,this))},getInitialData:function(e,t){return Kg(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(e,t,n,r){var o=this.getData(),i=this.coordinateSystem.getIndicatorAxes(),a=this.getData().getName(e),s="html"===r?"<br/>":"\n";return du(""===a?this.name:a)+s+R(i,function(t,n){var r=o.get(o.mapDimension(t.dim),e);return du(t.name+" : "+r)}).join(s)},getTooltipPosition:function(e){if(null!=e)for(var t=this.getData(),n=this.coordinateSystem,r=t.getValues(R(n.dimensions,function(e){return t.mapDimension(e)}),e,!0),o=0,i=r.length;o<i;o++)if(!isNaN(r[o])){var a=n.getIndicatorAxes();return n.coordToPoint(a[o].dataToCoord(r[o]),o)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});jp({type:"radar",render:function(e,t,n){var r=e.coordinateSystem,o=this.group,i=e.getData(),a=this._data;function s(e,t){var n=e.getItemVisual(t,"symbol")||"circle",r=e.getItemVisual(t,"color");if("none"!==n){var o=function(e){return B(e)||(e=[+e,+e]),e}(e.getItemVisual(t,"symbolSize")),i=Ty(n,-1,-1,2,2,r),a=e.getItemVisual(t,"symbolRotate")||0;return i.attr({style:{strokeNoScale:!0},z2:100,scale:[o[0]/2,o[1]/2],rotation:a*Math.PI/180||0}),i}}function l(t,n,r,o,i,a){r.removeAll();for(var l=0;l<n.length-1;l++){var u=s(o,i);u&&(u.__dimIdx=l,t[l]?(u.attr("position",t[l]),Ml[a?"initProps":"updateProps"](u,{position:n[l]},e,i)):u.attr("position",n[l]),r.add(u))}}function u(e){return R(e,function(e){return[r.cx,r.cy]})}i.diff(a).add(function(t){var n=i.getItemLayout(t);if(n){var r=new ls,o=new us,a={shape:{points:n}};r.shape.points=u(n),o.shape.points=u(n),_l(r,a,e,t),_l(o,a,e,t);var s=new Ln,c=new Ln;s.add(o),s.add(r),s.add(c),l(o.shape.points,n,c,i,t,!0),i.setItemGraphicEl(t,s)}}).update(function(t,n){var r=a.getItemGraphicEl(n),o=r.childAt(0),s=r.childAt(1),u=r.childAt(2),c={shape:{points:i.getItemLayout(t)}};c.shape.points&&(l(o.shape.points,c.shape.points,u,i,t,!1),wl(o,c,e),wl(s,c,e),i.setItemGraphicEl(t,r))}).remove(function(e){o.remove(a.getItemGraphicEl(e))}).execute(),i.eachItemGraphicEl(function(e,t){var n=i.getItemModel(t),r=e.childAt(0),a=e.childAt(1),s=e.childAt(2),l=i.getItemVisual(t,"color");o.add(e),r.useStyle(S(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:l})),r.hoverStyle=n.getModel("emphasis.lineStyle").getLineStyle();var u=n.getModel("areaStyle"),c=n.getModel("emphasis.areaStyle"),f=u.isEmpty()&&u.parentModel.isEmpty(),h=c.isEmpty()&&c.parentModel.isEmpty();h=h&&f,a.ignore=f,a.useStyle(S(u.getAreaStyle(),{fill:l,opacity:.7})),a.hoverStyle=c.getAreaStyle();var p=n.getModel("itemStyle").getItemStyle(["color"]),d=n.getModel("emphasis.itemStyle").getItemStyle(),y=n.getModel("label"),v=n.getModel("emphasis.label");s.eachChild(function(e){e.setStyle(p),e.hoverStyle=b(d);var n=i.get(i.dimensions[e.__dimIdx],t);(null==n||isNaN(n))&&(n=""),cl(e.style,e.hoverStyle,y,v,{labelFetcher:i.hostModel,labelDataIndex:t,labelDimIndex:e.__dimIdx,defaultText:n,autoColor:l,isRectText:!0})}),e.highDownOnUpdate=function(e,t){a.attr("ignore","emphasis"===t?h:f)},al(e)}),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});function Om(e){return!isNaN(e[0])&&!isNaN(e[1])}function Pm(e){return[e.cx,e.cy]}Cp(sm("radar")),Cp(Lv("radar","circle")),kp(function(e){e.eachSeriesByType("radar",function(e){var t=e.getData(),n=[],r=e.coordinateSystem;if(r){var o=r.getIndicatorAxes();M(o,function(e,i){t.each(t.mapDimension(o[i].dim),function(e,t){n[t]=n[t]||[];var o=r.dataToPoint(e,i);n[t][i]=Om(o)?o:Pm(r)})}),t.each(function(e){var o=L(n[e],function(e){return Om(e)})||Pm(r);n[e].push(o.slice()),t.setItemLayout(e,n[e])})}})}),Op(dm("radar")),Sp(function(e){var t=e.polar;if(t){B(t)||(t=[t]);var n=[];M(t,function(t,r){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),e.radar=e.radar||[],B(e.radar)||(e.radar=[e.radar]),e.radar.push(t)):n.push(t)}),e.polar=n}M(e.series,function(e){e&&"radar"===e.type&&e.polarIndex&&(e.radarIndex=e.polarIndex)})});for(var Tm=[126,25],km=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Cm=0;Cm<km.length;Cm++)for(var Em=0;Em<km[Cm].length;Em++)km[Cm][Em][0]/=10.5,km[Cm][Em][1]/=-14,km[Cm][Em][0]+=Tm[0],km[Cm][Em][1]+=Tm[1];var Am={"åæµ·è¯¸å²":[32,80],"å¹¿ä¸":[0,-10],"é¦æ¸¯":[10,5],"æ¾³é¨":[-10,10],"å¤©æ´¥":[5,5]},Mm={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},Rm=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],Im=ei(),jm={load:function(e,t,n){var r=Im(t).parsed;if(r)return r;var o,i=t.specialAreas||{},a=t.geoJSON;try{o=a?jy(a,n):[]}catch(e){throw new Error("Invalid geoJson format\n"+e.message)}return function(e,t){"china"===e&&t.push(new Ry("åæµ·è¯¸å²",R(km,function(e){return{type:"polygon",exterior:e}}),Tm))}(e,o),M(o,function(t){var n=t.name;!function(e,t){if("china"===e){var n=Am[t.name];if(n){var r=t.center;r[0]+=n[0]/10.5,r[1]+=-n[1]/14}}}(e,t),function(e,t){if("world"===e){var n=Mm[t.name];if(n){var r=t.center;r[0]=n[0],r[1]=n[1]}}}(e,t),function(e,t){"china"===e&&"å°æ¹¾"===t.name&&t.geometries.push({type:"polygon",exterior:Rm[0]})}(e,t);var r=i[n];r&&t.transformTo(r.left,r.top,r.width,r.height)}),Im(t).parsed={regions:o,boundingRect:function(e){for(var t,n=0;n<e.length;n++){var r=e[n].getBoundingRect();(t=t||r.clone()).union(r)}return t}(o)}}};var Lm=ei();function Dm(e,t){var n,r,o,i,a=e.svgXML;try{Q(null!=(r=(n=a&&(o=a,i={ignoreViewBox:!0,ignoreRootClip:!0},(new ch).parse(o,i))||{}).root))}catch(e){throw new Error("Invalid svg format\n"+e.message)}var s=n.width,l=n.height,u=n.viewBoxRect;if(t||(t=null==s||null==l?r.getBoundingRect():new jn(0,0,0,0),null!=s&&(t.width=s),null!=l&&(t.height=l)),u){var c=_h(u,t.width,t.height),f=r;(r=new Ln).add(f),f.scale=c.scale,f.position=c.position}return r.setClipPath(new ys({shape:t.plain()})),{root:r,boundingRect:t}}var Nm={geoJSON:jm,svg:{load:function(e,t){var n=Lm(t).originRoot;if(n)return{root:n,boundingRect:Lm(t).boundingRect};var r=Dm(t);return Lm(t).originRoot=r.root,Lm(t).boundingRect=r.boundingRect,r},makeGraphic:function(e,t,n){var r=Lm(t),o=r.rootMap||(r.rootMap=re()),i=o.get(n);if(i)return i;var a=r.originRoot,s=r.boundingRect;return r.originRootHostKey?i=Dm(t,s).root:(r.originRootHostKey=n,i=a),o.set(n,i)},removeGraphic:function(e,t,n){var r=Lm(t),o=r.rootMap;o&&o.removeKey(n),n===r.originRootHostKey&&(r.originRootHostKey=null)}}},Bm={load:function(e,t,n){var r,o=[],i=re(),a=re();return M(Gm(e),function(s){var l=Nm[s.type].load(e,s,n);M(l.regions,function(e){var n=e.name;t&&t.hasOwnProperty(n)&&(e=e.cloneShallow(n=t[n])),o.push(e),i.set(n,e),a.set(n,e.center)});var u=l.boundingRect;u&&(r?r.union(u):r=u.clone())}),{regions:o,regionsMap:i,nameCoordMap:a,boundingRect:r||new jn(0,0,0,0)}},makeGraphic:Fm("makeGraphic"),removeGraphic:Fm("removeGraphic")};function Fm(e){return function(t,n){var r=[];return M(Gm(t),function(o){var i=Nm[o.type][e];i&&r.push(i(t,o,n))}),r}}function Gm(e){var t=Sh.retrieveMap(e)||[];return r&&(t.length||function(e){r&&console.error("Map "+e+" not exists. The GeoJSON of the map must be provided.")}(e)),t}E(uf.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(e){for(var t=Kg(this,{coordDimensions:["value"],encodeDefaulter:N(ic,this)}),n=t.mapDimension("value"),r=re(),o=[],i=[],a=0,s=t.count();a<s;a++){var l=t.getName(a);r.set(l,!0),o.push({name:l,value:t.get(n,a),selected:$c(t,a,"selected")})}return M(Bm.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(e){var t=e.name;r.get(t)||(o.push({name:t}),i.push(t))}),this.updateSelectedMap(o),t.appendValues([],i),t},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e,t,n,r){for(var o=this.getData(),i=uu(this.getRawValue(e)),a=o.getName(e),s=this.seriesGroup,l=[],u=0;u<s.length;u++){var c=s[u].originalData.indexOfName(a),f=o.mapDimension("value");isNaN(s[u].originalData.get(f,c))||l.push(du(s[u].name))}var h="html"===r?"<br/>":"\n";return l.join(", ")+h+du(a+" : "+i)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,r=n.getRegion(t);return r&&n.dataToPoint(r.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}),$g);var zm="\0_ec_interaction_mutex";function Vm(e,t){return!!Hm(e)[t]}function Hm(e){return e[zm]||(e[zm]={})}function Wm(e){this.pointerChecker,this._zr=e,this._opt={};var t=D,n=t(Um,this),r=t(Jm,this),o=t(qm,this),i=t(Ym,this),a=t(Xm,this);Ie.call(this),this.setPointerChecker=function(e){this.pointerChecker=e},this.enable=function(t,s){this.disable(),this._opt=S(b(s)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",o)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",i),e.on("pinch",a))},this.disable=function(){e.off("mousedown",n),e.off("mousemove",r),e.off("mouseup",o),e.off("mousewheel",i),e.off("pinch",a)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function Um(e){if(!(Qe(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}}function Jm(e){if(this._dragging&&Km("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!Vm(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,r=this._x,o=this._y,i=t-r,a=n-o;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&Ze(e.event),Qm(this,"pan","moveOnMouseMove",e,{dx:i,dy:a,oldX:r,oldY:o,newX:t,newY:n})}}function qm(e){Qe(e)||(this._dragging=!1)}function Ym(e){var t=Km("zoomOnMouseWheel",e,this._opt),n=Km("moveOnMouseWheel",e,this._opt),r=e.wheelDelta,o=Math.abs(r),i=e.offsetX,a=e.offsetY;if(0!==r&&(t||n)){if(t){var s=o>3?1.4:o>1?1.2:1.1;Zm(this,"zoom","zoomOnMouseWheel",e,{scale:r>0?s:1/s,originX:i,originY:a})}if(n){var l=Math.abs(r);Zm(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(r>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:i,originY:a})}}}function Xm(e){Vm(this._zr,"globalPan")||Zm(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY})}function Zm(e,t,n,r,o){e.pointerChecker&&e.pointerChecker(r,o.originX,o.originY)&&(Ze(r.event),Qm(e,t,n,r,o))}function Qm(e,t,n,r,o){o.isAvailableBehavior=D(Km,null,n,r),e.trigger(t,o)}function Km(e,t,n){var r=n[e];return!e||r&&(!G(r)||t.event[r+"Key"])}function $m(e,t,n){var r=e.target,o=r.position;o[0]+=t,o[1]+=n,r.dirty()}function eb(e,t,n,r){var o=e.target,i=e.zoomLimit,a=o.position,s=o.scale,l=e.zoom=e.zoom||1;if(l*=t,i){var u=i.min||0,c=i.max||1/0;l=Math.max(Math.min(c,l),u)}var f=l/e.zoom;e.zoom=l,a[0]-=(n-a[0])*(f-1),a[1]-=(r-a[1])*(f-1),s[0]*=f,s[1]*=f,o.dirty()}Pp({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),E(Wm,Ie);var tb={axisPointer:1,tooltip:1,brush:1};function nb(e,t,n){var r=t.getComponentByElement(e.topTarget),o=r&&r.coordinateSystem;return r&&r!==n&&!tb[r.mainType]&&o&&o.model!==n}function rb(e){var t=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(t.fill=n),t}function ob(e,t){t.eachChild(function(t){M(t.__regions,function(n){t.trigger(e.isSelected(n.name)?"emphasis":"normal")})})}function ib(e,t){var n=new Ln;this.uid=Vl("ec_map_draw"),this._controller=new Wm(e.getZr()),this._controllerHost={target:t?n:null},this.group=n,this._updateGroup=t,this._mouseDownFlag,this._mapName,this._initialized,n.add(this._regionsGroup=new Ln),n.add(this._backgroundGroup=new Ln)}ib.prototype={constructor:ib,draw:function(e,t,n,r,o){var i="geo"===e.mainType,a=e.getData&&e.getData();i&&t.eachComponent({mainType:"series",subType:"map"},function(t){a||t.getHostGeoModel()!==e||(a=t.getData())});var s=e.coordinateSystem;this._updateBackground(s);var l,u=this._regionsGroup,c=this.group,f=s.getTransformInfo(),h=!u.childAt(0)||o;if(h)c.transform=f.roamTransform,c.decomposeTransform(),c.dirty();else{var p=new xt;p.transform=f.roamTransform,p.decomposeTransform();var d={scale:p.scale,position:p.position};l=p.scale,wl(c,d,e)}var y=f.rawScale,v=f.rawPosition;u.removeAll();var g=["itemStyle"],m=["emphasis","itemStyle"],b=["label"],w=["emphasis","label"],_=re();M(s.regions,function(t){var n=_.get(t.name)||_.set(t.name,new Ln),r=new xs({segmentIgnoreThreshold:1,shape:{paths:[]}});n.add(r);var o,s=(j=e.getRegionModel(t.name)||e).getModel(g),f=j.getModel(m),p=rb(s),d=rb(f),x=j.getModel(b),S=j.getModel(w);if(a){o=a.indexOfName(t.name);var O=a.getItemVisual(o,"color",!0);O&&(p.fill=O)}var P=function(e){return[e[0]*y[0]+v[0],e[1]*y[1]+v[1]]};M(t.geometries,function(e){if("polygon"===e.type){for(var t=[],n=0;n<e.exterior.length;++n)t.push(P(e.exterior[n]));r.shape.paths.push(new ls({segmentIgnoreThreshold:1,shape:{points:t}}));for(n=0;n<(e.interiors?e.interiors.length:0);++n){for(var o=e.interiors[n],i=(t=[],0);i<o.length;++i)t.push(P(o[i]));r.shape.paths.push(new ls({segmentIgnoreThreshold:1,shape:{points:t}}))}}}),r.setStyle(p),r.style.strokeNoScale=!0,r.culling=!0;var T=x.get("show"),k=S.get("show"),C=a&&isNaN(a.get(a.mapDimension("value"),o)),E=a&&a.getItemLayout(o);if(i||C&&(T||k)||E&&E.showLabel){var A,R=i?t.name:o;(!a||o>=0)&&(A=e);var I=new Ka({position:P(t.center.slice()),scale:[1/c.scale[0],1/c.scale[1]],z2:10,silent:!0});if(cl(I.style,I.hoverStyle={},x,S,{labelFetcher:A,labelDataIndex:R,defaultText:t.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!h)wl(I,{scale:[1/l[0],1/l[1]]},e);n.add(I)}if(a)a.setItemGraphicEl(o,n);else{var j=e.getRegionModel(t.name);r.eventData={componentType:"geo",componentIndex:e.componentIndex,geoIndex:e.componentIndex,name:t.name,region:j&&j.option||{}}}(n.__regions||(n.__regions=[])).push(t),n.highDownSilentOnTouch=!!e.get("selectedMode"),al(n,d),u.add(n)}),this._updateController(e,t,n),function(e,t,n,r,o){n.off("click"),n.off("mousedown"),t.get("selectedMode")&&(n.on("mousedown",function(){e._mouseDownFlag=!0}),n.on("click",function(i){if(e._mouseDownFlag){e._mouseDownFlag=!1;for(var a=i.target;!a.__regions;)a=a.parent;if(a){var s={type:("geo"===t.mainType?"geo":"map")+"ToggleSelect",batch:R(a.__regions,function(e){return{name:e.name,from:o.uid}})};s[t.mainType+"Id"]=t.id,r.dispatchAction(s),ob(t,n)}}}))}(this,e,u,n,r),ob(e,u)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&Bm.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(e){var t=e.map;this._mapName!==t&&M(Bm.makeGraphic(t,this.uid),function(e){this._backgroundGroup.add(e)},this),this._mapName=t},_updateController:function(e,t,n){var r=e.coordinateSystem,o=this._controller,i=this._controllerHost;i.zoomLimit=e.get("scaleLimit"),i.zoom=r.getZoom(),o.enable(e.get("roam")||!1);var a=e.mainType;function s(){var t={type:"geoRoam",componentType:a};return t[a+"Id"]=e.id,t}o.off("pan").on("pan",function(e){this._mouseDownFlag=!1,$m(i,e.dx,e.dy),n.dispatchAction(x(s(),{dx:e.dx,dy:e.dy}))},this),o.off("zoom").on("zoom",function(e){if(this._mouseDownFlag=!1,eb(i,e.scale,e.originX,e.originY),n.dispatchAction(x(s(),{zoom:e.scale,originX:e.originX,originY:e.originY})),this._updateGroup){var t=this.group.scale;this._regionsGroup.traverse(function(e){"text"===e.type&&e.attr("scale",[1/t[0],1/t[1]])})}},this),o.setPointerChecker(function(t,o,i){return r.getViewRectAfterRoam().contain(o,i)&&!nb(t,n,e)})}};var ab="__seriesMapHighDown",sb="__seriesMapCallKey";function lb(e){var t=this[ab];t&&t.recordVersion===this[sb]&&ub(t,e)}function ub(e,t){var n=e.circle,r=e.labelModel,o=e.hoverLabelModel,i=e.emphasisText,a=e.normalText;t?(n.style.extendFrom(hl({},o,{text:o.get("show")?i:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=Ms):(hl(n.style,r,{text:r.get("show")?a:null,textPosition:r.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}function cb(e,t,n){var r=e.getZoom(),o=e.getCenter(),i=t.zoom,a=e.dataToPoint(o);if(null!=t.dx&&null!=t.dy){a[0]-=t.dx,a[1]-=t.dy;o=e.pointToData(a);e.setCenter(o)}if(null!=i){if(n){var s=n.min||0,l=n.max||1/0;i=Math.max(Math.min(r*i,l),s)/r}e.scale[0]*=i,e.scale[1]*=i;var u=e.position,c=(t.originX-u[0])*(i-1),f=(t.originY-u[1])*(i-1);u[0]-=c,u[1]-=f,e.updateTransform();o=e.pointToData(a);e.setCenter(o),e.setZoom(i*r)}return{center:e.getCenter(),zoom:e.getZoom()}}jp({type:"map",render:function(e,t,n,r){if(!r||"mapToggleSelect"!==r.type||r.from!==this.uid){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(r&&"geoRoam"===r.type&&"series"===r.componentType&&r.seriesId===e.id)(i=this._mapDraw)&&o.add(i.group);else if(e.needsDrawMap){var i=this._mapDraw||new ib(n,!0);o.add(i.group),i.draw(e,t,n,this,r),this._mapDraw=i}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(e,t,n){var r=e.originalData,o=this.group;r.each(r.mapDimension("value"),function(t,n){if(!isNaN(t)){var i=r.getItemLayout(n);if(i&&i.point){var a=i.point,s=i.offset,l=new $a({style:{fill:e.getData().getVisual("color")},shape:{cx:a[0]+9*s,cy:a[1],r:3},silent:!0,z2:8+(s?0:Ms+1)});if(!s){var u=e.mainSeries.getData(),c=r.getName(n),f=u.indexOfName(c),h=r.getItemModel(n),p=h.getModel("label"),d=h.getModel("emphasis.label"),y=u.getItemGraphicEl(f),v=q(e.getFormattedLabel(f,"normal"),c),g=q(e.getFormattedLabel(f,"emphasis"),v),m=y[ab],b=Math.random();if(!m){m=y[ab]={};var w=N(lb,!0),_=N(lb,!1);y.on("mouseover",w).on("mouseout",_).on("emphasis",w).on("normal",_)}y[sb]=b,x(m,{recordVersion:b,circle:l,labelModel:p,hoverLabelModel:d,emphasisText:g,normalText:v}),ub(m,!1)}o.add(l)}}})}}),Pp({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},function(t){var r=t.coordinateSystem;if("geo"===r.type){var o=cb(r,e,t.get("scaleLimit"));t.setCenter&&t.setCenter(o.center),t.setZoom&&t.setZoom(o.zoom),"series"===n&&M(t.seriesGroup,function(e){e.setCenter(o.center),e.setZoom(o.zoom)})}})});var fb=Te;function hb(){xt.call(this)}function pb(e){this.name=e,this.zoomLimit,xt.call(this),this._roamTransformable=new hb,this._rawTransformable=new hb,this._center,this._zoom}function db(e,t,n,r){var o=n.seriesModel,i=o?o.coordinateSystem:null;return i===this?i[e](r):null}function yb(e,t,n,r){pb.call(this,e),this.map=t;var o=Bm.load(t,n);this._nameCoordMap=o.nameCoordMap,this._regionsMap=o.regionsMap,this._invertLongitute=null==r||r,this.regions=o.regions,this._rect=o.boundingRect}function vb(e,t,n,r){var o=n.geoModel,i=n.seriesModel,a=o?o.coordinateSystem:i?i.coordinateSystem||(i.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return a===this?a[e](r):null}function gb(e,t){var n=e.get("boundingCoords");if(null!=n){var o=n[0],i=n[1];isNaN(o[0])||isNaN(o[1])||isNaN(i[0])||isNaN(i[1])?r&&console.error("Invalid boundingCoords"):this.setBoundingRect(o[0],o[1],i[0]-o[0],i[1]-o[1])}var a,s=this.getBoundingRect(),l=e.get("layoutCenter"),u=e.get("layoutSize"),c=t.getWidth(),f=t.getHeight(),h=s.width/s.height*this.aspectScale,p=!1;if(l&&u&&(l=[Ul(l[0],c),Ul(l[1],f)],u=Ul(u,Math.min(c,f)),isNaN(l[0])||isNaN(l[1])||isNaN(u)?r&&console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."):p=!0),p){var d={};h>1?(d.width=u,d.height=u/h):(d.height=u,d.width=u*h),d.y=l[1]-d.height/2,d.x=l[0]-d.width/2}else(a=e.getBoxLayoutParams()).aspect=h,d=Mu(a,{width:c,height:f});this.setViewRect(d.x,d.y,d.width,d.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function mb(e,t){M(t.get("geoCoord"),function(t,n){e.addGeoCoord(n,t)})}E(hb,xt),pb.prototype={constructor:pb,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,n,r){return this._rect=new jn(e,t,n,r),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,n,r){this.transformTo(e,t,n,r),this._viewRect=new jn(e,t,n,r)},transformTo:function(e,t,n,r){var o=this.getBoundingRect(),i=this._rawTransformable;i.transform=o.calculateTransform(new jn(e,t,n,r)),i.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),r=this.getCenter(),o=this.getZoom();r=Te([],r,e),n=Te([],n,e),t.origin=r,t.position=[n[0]-r[0],n[1]-r[1]],t.scale=[o,o],this._updateTransform()},_updateTransform:function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),ft(this.transform||(this.transform=[]),t.transform||ut()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],vt(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var e=this._roamTransformable.transform,t=this._rawTransformable;return{roamTransform:e?X(e):ut(),rawScale:X(t.scale),rawPosition:X(t.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,n){var r=t?this._rawTransform:this.transform;return n=n||[],r?fb(n,e,r):ue(n,e)},pointToData:function(e){var t=this.invTransform;return t?fb([],e,t):[e[0],e[1]]},convertToPixel:N(db,"dataToPoint"),convertFromPixel:N(db,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},E(pb,xt),yb.prototype={constructor:yb,type:"geo",dimensions:["lng","lat"],containCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return!0;return!1},transformTo:function(e,t,n,r){var o=this.getBoundingRect(),i=this._invertLongitute;o=o.clone(),i&&(o.y=-o.y-o.height);var a=this._rawTransformable;if(a.transform=o.calculateTransform(new jn(e,t,n,r)),a.decomposeTransform(),i){var s=a.scale;s[1]=-s[1]}a.updateTransform(),this._updateTransform()},getRegion:function(e){return this._regionsMap.get(e)},getRegionByCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return t[n]},addGeoCoord:function(e,t){this._nameCoordMap.set(e,t)},getGeoCoord:function(e){return this._nameCoordMap.get(e)},getBoundingRect:function(){return this._rect},dataToPoint:function(e,t,n){if("string"==typeof e&&(e=this.getGeoCoord(e)),e)return pb.prototype.dataToPoint.call(this,e,t,n)},convertToPixel:N(vb,"dataToPoint"),convertFromPixel:N(vb,"pointToData")},E(yb,pb);var bb={dimensions:yb.prototype.dimensions,create:function(e,t){var n=[];e.eachComponent("geo",function(e,r){var o=e.get("map"),i=e.get("aspectScale"),a=!0,s=Sh.retrieveMap(o);s&&s[0]&&"svg"===s[0].type?(null==i&&(i=1),a=!1):null==i&&(i=.75);var l=new yb(o+r,o,e.get("nameMap"),a);l.aspectScale=i,l.zoomLimit=e.get("scaleLimit"),n.push(l),mb(l,e),e.coordinateSystem=l,l.model=e,l.resize=gb,l.resize(e,t)}),e.eachSeries(function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=n[t]}});var r={};return e.eachSeriesByType("map",function(e){if(!e.getHostGeoModel()){var t=e.getMapType();r[t]=r[t]||[],r[t].push(e)}}),M(r,function(e,r){var o=new yb(r,r,_(R(e,function(e){return e.get("nameMap")})));o.zoomLimit=J.apply(null,R(e,function(e){return e.get("scaleLimit")})),n.push(o),o.resize=gb,o.aspectScale=e[0].get("aspectScale"),o.resize(e[0],t),M(e,function(e){e.coordinateSystem=o,mb(o,e)})}),n},getFilledRegions:function(e,t,n){for(var r=(e||[]).slice(),o=re(),i=0;i<r.length;i++)o.set(r[i].name,r[i]);return M(Bm.load(t,n).regions,function(e){var t=e.name;!o.get(t)&&r.push({name:t})}),r}};Tp("geo",bb);kp(function(e){var t={};e.eachSeriesByType("map",function(n){var r=n.getMapType();if(!n.getHostGeoModel()&&!t[r]){var o={};M(n.seriesGroup,function(t){var n=t.coordinateSystem,r=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&r.each(r.mapDimension("value"),function(e,t){var i=r.getName(t),a=n.getRegion(i);if(a&&!isNaN(e)){var s=o[i]||0,l=n.dataToPoint(a.center);o[i]=s+1,r.setItemLayout(t,{point:l,offset:s})}})});var i=n.getData();i.each(function(e){var t=i.getName(e),n=i.getItemLayout(e)||{};n.showLabel=!o[t],i.setItemLayout(e,n)}),t[r]=!0}})}),Cp(function(e){e.eachSeriesByType("map",function(e){var t=e.get("color"),n=e.getModel("itemStyle"),r=n.get("areaColor"),o=n.get("color")||t[e.seriesIndex%t.length];e.getData().setVisual({areaColor:r,color:o})})}),Op(Lh.PROCESSOR.STATISTIC,function(e){var t={};e.eachSeriesByType("map",function(e){var n=e.getHostGeoModel(),r=n?"o"+n.id:"i"+e.getMapType();(t[r]=t[r]||[]).push(e)}),M(t,function(e,t){for(var n,r,o,i=(n=R(e,function(e){return e.getData()}),r=e[0].get("mapValueCalculation"),o={},M(n,function(e){e.each(e.mapDimension("value"),function(t,n){var r="ec-"+e.getName(n);o[r]=o[r]||[],isNaN(t)||o[r].push(t)})}),n[0].map(n[0].mapDimension("value"),function(e,t){for(var i,a="ec-"+n[0].getName(t),s=0,l=1/0,u=-1/0,c=o[a].length,f=0;f<c;f++)l=Math.min(l,o[a][f]),u=Math.max(u,o[a][f]),s+=o[a][f];return i="min"===r?l:"max"===r?u:"average"===r?s/c:s,0===c?NaN:i})),a=0;a<e.length;a++)e[a].originalData=e[a].getData();for(a=0;a<e.length;a++)e[a].seriesGroup=e,e[a].needsDrawMap=0===a&&!e[a].getHostGeoModel(),e[a].setData(i.cloneShallow()),e[a].mainSeries=e[0]})}),Sp(function(e){var t=[];M(e.series,function(e){e&&"map"===e.type&&(t.push(e),e.map=e.map||e.mapType,S(e,e.mapLocation))})}),am("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var wb=M,_b="\0__link_datas",xb="\0__link_mainData";function Sb(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,Cb(t,n,e),wb(n,function(n){wb(t.TRANSFERABLE_METHODS,function(t){n.wrapMethod(t,N(Ob,e))})}),t.wrapMethod("cloneShallow",N(Tb,e)),wb(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,N(Pb,e))}),Q(n[t.dataType]===t)}function Ob(e,t){if((r=this)[xb]===r){var n=x({},this[_b]);n[this.dataType]=t,Cb(t,n,e)}else Eb(t,this.dataType,this[xb],e);var r;return t}function Pb(e,t){return e.struct&&e.struct.update(this),t}function Tb(e,t){return wb(t[_b],function(n,r){n!==t&&Eb(n.cloneShallow(),r,t,e)}),t}function kb(e){var t=this[xb];return null==e||null==t?t:t[_b][e]}function Cb(e,t,n){e[_b]={},wb(t,function(t,r){Eb(t,r,e,n)})}function Eb(e,t,n,r){n[_b][t]=e,e[xb]=n,e.dataType=t,r.struct&&(e[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=e),e.getLinkedData=kb}var Ab=function(e,t){this.name=e||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=t};function Mb(e){this.root,this.data,this._nodes=[],this.hostModel=e}function Rb(e,t){var n=e.isExpand?e.children:[],r=e.parentNode.children,o=e.hierNode.i?r[e.hierNode.i-1]:null;if(n.length){!function(e){var t=e.children,n=t.length,r=0,o=0;for(;--n>=0;){var i=t[n];i.hierNode.prelim+=r,i.hierNode.modifier+=r,o+=i.hierNode.change,r+=i.hierNode.shift+o}}(e);var i=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;o?(e.hierNode.prelim=o.hierNode.prelim+t(e,o),e.hierNode.modifier=e.hierNode.prelim-i):e.hierNode.prelim=i}else o&&(e.hierNode.prelim=o.hierNode.prelim+t(e,o));e.parentNode.hierNode.defaultAncestor=function(e,t,n,r){if(t){for(var o=e,i=e,a=i.parentNode.children[0],s=t,l=o.hierNode.modifier,u=i.hierNode.modifier,c=a.hierNode.modifier,f=s.hierNode.modifier;s=Db(s),i=Nb(i),s&&i;){o=Db(o),a=Nb(a),o.hierNode.ancestor=e;var h=s.hierNode.prelim+f-i.hierNode.prelim-u+r(s,i);h>0&&(Fb(Bb(s,e,n),e,h),u+=h,l+=h),f+=s.hierNode.modifier,u+=i.hierNode.modifier,l+=o.hierNode.modifier,c+=a.hierNode.modifier}s&&!Db(o)&&(o.hierNode.thread=s,o.hierNode.modifier+=f-l),i&&!Nb(a)&&(a.hierNode.thread=i,a.hierNode.modifier+=u-c,n=e)}return n}(e,o,e.parentNode.hierNode.defaultAncestor||r[0],t)}function Ib(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function jb(e){return arguments.length?e:Gb}function Lb(e,t){var n={};return e-=Math.PI/2,n.x=t*Math.cos(e),n.y=t*Math.sin(e),n}function Db(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function Nb(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function Bb(e,t,n){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:n}function Fb(e,t,n){var r=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=r}function Gb(e,t){return e.parentNode===t.parentNode?1:2}Ab.prototype={constructor:Ab,isRemoved:function(){return this.dataIndex<0},eachNode:function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null),G(e=e||{})&&(e={order:e});var r,o=e.order||"preorder",i=this[e.attr||"children"];"preorder"===o&&(r=t.call(n,this));for(var a=0;!r&&a<i.length;a++)i[a].eachNode(e,t,n);"postorder"===o&&t.call(n,this)},updateDepthAndHeight:function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var r=this.children[n];r.updateDepthAndHeight(e+1),r.height>t&&(t=r.height)}this.height=t+1},getNodeById:function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,r=n.length;t<r;t++){var o=n[t].getNodeById(e);if(o)return o}},contains:function(e){if(e===this)return!0;for(var t=0,n=this.children,r=n.length;t<r;t++){var o=n[t].contains(e);if(o)return o}},getAncestors:function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},getValue:function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},setLayout:function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},setVisual:function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},getVisual:function(e,t){return this.hostTree.data.getItemVisual(this.dataIndex,e,t)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},isDescendantOf:function(e){return e!==this&&e.isAncestorOf(this)}},Mb.prototype={constructor:Mb,type:"tree",eachNode:function(e,t,n){this.root.eachNode(e,t,n)},getNodeByDataIndex:function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},getNodeByName:function(e){return this.root.getNodeByName(e)},update:function(){for(var e=this.data,t=this._nodes,n=0,r=t.length;n<r;n++)t[n].dataIndex=-1;for(n=0,r=e.count();n<r;n++)t[e.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},Mb.createTree=function(e,t,n){var r=new Mb(t),o=[],i=1;!function e(t,n){var a=t.value;i=Math.max(i,B(a)?a.length:1);o.push(t);var s=new Ab(t.name,r);n?function(e,t){var n=t.children;if(e.parentNode===t)return;n.push(e),e.parentNode=t}(s,n):r.root=s;r._nodes.push(s);var l=t.children;if(l)for(var u=0;u<l.length;u++)e(l[u],s)}(e),r.root.updateDepthAndHeight(0);var a=yd(o,{coordDimensions:["value"],dimensionsCount:i}),s=new $p(a,t);return s.initData(o),n&&n(s),Sb({mainData:s,struct:r,structAttr:"tree"}),r.update(),r},uf.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(e){var t={name:e.name,children:e.data},n=new Bl(e.leaves||{},this,this.ecModel),r=Mb.createTree(t,this,function(e){e.wrapMethod("getItemModel",function(e,t){var o=r.getNodeByDataIndex(t);return o.children.length&&o.isExpand||(e.parentModel=n),e})});var o=0;r.eachNode("preorder",function(e){e.depth>o&&(o=e.depth)});var i=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:o;return r.root.eachNode("preorder",function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=i}),r.data},getOrient:function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},formatTooltip:function(e){for(var t=this.getData().tree,n=t.root.children[0],r=t.getNodeByDataIndex(e),o=r.getValue(),i=r.name;r&&r!==n;)i=r.parentNode.name+"."+i,r=r.parentNode;return du(i+(isNaN(o)||null==o?"":" : "+o))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var zb=Bs({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.childPoints,r=n.length,o=t.parentPoint,i=n[0],a=n[r-1];if(1===r)return e.moveTo(o[0],o[1]),void e.lineTo(i[0],i[1]);var s=t.orient,l="TB"===s||"BT"===s?0:1,u=1-l,c=Ul(t.forkPosition,1),f=[];f[l]=o[l],f[u]=o[u]+(a[u]-o[u])*c,e.moveTo(o[0],o[1]),e.lineTo(f[0],f[1]),e.moveTo(i[0],i[1]),f[l]=i[l],e.lineTo(f[0],f[1]),f[l]=a[l],e.lineTo(f[0],f[1]),e.lineTo(a[0],a[1]);for(var h=1;h<r-1;h++){var p=n[h];e.moveTo(p[0],p[1]),f[l]=p[l],e.lineTo(f[0],f[1])}}});function Vb(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==e.getItemVisual(t,"symbol")}function Hb(e,t,n){return n.itemModel=t,n.itemStyle=t.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=t.getModel("lineStyle").getLineStyle(),n.labelModel=t.getModel("label"),n.hoverLabelModel=t.getModel("emphasis.label"),!1===e.isExpand&&0!==e.children.length?n.symbolInnerColor=n.itemStyle.fill:n.symbolInnerColor="#fff",n}function Wb(e,t,n,o,i,a){var s=!n,l=e.tree.getNodeByDataIndex(t),u=(a=Hb(l,l.getModel(),a),e.tree.root),c=l.parentNode===u?l:l.parentNode||l,f=e.getItemGraphicEl(c.dataIndex),h=c.getLayout(),p=f?{x:f.position[0],y:f.position[1],rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:h,d=l.getLayout();s?(n=new Qy(e,t,a)).attr("position",[p.x,p.y]):n.updateData(e,t,a),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=d.rawX,n.__radialRawY=d.rawY,o.add(n),e.setItemGraphicEl(t,n),wl(n,{position:[d.x,d.y]},i);var y=n.getSymbolPath();if("radial"===a.layout){var v,g,m=u.children[0],b=m.getLayout(),w=m.children.length;if(d.x===b.x&&!0===l.isExpand){var _={};_.x=(m.children[0].getLayout().x+m.children[w-1].getLayout().x)/2,_.y=(m.children[0].getLayout().y+m.children[w-1].getLayout().y)/2,(v=Math.atan2(_.y-b.y,_.x-b.x))<0&&(v=2*Math.PI+v),(g=_.x<b.x)&&(v-=Math.PI)}else(v=Math.atan2(d.y-b.y,d.x-b.x))<0&&(v=2*Math.PI+v),0===l.children.length||0!==l.children.length&&!1===l.isExpand?(g=d.x<b.x)&&(v-=Math.PI):(g=d.x>b.x)||(v-=Math.PI);var x=g?"left":"right",O=a.labelModel.get("rotate"),P=O*(Math.PI/180);y.setStyle({textPosition:a.labelModel.get("position")||x,textRotation:null==O?-v:P,textOrigin:"center",verticalAlign:"middle"})}!function(e,t,n,o,i,a,s,l,u){var c=u.edgeShape,f=o.__edge;if("curve"===c)t.parentNode&&t.parentNode!==n&&(f||(f=o.__edge=new ws({shape:Jb(u,i,i),style:S({opacity:0,strokeNoScale:!0},u.lineStyle)})),wl(f,{shape:Jb(u,a,s),style:S({opacity:1},u.lineStyle)},e));else if("polyline"===c)if("orthogonal"===u.layout){if(t!==n&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var h=t.children,p=[],d=0;d<h.length;d++){var y=h[d].getLayout();p.push([y.x,y.y])}f||(f=o.__edge=new zb({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:u.orient,forkPosition:u.edgeForkPosition},style:S({opacity:0,strokeNoScale:!0},u.lineStyle)})),wl(f,{shape:{parentPoint:[s.x,s.y],childPoints:p},style:S({opacity:1},u.lineStyle)},e)}}else if(r)throw new Error("The polyline edgeShape can only be used in orthogonal layout");l.add(f)}(i,l,u,n,p,h,d,o,a)}function Ub(e,t,n,r,o,i){for(var a,s=e.tree.getNodeByDataIndex(t),l=e.tree.root,u=(i=Hb(s,s.getModel(),i),s.parentNode===l?s:s.parentNode||s),c=i.edgeShape;null==(a=u.getLayout());)u=u.parentNode===l?u:u.parentNode||u;wl(n,{position:[a.x+1,a.y+1]},o,function(){r.remove(n),e.setItemGraphicEl(t,null)}),n.fadeOut(null,{keepLabel:!0});var f=e.getItemGraphicEl(u.dataIndex).__edge,h=n.__edge||(!1===u.isExpand||1===u.children.length?f:void 0);c=i.edgeShape;h&&("curve"===c?wl(h,{shape:Jb(i,a,a),style:{opacity:0}},o,function(){r.remove(h)}):"polyline"===c&&"orthogonal"===i.layout&&wl(h,{shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]]},style:{opacity:0}},o,function(){r.remove(h)}))}function Jb(e,t,n){var r,o,i,a,s,l,u,c,f=e.orient;if("radial"===e.layout){s=t.rawX,u=t.rawY,l=n.rawX,c=n.rawY;var h=Lb(s,u),p=Lb(s,u+(c-u)*e.curvature),d=Lb(l,c+(u-c)*e.curvature),y=Lb(l,c);return{x1:h.x,y1:h.y,x2:y.x,y2:y.y,cpx1:p.x,cpy1:p.y,cpx2:d.x,cpy2:d.y}}return s=t.x,u=t.y,l=n.x,c=n.y,"LR"!==f&&"RL"!==f||(r=s+(l-s)*e.curvature,o=u,i=l+(s-l)*e.curvature,a=c),"TB"!==f&&"BT"!==f||(r=s,o=u+(c-u)*e.curvature,i=l,a=c+(u-c)*e.curvature),{x1:s,y1:u,x2:l,y2:c,cpx1:r,cpy1:o,cpx2:i,cpy2:a}}function qb(e,t){for(var n,r=[e];n=r.pop();)if(t(n),n.isExpand){var o=n.children;if(o.length)for(var i=o.length-1;i>=0;i--)r.push(o[i])}}jp({type:"tree",init:function(e,t){this._oldTree,this._mainGroup=new Ln,this._controller=new Wm(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(e,t,n,r){var o=e.getData(),i=e.layoutInfo,a=this._mainGroup,s=e.get("layout");"radial"===s?a.attr("position",[i.x+i.width/2,i.y+i.height/2]):a.attr("position",[i.x,i.y]),this._updateViewCoordSys(e,i,s),this._updateController(e,t,n);var l=this._data,u={expandAndCollapse:e.get("expandAndCollapse"),layout:s,edgeShape:e.get("edgeShape"),edgeForkPosition:e.get("edgeForkPosition"),orient:e.getOrient(),curvature:e.get("lineStyle.curveness"),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};o.diff(l).add(function(t){Vb(o,t)&&Wb(o,t,null,a,e,u)}).update(function(t,n){var r=l.getItemGraphicEl(n);Vb(o,t)?Wb(o,t,r,a,e,u):r&&Ub(l,n,r,a,e,u)}).remove(function(t){var n=l.getItemGraphicEl(t);n&&Ub(l,t,n,a,e,u)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===u.expandAndCollapse&&o.eachItemGraphicEl(function(t,r){t.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:r})})}),this._data=o},_updateViewCoordSys:function(e){var t=e.getData(),n=[];t.each(function(e){var r=t.getItemLayout(e);!r||isNaN(r.x)||isNaN(r.y)||n.push([+r.x,+r.y])});var r=[],o=[];Yi(n,r,o);var i=this._min,a=this._max;o[0]-r[0]==0&&(r[0]=i?i[0]:r[0]-1,o[0]=a?a[0]:o[0]+1),o[1]-r[1]==0&&(r[1]=i?i[1]:r[1]-1,o[1]=a?a[1]:o[1]+1);var s=e.coordinateSystem=new pb;s.zoomLimit=e.get("scaleLimit"),s.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1]),s.setCenter(e.get("center")),s.setZoom(e.get("zoom")),this.group.attr({position:s.position,scale:s.scale}),this._viewCoordSys=s,this._min=r,this._max=o},_updateController:function(e,t,n){var r=this._controller,o=this._controllerHost,i=this.group;r.setPointerChecker(function(t,r,o){var a=i.getBoundingRect();return a.applyTransform(i.transform),a.contain(r,o)&&!nb(t,n,e)}),r.enable(e.get("roam")),o.zoomLimit=e.get("scaleLimit"),o.zoom=e.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",function(t){$m(o,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})},this).on("zoom",function(t){eb(o,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),this._updateNodeAndLinkScale(e)},this)},_updateNodeAndLinkScale:function(e){var t=e.getData(),n=this._getNodeGlobalScale(e),r=[n,n];t.eachItemGraphicEl(function(e,t){e.attr("scale",r)})},_getNodeGlobalScale:function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,r=t.scale,o=r&&r[0]||1;return((t.getZoom()-1)*n+1)/o},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),Pp({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var n=e.dataIndex,r=t.getData().tree.getNodeByDataIndex(n);r.isExpand=!r.isExpand})}),Pp({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var n=cb(t.coordinateSystem,e);t.setCenter&&t.setCenter(n.center),t.setZoom&&t.setZoom(n.zoom)})});function Yb(e,t,n){if(e&&k(t,e.type)>=0){var r=n.getData().tree.root,o=e.targetNode;if("string"==typeof o&&(o=r.getNodeById(o)),o&&r.contains(o))return{node:o};var i=e.targetNodeId;if(null!=i&&(o=r.getNodeById(i)))return{node:o}}}function Xb(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function Zb(e,t){return k(Xb(e),t)>=0}function Qb(e,t){for(var n=[];e;){var r=e.dataIndex;n.push({name:e.name,dataIndex:r,value:t.getRawValue(r)}),e=e.parentNode}return n.reverse(),n}Cp(Lv("tree","circle")),kp(function(e,t){e.eachSeriesByType("tree",function(e){!function(e,t){var n=function(e,t){return Mu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=n;var r=e.get("layout"),o=0,i=0,a=null;"radial"===r?(o=2*Math.PI,i=Math.min(n.height,n.width)/2,a=jb(function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth})):(o=n.width,i=n.height,a=jb());var s=e.getData().tree.root,l=s.children[0];if(l){!function(e){e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t,n,r=[e];t=r.pop();)if(n=t.children,t.isExpand&&n.length)for(var o=n.length-1;o>=0;o--){var i=n[o];i.hierNode={defaultAncestor:null,ancestor:i,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},r.push(i)}}(s),function(e,t,n){for(var r,o=[e],i=[];r=o.pop();)if(i.push(r),r.isExpand){var a=r.children;if(a.length)for(var s=0;s<a.length;s++)o.push(a[s])}for(;r=i.pop();)t(r,n)}(l,Rb,a),s.hierNode.modifier=-l.hierNode.prelim,qb(l,Ib);var u=l,c=l,f=l;qb(l,function(e){var t=e.getLayout().x;t<u.getLayout().x&&(u=e),t>c.getLayout().x&&(c=e),e.depth>f.depth&&(f=e)});var h=u===c?1:a(u,c)/2,p=h-u.getLayout().x,d=0,y=0,v=0,g=0;if("radial"===r)d=o/(c.getLayout().x+h+p),y=i/(f.depth-1||1),qb(l,function(e){v=(e.getLayout().x+p)*d,g=(e.depth-1)*y;var t=Lb(v,g);e.setLayout({x:t.x,y:t.y,rawX:v,rawY:g},!0)});else{var m=e.getOrient();"RL"===m||"LR"===m?(y=i/(c.getLayout().x+h+p),d=o/(f.depth-1||1),qb(l,function(e){g=(e.getLayout().x+p)*y,v="LR"===m?(e.depth-1)*d:o-(e.depth-1)*d,e.setLayout({x:v,y:g},!0)})):"TB"!==m&&"BT"!==m||(d=o/(c.getLayout().x+h+p),y=i/(f.depth-1||1),qb(l,function(e){v=(e.getLayout().x+p)*d,g="TB"===m?(e.depth-1)*y:i-(e.depth-1)*y,e.setLayout({x:v,y:g},!0)}))}}}(e,t)})}),uf.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"â¶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(e,t){var n={name:e.name,children:e.data};!function e(t){var n=0;M(t.children,function(t){e(t);var r=t.value;B(r)&&(r=r[0]),n+=r});var r=t.value;B(r)&&(r=r[0]);(null==r||isNaN(r))&&(r=n);r<0&&(r=0);B(t.value)?t.value[0]=r:t.value=r}(n);var r=e.levels||[],o=new Bl({itemStyle:this.designatedVisualItemStyle={}},this,t),i=R((r=e.levels=function(e,t){var n,r=t.get("color");if(!r)return;if(M(e=e||[],function(e){var t=new Bl(e),r=t.get("color");(t.get("itemStyle.color")||r&&"none"!==r)&&(n=!0)}),!n){var o=e[0]||(e[0]={});o.color=r.slice()}return e}(r,t))||[],function(e){return new Bl(e,o,t)},this),a=Mb.createTree(n,this,function(e){e.wrapMethod("getItemModel",function(e,t){var n=a.getNodeByDataIndex(t),r=i[n.depth];return e.parentModel=r||o,e})});return a.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(e){var t=this.getData(),n=this.getRawValue(e),r=B(n)?uu(n[0]):uu(n);return du(t.getName(e)+": "+r)},getDataParams:function(e){var t=uf.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=Qb(n,this),t},setLayoutInfo:function(e){this.layoutInfo=this.layoutInfo||{},x(this.layoutInfo,e)},mapIdToIndex:function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=re(),this._idIndexMapCount=0);var n=t.get(e);return null==n&&t.set(e,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var Kb=5;function $b(e){this.group=new Ln,e.add(this.group)}function ew(e,t,n,r,o,i){var a=[[o?e:e-Kb,t],[e+n,t],[e+n,t+r],[o?e:e-Kb,t+r]];return!i&&a.splice(2,0,[e+n+Kb,t+r/2]),!o&&a.push([e,t+r/2]),a}function tw(e,t,n){e.eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.componentIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&Qb(n,t)}}$b.prototype={constructor:$b,render:function(e,t,n,r){var o=e.getModel("breadcrumb"),i=this.group;if(i.removeAll(),o.get("show")&&n){var a=o.getModel("itemStyle"),s=a.getModel("textStyle"),l={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,l,s),this._renderContent(e,l,a,s,r),Ru(i,l.pos,l.box)}},_prepare:function(e,t,n){for(var r=e;r;r=r.parentNode){var o=r.getModel().get("name"),i=n.getTextRect(o),a=Math.max(i.width+16,t.emptyItemWidth);t.totalWidth+=a+8,t.renderList.push({node:r,text:o,width:a})}},_renderContent:function(e,t,n,r,o){for(var i,a,s,l,u,c,f,h,p,d=0,y=t.emptyItemWidth,v=e.get("breadcrumb.height"),g=(i=t.pos,a=t.box,l=a.width,u=a.height,c=Ul(i.x,l),f=Ul(i.y,u),h=Ul(i.x2,l),p=Ul(i.y2,u),(isNaN(c)||isNaN(parseFloat(i.x)))&&(c=0),(isNaN(h)||isNaN(parseFloat(i.x2)))&&(h=l),(isNaN(f)||isNaN(parseFloat(i.y)))&&(f=0),(isNaN(p)||isNaN(parseFloat(i.y2)))&&(p=u),s=fu(s||0),{width:Math.max(h-c-s[1]-s[3],0),height:Math.max(p-f-s[0]-s[2],0)}),m=t.totalWidth,b=t.renderList,w=b.length-1;w>=0;w--){var _=b[w],x=_.node,O=_.width,P=_.text;m>g.width&&(m-=O-y,O=y,P=null);var T=new ls({shape:{points:ew(d,0,O,v,w===b.length-1,0===w)},style:S(n.getItemStyle(),{lineJoin:"bevel",text:P,textFill:r.getTextColor(),textFont:r.getFont()}),z:10,onclick:N(o,x)});this.group.add(T),tw(T,e,x),d+=O+8}},remove:function(){this.group.removeAll()}};var nw=D,rw=Ln,ow=ys,iw=M,aw=["label"],sw=["emphasis","label"],lw=["upperLabel"],uw=["emphasis","upperLabel"],cw=10,fw=1,hw=2,pw=vi([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),dw=function(e){var t=pw(e);return t.stroke=t.fill=t.lineWidth=null,t};function yw(e,t,n,r,o,i,a,s,l,u){if(a){var c=a.getLayout(),f=e.getData();if(f.setItemGraphicEl(a.dataIndex,null),c&&c.isInView){var h=c.width,p=c.height,d=c.borderWidth,y=c.invisible,v=a.getRawIndex(),g=s&&s.getRawIndex(),m=a.viewChildren,w=c.upperHeight,_=m&&m.length,S=a.getModel("itemStyle"),O=a.getModel("emphasis.itemStyle"),P=R("nodeGroup",rw);if(P){if(l.add(P),P.attr("position",[c.x||0,c.y||0]),P.__tmNodeWidth=h,P.__tmNodeHeight=p,c.isAboveViewRoot)return P;var T=a.getModel(),k=R("background",ow,u,fw);if(k&&function(t,n,r){if(n.dataIndex=a.dataIndex,n.seriesIndex=e.seriesIndex,n.setShape({x:0,y:0,width:h,height:p}),y)E(n);else{n.invisible=!1;var o=a.getVisual("borderColor",!0),i=O.get("borderColor"),s=dw(S);s.fill=o;var l=pw(O);if(l.fill=i,r){var u=h-2*d;A(s,l,o,u,w,{x:d,y:0,width:u,height:w})}else s.text=l.text=null;n.setStyle(s),el(n,l)}t.add(n)}(P,k,_&&c.upperLabelHeight),_)ll(P)&&sl(P,!1),k&&(sl(k,!0),f.setItemGraphicEl(a.dataIndex,k));else{var C=R("content",ow,u,hw);C&&function(t,n){n.dataIndex=a.dataIndex,n.seriesIndex=e.seriesIndex;var r=Math.max(h-2*d,0),o=Math.max(p-2*d,0);if(n.culling=!0,n.setShape({x:d,y:d,width:r,height:o}),y)E(n);else{n.invisible=!1;var i=a.getVisual("color",!0),s=dw(S);s.fill=i;var l=pw(O);A(s,l,i,r,o),n.setStyle(s),el(n,l)}t.add(n)}(P,C),k&&ll(k)&&sl(k,!1),sl(P,!0),f.setItemGraphicEl(a.dataIndex,P)}return P}}}function E(e){!e.invisible&&i.push(e)}function A(t,n,r,o,i,s){var l=T.get("name"),u=T.getModel(s?lw:aw),f=T.getModel(s?uw:sw),h=u.getShallow("show");cl(t,n,u,f,{defaultText:h?l:null,autoColor:r,isRectText:!0,labelFetcher:e,labelDataIndex:a.dataIndex,labelProp:s?"upperLabel":"label"}),M(t,s,c),M(n,s,c),s&&(t.textRect=b(s)),t.truncate=h&&u.get("ellipsis")?{outerWidth:o,outerHeight:i,minChar:2}:null}function M(t,n,r){var o=t.text;if(!n&&r.isLeafRoot&&null!=o){var i=e.get("drillDownIcon",!0);t.text=i?i+" "+o:o}}function R(e,i,s,l){var u=null!=g&&n[e][g],c=o[e];return u?(n[e][g]=null,function(e,t,n){(e[v]={}).old="nodeGroup"===n?t.position.slice():x({},t.shape)}(c,u,e)):y||((u=new i({z:function(e,t){var n=e*cw+t;return(n-1)/n}(s,l)})).__tmDepth=s,u.__tmStorageName=e,function(e,t,n){var i=e[v]={},s=a.parentNode;if(s&&(!r||"drillDown"===r.direction)){var l=0,u=0,c=o.background[s.getRawIndex()];!r&&c&&c.old&&(l=c.old.width,u=c.old.height),i.old="nodeGroup"===n?[0,u]:{x:l,y:u,width:0,height:0}}i.fadein="nodeGroup"!==n}(c,0,e)),t[e][v]=u}}jp({type:"treemap",init:function(e,t){this._containerGroup,this._storage={nodeGroup:[],background:[],content:[]},this._oldTree,this._breadcrumb,this._controller,this._state="ready"},render:function(e,t,n,r){if(!(k(t.findComponents({mainType:"series",subType:"treemap",query:r}),e)<0)){this.seriesModel=e,this.api=n,this.ecModel=t;var o=Yb(r,["treemapZoomToNode","treemapRootToNode"],e),i=r&&r.type,a=e.layoutInfo,s=!this._oldTree,l=this._storage,u="treemapRootToNode"===i&&o&&l?{rootNodeGroup:l.nodeGroup[o.node.getRawIndex()],direction:r.direction}:null,c=this._giveContainerGroup(a),f=this._doRender(c,e,u);s||i&&"treemapZoomToNode"!==i&&"treemapRootToNode"!==i?f.renderFinally():this._doAnimation(c,f,e,u),this._resetController(n),this._renderBreadcrumb(e,n,o)}},_giveContainerGroup:function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new rw,this._initEvents(t),this.group.add(t)),t.attr("position",[e.x,e.y]),t},_doRender:function(e,t,n){var r=t.getData().tree,o=this._oldTree,i={nodeGroup:[],background:[],content:[]},a={nodeGroup:[],background:[],content:[]},s=this._storage,l=[],u=N(yw,t,a,s,n,i,l);!function e(t,n,r,o,i){o?(n=t,iw(t,function(e,t){!e.isRemoved()&&s(t,t)})):new Dp(n,t,a,a).add(s).update(s).remove(N(s,null)).execute();function a(e){return e.getId()}function s(a,s){var l=null!=a?t[a]:null,c=null!=s?n[s]:null,f=u(l,c,r,i);f&&e(l&&l.viewChildren||[],c&&c.viewChildren||[],f,o,i+1)}}(r.root?[r.root]:[],o&&o.root?[o.root]:[],e,r===o||!o,0);var c=function(e){var t={nodeGroup:[],background:[],content:[]};return e&&iw(e,function(e,n){var r=t[n];iw(e,function(e){e&&(r.push(e),e.__tmWillDelete=1)})}),t}(s);return this._oldTree=r,this._storage=a,{lastsForAnimation:i,willDeleteEls:c,renderFinally:function(){iw(c,function(e){iw(e,function(e){e.parent&&e.parent.remove(e)})}),iw(l,function(e){e.invisible=!0,e.dirty()})}}},_doAnimation:function(e,t,n,r){if(n.get("animation")){var o,i,a,s=n.get("animationDurationUpdate"),l=n.get("animationEasing"),u=(i=[],a={},{add:function(e,t,n,r,o){return G(r)&&(o=r,r=0),!a[e.id]&&(a[e.id]=1,i.push({el:e,target:t,time:n,delay:r,easing:o}),!0)},done:function(e){return o=e,this},start:function(){for(var e=i.length,t=0,n=i.length;t<n;t++){var r=i[t];r.el.animateTo(r.target,r.time,r.delay,r.easing,s)}return this;function s(){--e||(i.length=0,a={},o&&o())}}});iw(t.willDeleteEls,function(e,t){iw(e,function(e,n){if(!e.invisible){var o,i=e.parent;if(r&&"drillDown"===r.direction)o=i===r.rootNodeGroup?{shape:{x:0,y:0,width:i.__tmNodeWidth,height:i.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var a=0,c=0;i.__tmWillDelete||(a=i.__tmNodeWidth/2,c=i.__tmNodeHeight/2),o="nodeGroup"===t?{position:[a,c],style:{opacity:0}}:{shape:{x:a,y:c,width:0,height:0},style:{opacity:0}}}o&&u.add(e,o,s,l)}})}),iw(this._storage,function(e,n){iw(e,function(e,r){var o=t.lastsForAnimation[n][r],i={};o&&("nodeGroup"===n?o.old&&(i.position=e.position.slice(),e.attr("position",o.old)):(o.old&&(i.shape=x({},e.shape),e.setShape(o.old)),o.fadein?(e.setStyle("opacity",0),i.style={opacity:1}):1!==e.style.opacity&&(i.style={opacity:1})),u.add(e,i,s,l))})},this),this._state="animating",u.done(nw(function(){this._state="ready",t.renderFinally()},this)).start()}},_resetController:function(e){var t=this._controller;t||((t=this._controller=new Wm(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",nw(this._onPan,this)),t.on("zoom",nw(this._onZoom,this)));var n=new jn(0,0,e.getWidth(),e.getHeight());t.setPointerChecker(function(e,t,r){return n.contain(t,r)})},_clearController:function(){var e=this._controller;e&&(e.dispose(),e=null)},_onPan:function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var n=t.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},_onZoom:function(e){var t=e.originX,n=e.originY;if("animating"!==this._state){var r=this.seriesModel.getData().tree.root;if(!r)return;var o=r.getLayout();if(!o)return;var i=new jn(o.x,o.y,o.width,o.height),a=this.seriesModel.layoutInfo;t-=a.x,n-=a.y;var s=ut();pt(s,s,[-t,-n]),yt(s,s,[e.scale,e.scale]),pt(s,s,[t,n]),i.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x,y:i.y,width:i.width,height:i.height}})}},_initEvents:function(e){e.on("click",function(e){if("ready"===this._state){var t=this.seriesModel.get("nodeClick",!0);if(t){var n=this.findTarget(e.offsetX,e.offsetY);if(n){var r=n.node;if(r.getLayout().isLeafRoot)this._rootToNode(n);else if("zoomToNode"===t)this._zoomToNode(n);else if("link"===t){var o=r.hostTree.data.getItemModel(r.dataIndex),i=o.get("link",!0),a=o.get("target",!0)||"blank";i&&Ou(i,a)}}}}},this)},_renderBreadcrumb:function(e,t,n){n||(n=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(n={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new $b(this.group))).render(e,t,n.node,nw(function(t){"animating"!==this._state&&(Zb(e.getViewRoot(),t)?this._rootToNode({node:t}):this._zoomToNode({node:t}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},_rootToNode:function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},findTarget:function(e,t){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(r){var o=this._storage.background[r.getRawIndex()];if(o){var i=o.transformCoordToLocal(e,t),a=o.shape;if(!(a.x<=i[0]&&i[0]<=a.x+a.width&&a.y<=i[1]&&i[1]<=a.y+a.height))return!1;n={node:r,offsetX:i[0],offsetY:i[1]}}},this),n}});for(var vw=function(){},gw=["treemapZoomToNode","treemapRender","treemapMove"],mw=0;mw<gw.length;mw++)Pp({type:gw[mw],update:"updateView"},vw);Pp({type:"treemapRootToNode",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},function(t,n){var r=Yb(e,["treemapZoomToNode","treemapRootToNode"],t);if(r){var o=t.getViewRoot();o&&(e.direction=Zb(o,r.node)?"rollUp":"drillDown"),t.resetViewRoot(r.node)}})});var bw=M,ww=z,_w=-1,xw=function(e){var t=e.mappingMethod,n=e.type,r=this.option=b(e);this.type=n,this.mappingMethod=t,this._normalizeData=Iw[t];var o=Sw[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._doMap=o._doMap[t],"piecewise"===t?(Ow(r),function(e){var t=e.pieceList;e.hasSpecialVisual=!1,M(t,function(t,n){t.originIndex=n,null!=t.visual&&(e.hasSpecialVisual=!0)})}(r)):"category"===t?r.categories?function(e){var t=e.categories,n=e.visual,r=e.categoryMap={};if(bw(t,function(e,t){r[e]=t}),!B(n)){var o=[];z(n)?bw(n,function(e,t){var n=r[t];o[null!=n?n:_w]=e}):o[_w]=n,n=Rw(e,o)}for(var i=t.length-1;i>=0;i--)null==n[i]&&(delete r[t[i]],t.pop())}(r):Ow(r,!0):(Q("linear"!==t||r.dataExtent),Ow(r))};xw.prototype={constructor:xw,mapValueToVisual:function(e){var t=this._normalizeData(e);return this._doMap(t,e)},getNormalizer:function(){return D(this._normalizeData,this)}};var Sw=xw.visualHandlers={color:{applyVisual:kw("color"),getColorMapper:function(){var e=this.option;return D("category"===e.mappingMethod?function(e,t){return!t&&(e=this._normalizeData(e)),Cw.call(this,e)}:function(t,n,r){var o=!!r;return!n&&(t=this._normalizeData(t)),r=Zt(t,e.parsedVisual,r),o?r:nn(r,"rgba")},this)},_doMap:{linear:function(e){return nn(Zt(e,this.option.parsedVisual),"rgba")},category:Cw,piecewise:function(e,t){var n=Mw.call(this,t);return null==n&&(n=nn(Zt(e,this.option.parsedVisual),"rgba")),n},fixed:Ew}},colorHue:Pw(function(e,t){return en(e,t)}),colorSaturation:Pw(function(e,t){return en(e,null,t)}),colorLightness:Pw(function(e,t){return en(e,null,null,t)}),colorAlpha:Pw(function(e,t){return tn(e,t)}),opacity:{applyVisual:kw("opacity"),_doMap:Aw([0,1])},liftZ:{applyVisual:kw("liftZ"),_doMap:{linear:Ew,category:Ew,piecewise:Ew,fixed:Ew}},symbol:{applyVisual:function(e,t,n){var r=this.mapValueToVisual(e);if(G(r))n("symbol",r);else if(ww(r))for(var o in r)r.hasOwnProperty(o)&&n(o,r[o])},_doMap:{linear:Tw,category:Cw,piecewise:function(e,t){var n=Mw.call(this,t);return null==n&&(n=Tw.call(this,e)),n},fixed:Ew}},symbolSize:{applyVisual:kw("symbolSize"),_doMap:Aw([0,1])}};function Ow(e,t){var n=e.visual,r=[];z(n)?bw(n,function(e){r.push(e)}):null!=n&&r.push(n);t||1!==r.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(r[1]=r[0]),Rw(e,r)}function Pw(e){return{applyVisual:function(t,n,r){t=this.mapValueToVisual(t),r("color",e(n("color"),t))},_doMap:Aw([0,1])}}function Tw(e){var t=this.option.visual;return t[Math.round(Wl(e,[0,1],[0,t.length-1],!0))]||{}}function kw(e){return function(t,n,r){r(e,this.mapValueToVisual(t))}}function Cw(e){var t=this.option.visual;return t[this.option.loop&&e!==_w?e%t.length:e]}function Ew(){return this.option.visual[0]}function Aw(e){return{linear:function(t){return Wl(t,e,this.option.visual,!0)},category:Cw,piecewise:function(t,n){var r=Mw.call(this,n);return null==r&&(r=Wl(t,e,this.option.visual,!0)),r},fixed:Ew}}function Mw(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var r=n[xw.findPieceIndex(e,n)];if(r&&r.visual)return r.visual[this.type]}}function Rw(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=R(t,function(e){return Jt(e)})),t}var Iw={linear:function(e){return Wl(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=xw.findPieceIndex(e,t,!0);if(null!=n)return Wl(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?_w:t},fixed:ie};function jw(e,t,n){return e?t<=n:t<n}xw.listVisualTypes=function(){var e=[];return M(Sw,function(t,n){e.push(n)}),e},xw.addVisualHandler=function(e,t){Sw[e]=t},xw.isValidType=function(e){return Sw.hasOwnProperty(e)},xw.eachVisual=function(e,t,n){z(e)?M(e,t,n):t.call(n,e)},xw.mapVisual=function(e,t,n){var r,o=B(e)?[]:z(e)?{}:(r=!0,null);return xw.eachVisual(e,function(e,i){var a=t.call(n,e,i);r?o=a:o[i]=a}),o},xw.retrieveVisuals=function(e){var t,n={};return e&&bw(Sw,function(r,o){e.hasOwnProperty(o)&&(n[o]=e[o],t=!0)}),t?n:null},xw.prepareVisualTypes=function(e){if(ww(e)){var t=[];bw(e,function(e,n){t.push(n)}),e=t}else{if(!B(e))return[];e=e.slice()}return e.sort(function(e,t){return"color"===t&&"color"!==e&&0===e.indexOf("color")?1:-1}),e},xw.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},xw.findPieceIndex=function(e,t,n){for(var r,o=1/0,i=0,a=t.length;i<a;i++){var s=t[i].value;if(null!=s){if(s===e||"string"==typeof s&&s===e+"")return i;n&&f(s,i)}}for(i=0,a=t.length;i<a;i++){var l=t[i],u=l.interval,c=l.close;if(u){if(u[0]===-1/0){if(jw(c[1],e,u[1]))return i}else if(u[1]===1/0){if(jw(c[0],u[0],e))return i}else if(jw(c[0],u[0],e)&&jw(c[1],e,u[1]))return i;n&&f(u[0],i),n&&f(u[1],i)}}if(n)return e===1/0?t.length-1:e===-1/0?0:r;function f(t,n){var i=Math.abs(t-e);i<o&&(o=i,r=n)}};var Lw=B,Dw="itemStyle",Nw={seriesType:"treemap",reset:function(e,t,n,r){var o=e.getData().tree.root;o.isRemoved()||function e(t,n,r,o){var i=t.getModel();var a=t.getLayout();if(!a||a.invisible||!a.isInView)return;var s=t.getModel(Dw);var l=function(e,t,n){var r=x({},t),o=n.designatedVisualItemStyle;return M(["color","colorAlpha","colorSaturation"],function(n){o[n]=t[n];var i=e.get(n);o[n]=null,null!=i&&(r[n]=i)}),r}(s,n,o);var u=s.get("borderColor");var c=s.get("borderColorSaturation");var f;null!=c&&(f=Bw(l),u=function(e,t){return null!=t?en(t,null,null,e):null}(c,f));t.setVisual("borderColor",u);var h=t.viewChildren;if(h&&h.length){var p=function(e,t,n,r,o,i){if(!i||!i.length)return;var a=Gw(t,"color")||null!=o.color&&"none"!==o.color&&(Gw(t,"colorAlpha")||Gw(t,"colorSaturation"));if(!a)return;var s=t.get("visualMin"),l=t.get("visualMax"),u=n.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=l&&l>u[1]&&(u[1]=l);var c=t.get("colorMappingBy"),f={type:a.name,dataExtent:u,visual:a.range};"color"!==f.type||"index"!==c&&"id"!==c?f.mappingMethod="linear":(f.mappingMethod="category",f.loop=!0);var h=new xw(f);return h.__drColorMappingBy=c,h}(0,i,a,0,l,h);M(h,function(t,n){if(t.depth>=r.length||t===r[t.depth]){var a=function(e,t,n,r,o,i){var a=x({},t);if(o){var s=o.type,l="color"===s&&o.__drColorMappingBy,u="index"===l?r:"id"===l?i.mapIdToIndex(n.getId()):n.getValue(e.get("visualDimension"));a[s]=o.mapValueToVisual(u)}return a}(i,l,t,n,p,o);e(t,a,r,o)}})}else f=Bw(l),t.setVisual("color",f)}(o,{},e.getViewRoot().getAncestors(),e)}};function Bw(e){var t=Fw(e,"color");if(t){var n=Fw(e,"colorAlpha"),r=Fw(e,"colorSaturation");return r&&(t=en(t,null,null,r)),n&&(t=tn(t,n)),t}}function Fw(e,t){var n=e[t];if(null!=n&&"none"!==n)return n}function Gw(e,t){var n=e.get(t);return Lw(n)&&n.length?{name:t,range:n}:null}var zw=Math.max,Vw=Math.min,Hw=J,Ww=M,Uw=["itemStyle","borderWidth"],Jw=["itemStyle","gapWidth"],qw=["upperLabel","show"],Yw=["upperLabel","height"],Xw={seriesType:"treemap",reset:function(e,t,n,r){var o=n.getWidth(),i=n.getHeight(),a=e.option,s=Mu(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=a.size||[],u=Ul(Hw(s.width,l[0]),o),c=Ul(Hw(s.height,l[1]),i),f=r&&r.type,h=Yb(r,["treemapZoomToNode","treemapRootToNode"],e),p="treemapRender"===f||"treemapMove"===f?r.rootRect:null,d=e.getViewRoot(),y=Xb(d);if("treemapMove"!==f){var v="treemapZoomToNode"===f?function(e,t,n,r,o){var i,a=(t||{}).node,s=[r,o];if(!a||a===n)return s;var l=r*o,u=l*e.option.zoomToNodeRatio;for(;i=a.parentNode;){for(var c=0,f=i.children,h=0,p=f.length;h<p;h++)c+=f[h].getValue();var d=a.getValue();if(0===d)return s;u*=c/d;var y=i.getModel(),v=y.get(Uw),g=Math.max(v,Kw(y));(u+=4*v*v+(3*v+g)*Math.pow(u,.5))>Kl&&(u=Kl),a=i}u<l&&(u=l);var m=Math.pow(u/l,.5);return[r*m,o*m]}(e,h,d,u,c):p?[p.width,p.height]:[u,c],g=a.sort;g&&"asc"!==g&&"desc"!==g&&(g="desc");var m={squareRatio:a.squareRatio,sort:g,leafDepth:a.leafDepth};d.hostTree.clearLayouts();var b={x:0,y:0,width:v[0],height:v[1],area:v[0]*v[1]};d.setLayout(b),function e(t,n,r,o){var i;var a;if(t.isRemoved())return;var s=t.getLayout();i=s.width;a=s.height;var l=t.getModel();var u=l.get(Uw);var c=l.get(Jw)/2;var f=Kw(l);var h=Math.max(u,f);var p=u-c;var d=h-c;var l=t.getModel();t.setLayout({borderWidth:u,upperHeight:h,upperLabelHeight:f},!0);i=zw(i-2*p,0);a=zw(a-p-d,0);var y=i*a;var v=function(e,t,n,r,o,i){var a=e.children||[],s=r.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=r.leafDepth&&r.leafDepth<=i;if(o&&!l)return e.viewChildren=[];!function(e,t){t&&e.sort(function(e,n){var r="asc"===t?e.getValue()-n.getValue():n.getValue()-e.getValue();return 0===r?"asc"===t?e.dataIndex-n.dataIndex:n.dataIndex-e.dataIndex:r})}(a=j(a,function(e){return!e.isRemoved()}),s);var u=function(e,t,n){for(var r=0,o=0,i=t.length;o<i;o++)r+=t[o].getValue();var a=e.get("visualDimension");if(t&&t.length)if("value"===a&&n)s=[t[t.length-1].getValue(),t[0].getValue()],"asc"===n&&s.reverse();else{var s=[1/0,-1/0];Ww(t,function(e){var t=e.getValue(a);t<s[0]&&(s[0]=t),t>s[1]&&(s[1]=t)})}else s=[NaN,NaN];return{sum:r,dataExtent:s}}(t,a,s);if(0===u.sum)return e.viewChildren=[];if(u.sum=function(e,t,n,r,o){if(!r)return n;for(var i=e.get("visibleMin"),a=o.length,s=a,l=a-1;l>=0;l--){var u=o["asc"===r?a-l-1:l].getValue();u/n*t<i&&(s=l,n-=u)}return"asc"===r?o.splice(0,a-s):o.splice(s,a-s),n}(t,n,u.sum,s,a),0===u.sum)return e.viewChildren=[];for(var c=0,f=a.length;c<f;c++){var h=a[c].getValue()/u.sum*n;a[c].setLayout({area:h})}l&&(a.length&&e.setLayout({isLeafRoot:!0},!0),a.length=0);return e.viewChildren=a,e.setLayout({dataExtent:u.dataExtent},!0),a}(t,l,y,n,r,o);if(!v.length)return;var g={x:p,y:d,width:i,height:a};var m=Vw(i,a);var b=1/0;var w=[];w.area=0;for(var _=0,x=v.length;_<x;){var S=v[_];w.push(S),w.area+=S.getLayout().area;var O=Zw(w,m,n.squareRatio);O<=b?(_++,b=O):(w.area-=w.pop().getLayout().area,Qw(w,m,g,c,!1),m=Vw(g.width,g.height),w.length=w.area=0,b=1/0)}w.length&&Qw(w,m,g,c,!0);if(!r){var P=l.get("childrenVisibleMin");null!=P&&y<P&&(r=!0)}for(var _=0,x=v.length;_<x;_++)e(v[_],n,r,o+1)}(d,m,!1,0);b=d.getLayout();Ww(y,function(e,t){var n=(y[t+1]||d).getValue();e.setLayout(x({dataExtent:[n,n],borderWidth:0,upperHeight:0},b))})}var w=e.getData().tree.root;w.setLayout(function(e,t,n){if(t)return{x:t.x,y:t.y};var r={x:0,y:0};if(!n)return r;var o=n.node,i=o.getLayout();if(!i)return r;var a=[i.width/2,i.height/2],s=o;for(;s;){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:e.width/2-a[0],y:e.height/2-a[1]}}(s,p,h),!0),e.setLayoutInfo(s),function e(t,n,r,o,i){var a=t.getLayout();var s=r[i];var l=s&&s===t;if(s&&!l||i===r.length&&t!==o)return;t.setLayout({isInView:!0,invisible:!l&&!n.intersect(a),isAboveViewRoot:l},!0);var u=new jn(n.x-a.x,n.y-a.y,n.width,n.height);Ww(t.viewChildren||[],function(t){e(t,u,r,o,i+1)})}(w,new jn(-s.x,-s.y,o,i),y,d,0)}};function Zw(e,t,n){for(var r,o=0,i=1/0,a=0,s=e.length;a<s;a++)(r=e[a].getLayout().area)&&(r<i&&(i=r),r>o&&(o=r));var l=e.area*e.area,u=t*t*n;return l?zw(u*o/l,l/(u*i)):1/0}function Qw(e,t,n,r,o){var i=t===n.width?0:1,a=1-i,s=["x","y"],l=["width","height"],u=n[s[i]],c=t?e.area/t:0;(o||c>n[l[a]])&&(c=n[l[a]]);for(var f=0,h=e.length;f<h;f++){var p=e[f],d={},y=c?p.getLayout().area/c:0,v=d[l[a]]=zw(c-2*r,0),g=n[s[i]]+n[l[i]]-u,m=f===h-1||g<y?g:y,b=d[l[i]]=zw(m-2*r,0);d[s[a]]=n[s[a]]+Vw(r,v/2),d[s[i]]=u+Vw(r,b/2),u+=m,p.setLayout(d,!0)}n[s[a]]+=c,n[l[a]]-=c}function Kw(e){return e.get(qw)?e.get(Yw):0}function $w(e){return"_EC_"+e}Cp(Nw),kp(Xw);var e_=function(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},t_=e_.prototype;function n_(e,t){this.id=null==e?"":e,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==t?-1:t}function r_(e,t,n){this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}t_.type="graph",t_.isDirected=function(){return this._directed},t_.addNode=function(e,t){e=null==e?""+t:""+e;var n=this._nodesMap;if(!n[$w(e)]){var o=new n_(e,t);return o.hostGraph=this,this.nodes.push(o),n[$w(e)]=o,o}r&&console.error("Graph nodes have duplicate name or id")},t_.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},t_.getNodeById=function(e){return this._nodesMap[$w(e)]},t_.addEdge=function(e,t,n){var r=this._nodesMap,o=this._edgesMap;if("number"==typeof e&&(e=this.nodes[e]),"number"==typeof t&&(t=this.nodes[t]),n_.isInstance(e)||(e=r[$w(e)]),n_.isInstance(t)||(t=r[$w(t)]),e&&t){var i=e.id+"-"+t.id,a=new r_(e,t,n);return a.hostGraph=this,this._directed&&(e.outEdges.push(a),t.inEdges.push(a)),e.edges.push(a),e!==t&&t.edges.push(a),this.edges.push(a),o[i]=a,a}},t_.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},t_.getEdge=function(e,t){n_.isInstance(e)&&(e=e.id),n_.isInstance(t)&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},t_.eachNode=function(e,t){for(var n=this.nodes,r=n.length,o=0;o<r;o++)n[o].dataIndex>=0&&e.call(t,n[o],o)},t_.eachEdge=function(e,t){for(var n=this.edges,r=n.length,o=0;o<r;o++)n[o].dataIndex>=0&&n[o].node1.dataIndex>=0&&n[o].node2.dataIndex>=0&&e.call(t,n[o],o)},t_.breadthFirstTraverse=function(e,t,n,r){if(n_.isInstance(t)||(t=this._nodesMap[$w(t)]),t){for(var o="out"===n?"outEdges":"in"===n?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;if(!e.call(r,t,null))for(var a=[t];a.length;){var s=a.shift(),l=s[o];for(i=0;i<l.length;i++){var u=l[i],c=u.node1===s?u.node2:u.node1;if(!c.__visited){if(e.call(r,c,s))return;a.push(c),c.__visited=!0}}}}},t_.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,r=this.edges,o=0,i=n.length;o<i;o++)n[o].dataIndex=-1;for(o=0,i=e.count();o<i;o++)n[e.getRawIndex(o)].dataIndex=o;t.filterSelf(function(e){var n=r[t.getRawIndex(e)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0});for(o=0,i=r.length;o<i;o++)r[o].dataIndex=-1;for(o=0,i=t.count();o<i;o++)r[t.getRawIndex(o)].dataIndex=o},t_.clone=function(){for(var e=new e_(this._directed),t=this.nodes,n=this.edges,r=0;r<t.length;r++)e.addNode(t[r].id,t[r].dataIndex);for(r=0;r<n.length;r++){var o=n[r];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},n_.prototype={constructor:n_,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)}},r_.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)};var o_=function(e,t){return{getValue:function(n){var r=this[e][t];return r.get(r.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,n,r)},getVisual:function(n,r){return this[e][t].getItemVisual(this.dataIndex,n,r)},setLayout:function(n,r){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}};E(n_,o_("hostGraph","data")),E(r_,o_("hostGraph","edgeData")),e_.Node=n_,e_.Edge=r_,hi(n_),hi(r_);var i_=function(e,t,n,r,o){for(var i=new e_(r),a=0;a<e.length;a++)i.addNode(J(e[a].id,e[a].name,a),a);var s=[],l=[],u=0;for(a=0;a<t.length;a++){var c=t[a],f=c.source,h=c.target;i.addEdge(f,h,u)&&(l.push(c),s.push(J(c.id,f+" > "+h)),u++)}var p,d=n.get("coordinateSystem");if("cartesian2d"===d||"polar"===d)p=xd(e,n);else{var y=gc.get(d),v=y&&"view"!==y.type&&y.dimensions||[];k(v,"value")<0&&v.concat(["value"]);var g=yd(e,{coordDimensions:v});(p=new $p(g,n)).initData(e)}var m=new $p(["value"],n);return m.initData(l,s),o&&o(p,m),Sb({mainData:p,struct:i,structAttr:"graph",datas:{node:p,edge:m},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i},a_=function(e){return e.get("autoCurveness")||null},s_=function(e,t){var n=a_(e),r=20,o=[];if("number"==typeof n)r=n;else if(B(n))return void(e.__curvenessList=n);t>r&&(r=t);var i=r%2?r+2:r+3;o=[];for(var a=0;a<i;a++)o.push((a%2?a+1:a)/10*(a%2?-1:1));e.__curvenessList=o},l_=function(e,t,n){var r=[e.id,e.dataIndex].join("."),o=[t.id,t.dataIndex].join(".");return[n.uid,r,o].join("--\x3e")},u_=function(e){var t=e.split("--\x3e");return[t[0],t[2],t[1]].join("--\x3e")},c_=function(e,t){var n=l_(e.node1,e.node2,t);return t.__edgeMap[n]},f_=function(e,t){return h_(l_(e.node1,e.node2,t),t)+h_(l_(e.node2,e.node1,t),t)},h_=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function p_(e,t,n,r){var o=a_(t),i=B(o);if(!o)return null;var a=c_(e,t);if(!a)return null;for(var s=-1,l=0;l<a.length;l++)if(a[l]===n){s=l;break}var u=f_(e,t);s_(t,u),e.lineStyle=e.lineStyle||{};var c=l_(e.node1,e.node2,t),f=t.__curvenessList,h=i?0:u%2?0:1;if(a.isForward)return f[h+s];var p=u_(c),d=h_(p,t),y=f[s+d+h];return r?i?o&&0===o[0]?(d+h)%2?y:-y:((d%2?0:1)+h)%2?y:-y:(d+h)%2?y:-y:f[s+d+h]}var d_=Ip({type:"series.graph",init:function(e){d_.superApply(this,"init",arguments);var t=this;function n(){return t._categoriesData}this.legendVisualProvider=new em(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){d_.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){d_.superApply(this,"mergeDefaultAndTheme",arguments),Jo(e,["edgeLabel"],["show"])},getInitialData:function(e,t){var n,r=e.edges||e.links||[],o=e.data||e.nodes||[],i=this;if(o&&r){a_(n=this)&&(n.__curvenessList=[],n.__edgeMap={},s_(n));var a=i_(o,r,this,!0,function(e,n){e.wrapMethod("getItemModel",function(e){var t=i._categoriesModels,n=e.getShallow("category"),r=t[n];return r&&(r.parentModel=e.parentModel,e.parentModel=r),e});var r=i.getModel("edgeLabel"),o=new Bl({label:r.option},r.parentModel,t),a=i.getModel("emphasis.edgeLabel"),s=new Bl({emphasis:{label:a.option}},a.parentModel,t);function l(e){return(e=this.parsePath(e))&&"label"===e[0]?o:e&&"emphasis"===e[0]&&"label"===e[1]?s:this.parentModel}n.wrapMethod("getItemModel",function(e){return e.customizeGetParent(l),e})});return M(a.edges,function(e){!function(e,t,n,r){if(a_(n)){var o=l_(e,t,n),i=n.__edgeMap,a=i[u_(o)];i[o]&&!a?i[o].isForward=!0:a&&i[o]&&(a.isForward=!0,i[o].isForward=!1),i[o]=i[o]||[],i[o].push(r)}}(e.node1,e.node2,this,e.dataIndex)},this),a.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,n){if("edge"===n){var r=this.getData(),o=this.getDataParams(e,n),i=r.graph.getEdgeByIndex(e),a=r.getName(i.node1.dataIndex),s=r.getName(i.node2.dataIndex),l=[];return null!=a&&l.push(a),null!=s&&l.push(s),l=du(l.join(" > ")),o.value&&(l+=" : "+du(o.value)),l}return d_.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var e=R(this.option.categories||[],function(e){return null!=e.value?e:x({value:0},e)}),t=new $p(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(e){return t.getItemModel(e,!0)})},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return d_.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),y_=gs.prototype,v_=ws.prototype;function g_(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var m_=Bs({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){this[g_(t)?"_buildPathLine":"_buildPathCurve"](e,t)},_buildPathLine:y_.buildPath,_buildPathCurve:v_.buildPath,pointAt:function(e){return this[g_(this.shape)?"_pointAtLine":"_pointAtCurve"](e)},_pointAtLine:y_.pointAt,_pointAtCurve:v_.pointAt,tangentAt:function(e){var t=this.shape,n=g_(t)?[t.x2-t.x1,t.y2-t.y1]:this._tangentAtCurve(e);return we(n,n)},_tangentAtCurve:v_.tangentAt}),b_=["fromSymbol","toSymbol"];function w_(e){return"_"+e+"Type"}function __(e,t,n){var r=t.getItemVisual(n,e);if(r&&"none"!==r){var o=t.getItemVisual(n,"color"),i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate");B(i)||(i=[i,i]);var s=Ty(r,-i[0]/2,-i[1]/2,i[0],i[1],o);return s.__specifiedRotation=null==a||isNaN(a)?void 0:+a*Math.PI/180||0,s.name=e,s}}function x_(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}function S_(e,t,n){Ln.call(this),this._createLine(e,t,n)}var O_=S_.prototype;function P_(e){this._ctor=e||S_,this.group=new Ln}O_.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),n=this.childOfName("label");if(e||t||!n.ignore){for(var r=1,o=this.parent;o;)o.scale&&(r/=o.scale[0]),o=o.parent;var i=this.childOfName("line");if(this.__dirty||i.__dirty){var a,s=i.shape.percent,l=i.pointAt(0),u=i.pointAt(s),c=de([],u,l);if(we(c,c),e){if(e.attr("position",l),null==(a=e.__specifiedRotation)){var f=i.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(f[1],f[0]))}else e.attr("rotation",a);e.attr("scale",[r*s,r*s])}if(t)t.attr("position",u),null==(a=t.__specifiedRotation)?(f=i.tangentAt(1),t.attr("rotation",-Math.PI/2-Math.atan2(f[1],f[0]))):t.attr("rotation",a),t.attr("scale",[r*s,r*s]);if(!n.ignore){var h,p,d,y;n.attr("position",u);var v=n.__labelDistance,g=v[0]*r,m=v[1]*r,b=s/2,w=[(f=i.tangentAt(b))[1],-f[0]],_=i.pointAt(b);w[1]>0&&(w[0]=-w[0],w[1]=-w[1]);var x,S=f[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var O=-Math.atan2(f[1],f[0]);u[0]<l[0]&&(O=Math.PI+O),n.attr("rotation",O)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":x=-m,d="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":x=m,d="top";break;default:x=0,d="middle"}switch(n.__position){case"end":h=[c[0]*g+u[0],c[1]*m+u[1]],p=c[0]>.8?"left":c[0]<-.8?"right":"center",d=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";break;case"start":h=[-c[0]*g+l[0],-c[1]*m+l[1]],p=c[0]>.8?"right":c[0]<-.8?"left":"center",d=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":h=[g*S+l[0],l[1]+x],p=f[0]<0?"right":"left",y=[-g*S,-x];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":h=[_[0],_[1]+x],p="center",y=[0,-x];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":h=[-g*S+u[0],u[1]+x],p=f[0]>=0?"right":"left",y=[g*S,-x]}n.attr({style:{textVerticalAlign:n.__verticalAlign||d,textAlign:n.__textAlign||p},position:h,scale:[r,r],origin:y})}}}},O_._createLine=function(e,t,n){var r=e.hostModel,o=function(e){var t=new m_({name:"line",subPixelOptimize:!0});return x_(t.shape,e),t}(e.getItemLayout(t));o.shape.percent=0,_l(o,{shape:{percent:1}},r,t),this.add(o);var i=new Ka({name:"label",lineLabelOriginalOpacity:1});this.add(i),M(b_,function(n){var r=__(n,e,t);this.add(r),this[w_(n)]=e.getItemVisual(t,n)},this),this._updateCommonStl(e,t,n)},O_.updateData=function(e,t,n){var r=e.hostModel,o=this.childOfName("line"),i=e.getItemLayout(t),a={shape:{}};x_(a.shape,i),wl(o,a,r,t),M(b_,function(n){var r=e.getItemVisual(t,n),o=w_(n);if(this[o]!==r){this.remove(this.childOfName(n));var i=__(n,e,t);this.add(i)}this[o]=r},this),this._updateCommonStl(e,t,n)},O_._updateCommonStl=function(e,t,n){var r=e.hostModel,o=this.childOfName("line"),i=n&&n.lineStyle,a=n&&n.hoverLineStyle,s=n&&n.labelModel,l=n&&n.hoverLabelModel;if(!n||e.hasItemOption){var u=e.getItemModel(t);i=u.getModel("lineStyle").getLineStyle(),a=u.getModel("emphasis.lineStyle").getLineStyle(),s=u.getModel("label"),l=u.getModel("emphasis.label")}var c=e.getItemVisual(t,"color"),f=Y(e.getItemVisual(t,"opacity"),i.opacity,1);o.useStyle(S({strokeNoScale:!0,fill:"none",stroke:c,opacity:f},i)),o.hoverStyle=a,M(b_,function(e){var t=this.childOfName(e);t&&(t.setColor(c),t.setStyle({opacity:f}))},this);var h,p,d=s.getShallow("show"),y=l.getShallow("show"),v=this.childOfName("label");if((d||y)&&(h=c||"#000",null==(p=r.getFormattedLabel(t,"normal",e.dataType)))){var g=r.getRawValue(t);p=null==g?e.getName(t):isFinite(g)?Jl(g):g}var m=d?p:null,b=y?q(r.getFormattedLabel(t,"emphasis",e.dataType),p):null,w=v.style;if(null!=m||null!=b){hl(v.style,s,{text:m},{autoColor:h}),v.__textAlign=w.textAlign,v.__verticalAlign=w.textVerticalAlign,v.__position=s.get("position")||"middle";var _=s.get("distance");B(_)||(_=[_,_]),v.__labelDistance=_}v.hoverStyle=null!=b?{text:b,textFill:l.getTextColor(!0),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}:{text:null},v.ignore=!d&&!y,al(this)},O_.highlight=function(){this.trigger("emphasis")},O_.downplay=function(){this.trigger("normal")},O_.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},O_.setLinePoints=function(e){var t=this.childOfName("line");x_(t.shape,e),t.dirty()},C(S_,Ln);var T_=P_.prototype;function k_(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function C_(e){return isNaN(e[0])||isNaN(e[1])}function E_(e){return!C_(e[0])&&!C_(e[1])}function A_(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,r=t.scale,o=r&&r[0]||1;return((t.getZoom()-1)*n+1)/o}function M_(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}T_.isPersistent=function(){return!0},T_.updateData=function(e){var t=this,n=t.group,r=t._lineData;t._lineData=e,r||n.removeAll();var o=k_(e);e.diff(r).add(function(n){!function(e,t,n,r){if(!E_(t.getItemLayout(n)))return;var o=new e._ctor(t,n,r);t.setItemGraphicEl(n,o),e.group.add(o)}(t,e,n,o)}).update(function(n,i){!function(e,t,n,r,o,i){var a=t.getItemGraphicEl(r);if(!E_(n.getItemLayout(o)))return void e.group.remove(a);a?a.updateData(n,o,i):a=new e._ctor(n,o,i);n.setItemGraphicEl(o,a),e.group.add(a)}(t,r,e,i,n,o)}).remove(function(e){n.remove(r.getItemGraphicEl(e))}).execute()},T_.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,n){t.updateLayout(e,n)},this)},T_.incrementalPrepareUpdate=function(e){this._seriesScope=k_(e),this._lineData=null,this.group.removeAll()},T_.incrementalUpdate=function(e,t){function n(e){e.isGroup||function(e){return e.animators&&e.animators.length>0}(e)||(e.incremental=e.useHoverLayer=!0)}for(var r=e.start;r<e.end;r++){if(E_(t.getItemLayout(r))){var o=new this._ctor(t,r,this._seriesScope);o.traverse(n),this.group.add(o),t.setItemGraphicEl(r,o)}}},T_.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},T_._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var R_=[],I_=[],j_=[],L_=Di,D_=Oe,N_=Math.abs;function B_(e,t,n){for(var r,o=e[0],i=e[1],a=e[2],s=1/0,l=n*n,u=.1,c=.1;c<=.9;c+=.1){R_[0]=L_(o[0],i[0],a[0],c),R_[1]=L_(o[1],i[1],a[1],c),(p=N_(D_(R_,t)-l))<s&&(s=p,r=c)}for(var f=0;f<32;f++){var h=r+u;I_[0]=L_(o[0],i[0],a[0],r),I_[1]=L_(o[1],i[1],a[1],r),j_[0]=L_(o[0],i[0],a[0],h),j_[1]=L_(o[1],i[1],a[1],h);var p=D_(I_,t)-l;if(N_(p)<.01)break;var d=D_(j_,t)-l;u/=2,p<0?d>=0?r+=u:r-=u:d>=0?r-=u:r+=u}return r}var F_=function(e,t){var n=[],r=Fi,o=[[],[],[]],i=[[],[]],a=[];t/=2,e.eachEdge(function(e,s){var l=e.getLayout(),u=e.getVisual("fromSymbol"),c=e.getVisual("toSymbol");l.__original||(l.__original=[ce(l[0]),ce(l[1])],l[2]&&l.__original.push(ce(l[2])));var f=l.__original;if(null!=l[2]){if(ue(o[0],f[0]),ue(o[1],f[2]),ue(o[2],f[1]),u&&"none"!==u){var h=M_(e.node1),p=B_(o,f[0],h*t);r(o[0][0],o[1][0],o[2][0],p,n),o[0][0]=n[3],o[1][0]=n[4],r(o[0][1],o[1][1],o[2][1],p,n),o[0][1]=n[3],o[1][1]=n[4]}if(c&&"none"!==c){h=M_(e.node2),p=B_(o,f[1],h*t);r(o[0][0],o[1][0],o[2][0],p,n),o[1][0]=n[1],o[2][0]=n[2],r(o[0][1],o[1][1],o[2][1],p,n),o[1][1]=n[1],o[2][1]=n[2]}ue(l[0],o[0]),ue(l[1],o[2]),ue(l[2],o[1])}else{if(ue(i[0],f[0]),ue(i[1],f[1]),de(a,i[1],i[0]),we(a,a),u&&"none"!==u){h=M_(e.node1);pe(i[0],i[0],a,h*t)}if(c&&"none"!==c){h=M_(e.node2);pe(i[1],i[1],a,-h*t)}ue(l[0],i[0]),ue(l[1],i[1])}})},G_="__focusNodeAdjacency",z_=["itemStyle","opacity"],V_=["lineStyle","opacity"];function H_(e,t){var n=e.getVisual("opacity");return null!=n?n:e.getModel().get(t)}function W_(e,t,n){var r=e.getGraphicEl(),o=H_(e,t);null!=n&&(null==o&&(o=1),o*=n),r.downplay&&r.downplay(),r.traverse(function(e){if(!e.isGroup){var t=e.lineLabelOriginalOpacity;null!=t&&null==n||(t=o),e.setStyle("opacity",t)}})}function U_(e,t){var n=H_(e,t),r=e.getGraphicEl();r.traverse(function(e){!e.isGroup&&e.setStyle("opacity",n)}),r.highlight&&r.highlight()}jp({type:"graph",init:function(e,t){var n=new sv,r=new P_,o=this.group;this._controller=new Wm(t.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(r.group),this._symbolDraw=n,this._lineDraw=r,this._firstRender=!0},render:function(e,t,n){var r=this,o=e.coordinateSystem;this._model=e;var i=this._symbolDraw,a=this._lineDraw,s=this.group;if("view"===o.type){var l={position:o.position,scale:o.scale};this._firstRender?s.attr(l):wl(s,l,e)}F_(e.getGraph(),A_(e));var u=e.getData();i.updateData(u);var c=e.getEdgeData();a.updateData(c),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var f=e.forceLayout,h=e.get("force.layoutAnimation");f&&this._startForceLayoutIteration(f,h),u.eachItemGraphicEl(function(t,o){var i=u.getItemModel(o);t.off("drag").off("dragend");var a=i.get("draggable");a&&t.on("drag",function(){f&&(f.warmUp(),!this._layouting&&this._startForceLayoutIteration(f,h),f.setFixed(o),u.setItemLayout(o,t.position))},this).on("dragend",function(){f&&f.setUnfixed(o)},this),t.setDraggable(a&&f),t[G_]&&t.off("mouseover",t[G_]),t.__unfocusNodeAdjacency&&t.off("mouseout",t.__unfocusNodeAdjacency),i.get("focusNodeAdjacency")&&(t.on("mouseover",t[G_]=function(){r._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:t.dataIndex})}),t.on("mouseout",t.__unfocusNodeAdjacency=function(){r._dispatchUnfocus(n)}))},this),u.graph.eachEdge(function(t){var o=t.getGraphicEl();o[G_]&&o.off("mouseover",o[G_]),o.__unfocusNodeAdjacency&&o.off("mouseout",o.__unfocusNodeAdjacency),t.getModel().get("focusNodeAdjacency")&&(o.on("mouseover",o[G_]=function(){r._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:t.dataIndex})}),o.on("mouseout",o.__unfocusNodeAdjacency=function(){r._dispatchUnfocus(n)}))});var p="circular"===e.get("layout")&&e.get("circular.rotateLabel"),d=u.getLayout("cx"),y=u.getLayout("cy");u.eachItemGraphicEl(function(e,t){var n=u.getItemModel(t).get("label.rotate")||0,r=e.getSymbolPath();if(p){var o=u.getItemLayout(t),i=Math.atan2(o[1]-y,o[0]-d);i<0&&(i=2*Math.PI+i);var a=o[0]<d;a&&(i-=Math.PI);var s=a?"left":"right";fl(r,{textRotation:-i,textPosition:s,textOrigin:"center"},{textPosition:s})}else fl(r,{textRotation:n*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(e,t){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){n._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,r){var o=e.getData().graph,i=r.dataIndex,a=r.edgeDataIndex,s=o.getNodeByIndex(i),l=o.getEdgeByIndex(a);(s||l)&&(o.eachNode(function(e){W_(e,z_,.1)}),o.eachEdge(function(e){W_(e,V_,.1)}),s&&(U_(s,z_),M(s.edges,function(e){e.dataIndex<0||(U_(e,V_),U_(e.node1,z_),U_(e.node2,z_))})),l&&(U_(l,V_),U_(l.node1,z_),U_(l.node2,z_)))},unfocusNodeAdjacency:function(e,t,n,r){var o=e.getData().graph;o.eachNode(function(e){W_(e,z_)}),o.eachEdge(function(e){W_(e,V_)})},_startForceLayoutIteration:function(e,t){var n=this;!function r(){e.step(function(e){n.updateLayout(n._model),(n._layouting=!e)&&(t?n._layoutTimeout=setTimeout(r,16):r())})}()},_updateController:function(e,t,n){var r=this._controller,o=this._controllerHost,i=this.group;r.setPointerChecker(function(t,r,o){var a=i.getBoundingRect();return a.applyTransform(i.transform),a.contain(r,o)&&!nb(t,n,e)}),"view"===e.coordinateSystem.type?(r.enable(e.get("roam")),o.zoomLimit=e.get("scaleLimit"),o.zoom=e.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",function(t){$m(o,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){eb(o,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),this._updateNodeAndLinkScale(),F_(e.getGraph(),A_(e)),this._lineDraw.updateLayout()},this)):r.disable()},_updateNodeAndLinkScale:function(){var e=this._model,t=e.getData(),n=A_(e),r=[n,n];t.eachItemGraphicEl(function(e,t){e.attr("scale",r)})},updateLayout:function(e){F_(e.getGraph(),A_(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),Pp({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),Pp({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){});Pp({type:"graphRoam",event:"graphRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",query:e},function(t){var n=cb(t.coordinateSystem,e);t.setCenter&&t.setCenter(n.center),t.setZoom&&t.setZoom(n.zoom)})});function J_(e){return e instanceof Array||(e=[e,e]),e}function q_(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode(function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])}),Y_(n,e)}}function Y_(e,t){e.eachEdge(function(e,n){var r=Y(e.getModel().get("lineStyle.curveness"),-p_(e,t,n,!0),0),o=ce(e.node1.getLayout()),i=ce(e.node2.getLayout()),a=[o,i];+r&&a.push([(o[0]+i[0])/2-(o[1]-i[1])*r,(o[1]+i[1])/2-(i[0]-o[0])*r]),e.setLayout(a)})}var X_=Math.PI,Z_=[];function Q_(e,t){var n=e.coordinateSystem;if(!n||"view"===n.type){var r=n.getBoundingRect(),o=e.getData(),i=o.graph,a=r.width/2+r.x,s=r.height/2+r.y,l=Math.min(r.width,r.height)/2,u=o.count();o.setLayout({cx:a,cy:s}),u&&(K_[t](e,n,i,o,l,a,s,u),i.eachEdge(function(t,n){var r,o=Y(t.getModel().get("lineStyle.curveness"),p_(t,e,n),0),i=ce(t.node1.getLayout()),l=ce(t.node2.getLayout()),u=(i[0]+l[0])/2,c=(i[1]+l[1])/2;+o&&(r=[a*(o*=3)+u*(1-o),s*o+c*(1-o)]),t.setLayout([i,l,r])}))}}var K_={value:function(e,t,n,r,o,i,a,s){var l=0,u=r.getSum("value"),c=2*Math.PI/(u||s);n.eachNode(function(e){var t=e.getValue("value"),n=c*(u?t:1)/2;l+=n,e.setLayout([o*Math.cos(l)+i,o*Math.sin(l)+a]),l+=n})},symbolSize:function(e,t,n,r,o,i,a,s){var l=0;Z_.length=s;var u=A_(e);n.eachNode(function(e){var t=M_(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=u;var n=Math.asin(t/2/o);isNaN(n)&&(n=X_/2),Z_[e.dataIndex]=n,l+=2*n});var c=(2*X_-l)/s/2,f=0;n.eachNode(function(e){var t=c+Z_[e.dataIndex];f+=t,e.setLayout([o*Math.cos(f)+i,o*Math.sin(f)+a]),f+=t})}},$_=pe;Op(function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),r=e.getGraph().data,o=n.mapArray(n.getName);r.filterSelf(function(e){var n=r.getItemModel(e).getShallow("category");if(null!=n){"number"==typeof n&&(n=o[n]);for(var i=0;i<t.length;i++)if(!t[i].isSelected(n))return!1}return!0})},this)}),Cp(Lv("graph","circle",null)),Cp(function(e){var t={};e.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),r=e.getData(),o={};n.each(function(r){var i=n.getName(r);o["ec-"+i]=r;var a=n.getItemModel(r),s=a.get("itemStyle.color")||e.getColorFromPalette(i,t);n.setItemVisual(r,"color",s);for(var l=["opacity","symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++){var c=a.getShallow(l[u],!0);null!=c&&n.setItemVisual(r,l[u],c)}}),n.count()&&r.each(function(e){var t=r.getItemModel(e).getShallow("category");if(null!=t){"string"==typeof t&&(t=o["ec-"+t]);for(var i=["color","opacity","symbol","symbolSize","symbolKeepAspect"],a=0;a<i.length;a++)null==r.getItemVisual(e,i[a],!0)&&r.setItemVisual(e,i[a],n.getItemVisual(t,i[a]))}})})}),Cp(function(e){e.eachSeriesByType("graph",function(e){var t=e.getGraph(),n=e.getEdgeData(),r=J_(e.get("edgeSymbol")),o=J_(e.get("edgeSymbolSize")),i="lineStyle.color".split("."),a="lineStyle.opacity".split(".");n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",o&&o[0]),n.setVisual("toSymbolSize",o&&o[1]),n.setVisual("color",e.get(i)),n.setVisual("opacity",e.get(a)),n.each(function(e){var r=n.getItemModel(e),o=t.getEdgeByIndex(e),s=J_(r.getShallow("symbol",!0)),l=J_(r.getShallow("symbolSize",!0)),u=r.get(i),c=r.get(a);switch(u){case"source":u=o.node1.getVisual("color");break;case"target":u=o.node2.getVisual("color")}s[0]&&o.setVisual("fromSymbol",s[0]),s[1]&&o.setVisual("toSymbol",s[1]),l[0]&&o.setVisual("fromSymbolSize",l[0]),l[1]&&o.setVisual("toSymbolSize",l[1]),o.setVisual("color",u),o.setVisual("opacity",c)})})}),kp(function(e,t){e.eachSeriesByType("graph",function(e){var t=e.get("layout"),n=e.coordinateSystem;if(n&&"view"!==n.type){var r=e.getData(),o=[];M(n.dimensions,function(e){o=o.concat(r.mapDimension(e,!0))});for(var i=0;i<r.count();i++){for(var a=[],s=!1,l=0;l<o.length;l++){var u=r.get(o[l],i);isNaN(u)||(s=!0),a.push(u)}s?r.setItemLayout(i,n.dataToPoint(a)):r.setItemLayout(i,[NaN,NaN])}Y_(r.graph,e)}else t&&"none"!==t||q_(e)})}),kp(Lh.VISUAL.POST_CHART_LAYOUT,function(e){e.eachSeriesByType("graph",function(e){"circular"===e.get("layout")&&Q_(e,"symbolSize")})}),kp(function(e){e.eachSeriesByType("graph",function(e){if(!(f=e.coordinateSystem)||"view"===f.type)if("force"===e.get("layout")){var t=e.preservedPoints||{},n=e.getGraph(),r=n.data,o=n.edgeData,i=e.getModel("force"),a=i.get("initLayout");e.preservedPoints?r.each(function(e){var n=r.getId(e);r.setItemLayout(e,t[n]||[NaN,NaN])}):a&&"none"!==a?"circular"===a&&Q_(e,"value"):q_(e);var s=r.getDataExtent("value"),l=o.getDataExtent("value"),u=i.get("repulsion"),c=i.get("edgeLength");B(u)||(u=[u,u]),B(c)||(c=[c,c]),c=[c[1],c[0]];var f,h=r.mapArray("value",function(e,t){var n=r.getItemLayout(t),o=Wl(e,s,u);return isNaN(o)&&(o=(u[0]+u[1])/2),{w:o,rep:o,fixed:r.getItemModel(t).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}}),p=o.mapArray("value",function(t,r){var o=n.getEdgeByIndex(r),i=Wl(t,l,c);isNaN(i)&&(i=(c[0]+c[1])/2);var a=o.getModel(),s=Y(a.get("lineStyle.curveness"),-p_(o,e,r,!0),0);return{n1:h[o.node1.dataIndex],n2:h[o.node2.dataIndex],d:i,curveness:s,ignoreForceLayout:a.get("ignoreForceLayout")}}),d=(f=e.coordinateSystem).getBoundingRect(),y=function(e,t,n){for(var r=n.rect,o=r.width,i=r.height,a=[r.x+o/2,r.y+i/2],s=null==n.gravity?.1:n.gravity,l=0;l<e.length;l++){var u=e[l];u.p||(u.p=le(o*(Math.random()-.5)+a[0],i*(Math.random()-.5)+a[1])),u.pp=ce(u.p),u.edges=null}var c=null==n.friction?.6:n.friction,f=c;return{warmUp:function(){f=.8*c},setFixed:function(t){e[t].fixed=!0},setUnfixed:function(t){e[t].fixed=!1},step:function(n){for(var r=[],o=e.length,i=0;i<t.length;i++){var l=t[i];if(!l.ignoreForceLayout){var u=l.n1;de(r,(d=l.n2).p,u.p);var c=ye(r)-l.d,h=d.w/(u.w+d.w);isNaN(h)&&(h=0),we(r,r),!u.fixed&&$_(u.p,u.p,r,h*c*f),!d.fixed&&$_(d.p,d.p,r,-(1-h)*c*f)}}for(i=0;i<o;i++)(g=e[i]).fixed||(de(r,a,g.p),$_(g.p,g.p,r,s*f));for(i=0;i<o;i++){u=e[i];for(var p=i+1;p<o;p++){var d;de(r,(d=e[p]).p,u.p),0===(c=ye(r))&&(fe(r,Math.random()-.5,Math.random()-.5),c=1);var y=(u.rep+d.rep)/c/c;!u.fixed&&$_(u.pp,u.pp,r,y),!d.fixed&&$_(d.pp,d.pp,r,-y)}}var v=[];for(i=0;i<o;i++){var g;(g=e[i]).fixed||(de(v,g.p,g.pp),$_(g.p,g.p,v,f),ue(g.pp,g.p))}f*=.992,n&&n(e,t,f<.01)}}}(h,p,{rect:d,gravity:i.get("gravity"),friction:i.get("friction")}),v=y.step;y.step=function(e){for(var o=0,i=h.length;o<i;o++)h[o].fixed&&ue(h[o].p,n.getNodeByIndex(o).getLayout());v(function(o,i,a){for(var s=0,l=o.length;s<l;s++)o[s].fixed||n.getNodeByIndex(s).setLayout(o[s].p),t[r.getId(s)]=o[s].p;for(s=0,l=i.length;s<l;s++){var u=i[s],c=n.getEdgeByIndex(s),f=u.n1.p,h=u.n2.p,p=c.getLayout();(p=p?p.slice():[])[0]=p[0]||[],p[1]=p[1]||[],ue(p[0],f),ue(p[1],h),+u.curveness&&(p[2]=[(f[0]+h[0])/2-(f[1]-h[1])*u.curveness,(f[1]+h[1])/2-(h[0]-f[0])*u.curveness]),c.setLayout(p)}e&&e(a)})},e.forceLayout=y,e.preservedPoints=t,y.step()}else e.forceLayout=null})}),Tp("graphView",{create:function(e,t){var n=[];return e.eachSeriesByType("graph",function(e){var r=e.get("coordinateSystem");if(!r||"view"===r){var o=e.getData(),i=[],a=[];Yi(o.mapArray(function(e){var t=o.getItemModel(e);return[+t.get("x"),+t.get("y")]}),i,a),a[0]-i[0]==0&&(a[0]+=1,i[0]-=1),a[1]-i[1]==0&&(a[1]+=1,i[1]-=1);var s=(a[0]-i[0])/(a[1]-i[1]),l=function(e,t,n){var r=e.getBoxLayoutParams();return r.aspect=n,Mu(r,{width:t.getWidth(),height:t.getHeight()})}(e,t,s);isNaN(s)&&(i=[l.x,l.y],a=[l.x+l.width,l.y+l.height]);var u=a[0]-i[0],c=a[1]-i[1],f=l.width,h=l.height,p=e.coordinateSystem=new pb;p.zoomLimit=e.get("scaleLimit"),p.setBoundingRect(i[0],i[1],u,c),p.setViewRect(l.x,l.y,f,h),p.setCenter(e.get("center")),p.setZoom(e.get("zoom")),n.push(p)}}),n}});uf.extend({type:"series.gauge",getInitialData:function(e,t){return Kg(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var ex=ja.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,t){var n=Math.cos,r=Math.sin,o=t.r,i=t.width,a=t.angle,s=t.x-n(a)*i*(i>=o/3?1:2),l=t.y-r(a)*i*(i>=o/3?1:2);a=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+n(a)*i,t.y+r(a)*i),e.lineTo(t.x+n(t.angle)*o,t.y+r(t.angle)*o),e.lineTo(t.x-n(a)*i,t.y-r(a)*i),e.lineTo(s,l)}});function tx(e,t){return t&&("string"==typeof t?e=t.replace("{value}",null!=e?e:""):"function"==typeof t&&(e=t(e))),e}var nx=2*Math.PI,rx=(xf.extend({type:"gauge",render:function(e,t,n){this.group.removeAll();var r=e.get("axisLine.lineStyle.color"),o=function(e,t){var n=e.get("center"),r=t.getWidth(),o=t.getHeight(),i=Math.min(r,o);return{cx:Ul(n[0],t.getWidth()),cy:Ul(n[1],t.getHeight()),r:Ul(e.get("radius"),i/2)}}(e,n);this._renderMain(e,t,n,r,o)},dispose:function(){},_renderMain:function(e,t,n,r,o){for(var i=this.group,a=e.getModel("axisLine"),s=a.getModel("lineStyle"),l=e.get("clockwise"),u=-e.get("startAngle")/180*Math.PI,c=((y=-e.get("endAngle")/180*Math.PI)-u)%nx,f=u,h=s.get("width"),p=a.get("show"),d=0;p&&d<r.length;d++){var y,v=Math.min(Math.max(r[d][0],0),1),g=new ns({shape:{startAngle:f,endAngle:y=u+c*v,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-h,r:o.r},silent:!0});g.setStyle({fill:r[d][1]}),g.setStyle(s.getLineStyle(["color","borderWidth","borderColor"])),i.add(g),f=y}var m=function(e){if(e<=0)return r[0][1];for(var t=0;t<r.length;t++)if(r[t][0]>=e&&(0===t?0:r[t-1][0])<e)return r[t][1];return r[t-1][1]};if(!l){var b=u;u=y,y=b}this._renderTicks(e,t,n,m,o,u,y,l),this._renderPointer(e,t,n,m,o,u,y,l),this._renderTitle(e,t,n,m,o),this._renderDetail(e,t,n,m,o)},_renderTicks:function(e,t,n,r,o,i,a,s){for(var l=this.group,u=o.cx,c=o.cy,f=o.r,h=+e.get("min"),p=+e.get("max"),d=e.getModel("splitLine"),y=e.getModel("axisTick"),v=e.getModel("axisLabel"),g=e.get("splitNumber"),m=y.get("splitNumber"),b=Ul(d.get("length"),f),w=Ul(y.get("length"),f),_=i,x=(a-i)/g,S=x/m,O=d.getModel("lineStyle").getLineStyle(),P=y.getModel("lineStyle").getLineStyle(),T=0;T<=g;T++){var k=Math.cos(_),C=Math.sin(_);if(d.get("show")){var E=new gs({shape:{x1:k*f+u,y1:C*f+c,x2:k*(f-b)+u,y2:C*(f-b)+c},style:O,silent:!0});"auto"===O.stroke&&E.setStyle({stroke:r(T/g)}),l.add(E)}if(v.get("show")){var A=tx(Jl(T/g*(p-h)+h),v.get("formatter")),M=v.get("distance"),R=r(T/g);l.add(new Ka({style:hl({},v,{text:A,x:k*(f-b-M)+u,y:C*(f-b-M)+c,textVerticalAlign:C<-.4?"top":C>.4?"bottom":"middle",textAlign:k<-.4?"left":k>.4?"right":"center"},{autoColor:R}),silent:!0}))}if(y.get("show")&&T!==g){for(var I=0;I<=m;I++){k=Math.cos(_),C=Math.sin(_);var j=new gs({shape:{x1:k*f+u,y1:C*f+c,x2:k*(f-w)+u,y2:C*(f-w)+c},silent:!0,style:P});"auto"===P.stroke&&j.setStyle({stroke:r((T+I/m)/g)}),l.add(j),_+=S}_-=S}else _+=x}},_renderPointer:function(e,t,n,r,o,i,a,s){var l=this.group,u=this._data;if(e.get("pointer.show")){var c=[+e.get("min"),+e.get("max")],f=[i,a],h=e.getData(),p=h.mapDimension("value");h.diff(u).add(function(t){var n=new ex({shape:{angle:i}});_l(n,{shape:{angle:Wl(h.get(p,t),c,f,!0)}},e),l.add(n),h.setItemGraphicEl(t,n)}).update(function(t,n){var r=u.getItemGraphicEl(n);wl(r,{shape:{angle:Wl(h.get(p,t),c,f,!0)}},e),l.add(r),h.setItemGraphicEl(t,r)}).remove(function(e){var t=u.getItemGraphicEl(e);l.remove(t)}).execute(),h.eachItemGraphicEl(function(e,t){var n=h.getItemModel(t),i=n.getModel("pointer");e.setShape({x:o.cx,y:o.cy,width:Ul(i.get("width"),o.r),r:Ul(i.get("length"),o.r)}),e.useStyle(n.getModel("itemStyle").getItemStyle()),"auto"===e.style.fill&&e.setStyle("fill",r(Wl(h.get(p,t),c,[0,1],!0))),al(e,n.getModel("emphasis.itemStyle").getItemStyle())}),this._data=h}else u&&u.eachItemGraphicEl(function(e){l.remove(e)})},_renderTitle:function(e,t,n,r,o){var i=e.getData(),a=i.mapDimension("value"),s=e.getModel("title");if(s.get("show")){var l=s.get("offsetCenter"),u=o.cx+Ul(l[0],o.r),c=o.cy+Ul(l[1],o.r),f=+e.get("min"),h=+e.get("max"),p=r(Wl(e.getData().get(a,0),[f,h],[0,1],!0));this.group.add(new Ka({silent:!0,style:hl({},s,{x:u,y:c,text:i.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:p,forceRich:!0})}))}},_renderDetail:function(e,t,n,r,o){var i=e.getModel("detail"),a=+e.get("min"),s=+e.get("max");if(i.get("show")){var l=i.get("offsetCenter"),u=o.cx+Ul(l[0],o.r),c=o.cy+Ul(l[1],o.r),f=Ul(i.get("width"),o.r),h=Ul(i.get("height"),o.r),p=e.getData(),d=p.get(p.mapDimension("value"),0),y=r(Wl(d,[a,s],[0,1],!0));this.group.add(new Ka({silent:!0,style:hl({},i,{x:u,y:c,text:tx(d,i.get("formatter")),textWidth:isNaN(f)?null:f,textHeight:isNaN(h)?null:h,textAlign:"center",textVerticalAlign:"middle"},{autoColor:y,forceRich:!0})}))}}}),Ip({type:"series.funnel",init:function(e){rx.superApply(this,"init",arguments),this.legendVisualProvider=new em(D(this.getData,this),D(this.getRawData,this)),this._defaultLabelLine(e)},getInitialData:function(e,t){return Kg(this,{coordDimensions:["value"],encodeDefaulter:N(ic,this)})},_defaultLabelLine:function(e){Jo(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},getDataParams:function(e){var t=this.getData(),n=rx.superCall(this,"getDataParams",e),r=t.mapDimension("value"),o=t.getSum(r);return n.percent=o?+(t.get(r,e)/o*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function ox(e,t){Ln.call(this);var n=new ls,r=new us,o=new Ka;this.add(n),this.add(r),this.add(o),this.highDownOnUpdate=function(e,t){"emphasis"===t?(r.ignore=r.hoverIgnore,o.ignore=o.hoverIgnore):(r.ignore=r.normalIgnore,o.ignore=o.normalIgnore)},this.updateData(e,t,!0)}var ix=ox.prototype,ax=["itemStyle","opacity"];ix.updateData=function(e,t,n){var r=this.childAt(0),o=e.hostModel,i=e.getItemModel(t),a=e.getItemLayout(t),s=e.getItemModel(t).get(ax);s=null==s?1:s,r.useStyle({}),n?(r.setShape({points:a.points}),r.setStyle({opacity:0}),_l(r,{style:{opacity:s}},o,t)):wl(r,{style:{opacity:s},shape:{points:a.points}},o,t);var l=i.getModel("itemStyle"),u=e.getItemVisual(t,"color");r.setStyle(S({lineJoin:"round",fill:u},l.getItemStyle(["opacity"]))),r.hoverStyle=l.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),al(this)},ix._updateLabel=function(e,t){var n=this.childAt(1),r=this.childAt(2),o=e.hostModel,i=e.getItemModel(t),a=e.getItemLayout(t).label,s=e.getItemVisual(t,"color");wl(n,{shape:{points:a.linePoints||a.linePoints}},o,t),wl(r,{style:{x:a.x,y:a.y}},o,t),r.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10});var l=i.getModel("label"),u=i.getModel("emphasis.label"),c=i.getModel("labelLine"),f=i.getModel("emphasis.labelLine");s=e.getItemVisual(t,"color");cl(r.style,r.hoverStyle={},l,u,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:s,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign}),r.ignore=r.normalIgnore=!l.get("show"),r.hoverIgnore=!u.get("show"),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!f.get("show"),n.setStyle({stroke:s}),n.setStyle(c.getModel("lineStyle").getLineStyle()),n.hoverStyle=f.getModel("lineStyle").getLineStyle()},C(ox,Ln);xf.extend({type:"funnel",render:function(e,t,n){var r=e.getData(),o=this._data,i=this.group;r.diff(o).add(function(e){var t=new ox(r,e);r.setItemGraphicEl(e,t),i.add(t)}).update(function(e,t){var n=o.getItemGraphicEl(t);n.updateData(r,e),i.add(n),r.setItemGraphicEl(e,n)}).remove(function(e){var t=o.getItemGraphicEl(e);i.remove(t)}).execute(),this._data=r},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});Cp(sm("funnel")),kp(function(e,t,n){e.eachSeriesByType("funnel",function(e){var n=e.getData(),o=n.mapDimension("value"),i=e.get("sort"),a=function(e,t){return Mu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t),s=function(e,t){for(var n=e.mapDimension("value"),r=e.mapArray(n,function(e){return e}),o=[],i="ascending"===t,a=0,s=e.count();a<s;a++)o[a]=a;return"function"==typeof t?o.sort(t):"none"!==t&&o.sort(function(e,t){return i?r[e]-r[t]:r[t]-r[e]}),o}(n,i),l=e.get("orient"),u=a.width,c=a.height,f=a.x,h=a.y,p="horizontal"===l?[Ul(e.get("minSize"),c),Ul(e.get("maxSize"),c)]:[Ul(e.get("minSize"),u),Ul(e.get("maxSize"),u)],d=n.getDataExtent(o),y=e.get("min"),v=e.get("max");null==y&&(y=Math.min(d[0],0)),null==v&&(v=d[1]);var g=e.get("funnelAlign"),m=e.get("gap"),b=(("horizontal"===l?u:c)-m*(n.count()-1))/n.count(),w=function(e,t){if("horizontal"===l){var r,i=Wl(n.get(o,e)||0,[y,v],p,!0);switch(g){case"top":r=h;break;case"center":r=h+(c-i)/2;break;case"bottom":r=h+(c-i)}return[[t,r],[t,r+i]]}var a,s=Wl(n.get(o,e)||0,[y,v],p,!0);switch(g){case"left":a=f;break;case"center":a=f+(u-s)/2;break;case"right":a=f+u-s}return[[a,t],[a+s,t]]};"ascending"===i&&(b=-b,m=-m,"horizontal"===l?f+=u:h+=c,s=s.reverse());for(var _=0;_<s.length;_++){var x=s[_],S=s[_+1],O=n.getItemModel(x);if("horizontal"===l){var P=O.get("itemStyle.width");null==P?P=b:(P=Ul(P,u),"ascending"===i&&(P=-P));var T=w(x,f),k=w(S,f+P);f+=P+m,n.setItemLayout(x,{points:T.concat(k.slice().reverse())})}else{var C=O.get("itemStyle.height");null==C?C=b:(C=Ul(C,c),"ascending"===i&&(C=-C)),T=w(x,"horizontal"===l?f:h),k=w(S,"horizontal"===l?f+P:h+C),h+=C+m,n.setItemLayout(x,{points:T.concat(k.slice().reverse())})}}!function(e){e.each(function(t){var n,o,i,a,s=e.getItemModel(t),l=s.getModel("label").get("position"),u=s.get("orient"),c=s.getModel("labelLine"),f=e.getItemLayout(t),h=f.points,p="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(p)"insideLeft"===l?(o=(h[0][0]+h[3][0])/2+5,i=(h[0][1]+h[3][1])/2,n="left"):"insideRight"===l?(o=(h[1][0]+h[2][0])/2-5,i=(h[1][1]+h[2][1])/2,n="right"):(o=(h[0][0]+h[1][0]+h[2][0]+h[3][0])/4,i=(h[0][1]+h[1][1]+h[2][1]+h[3][1])/4,n="center"),a=[[o,i],[o,i]];else{var d,y,v,g,m=c.get("length");r&&("vertical"===u&&["top","bottom"].indexOf(l)>-1&&(l="left",console.warn("Position error: Funnel chart on vertical orient dose not support top and bottom.")),"horizontal"===u&&["left","right"].indexOf(l)>-1&&(l="bottom",console.warn("Position error: Funnel chart on horizontal orient dose not support left and right."))),"left"===l?(d=(h[3][0]+h[0][0])/2,y=(h[3][1]+h[0][1])/2,o=(v=d-m)-5,n="right"):"right"===l?(d=(h[1][0]+h[2][0])/2,y=(h[1][1]+h[2][1])/2,o=(v=d+m)+5,n="left"):"top"===l?(d=(h[3][0]+h[0][0])/2,i=(g=(y=(h[3][1]+h[0][1])/2)-m)-5,n="center"):"bottom"===l?(d=(h[1][0]+h[2][0])/2,i=(g=(y=(h[1][1]+h[2][1])/2)+m)+5,n="center"):"rightTop"===l?(d="horizontal"===u?h[3][0]:h[1][0],y="horizontal"===u?h[3][1]:h[1][1],"horizontal"===u?(i=(g=y-m)-5,n="center"):(o=(v=d+m)+5,n="top")):"rightBottom"===l?(d=h[2][0],y=h[2][1],"horizontal"===u?(i=(g=y+m)+5,n="center"):(o=(v=d+m)+5,n="bottom")):"leftTop"===l?(d=h[0][0],y="horizontal"===u?h[0][1]:h[1][1],"horizontal"===u?(i=(g=y-m)-5,n="center"):(o=(v=d-m)-5,n="right")):"leftBottom"===l?(d="horizontal"===u?h[1][0]:h[3][0],y="horizontal"===u?h[1][1]:h[2][1],"horizontal"===u?(i=(g=y+m)+5,n="center"):(o=(v=d-m)-5,n="right")):(d=(h[1][0]+h[2][0])/2,y=(h[1][1]+h[2][1])/2,"horizontal"===u?(i=(g=y+m)+5,n="center"):(o=(v=d+m)+5,n="left")),"horizontal"===u?o=v=d:i=g=y,a=[[d,y],[v,g]]}f.label={linePoints:a,x:o,y:i,verticalAlign:"middle",textAlign:n,inside:p}})}(n)})}),Op(dm("funnel"));var sx=function(e,t,n,r,o){Uy.call(this,e,t,n),this.type=r||"value",this.axisIndex=o};sx.prototype={constructor:sx,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},C(sx,Uy);var lx=function(e,t,n,r,o,i){e=e||0;var a=n[1]-n[0];if(null!=o&&(o=cx(o,[0,a])),null!=i&&(i=Math.max(i,null!=o?o:0)),"all"===r){var s=Math.abs(t[1]-t[0]);o=i=cx(s=cx(s,[0,a]),[o,i]),r=0}t[0]=cx(t[0],n),t[1]=cx(t[1],n);var l=ux(t,r);t[r]+=e;var u=o||0,c=n.slice();l.sign<0?c[0]+=u:c[1]-=u,t[r]=cx(t[r],c);var f=ux(t,r);null!=o&&(f.sign!==l.sign||f.span<o)&&(t[1-r]=t[r]+l.sign*o);f=ux(t,r);return null!=i&&f.span>i&&(t[1-r]=t[r]+f.sign*i),t};function ux(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function cx(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var fx=M,hx=Math.min,px=Math.max,dx=Math.floor,yx=Math.ceil,vx=Jl,gx=Math.PI;function mx(e,t,n){this._axesMap=re(),this._axesLayout={},this.dimensions=e.dimensions,this._rect,this._model=e,this._init(e,t,n)}function bx(e,t){return hx(px(e,t[0]),t[1])}mx.prototype={type:"parallel",constructor:mx,_init:function(e,t,n){var r=e.dimensions,o=e.parallelAxisIndex;fx(r,function(e,n){var r=o[n],i=t.getComponent("parallelAxis",r),a=this._axesMap.set(e,new sx(e,hy(i),[0,0],i.get("type"),r)),s="category"===a.type;a.onBand=s&&i.get("boundaryGap"),a.inverse=i.get("inverse"),i.axis=a,a.model=i,a.coordinateSystem=i.coordinateSystem=this},this)},update:function(e,t){this._updateAxesFromSeries(this._model,e)},containPoint:function(e){var t=this._makeLayoutInfo(),n=t.axisBase,r=t.layoutBase,o=t.pixelDimIndex,i=e[1-o],a=e[o];return i>=n&&i<=n+t.axisLength&&a>=r&&a<=r+t.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(e,t){t.eachSeries(function(n){if(e.contains(n,t)){var r=n.getData();fx(this.dimensions,function(e){var t=this._axesMap.get(e);t.scale.unionExtentFromData(r,r.mapDimension(e)),fy(t.scale,t.model)},this)}},this)},resize:function(e,t){this._rect=Mu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var e,t=this._model,n=this._rect,r=["x","y"],o=["width","height"],i=t.get("layout"),a="horizontal"===i?0:1,s=n[o[a]],l=[0,s],u=this.dimensions.length,c=bx(t.get("axisExpandWidth"),l),f=bx(t.get("axisExpandCount")||0,[0,u]),h=t.get("axisExpandable")&&u>3&&u>f&&f>1&&c>0&&s>0,p=t.get("axisExpandWindow");p?(e=bx(p[1]-p[0],l),p[1]=p[0]+e):(e=bx(c*(f-1),l),(p=[c*(t.get("axisExpandCenter")||dx(u/2))-e/2])[1]=p[0]+e);var d=(s-e)/(u-f);d<3&&(d=0);var y=[dx(vx(p[0]/c,1))+1,yx(vx(p[1]/c,1))-1],v=d/c*p[0];return{layout:i,pixelDimIndex:a,layoutBase:n[r[a]],layoutLength:s,axisBase:n[r[1-a]],axisLength:n[o[1-a]],axisExpandable:h,axisExpandWidth:c,axisCollapseWidth:d,axisExpandWindow:p,axisCount:u,winInnerIndices:y,axisExpandWindow0Pos:v}},_layoutAxes:function(){var e=this._rect,t=this._axesMap,n=this.dimensions,r=this._makeLayoutInfo(),o=r.layout;t.each(function(e){var t=[0,r.axisLength],n=e.inverse?1:0;e.setExtent(t[n],t[1-n])}),fx(n,function(t,n){var i=(r.axisExpandable?function(e,t){var n,r,o=t.layoutLength,i=t.axisExpandWidth,a=t.axisCount,s=t.axisCollapseWidth,l=t.winInnerIndices,u=s,c=!1;e<l[0]?(n=e*s,r=s):e<=l[1]?(n=t.axisExpandWindow0Pos+e*i-t.axisExpandWindow[0],u=i,c=!0):(n=o-(a-1-e)*s,r=s);return{position:n,axisNameAvailableWidth:u,axisLabelShow:c,nameTruncateMaxWidth:r}}:function(e,t){var n=t.layoutLength/(t.axisCount-1);return{position:n*e,axisNameAvailableWidth:n,axisLabelShow:!0}})(n,r),a={horizontal:{x:i.position,y:r.axisLength},vertical:{x:0,y:i.position}},s={horizontal:gx/2,vertical:0},l=[a[o].x+e.x,a[o].y+e.y],u=s[o],c=ut();dt(c,c,u),pt(c,c,l),this._axesLayout[t]={position:l,rotation:u,transform:c,axisNameAvailableWidth:i.axisNameAvailableWidth,axisLabelShow:i.axisLabelShow,nameTruncateMaxWidth:i.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(e){return this._axesMap.get(e)},dataToPoint:function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},eachActiveState:function(e,t,n,r){null==n&&(n=0),null==r&&(r=e.count());var o=this._axesMap,i=this.dimensions,a=[],s=[];M(i,function(t){a.push(e.mapDimension(t)),s.push(o.get(t).model)});for(var l=this.hasAxisBrushed(),u=n;u<r;u++){var c;if(l){c="active";for(var f=e.getValues(a,u),h=0,p=i.length;h<p;h++){if("inactive"===s[h].getActiveState(f[h])){c="inactive";break}}}else c="normal";t(c,u)}},hasAxisBrushed:function(){for(var e=this.dimensions,t=this._axesMap,n=!1,r=0,o=e.length;r<o;r++)"normal"!==t.get(e[r]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(e,t){return Sl([e,0],this._axesLayout[t].transform)},getAxisLayout:function(e){return b(this._axesLayout[e])},getSlidedAxisExpandWindow:function(e){var t=this._makeLayoutInfo(),n=t.pixelDimIndex,r=t.axisExpandWindow.slice(),o=r[1]-r[0],i=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:r};var a,s=e[n]-t.layoutBase-t.axisExpandWindow0Pos,l="slide",u=t.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),f=null!=c[0];if(u)f&&u&&s<o*c[0]?(l="jump",a=s-o*c[2]):f&&u&&s>o*(1-c[0])?(l="jump",a=s-o*(1-c[2])):(a=s-o*c[1])>=0&&(a=s-o*(1-c[1]))<=0&&(a=0),(a*=t.axisExpandWidth/u)?lx(a,r,i,"all"):l="none";else{o=r[1]-r[0];(r=[px(0,i[1]*s/o-o/2)])[1]=hx(i[1],r[0]+o),r[0]=r[1]-o}return{axisExpandWindow:r,behavior:l}}},gc.register("parallel",{create:function(e,t){var n=[];return e.eachComponent("parallel",function(r,o){var i=new mx(r,e,t);i.name="parallel_"+o,i.resize(r,t),r.coordinateSystem=i,i.model=r,n.push(i)}),e.eachSeries(function(t){if("parallel"===t.get("coordinateSystem")){var n=e.queryComponents({mainType:"parallel",index:t.get("parallelIndex"),id:t.get("parallelId")})[0];t.coordinateSystem=n.coordinateSystem}}),n}});var _x=Fu.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return vi([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(e){var t=this.activeIntervals=b(e);if(t)for(var n=t.length-1;n>=0;n--)ql(t[n])},getActiveState:function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(e))return"inactive";if(1===t.length){var n=t[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var r=0,o=t.length;r<o;r++)if(t[r][0]<=e&&e<=t[r][1])return"active";return"inactive"}});w(_x.prototype,gy),Jv("parallel",_x,function(e,t){return t.type||(t.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),Fu.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){Fu.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(e){var t=this.option;e&&w(t,e,!0),this._initDimensions()},contains:function(e,t){var n=e.get("parallelIndex");return null!=n&&t.getComponent("parallel",n)===this},setAxisExpand:function(e){M(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])},this)},_initDimensions:function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];M(j(this.dependentModels.parallelAxis,function(e){return(e.get("parallelIndex")||0)===this.componentIndex},this),function(n){e.push("dim"+n.get("dim")),t.push(n.componentIndex)})}});Pp({type:"axisAreaSelect",event:"axisAreaSelected"},function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(t){t.axis.model.setActiveIntervals(e.intervals)})}),Pp("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(t){t.setAxisExpand(e)})});var xx=N,Sx=M,Ox=R,Px=Math.min,Tx=Math.max,kx=Math.pow,Cx=1e4,Ex=6,Ax=6,Mx="globalPan",Rx={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Ix={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},jx={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},Lx=0;function Dx(e){r&&Q(e),Ie.call(this),this._zr=e,this.group=new Ln,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,r&&this._mounted,this._uid="brushController_"+Lx++,this._handlers={},Sx(lS,function(e,t){this._handlers[t]=D(e,this)},this)}function Nx(e,t){var n=cS[t.brushType].createCover(e,t);return n.__brushOption=t,Gx(n,t),e.group.add(n),n}function Bx(e,t){var n=Vx(t);return n.endCreating&&(n.endCreating(e,t),Gx(t,t.__brushOption)),t}function Fx(e,t){var n=t.__brushOption;Vx(t).updateCoverShape(e,t,n.range,n)}function Gx(e,t){var n=t.z;null==n&&(n=Cx),e.traverse(function(e){e.z=n,e.z2=n})}function zx(e,t){Vx(t).updateCommon(e,t),Fx(e,t)}function Vx(e){return cS[e.__brushOption.brushType]}function Hx(e,t,n){var r,o=e._panels;if(!o)return!0;var i=e._transform;return Sx(o,function(e){e.isTargetByCursor(t,n,i)&&(r=e)}),r}function Wx(e,t){var n=e._panels;if(!n)return!0;var r=t.__brushOption.panelId;return null==r||n[r]}function Ux(e){var t=e._covers,n=t.length;return Sx(t,function(t){e.group.remove(t)},e),t.length=0,!!n}function Jx(e,t){var n=Ox(e._covers,function(e){var t=e.__brushOption,n=b(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}});e.trigger("brush",n,{isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function qx(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function Yx(e,t,n,r){var o=new Ln;return o.add(new ys({name:"main",style:Kx(n),silent:!0,draggable:!0,cursor:"move",drift:xx(e,t,o,"nswe"),ondragend:xx(Jx,t,{isEnd:!0})})),Sx(r,function(n){o.add(new ys({name:n,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:xx(e,t,o,n),ondragend:xx(Jx,t,{isEnd:!0})}))}),o}function Xx(e,t,n,r){var o=r.brushStyle.lineWidth||0,i=Tx(o,Ax),a=n[0][0],s=n[1][0],l=a-o/2,u=s-o/2,c=n[0][1],f=n[1][1],h=c-i+o/2,p=f-i+o/2,d=c-a,y=f-s,v=d+o,g=y+o;Qx(e,t,"main",a,s,d,y),r.transformable&&(Qx(e,t,"w",l,u,i,g),Qx(e,t,"e",h,u,i,g),Qx(e,t,"n",l,u,v,i),Qx(e,t,"s",l,p,v,i),Qx(e,t,"nw",l,u,i,i),Qx(e,t,"ne",h,u,i,i),Qx(e,t,"sw",l,p,i,i),Qx(e,t,"se",h,p,i,i))}function Zx(e,t){var n=t.__brushOption,r=n.transformable,o=t.childAt(0);o.useStyle(Kx(n)),o.attr({silent:!r,cursor:r?"move":"default"}),Sx(["w","e","n","s","se","sw","ne","nw"],function(n){var o=t.childOfName(n),i=function e(t,n){if(n.length>1){n=n.split("");var r=[e(t,n[0]),e(t,n[1])];return("e"===r[0]||"w"===r[0])&&r.reverse(),r.join("")}var r=Ol({w:"left",e:"right",n:"top",s:"bottom"}[n],function(e){return xl(e.group)}(t));return{left:"w",right:"e",top:"n",bottom:"s"}[r]}(e,n);o&&o.attr({silent:!r,invisible:!r,cursor:r?Ix[i]+"-resize":null})})}function Qx(e,t,n,r,o,i,a){var s,l,u,c,f,h=t.childOfName(n);h&&h.setShape((s=rS(e,t,[[r,o],[r+i,o+a]]),l=Px(s[0][0],s[1][0]),u=Px(s[0][1],s[1][1]),c=Tx(s[0][0],s[1][0]),f=Tx(s[0][1],s[1][1]),{x:l,y:u,width:c-l,height:f-u}))}function Kx(e){return S({strokeNoScale:!0},e.brushStyle)}function $x(e,t,n,r){var o=[Px(e,n),Px(t,r)],i=[Tx(e,n),Tx(t,r)];return[[o[0],i[0]],[o[1],i[1]]]}function eS(e,t,n,r,o,i,a,s){var l=r.__brushOption,u=e(l.range),c=nS(n,i,a);Sx(o.split(""),function(e){var t=Rx[e];u[t[0]][t[1]]+=c[t[0]]}),l.range=t($x(u[0][0],u[1][0],u[0][1],u[1][1])),zx(n,r),Jx(n,{isEnd:!1})}function tS(e,t,n,r,o){var i=t.__brushOption.range,a=nS(e,n,r);Sx(i,function(e){e[0]+=a[0],e[1]+=a[1]}),zx(e,t),Jx(e,{isEnd:!1})}function nS(e,t,n){var r=e.group,o=r.transformCoordToLocal(t,n),i=r.transformCoordToLocal(0,0);return[o[0]-i[0],o[1]-i[1]]}function rS(e,t,n){var r=Wx(e,t);return r&&!0!==r?r.clipPath(n,e._transform):b(n)}function oS(e){var t=e.event;t.preventDefault&&t.preventDefault()}function iS(e,t,n){return e.childOfName("main").contain(t,n)}function aS(e,t,n,r){var o,i=e._creatingCover,a=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],r=t[0],o=n[0]-r[0],i=n[1]-r[1];return kx(o*o+i*i,.5)>Ex}(e)||i){if(a&&!i){"single"===s.brushMode&&Ux(e);var l=b(s);l.brushType=sS(l.brushType,a),l.panelId=!0===a?null:a.panelId,i=e._creatingCover=Nx(e,l),e._covers.push(i)}if(i){var u=cS[sS(e._brushType,a)];i.__brushOption.range=u.getCreatingRange(rS(e,i,e._track)),r&&(Bx(e,i),u.updateCommon(e,i)),Fx(e,i),o={isEnd:r}}}else r&&"single"===s.brushMode&&s.removeOnClick&&Hx(e,t,n)&&Ux(e)&&(o={isEnd:r,removeOnClick:!0});return o}function sS(e,t){return"auto"===e?(r&&Q(t&&t.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"'),t.defaultBrushType):e}Dx.prototype={constructor:Dx,enableBrush:function(e){var t,n;return r&&Q(this._mounted),this._brushType&&(function(e,t,n){var r=Hm(e);r[t]===n&&(r[t]=null)}(n=(t=this)._zr,Mx,t._uid),function(e,t){Sx(t,function(t,n){e.off(n,t)})}(n,t._handlers),t._brushType=t._brushOption=null),e.brushType&&function(e,t){var n=e._zr;e._enableGlobalPan||function(e,t,n){Hm(e)[t]=n}(n,Mx,e._uid);(function(e,t){Sx(t,function(t,n){e.on(n,t)})})(n,e._handlers),e._brushType=t.brushType,e._brushOption=w(b(jx),t,!0)}(this,e),this},setPanels:function(e){if(e&&e.length){var t=this._panels={};M(e,function(e){t[e.panelId]=b(e)})}else this._panels=null;return this},mount:function(e){e=e||{},r&&(this._mounted=!0),this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({position:e.position||[0,0],rotation:e.rotation||0,scale:e.scale||[1,1]}),this._transform=t.getLocalTransform(),this},eachCover:function(e,t){Sx(this._covers,e,t)},updateCovers:function(e){r&&Q(this._mounted),e=R(e,function(e){return w(b(jx),e,!0)});var t="\0-brush-index-",n=this._covers,o=this._covers=[],i=this,a=this._creatingCover;return new Dp(n,e,function(e,t){return s(e.__brushOption,t)},s).add(l).update(l).remove(function(e){n[e]!==a&&i.group.remove(n[e])}).execute(),this;function s(e,n){return(null!=e.id?e.id:t+n)+"-"+e.brushType}function l(t,r){var s=e[t];if(null!=r&&n[r]===a)o[t]=n[r];else{var l=o[t]=null!=r?(n[r].__brushOption=s,n[r]):Bx(i,Nx(i,s));zx(i,l)}}},unmount:function(){if(!r||this._mounted)return this.enableBrush(!1),Ux(this),this._zr.remove(this.group),r&&(this._mounted=!1),this},dispose:function(){this.unmount(),this.off()}},E(Dx,Ie);var lS={mousedown:function(e){if(this._dragging)uS(this,e);else if(!e.target||!e.target.draggable){oS(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=Hx(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,r=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var r=e._zr;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}(e,t)){var r=e._zr,o=e._covers,i=Hx(e,t,n);if(!e._dragging)for(var a=0;a<o.length;a++){var s=o[a].__brushOption;if(i&&(!0===i||s.panelId===i.panelId)&&cS[s.brushType].contain(o[a],n[0],n[1]))return}i&&r.setCursorStyle("crosshair")}}(this,e,r),this._dragging){oS(e);var o=aS(this,e,r,!1);o&&Jx(this,o)}},mouseup:function(e){uS(this,e)}};function uS(e,t){if(e._dragging){oS(t);var n=t.offsetX,r=t.offsetY,o=aS(e,t,e.group.transformCoordToLocal(n,r),!0);e._dragging=!1,e._track=[],e._creatingCover=null,o&&Jx(e,o)}}var cS={lineX:fS(0),lineY:fS(1),rect:{createCover:function(e,t){return Yx(xx(eS,function(e){return e},function(e){return e}),e,t,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(e){var t=qx(e);return $x(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,r){Xx(e,t,n,r)},updateCommon:Zx,contain:iS},polygon:{createCover:function(e,t){var n=new Ln;return n.add(new us({name:"main",style:Kx(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new ls({name:"main",draggable:!0,drift:xx(tS,e,t),ondragend:xx(Jx,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,r){t.childAt(0).setShape({points:rS(e,t,n)})},updateCommon:Zx,contain:iS}};function fS(e){return{createCover:function(t,n){return Yx(xx(eS,function(t){var n=[t,[0,100]];return e&&n.reverse(),n},function(t){return t[e]}),t,n,[["w","e"],["n","s"]][e])},getCreatingRange:function(t){var n=qx(t);return[Px(n[0][e],n[1][e]),Tx(n[0][e],n[1][e])]},updateCoverShape:function(t,n,r,o){var i,a=Wx(t,n);if(!0!==a&&a.getLinearBrushOtherExtent)i=a.getLinearBrushOtherExtent(e,t._transform);else{var s=t._zr;i=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[r,i];e&&l.reverse(),Xx(t,n,l,o)},updateCommon:Zx,contain:iS}}function hS(e){return e=yS(e),function(t,n){return Tl(t,e)}}function pS(e,t){return e=yS(e),function(n){var r=null!=t?t:n,o=r?e.width:e.height,i=r?e.x:e.y;return[i,i+(o||0)]}}function dS(e,t,n){return e=yS(e),function(r,o,i){return e.contain(o[0],o[1])&&!nb(r,t,n)}}function yS(e){return jn.create(e)}var vS=["axisLine","axisTickLabel","axisName"],gS=Rp({type:"parallelAxis",init:function(e,t){gS.superApply(this,"init",arguments),(this._brushController=new Dx(t.getZr())).on("brush",D(this._onBrush,this))},render:function(e,t,n,r){if(!function(e,t,n){return n&&"axisAreaSelect"===n.type&&t.findComponents({mainType:"parallelAxis",query:n})[0]===e}(e,t,r)){this.axisModel=e,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Ln,this.group.add(this._axisGroup),e.get("show")){var i=function(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}(e,t),a=i.coordinateSystem,s=e.getAreaSelectStyle(),l=s.width,u=e.axis.dim,c=x({strokeContainThreshold:l},a.getAxisLayout(u)),f=new ig(e,c);M(vS,f.add,f),this._axisGroup.add(f.getGroup()),this._refreshBrushController(c,s,e,i,l,n);var h=r&&!1===r.animation?null:e;Pl(o,this._axisGroup,h)}}},_refreshBrushController:function(e,t,n,r,o,i){var a=n.axis.getExtent(),s=a[1]-a[0],l=Math.min(30,.1*Math.abs(s)),u=jn.create({x:a[0],y:-o/2,width:s,height:o});u.x-=l,u.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,position:e.position}).setPanels([{panelId:"pl",clipPath:hS(u),isTargetByCursor:dS(u,i,r),getLinearBrushOtherExtent:pS(u,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers(function(e){var t=e.axis;return R(e.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(e[0],!0),t.dataToCoord(e[1],!0)]}})}(n))},_onBrush:function(e,t){var n=this.axisModel,r=n.axis,o=R(e,function(e){return[r.coordToData(e.range[0],!0),r.coordToData(e.range[1],!0)]});(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},dispose:function(){this._brushController.dispose()}});Rp({type:"parallel",render:function(e,t,n){this._model=e,this._api=n,this._handlers||(this._handlers={},M(mS,function(e,t){n.getZr().on(t,this._handlers[t]=D(e,this))},this)),If(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},dispose:function(e,t){M(this._handlers,function(e,n){t.getZr().off(n,e)}),this._handlers=null},_throttledDispatchExpand:function(e){this._dispatchExpand(e)},_dispatchExpand:function(e){e&&this._api.dispatchAction(x({type:"parallelAxisExpand"},e))}});var mS={mousedown:function(e){bS(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(bS(this,"click")&&t){var n=[e.offsetX,e.offsetY];if(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2)>5)return;var r=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==r.behavior&&this._dispatchExpand({axisExpandWindow:r.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&bS(this,"mousemove")){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),r=n.behavior;"jump"===r&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===r?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===r&&null})}}};function bS(e,t){var n=e._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}Sp(function(e){!function(e){if(!e.parallel){var t=!1;M(e.series,function(e){e&&"parallel"===e.type&&(t=!0)}),t&&(e.parallel=[{}])}}(e),function(e){M(Uo(e.parallelAxis),function(t){if(z(t)){var n=t.parallelIndex||0,r=Uo(e.parallel)[n];r&&r.parallelAxisDefault&&w(t,r.parallelAxisDefault,!1)}})}(e)}),uf.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(e,t){var n=this.getSource();return function(e,t){if(e.encodeDefine)return;var n=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(!n)return;var r=e.encodeDefine=re();M(n.dimensions,function(e){var t=+e.replace("dim","");r.set(e,t)})}(n,this),xd(n,this)},getRawIndicesByActiveState:function(e){var t=this.coordinateSystem,n=this.getData(),r=[];return t.eachActiveState(n,function(t,o){e===t&&r.push(n.getRawIndex(o))}),r},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}});var wS=.3;xf.extend({type:"parallel",init:function(){this._dataGroup=new Ln,this.group.add(this._dataGroup),this._data,this._initialized},render:function(e,t,n,r){var o=this._dataGroup,i=e.getData(),a=this._data,s=e.coordinateSystem,l=s.dimensions,u=SS(e);if(i.diff(a).add(function(e){OS(xS(i,o,e,l,s),i,e,u)}).update(function(t,n){var o=a.getItemGraphicEl(n),c=_S(i,t,l,s);i.setItemGraphicEl(t,o);var f=r&&!1===r.animation?null:e;wl(o,{shape:{points:c}},f,t),OS(o,i,t,u)}).remove(function(e){var t=a.getItemGraphicEl(e);o.remove(t)}).execute(),!this._initialized){this._initialized=!0;var c=function(e,t,n){var r=e.model,o=e.getRect(),i=new ys({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),a="horizontal"===r.get("layout")?"width":"height";return i.setShape(a,0),_l(i,{shape:{width:o.width,height:o.height}},t,n),i}(s,e,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(c)}this._data=i},incrementalPrepareRender:function(e,t,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(e,t,n){for(var r=t.getData(),o=t.coordinateSystem,i=o.dimensions,a=SS(t),s=e.start;s<e.end;s++){var l=xS(r,this._dataGroup,s,i,o);l.incremental=!0,OS(l,r,s,a)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});function _S(e,t,n,r){for(var o,i=[],a=0;a<n.length;a++){var s=n[a],l=e.get(e.mapDimension(s),t);o=l,("category"===r.getAxis(s).type?null==o:null==o||isNaN(o))||i.push(r.dataToPoint(l,s))}return i}function xS(e,t,n,r,o){var i=_S(e,n,r,o),a=new us({shape:{points:i},silent:!0,z2:10});return t.add(a),e.setItemGraphicEl(n,a),a}function SS(e){var t=e.get("smooth",!0);return!0===t&&(t=wS),{lineStyle:e.getModel("lineStyle").getLineStyle(),smooth:null!=t?t:wS}}function OS(e,t,n,r){var o=r.lineStyle;t.hasItemOption&&(o=t.getItemModel(n).getModel("lineStyle").getLineStyle());e.useStyle(o);var i=e.style;i.fill=null,i.stroke=t.getItemVisual(n,"color"),i.opacity=t.getItemVisual(n,"opacity"),r.smooth&&(e.shape.smooth=r.smooth)}var PS=["lineStyle","normal","opacity"];Cp({seriesType:"parallel",reset:function(e,t,n){var r=e.getModel("itemStyle"),o=e.getModel("lineStyle"),i=t.get("color"),a=o.get("color")||r.get("color")||i[e.seriesIndex%i.length],s=e.get("inactiveOpacity"),l=e.get("activeOpacity"),u=e.getModel("lineStyle").getLineStyle(),c=e.coordinateSystem,f=e.getData(),h={normal:u.opacity,active:l,inactive:s};return f.setVisual("color",a),{progress:function(e,t){c.eachActiveState(t,function(e,n){var r=h[e];if("normal"===e&&t.hasItemOption){var o=t.getItemModel(n).get(PS,!0);null!=o&&(r=o)}t.setItemVisual(n,"opacity",r)},e.start,e.end)}}}});var TS=uf.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(e,t){for(var n=e.edges||e.links,o=e.data||e.nodes,i=e.levels,a=this.levelModels={},s=0;s<i.length;s++)if(null!=i[s].depth&&i[s].depth>=0)a[i[s].depth]=new Bl(i[s],this,t);else if(r)throw new Error("levels[i].depth is mandatory and should be natural number");if(o&&n)return i_(o,n,this,!0,function(e,t){e.wrapMethod("getItemModel",function(e,t){return e.customizeGetParent(function(e){var n=this.parentModel,r=n.getData().getItemLayout(t).depth,o=n.levelModels[r];return o||this.parentModel}),e}),t.wrapMethod("getItemModel",function(e,t){return e.customizeGetParent(function(e){var n=this.parentModel,r=n.getGraph().getEdgeByIndex(t),o=r.node1.getLayout().depth,i=n.levelModels[o];return i||this.parentModel}),e})}).data},setNodePosition:function(e,t){var n=this.option.data[e];n.localX=t[0],n.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(e,t,n){if("edge"===n){var r=this.getDataParams(e,n),o=r.data,i=o.source+" -- "+o.target;return r.value&&(i+=" : "+r.value),du(i)}if("node"===n){var a=this.getGraph().getNodeByIndex(e).getLayout().value,s=this.getDataParams(e,n).data.name;if(a)i=s+" : "+a;return du(i)}return TS.superCall(this,"formatTooltip",e,t)},optionUpdated:function(){var e=this.option;!0===e.focusNodeAdjacency&&(e.focusNodeAdjacency="allEdges")},getDataParams:function(e,t){var n=TS.superCall(this,"getDataParams",e,t);if(null==n.value&&"node"===t){var r=this.getGraph().getNodeByIndex(e).getLayout().value;n.value=r}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),kS=["itemStyle","opacity"],CS=["emphasis","itemStyle","opacity"],ES=["lineStyle","opacity"],AS=["emphasis","lineStyle","opacity"];function MS(e,t){return e.getVisual("opacity")||e.getModel().get(t)}function RS(e,t,n){var r=e.getGraphicEl(),o=MS(e,t);null!=n&&(null==o&&(o=1),o*=n),r.downplay&&r.downplay(),r.traverse(function(e){"group"!==e.type&&e.setStyle("opacity",o)})}function IS(e,t){var n=MS(e,t),r=e.getGraphicEl();r.traverse(function(e){"group"!==e.type&&e.setStyle("opacity",n)}),r.highlight&&r.highlight()}var jS=Bs({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});jp({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(e,t,n){var r=this,o=e.getGraph(),i=this.group,a=e.layoutInfo,s=a.width,l=a.height,u=e.getData(),c=e.getData("edge"),f=e.get("orient");this._model=e,i.removeAll(),i.attr("position",[a.x,a.y]),o.eachEdge(function(t){var n=new jS;n.dataIndex=t.dataIndex,n.seriesIndex=e.seriesIndex,n.dataType="edge";var r,o,a,u,h,p,d,y,v=t.getModel("lineStyle"),g=v.get("curveness"),m=t.node1.getLayout(),b=t.node1.getModel(),w=b.get("localX"),_=b.get("localY"),x=t.node2.getLayout(),S=t.node2.getModel(),O=S.get("localX"),P=S.get("localY"),T=t.getLayout();switch(n.shape.extent=Math.max(1,T.dy),n.shape.orient=f,"vertical"===f?(r=(null!=w?w*s:m.x)+T.sy,o=(null!=_?_*l:m.y)+m.dy,a=(null!=O?O*s:x.x)+T.ty,h=r,p=o*(1-g)+(u=null!=P?P*l:x.y)*g,d=a,y=o*g+u*(1-g)):(r=(null!=w?w*s:m.x)+m.dx,o=(null!=_?_*l:m.y)+T.sy,h=r*(1-g)+(a=null!=O?O*s:x.x)*g,p=o,d=r*g+a*(1-g),y=u=(null!=P?P*l:x.y)+T.ty),n.setShape({x1:r,y1:o,x2:a,y2:u,cpx1:h,cpy1:p,cpx2:d,cpy2:y}),n.setStyle(v.getItemStyle()),n.style.fill){case"source":n.style.fill=t.node1.getVisual("color");break;case"target":n.style.fill=t.node2.getVisual("color")}al(n,t.getModel("emphasis.lineStyle").getItemStyle()),i.add(n),c.setItemGraphicEl(t.dataIndex,n)}),o.eachNode(function(t){var n=t.getLayout(),r=t.getModel(),o=r.get("localX"),a=r.get("localY"),c=r.getModel("label"),f=r.getModel("emphasis.label"),h=new ys({shape:{x:null!=o?o*s:n.x,y:null!=a?a*l:n.y,width:n.dx,height:n.dy},style:r.getModel("itemStyle").getItemStyle()}),p=t.getModel("emphasis.itemStyle").getItemStyle();cl(h.style,p,c,f,{labelFetcher:e,labelDataIndex:t.dataIndex,defaultText:t.id,isRectText:!0}),h.setStyle("fill",t.getVisual("color")),al(h,p),i.add(h),u.setItemGraphicEl(t.dataIndex,h),h.dataType="node"}),u.eachItemGraphicEl(function(t,o){var i=u.getItemModel(o);i.get("draggable")&&(t.drift=function(t,i){r._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=i,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:u.getRawIndex(o),localX:this.shape.x/s,localY:this.shape.y/l})},t.ondragend=function(){r._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move"),t.highlight=function(){this.trigger("emphasis")},t.downplay=function(){this.trigger("normal")},t.focusNodeAdjHandler&&t.off("mouseover",t.focusNodeAdjHandler),t.unfocusNodeAdjHandler&&t.off("mouseout",t.unfocusNodeAdjHandler),i.get("focusNodeAdjacency")&&(t.on("mouseover",t.focusNodeAdjHandler=function(){r._focusAdjacencyDisabled||(r._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:t.dataIndex}))}),t.on("mouseout",t.unfocusNodeAdjHandler=function(){r._focusAdjacencyDisabled||r._dispatchUnfocus(n)}))}),c.eachItemGraphicEl(function(t,o){var i=c.getItemModel(o);t.focusNodeAdjHandler&&t.off("mouseover",t.focusNodeAdjHandler),t.unfocusNodeAdjHandler&&t.off("mouseout",t.unfocusNodeAdjHandler),i.get("focusNodeAdjacency")&&(t.on("mouseover",t.focusNodeAdjHandler=function(){r._focusAdjacencyDisabled||(r._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:t.dataIndex}))}),t.on("mouseout",t.unfocusNodeAdjHandler=function(){r._focusAdjacencyDisabled||r._dispatchUnfocus(n)}))}),!this._data&&e.get("animation")&&i.setClipPath(function(e,t,n){var r=new ys({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return _l(r,{shape:{width:e.width+20}},t,n),r}(i.getBoundingRect(),e,function(){i.removeClipPath()})),this._data=e.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(e){var t=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){t._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,r){var o=e.getData(),i=o.graph,a=r.dataIndex,s=o.getItemModel(a),l=r.edgeDataIndex;if(null!=a||null!=l){var u=i.getNodeByIndex(a),c=i.getEdgeByIndex(l);if(i.eachNode(function(e){RS(e,kS,.1)}),i.eachEdge(function(e){RS(e,ES,.1)}),u){IS(u,CS);var f=s.get("focusNodeAdjacency");"outEdges"===f?M(u.outEdges,function(e){e.dataIndex<0||(IS(e,AS),IS(e.node2,CS))}):"inEdges"===f?M(u.inEdges,function(e){e.dataIndex<0||(IS(e,AS),IS(e.node1,CS))}):"allEdges"===f&&M(u.edges,function(e){e.dataIndex<0||(IS(e,AS),e.node1!==u&&IS(e.node1,CS),e.node2!==u&&IS(e.node2,CS))})}c&&(IS(c,AS),IS(c.node1,CS),IS(c.node2,CS))}},unfocusNodeAdjacency:function(e,t,n,r){var o=e.getGraph();o.eachNode(function(e){RS(e,kS)}),o.eachEdge(function(e){RS(e,ES)})}}),Pp({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])})});function LS(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function DS(e,t,n,r,o){var i="vertical"===o?"x":"y";M(e,function(e){var a,s,l;e.sort(function(e,t){return e.getLayout()[i]-t.getLayout()[i]});for(var u=0,c=e.length,f="vertical"===o?"dx":"dy",h=0;h<c;h++)(l=u-(s=e[h]).getLayout()[i])>0&&(a=s.getLayout()[i]+l,"vertical"===o?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),u=s.getLayout()[i]+s.getLayout()[f]+t;if((l=u-t-("vertical"===o?r:n))>0)for(a=s.getLayout()[i]-l,"vertical"===o?s.setLayout({x:a},!0):s.setLayout({y:a},!0),u=a,h=c-2;h>=0;--h)(l=(s=e[h]).getLayout()[i]+s.getLayout()[f]+t-u)>0&&(a=s.getLayout()[i]-l,"vertical"===o?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),u=s.getLayout()[i]})}function NS(e,t,n){M(e.slice().reverse(),function(e){M(e,function(e){if(e.outEdges.length){var r=WS(e.outEdges,BS,n)/WS(e.outEdges,HS,n);if(isNaN(r)){var o=e.outEdges.length;r=o?WS(e.outEdges,FS,n)/o:0}if("vertical"===n){var i=e.getLayout().x+(r-VS(e,n))*t;e.setLayout({x:i},!0)}else{var a=e.getLayout().y+(r-VS(e,n))*t;e.setLayout({y:a},!0)}}})})}function BS(e,t){return VS(e.node2,t)*e.getValue()}function FS(e,t){return VS(e.node2,t)}function GS(e,t){return VS(e.node1,t)*e.getValue()}function zS(e,t){return VS(e.node1,t)}function VS(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function HS(e){return e.getValue()}function WS(e,t,n){for(var r=0,o=e.length,i=-1;++i<o;){var a=+t.call(e,e[i],n);isNaN(a)||(r+=a)}return r}function US(e,t,n){M(e,function(e){M(e,function(e){if(e.inEdges.length){var r=WS(e.inEdges,GS,n)/WS(e.inEdges,HS,n);if(isNaN(r)){var o=e.inEdges.length;r=o?WS(e.inEdges,zS,n)/o:0}if("vertical"===n){var i=e.getLayout().x+(r-VS(e,n))*t;e.setLayout({x:i},!0)}else{var a=e.getLayout().y+(r-VS(e,n))*t;e.setLayout({y:a},!0)}}})})}kp(function(e,t,n){e.eachSeriesByType("sankey",function(e){var n=e.get("nodeWidth"),r=e.get("nodeGap"),o=function(e,t){return Mu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=o;var i=o.width,a=o.height,s=e.getGraph(),l=s.nodes,u=s.edges;!function(e){M(e,function(e){var t=WS(e.outEdges,HS),n=WS(e.inEdges,HS),r=e.getValue()||0,o=Math.max(t,n,r);e.setLayout({value:o},!0)})}(l),function(e,t,n,r,o,i,a,s,l){(function(e,t,n,r,o,i,a){for(var s=[],l=[],u=[],c=[],f=0,h=0;h<t.length;h++)s[h]=1;for(h=0;h<e.length;h++)l[h]=e[h].inEdges.length,0===l[h]&&u.push(e[h]);for(var p=-1;u.length;){for(var d=0;d<u.length;d++){var y=u[d],v=y.hostGraph.data.getRawDataItem(y.dataIndex),g=null!=v.depth&&v.depth>=0;g&&v.depth>p&&(p=v.depth),y.setLayout({depth:g?v.depth:f},!0),"vertical"===i?y.setLayout({dy:n},!0):y.setLayout({dx:n},!0);for(var m=0;m<y.outEdges.length;m++){var b=y.outEdges[m],w=t.indexOf(b);s[w]=0;var _=b.node2,x=e.indexOf(_);0==--l[x]&&c.indexOf(_)<0&&c.push(_)}}++f,u=c,c=[]}for(h=0;h<s.length;h++)if(1===s[h])throw new Error("Sankey is a DAG, the original data has cycle!");var S=p>f-1?p:f-1;a&&"left"!==a&&function(e,t,n,r){if("right"===t){for(var o=[],i=e,a=0;i.length;){for(var s=0;s<i.length;s++){var l=i[s];l.setLayout({skNodeHeight:a},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];o.indexOf(c.node1)<0&&o.push(c.node1)}}i=o,o=[],++a}M(e,function(e){LS(e)||e.setLayout({depth:Math.max(0,r-e.getLayout().skNodeHeight)},!0)})}else"justify"===t&&function(e,t){M(e,function(e){LS(e)||e.outEdges.length||e.setLayout({depth:t},!0)})}(e,r)}(e,a,0,S),function(e,t,n){M(e,function(e){var r=e.getLayout().depth*t;"vertical"===n?e.setLayout({y:r},!0):e.setLayout({x:r},!0)})}(e,"vertical"===i?(o-n)/S:(r-n)/S,i)})(e,t,n,o,i,s,l),function(e,t,n,r,o,i,a){var s=function(e,t){var n=[],r="vertical"===t?"y":"x",o=ai(e,function(e){return e.getLayout()[r]});return o.keys.sort(function(e,t){return e-t}),M(o.keys,function(e){n.push(o.buckets.get(e))}),n}(e,a);(function(e,t,n,r,o,i){var a=1/0;M(e,function(e){var t=e.length,s=0;M(e,function(e){s+=e.getLayout().value});var l="vertical"===i?(r-(t-1)*o)/s:(n-(t-1)*o)/s;l<a&&(a=l)}),M(e,function(e){M(e,function(e,t){var n=e.getLayout().value*a;"vertical"===i?(e.setLayout({x:t},!0),e.setLayout({dx:n},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:n},!0))})}),M(t,function(e){var t=+e.getValue()*a;e.setLayout({dy:t},!0)})})(s,t,n,r,o,a),DS(s,o,n,r,a);for(var l=1;i>0;i--)NS(s,l*=.99,a),DS(s,o,n,r,a),US(s,l,a),DS(s,o,n,r,a)}(e,t,i,o,r,a,s),function(e,t){var n="vertical"===t?"x":"y";M(e,function(e){e.outEdges.sort(function(e,t){return e.node2.getLayout()[n]-t.node2.getLayout()[n]}),e.inEdges.sort(function(e,t){return e.node1.getLayout()[n]-t.node1.getLayout()[n]})}),M(e,function(e){var t=0,n=0;M(e.outEdges,function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy}),M(e.inEdges,function(e){e.setLayout({ty:n},!0),n+=e.getLayout().dy})})}(e,s)}(l,u,n,r,i,a,0!==j(l,function(e){return 0===e.getLayout().value}).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))})}),Cp(function(e,t){e.eachSeriesByType("sankey",function(e){var t=e.getGraph().nodes;if(t.length){var n=1/0,r=-1/0;M(t,function(e){var t=e.getLayout().value;t<n&&(n=t),t>r&&(r=t)}),M(t,function(t){var o=new xw({type:"color",mappingMethod:"linear",dataExtent:[n,r],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),i=t.getModel().get("itemStyle.color");null!=i?t.setVisual("color",i):t.setVisual("color",o)})}})});var JS={_baseAxisDim:null,getInitialData:function(e,t){var n,r,o=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),a=o.get("type"),s=i.get("type");"category"===a?(e.layout="horizontal",n=o.getOrdinalMeta(),r=!0):"category"===s?(e.layout="vertical",n=i.getOrdinalMeta(),r=!0):e.layout=e.layout||"horizontal";var l=["x","y"],u="horizontal"===e.layout?0:1,c=this._baseAxisDim=l[u],f=l[1-u],h=[o,i],p=h[u].get("type"),d=h[1-u].get("type"),y=e.data;if(y&&r){var v=[];M(y,function(e,t){var n;e.value&&B(e.value)?(n=e.value.slice(),e.value.unshift(t)):B(e)?(n=e.slice(),e.unshift(t)):n=e,v.push(n)}),e.data=v}var g=this.defaultValueDimensions,m=[{name:c,type:Gp(p),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:Gp(d),dimsDef:g.slice()}];return Kg(this,{coordDimensions:m,dimensionsCount:g.length+1,encodeDefaulter:N(oc,m,this)})},getBaseAxis:function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis}};E(uf.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),JS,!0);var qS=["itemStyle"],YS=["emphasis","itemStyle"],XS=(xf.extend({type:"boxplot",render:function(e,t,n){var r=e.getData(),o=this.group,i=this._data;this._data||o.removeAll();var a="horizontal"===e.get("layout")?1:0;r.diff(i).add(function(e){if(r.hasValue(e)){var t=ZS(r.getItemLayout(e),r,e,a,!0);r.setItemGraphicEl(e,t),o.add(t)}}).update(function(e,t){var n=i.getItemGraphicEl(t);if(r.hasValue(e)){var s=r.getItemLayout(e);n?QS(s,n,r,e):n=ZS(s,r,e,a),o.add(n),r.setItemGraphicEl(e,n)}else o.remove(n)}).remove(function(e){var t=i.getItemGraphicEl(e);t&&o.remove(t)}).execute(),this._data=r},remove:function(e){var t=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(e){e&&t.remove(e)})},dispose:ie}),ja.extend({type:"boxplotBoxPath",shape:{},buildPath:function(e,t){var n=t.points,r=0;for(e.moveTo(n[r][0],n[r][1]),r++;r<4;r++)e.lineTo(n[r][0],n[r][1]);for(e.closePath();r<n.length;r++)e.moveTo(n[r][0],n[r][1]),r++,e.lineTo(n[r][0],n[r][1])}}));function ZS(e,t,n,r,o){var i=e.ends,a=new XS({shape:{points:o?function(e,t,n){return R(e,function(e){return(e=e.slice())[t]=n.initBaseline,e})}(i,r,e):i}});return QS(e,a,t,n,o),a}function QS(e,t,n,r,o){var i=n.hostModel;(0,Ml[o?"initProps":"updateProps"])(t,{shape:{points:e.ends}},i,r);var a=n.getItemModel(r),s=a.getModel(qS),l=n.getItemVisual(r,"color"),u=s.getItemStyle(["borderColor"]);u.stroke=l,u.strokeNoScale=!0,t.useStyle(u),t.z2=100,al(t,a.getModel(YS).getItemStyle())}var KS=["itemStyle","borderColor"],$S=M;Cp(function(e,t){var n=e.get("color");e.eachRawSeriesByType("boxplot",function(t){var r=n[t.seriesIndex%n.length],o=t.getData();o.setVisual({legendSymbol:"roundRect",color:t.get(KS)||r}),e.isSeriesFiltered(t)||o.each(function(e){var t=o.getItemModel(e);o.setItemVisual(e,{color:t.get(KS,!0)})})})}),kp(function(e){var t=function(e){var t=[],n=[];return e.eachSeriesByType("boxplot",function(e){var r=e.getBaseAxis(),o=k(n,r);o<0&&(o=n.length,n[o]=r,t[o]={axis:r,seriesModels:[]}),t[o].seriesModels.push(e)}),t}(e);$S(t,function(e){var t=e.seriesModels;t.length&&(function(e){var t,n,r=e.axis,o=e.seriesModels,i=o.length,a=e.boxWidthList=[],s=e.boxOffsetList=[],l=[];if("category"===r.type)n=r.getBandWidth();else{var u=0;$S(o,function(e){u=Math.max(u,e.getData().count())}),t=r.getExtent(),Math.abs(t[1]-t[0])}$S(o,function(e){var t=e.get("boxWidth");B(t)||(t=[t,t]),l.push([Ul(t[0],n)||0,Ul(t[1],n)||0])});var c=.8*n-2,f=c/i*.3,h=(c-f*(i-1))/i,p=h/2-c/2;$S(o,function(e,t){s.push(p),p+=f+h,a.push(Math.min(Math.max(h,l[t][0]),l[t][1]))})}(e),$S(t,function(t,n){!function(e,t,n){var r=e.coordinateSystem,o=e.getData(),i=n/2,a="horizontal"===e.get("layout")?0:1,s=1-a,l=["x","y"],u=o.mapDimension(l[a]),c=o.mapDimension(l[s],!0);if(!(null==u||c.length<5))for(var f=0;f<o.count();f++){var h=o.get(u,f),p=b(h,c[2],f),d=b(h,c[0],f),y=b(h,c[1],f),v=b(h,c[3],f),g=b(h,c[4],f),m=[];w(m,y,0),w(m,v,1),m.push(d,y,g,v),_(m,d),_(m,g),_(m,p),o.setItemLayout(f,{initBaseline:p[s],ends:m})}function b(e,n,i){var l,u=o.get(n,i),c=[];return c[a]=e,c[s]=u,isNaN(e)||isNaN(u)?l=[NaN,NaN]:(l=r.dataToPoint(c))[a]+=t,l}function w(e,t,n){var r=t.slice(),o=t.slice();r[a]+=i,o[a]-=i,n?e.push(r,o):e.push(o,r)}function _(e,t){var n=t.slice(),r=t.slice();n[a]-=i,r[a]+=i,e.push(n,r)}}(t,e.boxOffsetList[n],e.boxWidthList[n])}))})}),E(uf.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(e,t,n){var r=t.getItemLayout(e);return r&&n.rect(r.brushRect)}}),JS,!0);var eO=["itemStyle"],tO=["emphasis","itemStyle"],nO=["color","color0","borderColor","borderColor0"],rO=(xf.extend({type:"candlestick",render:function(e,t,n){this.group.removeClipPath(),this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,r){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e){var t=e.getData(),n=this._data,r=this.group,o=t.getLayout("isSimpleBox"),i=e.get("clip",!0),a=e.coordinateSystem,s=a.getArea&&a.getArea();this._data||r.removeAll(),t.diff(n).add(function(n){if(t.hasValue(n)){var a,l=t.getItemLayout(n);if(i&&iO(s,l))return;_l(a=oO(l,n,!0),{shape:{points:l.ends}},e,n),aO(a,t,n,o),r.add(a),t.setItemGraphicEl(n,a)}}).update(function(a,l){var u=n.getItemGraphicEl(l);if(t.hasValue(a)){var c=t.getItemLayout(a);i&&iO(s,c)?r.remove(u):(u?wl(u,{shape:{points:c.ends}},e,a):u=oO(c,a),aO(u,t,a,o),r.add(u),t.setItemGraphicEl(a,u))}else r.remove(u)}).remove(function(e){var t=n.getItemGraphicEl(e);t&&r.remove(t)}).execute(),this._data=t},_renderLarge:function(e){this._clear(),lO(e,this.group);var t=e.get("clip",!0)?Cv(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},_incrementalRenderNormal:function(e,t){for(var n,r=t.getData(),o=r.getLayout("isSimpleBox");null!=(n=e.next());){var i;aO(i=oO(r.getItemLayout(n),n),r,n,o),i.incremental=!0,this.group.add(i)}},_incrementalRenderLarge:function(e,t){lO(t,this.group,!0)},remove:function(e){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:ie}),ja.extend({type:"normalCandlestickBox",shape:{},buildPath:function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))}}));function oO(e,t,n){var r=e.ends;return new rO({shape:{points:n?function(e,t){return R(e,function(e){return(e=e.slice())[1]=t.initBaseline,e})}(r,e):r},z2:100})}function iO(e,t){for(var n=!0,r=0;r<t.ends.length;r++)if(e.contain(t.ends[r][0],t.ends[r][1])){n=!1;break}return n}function aO(e,t,n,r){var o=t.getItemModel(n),i=o.getModel(eO),a=t.getItemVisual(n,"color"),s=t.getItemVisual(n,"borderColor")||a,l=i.getItemStyle(nO);e.useStyle(l),e.style.strokeNoScale=!0,e.style.fill=a,e.style.stroke=s,e.__simpleBox=r,al(e,o.getModel(tO).getItemStyle())}var sO=ja.extend({type:"largeCandlestickBox",shape:{},buildPath:function(e,t){for(var n=t.points,r=0;r<n.length;)if(this.__sign===n[r++]){var o=n[r++];e.moveTo(o,n[r++]),e.lineTo(o,n[r++])}else r+=3}});function lO(e,t,n){var r=e.getData(),o=r.getLayout("largePoints"),i=new sO({shape:{points:o},__sign:1});t.add(i);var a=new sO({shape:{points:o},__sign:-1});t.add(a),uO(1,i,e,r),uO(-1,a,e,r),n&&(i.incremental=!0,a.incremental=!0)}function uO(e,t,n,r){var o=e>0?"P":"N",i=r.getVisual("borderColor"+o)||r.getVisual("color"+o),a=n.getModel(eO).getItemStyle(nO);t.useStyle(a),t.style.fill=null,t.style.stroke=i}var cO=["itemStyle","borderColor"],fO=["itemStyle","borderColor0"],hO=["itemStyle","color"],pO=["itemStyle","color0"],dO={seriesType:"candlestick",plan:bf(),performRawSeries:!0,reset:function(e,t){if(e.getData().setVisual({legendSymbol:"roundRect",colorP:n(1,e),colorN:n(-1,e),borderColorP:r(1,e),borderColorN:r(-1,e)}),!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(e,t){var o;for(;null!=(o=e.next());){var i=t.getItemModel(o),a=t.getItemLayout(o).sign;t.setItemVisual(o,{color:n(a,i),borderColor:r(a,i)})}}};function n(e,t){return t.get(e>0?hO:pO)}function r(e,t){return t.get(e>0?cO:fO)}}},yO="undefined"!=typeof Float32Array?Float32Array:Array,vO={seriesType:"candlestick",plan:bf(),reset:function(e){var t=e.coordinateSystem,n=e.getData(),r=function(e,t){var n,r=e.getBaseAxis(),o="category"===r.type?r.getBandWidth():(n=r.getExtent(),Math.abs(n[1]-n[0])/t.count()),i=Ul(q(e.get("barMaxWidth"),o),o),a=Ul(q(e.get("barMinWidth"),1),o),s=e.get("barWidth");return null!=s?Ul(s,o):Math.max(Math.min(o/2,i),a)}(e,n),o=0,i=1,a=["x","y"],s=n.mapDimension(a[o]),l=n.mapDimension(a[i],!0),u=l[0],c=l[1],f=l[2],h=l[3];if(n.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),!(null==s||l.length<4))return{progress:e.pipelineContext.large?function(e,n){var r,a,l=new yO(4*e.count),p=0,d=[],y=[];for(;null!=(a=e.next());){var v=n.get(s,a),g=n.get(u,a),m=n.get(c,a),b=n.get(f,a),w=n.get(h,a);isNaN(v)||isNaN(b)||isNaN(w)?(l[p++]=NaN,p+=3):(l[p++]=gO(n,a,g,m,c),d[o]=v,d[i]=b,r=t.dataToPoint(d,null,y),l[p++]=r?r[0]:NaN,l[p++]=r?r[1]:NaN,d[i]=w,r=t.dataToPoint(d,null,y),l[p++]=r?r[1]:NaN)}n.setLayout("largePoints",l)}:function(e,n){var a;for(;null!=(a=e.next());){var l=n.get(s,a),p=n.get(u,a),d=n.get(c,a),y=n.get(f,a),v=n.get(h,a),g=Math.min(p,d),m=Math.max(p,d),b=O(g,l),w=O(m,l),_=O(y,l),x=O(v,l),S=[];P(S,w,0),P(S,b,1),S.push(k(x),k(w),k(_),k(b)),n.setItemLayout(a,{sign:gO(n,a,p,d,c),initBaseline:p>d?w[i]:b[i],ends:S,brushRect:T(y,v,l)})}function O(e,n){var r=[];return r[o]=n,r[i]=e,isNaN(n)||isNaN(e)?[NaN,NaN]:t.dataToPoint(r)}function P(e,t,n){var i=t.slice(),a=t.slice();i[o]=Js(i[o]+r/2,1,!1),a[o]=Js(a[o]-r/2,1,!0),n?e.push(i,a):e.push(a,i)}function T(e,t,n){var a=O(e,n),s=O(t,n);return a[o]-=r/2,s[o]-=r/2,{x:a[0],y:a[1],width:i?r:s[0]-a[0],height:i?s[1]-a[1]:r}}function k(e){return e[o]=Js(e[o],1),e}}}}};function gO(e,t,n,r,o){return n>r?-1:n<r?1:t>0?e.get(o,t-1)<=r?1:-1:1}Sp(function(e){e&&B(e.series)&&M(e.series,function(e){z(e)&&"k"===e.type&&(e.type="candlestick")})}),Cp(dO),kp(vO),uf.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(e,t){return xd(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});function mO(e,t){var n=t.rippleEffectColor||t.color;e.eachChild(function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})})}function bO(e,t){Ln.call(this);var n=new Qy(e,t),r=new Ln;this.add(n),this.add(r),r.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(e,t)}var wO=bO.prototype;wO.stopEffectAnimation=function(){this.childAt(1).removeAll()},wO.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,r=this.childAt(1),o=0;o<3;o++){var i=Ty(t,-1,-1,2,2,n);i.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var a=-o/3*e.period+e.effectOffset;i.animate("",!0).when(e.period,{scale:[e.rippleScale/2,e.rippleScale/2]}).delay(a).start(),i.animateStyle(!0).when(e.period,{opacity:0}).delay(a).start(),r.add(i)}mO(r,e)},wO.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),r=["symbolType","period","rippleScale"],o=0;o<r.length;o++){var i=r[o];if(t[i]!==e[i])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}mO(n,e)},wO.highlight=function(){this.trigger("emphasis")},wO.downplay=function(){this.trigger("normal")},wO.updateData=function(e,t){var n=e.hostModel;this.childAt(0).updateData(e,t);var r=this.childAt(1),o=e.getItemModel(t),i=e.getItemVisual(t,"symbol"),a=function(e){return B(e)||(e=[+e,+e]),e}(e.getItemVisual(t,"symbolSize")),s=e.getItemVisual(t,"color");r.attr("scale",a),r.traverse(function(e){e.attr({fill:s})});var l=o.getShallow("symbolOffset");if(l){var u=r.position;u[0]=Ul(l[0],a[0]),u[1]=Ul(l[1],a[1])}var c=e.getItemVisual(t,"symbolRotate");r.rotation=(c||0)*Math.PI/180||0;var f={};if(f.showEffectOn=n.get("showEffectOn"),f.rippleScale=o.get("rippleEffect.scale"),f.brushType=o.get("rippleEffect.brushType"),f.period=1e3*o.get("rippleEffect.period"),f.effectOffset=t/e.count(),f.z=o.getShallow("z")||0,f.zlevel=o.getShallow("zlevel")||0,f.symbolType=i,f.color=s,f.rippleEffectColor=o.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===f.showEffectOn)this._effectCfg?this.updateEffectAnimation(f):this.startEffectAnimation(f),this._effectCfg=f;else{this._effectCfg=null,this.stopEffectAnimation();var h=this.childAt(0),p=function(){h.highlight(),"render"!==f.showEffectOn&&this.startEffectAnimation(f)},d=function(){h.downplay(),"render"!==f.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",p,this).on("mouseout",d,this).on("emphasis",p,this).on("normal",d,this)}this._effectCfg=f},wO.fadeOut=function(e){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),e&&e()},C(bO,Ln),jp({type:"effectScatter",init:function(){this._symbolDraw=new sv(bO)},render:function(e,t,n){var r=e.getData(),o=this._symbolDraw;o.updateData(r),this.group.add(o.group)},updateTransform:function(e,t,n){var r=e.getData();this.group.dirty();var o=Dv().reset(e);o.progress&&o.progress({start:0,end:r.count()},r),this._symbolDraw.updateLayout(r)},_updateGroupTransform:function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=gt(t.getRoamTransform()),this.group.decomposeTransform())},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(t)},dispose:function(){}}),Cp(Lv("effectScatter","circle")),kp(Dv("effectScatter"));var _O="undefined"==typeof Uint32Array?Array:Uint32Array,xO="undefined"==typeof Float64Array?Array:Float64Array;function SO(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(r&&console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"),e.data=R(t,function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),_([t,e[0],e[1]])}))}var OO=uf.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(e){e.data=e.data||[],SO(e);var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),OO.superApply(this,"init",arguments)},mergeOption:function(e){if(SO(e),e.data){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count))}OO.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=oe(this._flatCoords,t.flatCoords),this._flatCoordsOffset=oe(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e),n=t.option instanceof Array?t.option:t.getShallow("coords");if(r&&!(n instanceof Array&&n.length>0&&n[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(n)+". Lines must have 2d coords array in data item.");return n},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*e],r=this._flatCoordsOffset[2*e+1],o=0;o<r;o++)t[o]=t[o]||[],t[o][0]=this._flatCoords[n+2*o],t[o][1]=this._flatCoords[n+2*o+1];return r}var i=this._getCoordsFromItemModel(e);for(o=0;o<i.length;o++)t[o]=t[o]||[],t[o][0]=i[o][0],t[o][1]=i[o][1];return i.length},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"==typeof e[0]){for(var n=e.length,o=new _O(n),i=new xO(n),a=0,s=0,l=0,u=0;u<n;){l++;var c=e[u++];o[s++]=a+t,o[s++]=c;for(var f=0;f<c;f++){var h=e[u++],p=e[u++];if(i[a++]=h,i[a++]=p,u>n&&r)throw new Error("Invalid data format.")}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,s),flatCoords:i,count:l}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},getInitialData:function(e,t){if(r&&!gc.get(e.coordinateSystem))throw new Error("Unkown coordinate system "+e.coordinateSystem);var n=new $p(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(e,t,r,o){if(e instanceof Array)return NaN;n.hasItemOption=!0;var i=e.value;return null!=i?i instanceof Array?i[o]:i:void 0}),n},formatTooltip:function(e){var t=this.getData().getItemModel(e),n=t.get("name");if(n)return n;var r=t.get("fromName"),o=t.get("toName"),i=[];return null!=r&&i.push(r),null!=o&&i.push(o),du(i.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function PO(e,t,n){Ln.call(this),this.add(this.createLine(e,t,n)),this._updateEffectSymbol(e,t)}var TO=PO.prototype;function kO(e,t,n){Ln.call(this),this._createPolyline(e,t,n)}TO.createLine=function(e,t,n){return new S_(e,t,n)},TO._updateEffectSymbol=function(e,t){var n=e.getItemModel(t).getModel("effect"),r=n.get("symbolSize"),o=n.get("symbol");B(r)||(r=[r,r]);var i=n.get("color")||e.getItemVisual(t,"color"),a=this.childAt(1);this._symbolType!==o&&(this.remove(a),(a=Ty(o,-.5,-.5,1,1,i)).z2=100,a.culling=!0,this.add(a)),a&&(a.setStyle("shadowColor",i),a.setStyle(n.getItemStyle(["color"])),a.attr("scale",r),a.setColor(i),a.attr("scale",r),this._symbolType=o,this._symbolScale=r,this._updateEffectAnimation(e,n,t))},TO._updateEffectAnimation=function(e,t,n){var r=this.childAt(1);if(r){var o=this,i=e.getItemLayout(n),a=1e3*t.get("period"),s=t.get("loop"),l=t.get("constantSpeed"),u=J(t.get("delay"),function(t){return t/e.count()*a/3}),c="function"==typeof u;if(r.ignore=!0,this.updateAnimationPoints(r,i),l>0&&(a=this.getLineLength(r)/l*1e3),a!==this._period||s!==this._loop){r.stopAnimation();var f=u;c&&(f=u(n)),r.__t>0&&(f=-a*r.__t),r.__t=0;var h=r.animate("",s).when(a,{__t:1}).delay(f).during(function(){o.updateSymbolPosition(r)});s||h.done(function(){o.remove(r)}),h.start()}this._period=a,this._loop=s}},TO.getLineLength=function(e){return xe(e.__p1,e.__cp1)+xe(e.__cp1,e.__p2)},TO.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},TO.updateData=function(e,t,n){this.childAt(0).updateData(e,t,n),this._updateEffectSymbol(e,t)},TO.updateSymbolPosition=function(e){var t=e.__p1,n=e.__p2,r=e.__cp1,o=e.__t,i=e.position,a=[i[0],i[1]],s=Di,l=Ni;i[0]=s(t[0],r[0],n[0],o),i[1]=s(t[1],r[1],n[1],o);var u=l(t[0],r[0],n[0],o),c=l(t[1],r[1],n[1],o);if(e.rotation=-Math.atan2(c,u)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==e.__lastT&&e.__lastT<e.__t){var f=1.05*xe(a,i);e.attr("scale",[e.scale[0],f]),1===o&&(i[0]=a[0]+(i[0]-a[0])/2,i[1]=a[1]+(i[1]-a[1])/2)}else if(1===e.__lastT){f=2*xe(t,i);e.attr("scale",[e.scale[0],f])}else e.attr("scale",this._symbolScale);e.__lastT=e.__t,e.ignore=!1},TO.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var n=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,n,t)},C(PO,Ln);var CO=kO.prototype;function EO(e,t,n){PO.call(this,e,t,n),this._lastFrame=0,this._lastFramePercent=0}CO._createPolyline=function(e,t,n){var r=e.getItemLayout(t),o=new us({shape:{points:r}});this.add(o),this._updateCommonStl(e,t,n)},CO.updateData=function(e,t,n){var r=e.hostModel;wl(this.childAt(0),{shape:{points:e.getItemLayout(t)}},r,t),this._updateCommonStl(e,t,n)},CO._updateCommonStl=function(e,t,n){var r=this.childAt(0),o=e.getItemModel(t),i=e.getItemVisual(t,"color"),a=n&&n.lineStyle,s=n&&n.hoverLineStyle;n&&!e.hasItemOption||(a=o.getModel("lineStyle").getLineStyle(),s=o.getModel("emphasis.lineStyle").getLineStyle()),r.useStyle(S({strokeNoScale:!0,fill:"none",stroke:i},a)),r.hoverStyle=s,al(this)},CO.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},C(kO,Ln);var AO=EO.prototype;AO.createLine=function(e,t,n){return new kO(e,t,n)},AO.updateAnimationPoints=function(e,t){this._points=t;for(var n=[0],r=0,o=1;o<t.length;o++){var i=t[o-1],a=t[o];r+=xe(i,a),n.push(r)}if(0!==r){for(o=0;o<n.length;o++)n[o]/=r;this._offsets=n,this._length=r}},AO.getLineLength=function(e){return this._length},AO.updateSymbolPosition=function(e){var t=e.__t,n=this._points,r=this._offsets,o=n.length;if(r){var i=this._lastFrame;if(t<this._lastFramePercent){for(a=Math.min(i+1,o-1);a>=0&&!(r[a]<=t);a--);a=Math.min(a,o-2)}else{for(var a=i;a<o&&!(r[a]>t);a++);a=Math.min(a-1,o-2)}Pe(e.position,n[a],n[a+1],(t-r[a])/(r[a+1]-r[a]));var s=n[a+1][0]-n[a][0],l=n[a+1][1]-n[a][1];e.rotation=-Math.atan2(l,s)-Math.PI/2,this._lastFrame=a,this._lastFramePercent=t,e.ignore=!1}},C(EO,PO);var MO=Bs({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,t){var n=t.segs,r=t.curveness;if(t.polyline)for(var o=0;o<n.length;){var i=n[o++];if(i>0){e.moveTo(n[o++],n[o++]);for(var a=1;a<i;a++)e.lineTo(n[o++],n[o++])}}else for(o=0;o<n.length;){var s=n[o++],l=n[o++],u=n[o++],c=n[o++];if(e.moveTo(s,l),r>0){var f=(s+u)/2-(l-c)*r,h=(l+c)/2-(u-s)*r;e.quadraticCurveTo(f,h,u,c)}else e.lineTo(u,c)}},findDataIndex:function(e,t){var n=this.shape,r=n.segs,o=n.curveness;if(n.polyline)for(var i=0,a=0;a<r.length;){var s=r[a++];if(s>0)for(var l=r[a++],u=r[a++],c=1;c<s;c++){if(da(l,u,f=r[a++],h=r[a++]))return i}i++}else for(i=0,a=0;a<r.length;){l=r[a++],u=r[a++];var f=r[a++],h=r[a++];if(o>0){if(va(l,u,(l+f)/2-(u-h)*o,(u+h)/2-(f-l)*o,f,h))return i}else if(da(l,u,f,h))return i;i++}return-1}});function RO(){this.group=new Ln}var IO=RO.prototype;IO.isPersistent=function(){return!this._incremental},IO.updateData=function(e){this.group.removeAll();var t=new MO({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},IO.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>5e5?(this._incremental||(this._incremental=new Ts({silent:!0})),this.group.add(this._incremental)):this._incremental=null},IO.incrementalUpdate=function(e,t){var n=new MO;n.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(n,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=e.start,this.group.add(n))},IO.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},IO._setCommon=function(e,t,n){var r=t.hostModel;e.setShape({polyline:r.get("polyline"),curveness:r.get("lineStyle.curveness")}),e.useStyle(r.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var o=t.getVisual("color");o&&e.setStyle("stroke",o),e.setStyle("fill"),n||(e.seriesIndex=r.seriesIndex,e.on("mousemove",function(t){e.dataIndex=null;var n=e.findDataIndex(t.offsetX,t.offsetY);n>0&&(e.dataIndex=n+e.__startIndex)}))},IO._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var jO={seriesType:"lines",plan:bf(),reset:function(e){var t=e.coordinateSystem,n=e.get("polyline"),r=e.pipelineContext.large;return{progress:function(o,i){var a=[];if(r){var s,l=o.end-o.start;if(n){for(var u=0,c=o.start;c<o.end;c++)u+=e.getLineCoordsCount(c);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var f=0,h=[];for(c=o.start;c<o.end;c++){var p=e.getLineCoords(c,a);n&&(s[f++]=p);for(var d=0;d<p;d++)h=t.dataToPoint(a[d],!1,h),s[f++]=h[0],s[f++]=h[1]}i.setLayout("linesPoints",s)}else for(c=o.start;c<o.end;c++){var y=i.getItemModel(c),v=(p=e.getLineCoords(c,a),[]);if(n)for(var g=0;g<p;g++)v.push(t.dataToPoint(a[g]));else{v[0]=t.dataToPoint(a[0]),v[1]=t.dataToPoint(a[1]);var m=y.get("lineStyle.curveness");+m&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*m,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*m])}i.setItemLayout(c,v)}}}}};function LO(e){return e instanceof Array||(e=[e,e]),e}jp({type:"lines",init:function(){},render:function(e,t,n){var o=e.getData(),i=this._updateLineDraw(o,e),a=e.get("zlevel"),s=e.get("effect.trailLength"),l=n.getZr(),u="svg"===l.painter.getType();if(u||l.painter.getLayer(a).clear(!0),null==this._lastZlevel||u||l.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&s){if(r){var c=!1;t.eachSeries(function(t){t!==e&&t.get("zlevel")===a&&(c=!0)}),c&&console.warn("Lines with trail effect should have an individual zlevel")}u||l.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(s/10+.9,1),0)})}i.updateData(o);var f=e.get("clip",!0)&&Cv(e.coordinateSystem,!1,e);f?this.group.setClipPath(f):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},incrementalPrepareRender:function(e,t,n){var r=e.getData();this._updateLineDraw(r,e).incrementalPrepareUpdate(r),this._clearLayer(n),this._finished=!1},incrementalRender:function(e,t,n){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var r=e.getData(),o=e.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var i=jO.reset(e);i.progress&&i.progress({start:0,end:r.count()},r),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(e,t){var n=this._lineDraw,o=this._showEffect(t),i=!!t.get("polyline"),a=t.pipelineContext.large;return r&&o&&a&&console.warn("Large lines not support effect"),n&&o===this._hasEffet&&i===this._isPolyline&&a===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=a?new RO:new P_(i?o?EO:kO:o?PO:S_),this._hasEffet=o,this._isPolyline=i,this._isLargeDraw=a,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});var DO="lineStyle.opacity".split("."),NO={seriesType:"lines",reset:function(e,t,n){var r=LO(e.get("symbol")),o=LO(e.get("symbolSize")),i=e.getData();return i.setVisual("fromSymbol",r&&r[0]),i.setVisual("toSymbol",r&&r[1]),i.setVisual("fromSymbolSize",o&&o[0]),i.setVisual("toSymbolSize",o&&o[1]),i.setVisual("opacity",e.get(DO)),{dataEach:i.hasItemOption?function(e,t){var n=e.getItemModel(t),r=LO(n.getShallow("symbol",!0)),o=LO(n.getShallow("symbolSize",!0)),i=n.get(DO);r[0]&&e.setItemVisual(t,"fromSymbol",r[0]),r[1]&&e.setItemVisual(t,"toSymbol",r[1]),o[0]&&e.setItemVisual(t,"fromSymbolSize",o[0]),o[1]&&e.setItemVisual(t,"toSymbolSize",o[1]),e.setItemVisual(t,"opacity",i)}:null}}};kp(jO),Cp(NO),uf.extend({type:"series.heatmap",getInitialData:function(e,t){return xd(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var e=gc.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});function BO(){var e=P();this.canvas=e,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}BO.prototype={update:function(e,t,n,r,o,i){var a=this._getBrush(),s=this._getGradient(e,o,"inRange"),l=this._getGradient(e,o,"outOfRange"),u=this.pointSize+this.blurSize,c=this.canvas,f=c.getContext("2d"),h=e.length;c.width=t,c.height=n;for(var p=0;p<h;++p){var d=e[p],y=d[0],v=d[1],g=r(d[2]);f.globalAlpha=g,f.drawImage(a,y-u,v-u)}if(!c.width||!c.height)return c;for(var m=f.getImageData(0,0,c.width,c.height),b=m.data,w=0,_=b.length,x=this.minOpacity,S=this.maxOpacity-x;w<_;){g=b[w+3]/256;var O=4*Math.floor(255*g);if(g>0){var P=i(g)?s:l;g>0&&(g=g*S+x),b[w++]=P[O],b[w++]=P[O+1],b[w++]=P[O+2],b[w++]=P[O+3]*g*256}else w+=4}return f.putImageData(m,0,0),c},_getBrush:function(){var e=this._brushCanvas||(this._brushCanvas=P()),t=this.pointSize+this.blurSize,n=2*t;e.width=n,e.height=n;var r=e.getContext("2d");return r.clearRect(0,0,n,n),r.shadowOffsetX=n,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-t,t,this.pointSize,0,2*Math.PI,!0),r.closePath(),r.fill(),e},_getGradient:function(e,t,n){for(var r=this._gradientPixels,o=r[n]||(r[n]=new Uint8ClampedArray(1024)),i=[0,0,0,0],a=0,s=0;s<256;s++)t[n](s/255,!0,i),o[a++]=i[0],o[a++]=i[1],o[a++]=i[2],o[a++]=i[3];return o}},jp({type:"heatmap",render:function(e,t,n){var o;if(t.eachComponent("visualMap",function(t){t.eachTargetSeries(function(n){n===e&&(o=t)})}),r&&!o)throw new Error("Heatmap must use with visualMap");this.group.removeAll(),this._incrementalDisplayable=null;var i=e.coordinateSystem;"cartesian2d"===i.type||"calendar"===i.type?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):function(e){var t=e.dimensions;return"lng"===t[0]&&"lat"===t[1]}(i)&&this._renderOnGeo(i,e,o,n)},incrementalPrepareRender:function(e,t,n){this.group.removeAll()},incrementalRender:function(e,t,n,r){t.coordinateSystem&&this._renderOnCartesianAndCalendar(t,r,e.start,e.end,!0)},_renderOnCartesianAndCalendar:function(e,t,n,o,i){var a,s,l=e.coordinateSystem;if("cartesian2d"===l.type){var u=l.getAxis("x"),c=l.getAxis("y");if(r){if("category"!==u.type||"category"!==c.type)throw new Error("Heatmap on cartesian must have two category axes");if(!u.onBand||!c.onBand)throw new Error("Heatmap on cartesian must have two axes with boundaryGap true")}a=u.getBandWidth(),s=c.getBandWidth()}for(var f=this.group,h=e.getData(),p=e.getModel("itemStyle").getItemStyle(["color"]),d=e.getModel("emphasis.itemStyle").getItemStyle(),y=e.getModel("label"),v=e.getModel("emphasis.label"),g=l.type,m="cartesian2d"===g?[h.mapDimension("x"),h.mapDimension("y"),h.mapDimension("value")]:[h.mapDimension("time"),h.mapDimension("value")],b=n;b<o;b++){var w;if("cartesian2d"===g){if(isNaN(h.get(m[2],b)))continue;var _=l.dataToPoint([h.get(m[0],b),h.get(m[1],b)]);w=new ys({shape:{x:Math.floor(Math.round(_[0])-a/2),y:Math.floor(Math.round(_[1])-s/2),width:Math.ceil(a),height:Math.ceil(s)},style:{fill:h.getItemVisual(b,"color"),opacity:h.getItemVisual(b,"opacity")}})}else{if(isNaN(h.get(m[1],b)))continue;w=new ys({z2:1,shape:l.dataToRect([h.get(m[0],b)]).contentShape,style:{fill:h.getItemVisual(b,"color"),opacity:h.getItemVisual(b,"opacity")}})}var S=h.getItemModel(b);h.hasItemOption&&(p=S.getModel("itemStyle").getItemStyle(["color"]),d=S.getModel("emphasis.itemStyle").getItemStyle(),y=S.getModel("label"),v=S.getModel("emphasis.label"));var O=e.getRawValue(b),P="-";O&&null!=O[2]&&(P=O[2]),cl(p,d,y,v,{labelFetcher:e,labelDataIndex:b,defaultText:P,isRectText:!0}),w.setStyle(p),al(w,h.hasItemOption?d:x({},d)),w.incremental=i,i&&(w.useHoverLayer=!0),f.add(w),h.setItemGraphicEl(b,w)}},_renderOnGeo:function(e,t,n,r){var o=n.targetVisuals.inRange,i=n.targetVisuals.outOfRange,a=t.getData(),s=this._hmLayer||this._hmLayer||new BO;s.blurSize=t.get("blurSize"),s.pointSize=t.get("pointSize"),s.minOpacity=t.get("minOpacity"),s.maxOpacity=t.get("maxOpacity");var l=e.getViewRect().clone(),u=e.getRoamTransform();l.applyTransform(u);var c=Math.max(l.x,0),f=Math.max(l.y,0),h=Math.min(l.width+l.x,r.getWidth()),p=Math.min(l.height+l.y,r.getHeight()),d=h-c,y=p-f,v=[a.mapDimension("lng"),a.mapDimension("lat"),a.mapDimension("value")],g=a.mapArray(v,function(t,n,r){var o=e.dataToPoint([t,n]);return o[0]-=c,o[1]-=f,o.push(r),o}),m=n.getExtent(),b="visualMap.continuous"===n.type?function(e,t){var n=e[1]-e[0];return t=[(t[0]-e[0])/n,(t[1]-e[0])/n],function(e){return e>=t[0]&&e<=t[1]}}(m,n.option.range):function(e,t,n){var r=e[1]-e[0],o=(t=R(t,function(t){return{interval:[(t.interval[0]-e[0])/r,(t.interval[1]-e[0])/r]}})).length,i=0;return function(e){for(var r=i;r<o;r++)if((a=t[r].interval)[0]<=e&&e<=a[1]){i=r;break}if(r===o)for(r=i-1;r>=0;r--){var a;if((a=t[r].interval)[0]<=e&&e<=a[1]){i=r;break}}return r>=0&&r<o&&n[r]}}(m,n.getPieceList(),n.option.selected);s.update(g,d,y,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:i.color.getColorMapper()},b);var w=new io({style:{width:d,height:y,x:c,y:f,image:s.canvas},silent:!0});this.group.add(w)},dispose:function(){}});var FO=Mg.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(e){return e.stack=null,FO.superApply(this,"getInitialData",arguments)}}),GO=["itemStyle","borderWidth"],zO=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],VO=new $a;jp({type:"pictorialBar",render:function(e,t,n){var r=this.group,o=e.getData(),i=this._data,a=e.coordinateSystem,s=!!a.getBaseAxis().isHorizontal(),l=a.grid.getRect(),u={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:a,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:zO[+s],categoryDim:zO[1-s]};return o.diff(i).add(function(e){if(o.hasValue(e)){var t=ZO(o,e),n=HO(o,e,t,u),i=eP(o,u,n);o.setItemGraphicEl(e,i),r.add(i),iP(i,u,n)}}).update(function(e,t){var n=i.getItemGraphicEl(t);if(o.hasValue(e)){var a=ZO(o,e),s=HO(o,e,a,u),l=nP(o,s);n&&l!==n.__pictorialShapeStr&&(r.remove(n),o.setItemGraphicEl(e,null),n=null),n?function(e,t,n){var r=n.animationModel,o=n.dataIndex;wl(e.__pictorialBundle,{position:n.bundlePosition.slice()},r,o),n.symbolRepeat?JO(e,t,n,!0):qO(e,t,n,!0);YO(e,n,!0),XO(e,t,n,!0)}(n,u,s):n=eP(o,u,s,!0),o.setItemGraphicEl(e,n),n.__pictorialSymbolMeta=s,r.add(n),iP(n,u,s)}else r.remove(n)}).remove(function(e){var t=i.getItemGraphicEl(e);t&&tP(i,e,t.__pictorialSymbolMeta.animationModel,t)}).execute(),this._data=o,this.group},dispose:ie,remove:function(e,t){var n=this.group,r=this._data;e.get("animation")?r&&r.eachItemGraphicEl(function(t){tP(r,t.dataIndex,e,t)}):n.removeAll()}});function HO(e,t,n,r){var o=e.getItemLayout(t),i=n.get("symbolRepeat"),a=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,u=n.get("symbolPatternSize")||2,c=n.isAnimationEnabled(),f={dataIndex:t,layout:o,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",color:e.getItemVisual(t,"color"),symbolClip:a,symbolRepeat:i,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:l,animationModel:c?n:null,hoverAnimation:c&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};!function(e,t,n,r,o){var i,a=r.valueDim,s=e.get("symbolBoundingData"),l=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),u=l.toGlobalCoord(l.dataToCoord(0)),c=1-+(n[a.wh]<=0);if(B(s)){var f=[WO(l,s[0])-u,WO(l,s[1])-u];f[1]<f[0]&&f.reverse(),i=f[c]}else i=null!=s?WO(l,s)-u:t?r.coordSysExtent[a.index][c]-u:n[a.wh];o.boundingLength=i,t&&(o.repeatCutLength=n[a.wh]);o.pxSign=i>0?1:i<0?-1:0}(n,i,o,r,f),function(e,t,n,r,o,i,a,s,l,u){var c=l.valueDim,f=l.categoryDim,h=Math.abs(n[f.wh]),p=e.getItemVisual(t,"symbolSize");B(p)?p=p.slice():(null==p&&(p="100%"),p=[p,p]);p[f.index]=Ul(p[f.index],h),p[c.index]=Ul(p[c.index],r?h:Math.abs(i)),u.symbolSize=p,(u.symbolScale=[p[0]/s,p[1]/s])[c.index]*=(l.isHorizontal?-1:1)*a}(e,t,o,i,0,f.boundingLength,f.pxSign,u,r,f),function(e,t,n,r,o){var i=e.get(GO)||0;i&&(VO.attr({scale:t.slice(),rotation:n}),VO.updateTransform(),i/=VO.getLineScale(),i*=t[r.valueDim.index]);o.valueLineWidth=i}(n,f.symbolScale,l,r,f);var h=f.symbolSize,p=n.get("symbolOffset");return B(p)&&(p=[Ul(p[0],h[0]),Ul(p[1],h[1])]),function(e,t,n,r,o,i,a,s,l,u,c,f){var h=c.categoryDim,p=c.valueDim,d=f.pxSign,y=Math.max(t[p.index]+s,0),v=y;if(r){var g=Math.abs(l),m=J(e.get("symbolMargin"),"15%")+"",b=!1;m.lastIndexOf("!")===m.length-1&&(b=!0,m=m.slice(0,m.length-1)),m=Ul(m,t[p.index]);var w=Math.max(y+2*m,0),_=b?0:2*m,S=su(r),O=S?r:aP((g+_)/w),P=g-O*y;w=y+2*(m=P/2/(b?O:O-1)),_=b?0:2*m,S||"fixed"===r||(O=u?aP((Math.abs(u)+_)/w):0),v=O*w-_,f.repeatTimes=O,f.symbolMargin=m}var T=d*(v/2),k=f.pathPosition=[];k[h.index]=n[h.wh]/2,k[p.index]="start"===a?T:"end"===a?l-T:l/2,i&&(k[0]+=i[0],k[1]+=i[1]);var C=f.bundlePosition=[];C[h.index]=n[h.xy],C[p.index]=n[p.xy];var E=f.barRectShape=x({},n);E[p.wh]=d*Math.max(Math.abs(n[p.wh]),Math.abs(k[p.index]+T)),E[h.wh]=n[h.wh];var A=f.clipShape={};A[h.xy]=-n[h.xy],A[h.wh]=c.ecSize[h.wh],A[p.xy]=0,A[p.wh]=n[p.wh]}(n,h,o,i,0,p,s,f.valueLineWidth,f.boundingLength,f.repeatCutLength,r,f),f}function WO(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function UO(e){var t=e.symbolPatternSize,n=Ty(e.symbolType,-t/2,-t/2,t,t,e.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function JO(e,t,n,r){var o=e.__pictorialBundle,i=n.symbolSize,a=n.valueLineWidth,s=n.pathPosition,l=t.valueDim,u=n.repeatTimes||0,c=0,f=i[t.valueDim.index]+a+2*n.symbolMargin;for(rP(e,function(e){e.__pictorialAnimationIndex=c,e.__pictorialRepeatTimes=u,c<u?oP(e,null,d(c),n,r):oP(e,null,{scale:[0,0]},n,r,function(){o.remove(e)}),$O(e,n),c++});c<u;c++){var h=UO(n);h.__pictorialAnimationIndex=c,h.__pictorialRepeatTimes=u,o.add(h);var p=d(c);oP(h,{position:p.position,scale:[0,0]},{scale:p.scale,rotation:p.rotation},n,r),h.on("mouseover",y).on("mouseout",v),$O(h,n)}function d(e){var t=s.slice(),r=n.pxSign,o=e;return("start"===n.symbolRepeatDirection?r>0:r<0)&&(o=u-1-e),t[l.index]=f*(o-u/2+.5)+s[l.index],{position:t,scale:n.symbolScale.slice(),rotation:n.rotation}}function y(){rP(e,function(e){e.trigger("emphasis")})}function v(){rP(e,function(e){e.trigger("normal")})}}function qO(e,t,n,r){var o=e.__pictorialBundle,i=e.__pictorialMainPath;i?oP(i,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,r):(i=e.__pictorialMainPath=UO(n),o.add(i),oP(i,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,r),i.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),$O(i,n)}function YO(e,t,n){var r=x({},t.barRectShape),o=e.__pictorialBarRect;o?oP(o,null,{shape:r},t,n):(o=e.__pictorialBarRect=new ys({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),e.add(o))}function XO(e,t,n,r){if(n.symbolClip){var o=e.__pictorialClipPath,i=x({},n.clipShape),a=t.valueDim,s=n.animationModel,l=n.dataIndex;if(o)wl(o,{shape:i},s,l);else{i[a.wh]=0,o=new ys({shape:i}),e.__pictorialBundle.setClipPath(o),e.__pictorialClipPath=o;var u={};u[a.wh]=n.clipShape[a.wh],Ml[r?"updateProps":"initProps"](o,{shape:u},s,l)}}}function ZO(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=QO,n.isAnimationEnabled=KO,n}function QO(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function KO(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function $O(e,t){e.off("emphasis").off("normal");var n=t.symbolScale.slice();t.hoverAnimation&&e.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function eP(e,t,n,r){var o=new Ln,i=new Ln;return o.add(i),o.__pictorialBundle=i,i.attr("position",n.bundlePosition.slice()),n.symbolRepeat?JO(o,t,n):qO(o,0,n),YO(o,n,r),XO(o,t,n,r),o.__pictorialShapeStr=nP(e,n),o.__pictorialSymbolMeta=n,o}function tP(e,t,n,r){var o=r.__pictorialBarRect;o&&(o.style.text=null);var i=[];rP(r,function(e){i.push(e)}),r.__pictorialMainPath&&i.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),M(i,function(e){wl(e,{scale:[0,0]},n,t,function(){r.parent&&r.parent.remove(r)})}),e.setItemGraphicEl(t,null)}function nP(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function rP(e,t,n){M(e.__pictorialBundle.children(),function(r){r!==e.__pictorialBarRect&&t.call(n,r)})}function oP(e,t,n,r,o,i){t&&e.attr(t),r.symbolClip&&!o?n&&e.attr(n):n&&Ml[o?"updateProps":"initProps"](e,n,r.animationModel,r.dataIndex,i)}function iP(e,t,n){var r=n.color,o=n.dataIndex,i=n.itemModel,a=i.getModel("itemStyle").getItemStyle(["color"]),s=i.getModel("emphasis.itemStyle").getItemStyle(),l=i.getShallow("cursor");rP(e,function(e){e.setColor(r),e.setStyle(S({fill:r,opacity:n.opacity},a)),al(e,s),l&&(e.cursor=l),e.z2=n.z2});var u={},c=(t.valueDim.posDesc[+(n.boundingLength>0)],e.__pictorialBarRect);Rg(c.style,u,i,r,t.seriesModel,o),al(c,u)}function aP(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}kp(N(Wd,"pictorialBar")),Cp(Lv("pictorialBar","roundRect"));var sP=function(e,t,n,r,o){Uy.call(this,e,t,n),this.type=r||"value",this.position=o||"bottom",this.orient=null};function lP(e,t,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._rect,this._init(e,t,n),this.model=e}function uP(e,t){t=t||{};var n=e.coordinateSystem,r=e.axis,o={},i=r.position,a=r.orient,s=n.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};o.position=["vertical"===a?u.vertical[i]:l[0],"horizontal"===a?u.horizontal[i]:l[3]];o.rotation=Math.PI/2*{horizontal:0,vertical:1}[a];o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,right:1,left:-1}[i],e.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),J(t.labelInside,e.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var c=t.rotate;return null==c&&(c=e.get("axisLabel.rotate")),o.labelRotation="top"===i?-c:c,o.z2=1,o}sP.prototype={constructor:sP,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},pointToData:function(e,t){return this.coordinateSystem.pointToData(e,t)[0]},toGlobalCoord:null,toLocalCoord:null},C(sP,Uy),lP.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:lP,_init:function(e,t,n){var r=this.dimension,o=new sP(r,hy(e),[0,0],e.get("type"),e.get("position")),i="category"===o.type;o.onBand=i&&e.get("boundaryGap"),o.inverse=e.get("inverse"),o.orient=e.get("orient"),e.axis=o,o.model=e,o.coordinateSystem=this,this._axis=o},update:function(e,t){e.eachSeries(function(e){if(e.coordinateSystem===this){var t=e.getData();M(t.mapDimension(this.dimension,!0),function(e){this._axis.scale.unionExtentFromData(t,e)},this),fy(this._axis.scale,this._axis.model)}},this)},resize:function(e,t){this._rect=Mu({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),r=n?[0,e.width]:[0,e.height],o=t.reverse?1:0;t.setExtent(r[o],r[1-o]),this._updateAxisTransform(t,n?e.x:e.y)},_updateAxisTransform:function(e,t){var n=e.getExtent(),r=n[0]+n[1],o=e.isHorizontal();e.toGlobalCoord=o?function(e){return e+t}:function(e){return r-e+t},e.toLocalCoord=o?function(e){return e-t}:function(e){return r-e+t}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(e){var t=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},pointToData:function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},dataToPoint:function(e){var t=this.getAxis(),n=this.getRect(),r=[],o="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),r[o]=t.toGlobalCoord(t.dataToCoord(+e)),r[1-o]=0===o?n.y+n.height/2:n.x+n.width/2,r}},gc.register("single",{create:function(e,t){var n=[];return e.eachComponent("singleAxis",function(r,o){var i=new lP(r,e,t);i.name="single_"+o,i.resize(r,t),r.coordinateSystem=i,n.push(i)}),e.eachSeries(function(t){if("singleAxis"===t.get("coordinateSystem")){var n=e.queryComponents({mainType:"singleAxis",index:t.get("singleAxisIndex"),id:t.get("singleAxisId")})[0];t.coordinateSystem=n&&n.coordinateSystem}}),n},dimensions:lP.prototype.dimensions});var cP=["axisLine","axisTickLabel","axisName"],fP=["splitArea","splitLine"],hP=_g.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(e,t,n,r){var o=this.group;o.removeAll();var i=this._axisGroup;this._axisGroup=new Ln;var a=uP(e),s=new ig(e,a);M(cP,s.add,s),o.add(this._axisGroup),o.add(s.getGroup()),M(fP,function(t){e.get(t+".show")&&this["_"+t](e)},this),Pl(i,this._axisGroup,e),hP.superCall(this,"render",e,t,n,r)},remove:function(){kg(this)},_splitLine:function(e){var t=e.axis;if(!t.scale.isBlank()){var n=e.getModel("splitLine"),r=n.getModel("lineStyle"),o=r.get("width"),i=r.get("color");i=i instanceof Array?i:[i];for(var a=e.coordinateSystem.getRect(),s=t.isHorizontal(),l=[],u=0,c=t.getTicksCoords({tickModel:n}),f=[],h=[],p=0;p<c.length;++p){var d=t.toGlobalCoord(c[p].coord);s?(f[0]=d,f[1]=a.y,h[0]=d,h[1]=a.y+a.height):(f[0]=a.x,f[1]=d,h[0]=a.x+a.width,h[1]=d);var y=u++%i.length;l[y]=l[y]||[],l[y].push(new gs({subPixelOptimize:!0,shape:{x1:f[0],y1:f[1],x2:h[0],y2:h[1]},style:{lineWidth:o},silent:!0}))}for(p=0;p<l.length;++p)this.group.add(Ws(l[p],{style:{stroke:i[p%i.length],lineDash:r.getLineDash(o),lineWidth:o},silent:!0}))}},_splitArea:function(e){Tg(this,this._axisGroup,e,e)}}),pP=Fu.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});w(pP.prototype,gy),Jv("single",pP,function(e,t){return t.type||(t.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var dP=function(e,t){var n,r=[],o=e.seriesIndex;if(null==o||!(n=t.getSeriesByIndex(o)))return{point:[]};var i=n.getData(),a=$o(i,e);if(null==a||a<0||B(a))return{point:[]};var s=i.getItemGraphicEl(a),l=n.coordinateSystem;if(n.getTooltipPosition)r=n.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)r=l.dataToPoint(i.getValues(R(l.dimensions,function(e){return i.mapDimension(e)}),a,!0))||[];else if(s){var u=s.getBoundingRect().clone();u.applyTransform(s.transform),r=[u.x+u.width/2,u.y+u.height/2]}return{point:r,el:s}},yP=M,vP=N,gP=ei();function mP(e,t,n,r,o){var i=e.axis;if(!i.scale.isBlank()&&i.containData(t))if(e.involveSeries){var a=function(e,t){var n=t.axis,r=n.dim,o=e,i=[],a=Number.MAX_VALUE,s=-1;return yP(t.seriesModels,function(t,l){var u,c,f=t.getData().mapDimension(r,!0);if(t.getAxisTooltipData){var h=t.getAxisTooltipData(f,e,n);c=h.dataIndices,u=h.nestestValue}else{if(!(c=t.getData().indicesOfNearest(f[0],e,"category"===n.type?.5:null)).length)return;u=t.getData().get(f[0],c[0])}if(null!=u&&isFinite(u)){var p=e-u,d=Math.abs(p);d<=a&&((d<a||p>=0&&s<0)&&(a=d,s=p,o=u,i.length=0),yP(c,function(e){i.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})}))}}),{payloadBatch:i,snapToValue:o}}(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&null==o.seriesIndex&&x(o,s[0]),!r&&e.snap&&i.containData(l)&&null!=l&&(t=l),n.showPointer(e,t,s,o),n.showTooltip(e,a,l)}else n.showPointer(e,t)}function bP(e,t,n,r){e[t.key]={value:n,payloadBatch:r}}function wP(e,t,n,r){var o=n.payloadBatch,i=t.axis,a=i.model,s=t.axisPointerModel;if(t.triggerTooltip&&o.length){var l=t.coordSys.model,u=wg(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:i.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:r,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:o.slice()})}}function _P(e){var t=e.axis.model,n={},r=n.axisDim=e.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=t.componentIndex,n.axisName=n[r+"AxisName"]=t.name,n.axisId=n[r+"AxisId"]=t.id,n}function xP(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}Mp({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var SP=ei(),OP=M;function PP(e,t,n){if(!a.node){var r=t.getZr();SP(r).records||(SP(r).records={}),function(e,t){if(SP(e).initialized)return;function n(n,r){e.on(n,function(n){var o=function(e){var t={showTip:[],hideTip:[]};return{dispatchAction:function n(r){var o=t[r.type];o?o.push(r):(r.dispatchAction=n,e.dispatchAction(r))},pendings:t}}(t);OP(SP(e).records,function(e){e&&r(e,n,o.dispatchAction)}),function(e,t){var n,r=e.showTip.length,o=e.hideTip.length;r?n=e.showTip[r-1]:o&&(n=e.hideTip[o-1]);n&&(n.dispatchAction=null,t.dispatchAction(n))}(o.pendings,t)})}SP(e).initialized=!0,n("click",N(kP,"click")),n("mousemove",N(kP,"mousemove")),n("globalout",TP)}(r,t),(SP(r).records[e]||(SP(r).records[e]={})).handler=n}}function TP(e,t,n){e.handler("leave",null,n)}function kP(e,t,n,r){t.handler(e,n,r)}function CP(e,t){if(!a.node){var n=t.getZr();(SP(n).records||{})[e]&&(SP(n).records[e]=null)}}var EP=Rp({type:"axisPointer",render:function(e,t,n){var r=t.getComponent("tooltip"),o=e.get("triggerOn")||r&&r.get("triggerOn")||"mousemove|click";PP("axisPointer",n,function(e,t,n){"none"!==o&&("leave"===e||o.indexOf(e)>=0)&&n({type:"updateAxisPointer",currTrigger:e,x:t&&t.offsetX,y:t&&t.offsetY})})},remove:function(e,t){CP(t.getZr(),"axisPointer"),EP.superApply(this._model,"remove",arguments)},dispose:function(e,t){CP("axisPointer",t),EP.superApply(this._model,"dispose",arguments)}}),AP=ei(),MP=b,RP=D;function IP(){}function jP(e,t,n,r){(function e(t,n){if(z(t)&&z(n)){var r=!0;return M(n,function(n,o){r=r&&e(t[o],n)}),!!r}return t===n})(AP(n).lastProp,r)||(AP(n).lastProp=r,t?wl(n,r,e):(n.stopAnimation(),n.attr(r)))}function LP(e,t){e[t.get("label.show")?"show":"hide"]()}function DP(e){return{position:e.position.slice(),rotation:e.rotation||0}}function NP(e,t,n){var r=t.get("z"),o=t.get("zlevel");e&&e.traverse(function(e){"group"!==e.type&&(null!=r&&(e.z=r),null!=o&&(e.zlevel=o),e.silent=n)})}function BP(e){var t,n=e.get("type"),r=e.getModel(n+"Style");return"line"===n?(t=r.getLineStyle()).fill=null:"shadow"===n&&((t=r.getAreaStyle()).stroke=null),t}function FP(e,t,n,r,o){var i=GP(n.get("value"),t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),a=n.getModel("label"),s=fu(a.get("padding")||0),l=a.getFont(),u=wr(i,l),c=o.position,f=u.width+s[1]+s[3],h=u.height+s[0]+s[2],p=o.align;"right"===p&&(c[0]-=f),"center"===p&&(c[0]-=f/2);var d=o.verticalAlign;"bottom"===d&&(c[1]-=h),"middle"===d&&(c[1]-=h/2),function(e,t,n,r){var o=r.getWidth(),i=r.getHeight();e[0]=Math.min(e[0]+t,o)-t,e[1]=Math.min(e[1]+n,i)-n,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}(c,f,h,r);var y=a.get("backgroundColor");y&&"auto"!==y||(y=t.get("axisLine.lineStyle.color")),e.label={shape:{x:0,y:0,width:f,height:h,r:a.get("borderRadius")},position:c.slice(),style:{text:i,textFont:l,textFill:a.getTextColor(),textPosition:"inside",textPadding:s,fill:y,stroke:a.get("borderColor")||"transparent",lineWidth:a.get("borderWidth")||0,shadowBlur:a.get("shadowBlur"),shadowColor:a.get("shadowColor"),shadowOffsetX:a.get("shadowOffsetX"),shadowOffsetY:a.get("shadowOffsetY")},z2:10}}function GP(e,t,n,r,o){e=t.scale.parse(e);var i=t.scale.getLabel(e,{precision:o.precision}),a=o.formatter;if(a){var s={value:dy(t,e),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};M(r,function(e){var t=n.getSeriesByIndex(e.seriesIndex),r=e.dataIndexInside,o=t&&t.getDataParams(r);o&&s.seriesData.push(o)}),G(a)?i=a.replace("{value}",i):F(a)&&(i=a(s))}return i}function zP(e,t,n){var r=ut();return dt(r,r,n.rotation),pt(r,r,n.position),Sl([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function VP(e,t,n,r,o,i){var a=ig.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=o.get("label.margin"),FP(t,r,o,i,{position:zP(r.axis,e,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function HP(e,t,n){return{x1:e[n=n||0],y1:e[1-n],x2:t[n],y2:t[1-n]}}function WP(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}function UP(e,t,n,r,o,i){return{cx:e,cy:t,r0:n,r:r,startAngle:o,endAngle:i,clockwise:!0}}IP.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(e,t,n,r){var o=t.get("value"),i=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,r||this._lastValue!==o||this._lastStatus!==i){this._lastValue=o,this._lastStatus=i;var a=this._group,s=this._handle;if(!i||"hide"===i)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var l={};this.makeElOption(l,o,e,t,n);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=u;var c=this._moveAnimation=this.determineAnimation(e,t);if(a){var f=N(jP,t,c);this.updatePointerEl(a,l,f,t),this.updateLabelEl(a,l,f,t)}else a=this._group=new Ln,this.createPointerEl(a,l,e,t),this.createLabelEl(a,l,e,t),n.getZr().add(a);NP(a,t,!0),this._renderHandle(o)}},remove:function(e){this.clear(e)},dispose:function(e){this.clear(e)},determineAnimation:function(e,t){var n=t.get("animation"),r=e.axis,o="category"===r.type,i=t.get("snap");if(!i&&!o)return!1;if("auto"===n||null==n){var a=this.animationThreshold;if(o&&r.getBandWidth()>a)return!0;if(i){var s=mg(e).seriesDataCount,l=r.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1}return!0===n},makeElOption:function(e,t,n,r,o){},createPointerEl:function(e,t,n,r){var o=t.pointer;if(o){var i=AP(e).pointerEl=new Ml[o.type](MP(t.pointer));e.add(i)}},createLabelEl:function(e,t,n,r){if(t.label){var o=AP(e).labelEl=new ys(MP(t.label));e.add(o),LP(o,r)}},updatePointerEl:function(e,t,n){var r=AP(e).pointerEl;r&&t.pointer&&(r.setStyle(t.pointer.style),n(r,{shape:t.pointer.shape}))},updateLabelEl:function(e,t,n,r){var o=AP(e).labelEl;o&&(o.setStyle(t.label.style),n(o,{shape:t.label.shape,position:t.label.position}),LP(o,r))},_renderHandle:function(e){if(!this._dragging&&this.updateHandleTransform){var t,n=this._axisPointerModel,r=this._api.getZr(),o=this._handle,i=n.getModel("handle"),a=n.get("status");if(!i.get("show")||!a||"hide"===a)return o&&r.remove(o),void(this._handle=null);this._handle||(t=!0,o=this._handle=kl(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e){Ze(e.event)},onmousedown:RP(this._onHandleDragMove,this,0,0),drift:RP(this._onHandleDragMove,this),ondragend:RP(this._onHandleDragEnd,this)}),r.add(o)),NP(o,n,!1);o.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=i.get("size");B(s)||(s=[s,s]),o.attr("scale",[s[0]/2,s[1]/2]),If(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},_moveHandleToValue:function(e,t){jP(this._axisPointerModel,!t&&this._moveAnimation,this._handle,DP(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(e,t){var n=this._handle;if(n){this._dragging=!0;var r=this.updateHandleTransform(DP(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=r,n.stopAnimation(),n.attr(DP(r)),AP(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},_onHandleDragEnd:function(e){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,r=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}},IP.prototype.constructor=IP,ci(IP);var JP=IP.extend({makeElOption:function(e,t,n,r,o){var i=n.axis,a=i.grid,s=r.get("type"),l=qP(a,i).getOtherAxis(i).getGlobalExtent(),u=i.toGlobalCoord(i.dataToCoord(t,!0));if(s&&"none"!==s){var c=BP(r),f=YP[s](i,u,l);f.style=c,e.graphicKey=f.type,e.pointer=f}VP(t,e,Pg(a.model,n),n,r,o)},getHandleTransform:function(e,t,n){var r=Pg(t.axis.grid.model,t,{labelInside:!1});return r.labelMargin=n.get("handle.margin"),{position:zP(t.axis,e,r),rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,r){var o=n.axis,i=o.grid,a=o.getGlobalExtent(!0),s=qP(i,o).getOtherAxis(o).getGlobalExtent(),l="x"===o.dim?0:1,u=e.position;u[l]+=t[l],u[l]=Math.min(a[1],u[l]),u[l]=Math.max(a[0],u[l]);var c=(s[1]+s[0])/2,f=[c,c];f[l]=u[l];return{position:u,rotation:e.rotation,cursorPoint:f,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}});function qP(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var YP={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:HP([t,n[0]],[t,n[1]],XP(e))}},shadow:function(e,t,n){var r=Math.max(1,e.getBandWidth()),o=n[1]-n[0];return{type:"Rect",shape:WP([t-r/2,n[0]],[r,o],XP(e))}}};function XP(e){return"x"===e.dim?0:1}_g.registerAxisPointerClass("CartesianAxisPointer",JP),Sp(function(e){if(e){(!e.axisPointer||0===e.axisPointer.length)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!B(t)&&(e.axisPointer.link=[t])}}),Op(Lh.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=vg(e,t)}),Pp({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(e,t,n){var r=e.currTrigger,o=[e.x,e.y],i=e,a=e.dispatchAction||D(n.dispatchAction,n),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){xP(o)&&(o=dP({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},t).point);var l=xP(o),u=i.axesInfo,c=s.axesInfo,f="leave"===r||xP(o),h={},p={},d={list:[],map:{}},y={showPointer:vP(bP,p),showTooltip:vP(wP,d)};yP(s.coordSysMap,function(e,t){var n=l||e.containPoint(o);yP(s.coordSysAxesInfo[t],function(e,t){var r=e.axis,i=function(e,t){for(var n=0;n<(e||[]).length;n++){var r=e[n];if(t.axis.dim===r.axisDim&&t.axis.model.componentIndex===r.axisIndex)return r}}(u,e);if(!f&&n&&(!u||i)){var a=i&&i.value;null!=a||l||(a=r.pointToData(o)),null!=a&&mP(e,a,y,!1,h)}})});var v={};return yP(c,function(e,t){var n=e.linkGroup;n&&!p[t]&&yP(n.axesInfo,function(t,r){var o=p[r];if(t!==e&&o){var i=o.value;n.mapper&&(i=e.axis.scale.parse(n.mapper(i,_P(t),_P(e)))),v[e.key]=i}})}),yP(v,function(e,t){mP(c[t],e,y,!0,h)}),function(e,t,n){var r=n.axesInfo=[];yP(t,function(t,n){var o=t.axisPointerModel.option,i=e[n];i?(!t.useHandle&&(o.status="show"),o.value=i.value,o.seriesDataIndices=(i.payloadBatch||[]).slice()):!t.useHandle&&(o.status="hide"),"show"===o.status&&r.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:o.value})})}(p,c,h),function(e,t,n,r){if(!xP(t)&&e.list.length){var o=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:e.list})}else r({type:"hideTip"})}(d,o,e,a),function(e,t,n){var r=n.getZr(),o=gP(r).axisPointerLastHighlights||{},i=gP(r).axisPointerLastHighlights={};yP(e,function(e,t){var n=e.axisPointerModel.option;"show"===n.status&&yP(n.seriesDataIndices,function(e){var t=e.seriesIndex+" | "+e.dataIndex;i[t]=e})});var a=[],s=[];M(o,function(e,t){!i[t]&&s.push(e)}),M(i,function(e,t){!o[t]&&a.push(e)}),s.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,batch:s}),a.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,batch:a})}(c,0,n),h}});var ZP=["x","y"],QP=["width","height"],KP=IP.extend({makeElOption:function(e,t,n,r,o){var i=n.axis,a=i.coordinateSystem,s=tT(a,1-eT(i)),l=a.dataToPoint(t)[0],u=r.get("type");if(u&&"none"!==u){var c=BP(r),f=$P[u](i,l,s);f.style=c,e.graphicKey=f.type,e.pointer=f}VP(t,e,uP(n),n,r,o)},getHandleTransform:function(e,t,n){var r=uP(t,{labelInside:!1});return r.labelMargin=n.get("handle.margin"),{position:zP(t.axis,e,r),rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,r){var o=n.axis,i=o.coordinateSystem,a=eT(o),s=tT(i,a),l=e.position;l[a]+=t[a],l[a]=Math.min(s[1],l[a]),l[a]=Math.max(s[0],l[a]);var u=tT(i,1-a),c=(u[1]+u[0])/2,f=[c,c];return f[a]=l[a],{position:l,rotation:e.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}}}),$P={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:HP([t,n[0]],[t,n[1]],eT(e))}},shadow:function(e,t,n){var r=e.getBandWidth(),o=n[1]-n[0];return{type:"Rect",shape:WP([t-r/2,n[0]],[r,o],eT(e))}}};function eT(e){return e.isHorizontal()?0:1}function tT(e,t){var n=e.getRect();return[n[ZP[t]],n[ZP[t]]+n[QP[t]]]}_g.registerAxisPointerClass("SingleAxisPointer",KP),Rp({type:"single"});var nT=uf.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){nT.superApply(this,"init",arguments),this.legendVisualProvider=new em(D(this.getData,this),D(this.getRawData,this))},fixData:function(e){var t=e.length,n={},r=[];ai(e,function(e){return n.hasOwnProperty(e[0])||(n[e[0]]=-1),e[2]}).buckets.each(function(e,t){r.push({name:t,dataList:e})});for(var o=r.length,i=0;i<o;++i){for(var a=r[i].name,s=0;s<r[i].dataList.length;++s){var l=r[i].dataList[s][0];n[l]=i}for(var l in n)n.hasOwnProperty(l)&&n[l]!==i&&(n[l]=i,e[t]=[],e[t][0]=l,e[t][1]=0,e[t][2]=a,t++)}return e},getInitialData:function(e,t){for(var n=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),r=j(e.data,function(e){return void 0!==e[2]}),o=this.fixData(r||[]),i=[],a=this.nameMap=re(),s=0,l=0;l<o.length;++l)i.push(o[l][2]),a.get(o[l][2])||(a.set(o[l][2],s),s++);var u=yd(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Gp(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),c=new $p(u,this);return c.initData(o),c},getLayerSeries:function(){for(var e=this.getData(),t=e.count(),n=[],r=0;r<t;++r)n[r]=r;var o=e.mapDimension("single"),i=[];return ai(n,function(t){return e.get("name",t)}).buckets.each(function(t,n){t.sort(function(t,n){return e.get(o,t)-e.get(o,n)}),i.push({name:n,indices:t})}),i},getAxisTooltipData:function(e,t,n){B(e)||(e=e?[e]:[]);for(var r,o=this.getData(),i=this.getLayerSeries(),a=[],s=i.length,l=0;l<s;++l){for(var u=Number.MAX_VALUE,c=-1,f=i[l].indices.length,h=0;h<f;++h){var p=o.get(e[0],i[l].indices[h]),d=Math.abs(p-t);d<=u&&(r=p,u=d,c=i[l].indices[h])}a.push(c)}return{dataIndices:a,nestestValue:r}},formatTooltip:function(e){var t=this.getData(),n=t.getName(e),r=t.get(t.mapDimension("value"),e);return(isNaN(r)||null==r)&&(r="-"),du(n+" : "+r)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});jp({type:"themeRiver",init:function(){this._layers=[]},render:function(e,t,n){var r=e.getData(),o=this.group,i=e.getLayerSeries(),a=r.getLayout("layoutInfo"),s=a.rect,l=a.boundaryGap;function u(e){return e.name}o.attr("position",[0,s.y+l[0]]);var c={};function f(t,n,a){var s=this._layers;if("remove"!==t){for(var l,u,f,h=[],p=[],d=i[n].indices,y=0;y<d.length;y++){var v=r.getItemLayout(d[y]),g=v.x,m=v.y0,b=v.y;h.push([g,m]),p.push([g,m+b]),l=r.getItemVisual(d[y],"color")}var w=r.getItemLayout(d[0]),_=r.getItemModel(d[y-1]),S=_.getModel("label"),O=S.get("margin");if("add"===t){var P=c[n]=new Ln;u=new Pv({shape:{points:h,stackedOnPoints:p,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),f=new Ka({style:{x:w.x-O,y:w.y0+w.y/2}}),P.add(u),P.add(f),o.add(P),u.setClipPath(function(e,t,n){var r=new ys({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return _l(r,{shape:{width:e.width+20,height:e.height+20}},t,n),r}(u.getBoundingRect(),e,function(){u.removeClipPath()}))}else{P=s[a];u=P.childAt(0),f=P.childAt(1),o.add(P),c[n]=P,wl(u,{shape:{points:h,stackedOnPoints:p}},e),wl(f,{style:{x:w.x-O,y:w.y0+w.y/2}},e)}var T=_.getModel("emphasis.itemStyle"),k=_.getModel("itemStyle");hl(f.style,S,{text:S.get("show")?e.getFormattedLabel(d[y-1],"normal")||r.getName(d[y-1]):null,textVerticalAlign:"middle"}),u.setStyle(x({fill:l},k.getItemStyle(["color"]))),al(u,T.getItemStyle())}else o.remove(s[n])}new Dp(this._layersSeries||[],i,u,u).add(D(f,this,"add")).update(D(f,this,"update")).remove(D(f,this,"remove")).execute(),this._layersSeries=i,this._layers=c},dispose:function(){}});function rT(e,t,n){if(e.count())for(var r,o=t.coordinateSystem,i=t.getLayerSeries(),a=e.mapDimension("single"),s=e.mapDimension("value"),l=R(i,function(t){return R(t.indices,function(t){var n=o.dataToPoint(e.get(a,t));return n[1]=e.get(s,t),n})}),u=function(e){for(var t=e.length,n=e[0].length,r=[],o=[],i=0,a={},s=0;s<n;++s){for(var l=0,u=0;l<t;++l)u+=e[l][s][1];u>i&&(i=u),r.push(u)}for(var c=0;c<n;++c)o[c]=(i-r[c])/2;i=0;for(var f=0;f<n;++f){var h=r[f]+o[f];h>i&&(i=h)}return a.y0=o,a.max=i,a}(l),c=u.y0,f=n/u.max,h=i.length,p=i[0].indices.length,d=0;d<p;++d){r=c[d]*f,e.setItemLayout(i[0].indices[d],{layerIndex:0,x:l[0][d][0],y0:r,y:l[0][d][1]*f});for(var y=1;y<h;++y)r+=l[y-1][d][1]*f,e.setItemLayout(i[y].indices[d],{layerIndex:y,x:l[y][d][0],y0:r,y:l[y][d][1]*f})}}kp(function(e,t){e.eachSeriesByType("themeRiver",function(e){var t=e.getData(),n=e.coordinateSystem,r={},o=n.getRect();r.rect=o;var i=e.get("boundaryGap"),a=n.getAxis();r.boundaryGap=i,"horizontal"===a.orient?(i[0]=Ul(i[0],o.height),i[1]=Ul(i[1],o.height),rT(t,e,o.height-i[0]-i[1])):(i[0]=Ul(i[0],o.width),i[1]=Ul(i[1],o.width),rT(t,e,o.width-i[0]-i[1])),t.setLayout("layoutInfo",r)})}),Cp(function(e){e.eachSeriesByType("themeRiver",function(e){var t=e.getData(),n=e.getRawData(),r=e.get("color"),o=re();t.each(function(e){o.set(t.getRawIndex(e),e)}),n.each(function(i){var a=n.getName(i),s=r[(e.nameMap.get(a)-1)%r.length];n.setItemVisual(i,"color",s);var l=o.get(i);null!=l&&t.setItemVisual(l,"color",s)})})}),Op(dm("themeRiver")),uf.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(e,t){var n={name:e.name,children:e.data};!function e(t){var n=0;M(t.children,function(t){e(t);var r=t.value;B(r)&&(r=r[0]),n+=r});var r=t.value;B(r)&&(r=r[0]);(null==r||isNaN(r))&&(r=n);r<0&&(r=0);B(t.value)?t.value[0]=r:t.value=r}(n);var r=R(e.levels||[],function(e){return new Bl(e,this,t)},this),o=Mb.createTree(n,this,function(e){e.wrapMethod("getItemModel",function(e,t){var n=o.getNodeByDataIndex(t),i=r[n.depth];return i&&(e.parentModel=i),e})});return o.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(e){var t=uf.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=Qb(n,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var oT={NONE:"none",DESCENDANT:"descendant",ANCESTOR:"ancestor",SELF:"self"},iT=2,aT=4;function sT(e,t,n){Ln.call(this);var r=new ns({z2:iT});r.seriesIndex=t.seriesIndex;var o=new Ka({z2:aT,silent:e.getModel("label").get("silent")});function i(){o.ignore=o.hoverIgnore}function a(){o.ignore=o.normalIgnore}this.add(r),this.add(o),this.updateData(!0,e,"normal",t,n),this.on("emphasis",i).on("normal",a).on("mouseover",i).on("mouseout",a)}var lT=sT.prototype;lT.updateData=function(e,t,n,r,o){this.node=t,t.piece=this,r=r||this._seriesModel,o=o||this._ecModel;var i=this.childAt(0);i.dataIndex=t.dataIndex;var a=t.getModel(),l=t.getLayout(),u=x({},l);u.label=null;var c=function(e,t,n){var r=e.getVisual("color"),o=e.getVisual("visualMeta");o&&0!==o.length||(r=null);var i=e.getModel("itemStyle").get("color");if(i)return i;if(r)return r;if(0===e.depth)return n.option.color[0];var a=n.option.color.length;i=n.option.color[function(e){var t=e;for(;t.depth>1;)t=t.parentNode;return k(e.getAncestors()[0].children,t)}(e)%a];return i}(t,0,o);!function(e,t,n){t.getData().setItemVisual(e.dataIndex,"color",n)}(t,r,c);var f,h=a.getModel("itemStyle").getItemStyle();"normal"===n?f=h:f=w(a.getModel(n+".itemStyle").getItemStyle(),h);f=S({lineJoin:"bevel",fill:f.fill||c},f),e?(i.setShape(u),i.shape.r=l.r0,wl(i,{shape:{r:l.r}},r,t.dataIndex),i.useStyle(f)):"object"===s(f.fill)&&f.fill.type||"object"===s(i.style.fill)&&i.style.fill.type?(wl(i,{shape:u},r),i.useStyle(f)):wl(i,{shape:u,style:f},r),this._updateLabel(r,c,n);var p=a.getShallow("cursor");if(p&&i.attr("cursor",p),e){var d=r.getShallow("highlightPolicy");this._initEvents(i,t,r,d)}this._seriesModel=r||this._seriesModel,this._ecModel=o||this._ecModel,al(this)},lT.onEmphasis=function(e){var t=this;this.node.hostTree.root.eachNode(function(n){var r,o,i;n.piece&&(t.node===n?n.piece.updateData(!1,n,"emphasis"):(r=n,o=t.node,(i=e)!==oT.NONE&&(i===oT.SELF?r===o:i===oT.ANCESTOR?r===o||r.isAncestorOf(o):r===o||r.isDescendantOf(o))?n.piece.childAt(0).trigger("highlight"):e!==oT.NONE&&n.piece.childAt(0).trigger("downplay")))})},lT.onNormal=function(){this.node.hostTree.root.eachNode(function(e){e.piece&&e.piece.updateData(!1,e,"normal")})},lT.onHighlight=function(){this.updateData(!1,this.node,"highlight")},lT.onDownplay=function(){this.updateData(!1,this.node,"downplay")},lT._updateLabel=function(e,t,n){var r=this.node.getModel(),o=r.getModel("label"),i="normal"===n||"emphasis"===n?o:r.getModel(n+".label"),a=r.getModel("emphasis.label"),s=i.get("formatter")?n:"normal",l=J(e.getFormattedLabel(this.node.dataIndex,s,null,null,"label"),this.node.name);!1===O("show")&&(l="");var u=this.node.getLayout(),c=i.get("minAngle");null==c&&(c=o.get("minAngle")),c=c/180*Math.PI;var f=u.endAngle-u.startAngle;null!=c&&Math.abs(f)<c&&(l="");var h=this.childAt(1);cl(h.style,h.hoverStyle||{},o,a,{defaultText:i.getShallow("show")?l:null,autoColor:t,useInsideStyle:!0});var p,d=(u.startAngle+u.endAngle)/2,y=Math.cos(d),v=Math.sin(d),g=O("position"),m=O("distance")||0,b=O("align");"outside"===g?(p=u.r+m,b=d>Math.PI/2?"right":"left"):b&&"center"!==b?"left"===b?(p=u.r0+m,d>Math.PI/2&&(b="right")):"right"===b&&(p=u.r-m,d>Math.PI/2&&(b="left")):(p=(u.r+u.r0)/2,b="center"),h.attr("style",{text:l,textAlign:b,textVerticalAlign:O("verticalAlign")||"middle",opacity:O("opacity")});var w=p*y+u.cx,_=p*v+u.cy;h.attr("position",[w,_]);var x=O("rotate"),S=0;function O(e){var t=i.get(e);return null==t?o.get(e):t}"radial"===x?(S=-d)<-Math.PI/2&&(S+=Math.PI):"tangential"===x?(S=Math.PI/2-d)>Math.PI/2?S-=Math.PI:S<-Math.PI/2&&(S+=Math.PI):"number"==typeof x&&(S=x*Math.PI/180),h.attr("rotation",S)},lT._initEvents=function(e,t,n,r){e.off("mouseover").off("mouseout").off("emphasis").off("normal");var o=this,i=function(){o.onEmphasis(r)},a=function(){o.onNormal()};n.isAnimationEnabled()&&e.on("mouseover",i).on("mouseout",a).on("emphasis",i).on("normal",a).on("downplay",function(){o.onDownplay()}).on("highlight",function(){o.onHighlight()})},C(sT,Ln);xf.extend({type:"sunburst",init:function(){},render:function(e,t,n,r){var o=this;this.seriesModel=e,this.api=n,this.ecModel=t;var i=e.getData(),a=i.tree.root,s=e.getViewRoot(),l=this.group,u=e.get("renderLabelForZeroData"),c=[];s.eachNode(function(e){c.push(e)});var f=this._oldChildren||[];if(function(n,r){if(0===n.length&&0===r.length)return;function o(e){return e.getId()}function s(o,s){var c=null==o?null:n[o],f=null==s?null:r[s];!function(n,r){u||!n||n.getValue()||(n=null);if(n!==a&&r!==a)if(r&&r.piece)n?(r.piece.updateData(!1,n,"normal",e,t),i.setItemGraphicEl(n.dataIndex,r.piece)):function(e){if(!e)return;e.piece&&(l.remove(e.piece),e.piece=null)}(r);else if(n){var o=new sT(n,e,t);l.add(o),i.setItemGraphicEl(n.dataIndex,o)}}(c,f)}new Dp(r,n,o,o).add(s).update(s).remove(N(s,null)).execute()}(c,f),function(n,r){if(r.depth>0){o.virtualPiece?o.virtualPiece.updateData(!1,n,"normal",e,t):(o.virtualPiece=new sT(n,e,t),l.add(o.virtualPiece)),r.piece._onclickEvent&&r.piece.off("click",r.piece._onclickEvent);var i=function(e){o._rootToNode(r.parentNode)};r.piece._onclickEvent=i,o.virtualPiece.on("click",i)}else o.virtualPiece&&(l.remove(o.virtualPiece),o.virtualPiece=null)}(a,s),r&&r.highlight&&r.highlight.piece){var h=e.getShallow("highlightPolicy");r.highlight.piece.onEmphasis(h)}else if(r&&r.unhighlight){var p=this.virtualPiece;!p&&a.children.length&&(p=a.children[0].piece),p&&p.onNormal()}this._initEvents(),this._oldChildren=c},dispose:function(){},_initEvents:function(){var e=this,t=function(t){var n=!1;e.seriesModel.getViewRoot().eachNode(function(r){if(!n&&r.piece&&r.piece.childAt(0)===t.target){var o=r.getModel().get("nodeClick");if("rootToNode"===o)e._rootToNode(r);else if("link"===o){var i=r.getModel(),a=i.get("link");if(a)Ou(a,i.get("target",!0)||"_blank")}n=!0}})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",t),this.group._onclickEvent=t},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var r=e[0]-n.cx,o=e[1]-n.cy,i=Math.sqrt(r*r+o*o);return i<=n.r&&i>=n.r0}}});var uT="sunburstRootToNode";Pp({type:uT,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(t,n){var r=Yb(e,[uT],t);if(r){var o=t.getViewRoot();o&&(e.direction=Zb(o,r.node)?"rollUp":"drillDown"),t.resetViewRoot(r.node)}})});var cT="sunburstHighlight";Pp({type:cT,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(t,n){var r=Yb(e,[cT],t);r&&(e.highlight=r.node)})});Pp({type:"sunburstUnhighlight",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(t,n){e.unhighlight=!0})});var fT=Math.PI/180;function hT(e,t){return t=t||[0,0],R(["x","y"],function(n,r){var o=this.getAxis(n),i=t[r],a=e[r]/2;return"category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(i-a)-o.dataToCoord(i+a))},this)}Cp(N(sm,"sunburst")),kp(N(function(e,t,n,r){t.eachSeriesByType(e,function(e){var t=e.get("center"),r=e.get("radius");B(r)||(r=[0,r]),B(t)||(t=[t,t]);var o=n.getWidth(),i=n.getHeight(),a=Math.min(o,i),s=Ul(t[0],o),l=Ul(t[1],i),u=Ul(r[0],a/2),c=Ul(r[1],a/2),f=-e.get("startAngle")*fT,h=e.get("minAngle")*fT,p=e.getData().tree.root,d=e.getViewRoot(),y=d.depth,v=e.get("sort");null!=v&&function e(t,n){var r=t.children||[];t.children=function(e,t){if("function"==typeof t)return e.sort(t);var n="asc"===t;return e.sort(function(e,t){var r=(e.getValue()-t.getValue())*(n?1:-1);return 0===r?(e.dataIndex-t.dataIndex)*(n?-1:1):r})}(r,n),r.length&&M(t.children,function(t){e(t,n)})}(d,v);var g=0;M(d.children,function(e){!isNaN(e.getValue())&&g++});var m=d.getValue(),b=Math.PI/(m||g)*2,w=d.depth>0,_=d.height-(w?-1:1),x=(c-u)/(_||1),S=e.get("clockwise"),O=e.get("stillShowZeroSum"),P=S?1:-1;if(w){var T=u,k=u+x,C=2*Math.PI;p.setLayout({angle:C,startAngle:f,endAngle:f+C,clockwise:S,cx:s,cy:l,r0:T,r:k})}!function e(t,n){if(t){var r=n;if(t!==p){var o=t.getValue(),i=0===m&&O?b:o*b;i<h&&(i=h),r=n+P*i;var c=t.depth-y-(w?-1:1),f=u+x*c,d=u+x*(c+1),v=t.getModel();null!=v.get("r0")&&(f=Ul(v.get("r0"),a/2)),null!=v.get("r")&&(d=Ul(v.get("r"),a/2)),t.setLayout({angle:i,startAngle:n,endAngle:r,clockwise:S,cx:s,cy:l,r0:f,r:d})}if(t.children&&t.children.length){var g=0;M(t.children,function(t){g+=e(t,n+g)})}return r-n}}(d,f)})},"sunburst")),Op(N(dm,"sunburst"));function pT(e,t){return t=t||[0,0],R([0,1],function(n){var r=t[n],o=e[n]/2,i=[],a=[];return i[n]=r-o,a[n]=r+o,i[1-n]=a[1-n]=t[1-n],Math.abs(this.dataToPoint(i)[n]-this.dataToPoint(a)[n])},this)}function dT(e,t){var n=this.getAxis(),r=t instanceof Array?t[0]:t,o=(e instanceof Array?e[0]:e)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(r-o)-n.dataToCoord(r+o))}function yT(e,t){return R(["Radius","Angle"],function(n,r){var o=this["get"+n+"Axis"](),i=t[r],a=e[r]/2,s="dataTo"+n,l="category"===o.type?o.getBandWidth():Math.abs(o[s](i-a)-o[s](i+a));return"Angle"===n&&(l=l*Math.PI/180),l},this)}var vT=Rs,gT=["itemStyle"],mT=["emphasis","itemStyle"],bT=["label"],wT=["emphasis","label"],_T="e\0\0",xT={cartesian2d:function(e){var t=e.grid.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:D(hT,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(t){return e.dataToPoint(t)},size:D(pT,e)}}},singleAxis:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:D(dT,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),r=t.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:r[1],r0:r[0]},api:{coord:D(function(r){var o=t.dataToRadius(r[0]),i=n.dataToAngle(r[1]),a=e.coordToPoint([o,i]);return a.push(o,i*Math.PI/180),a}),size:D(yT,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(t,n){return e.dataToPoint(t,n)}}}}};function ST(e,t,n,r,o){null==n[e]||o||(t[e]=n[e],n[e]=r[e])}function OT(e,t,n,o){var i=e.get("renderItem"),a=e.coordinateSystem,s={};a&&(r&&(Q(i,"series.render is required."),Q(a.prepareCustoms||xT[a.type],"This coordSys does not support custom series.")),s=a.prepareCustoms?a.prepareCustoms():xT[a.type](a));var l,u,c,f,h,p=S({getWidth:o.getWidth,getHeight:o.getHeight,getZr:o.getZr,getDevicePixelRatio:o.getDevicePixelRatio,value:function(e,n){return null==n&&(n=l),t.get(t.getDimension(e||0),n)},style:function(n,r){null==r&&(r=l),v(r);var o=u.getModel(gT).getItemStyle();null!=h&&(o.fill=h);var i=t.getItemVisual(r,"opacity");null!=i&&(o.opacity=i);var a=n?ET(n,c):c;return hl(o,a,null,{autoColor:h,isRectText:!0}),o.text=a.getShallow("show")?q(e.getFormattedLabel(r,"normal"),Zy(t,r)):null,n&&AT(o,n),o},styleEmphasis:function(n,r){null==r&&(r=l),v(r);var o=u.getModel(mT).getItemStyle(),i=n?ET(n,f):f;return hl(o,i,null,{isRectText:!0},!0),o.text=i.getShallow("show")?Y(e.getFormattedLabel(r,"emphasis"),e.getFormattedLabel(r,"normal"),Zy(t,r)):null,n&&AT(o,n),o},visual:function(e,n){return null==n&&(n=l),t.getItemVisual(n,e)},barLayout:function(e){if(a.getBaseAxis){var t=a.getBaseAxis();return function(e){var t=[],n=e.axis;if("category"===n.type){for(var r=n.getBandWidth(),o=0;o<e.count;o++)t.push(S({bandWidth:r,axisKey:"axis0",stackId:Dd+o},e));var i=Vd(t),a=[];for(o=0;o<e.count;o++){var s=i.axis0[Dd+o];s.offsetCenter=s.offset+s.width/2,a.push(s)}return a}}(S({axis:t},e))}},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(e){return ml(e,n)}},s.api||{}),d={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:s.coordSys,dataInsideLength:t.count(),encode:function(e){var t={};return M(e.dimensions,function(n,r){var o=e.getDimensionInfo(n);if(!o.isExtraCoord){var i=o.coordDim;(t[i]=t[i]||[])[o.coordDimIndex]=r}}),t}(e.getData())},y=!0;return function(e,n){return l=e,y=!0,i&&i(S({dataIndexInside:e,dataIndex:t.getRawIndex(e),actionType:n?n.type:null},d),p)};function v(e){null==e&&(e=l),y&&(u=t.getItemModel(e),c=u.getModel(bT),f=u.getModel(wT),h=t.getItemVisual(e,"color"),y=!1)}}function PT(e,t,n,r,o,i){return(e=TT(e,t,n,r,o,i,!0))&&i.setItemGraphicEl(t,e),e}function TT(e,t,n,o,i,a,s){var l,u=!n,c=(n=n||{}).type,f=n.shape,h=n.style;if(e&&(u||null!=c&&c!==e.__customGraphicType||"path"===c&&((l=f)&&(l.hasOwnProperty("pathData")||l.hasOwnProperty("d")))&&RT(f)!==e.__customPathData||"image"===c&&IT(h,"image")&&h.image!==e.__customImagePath||"text"===c&&IT(f,"text")&&h.text!==e.__customText)&&(i.remove(e),e=null),!u){var p=!e;return!e&&(e=function(e){var t,n=e.type;if("path"===n){var o=e.shape,i=null!=o.width&&null!=o.height?{x:o.x||0,y:o.y||0,width:o.width,height:o.height}:null,a=RT(o);(t=zs(a,null,i,o.layout||"center")).__customPathData=a}else if("image"===n)(t=new io({})).__customImagePath=e.style.image;else if("text"===n)(t=new Ka({})).__customText=e.style.text;else if("group"===n)t=new Ln;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');var s=Gs(n);r&&Q(s,'graphic type "'+n+'" can not be found.'),t=new s}return t.__customGraphicType=n,t.name=e.name,t}(n)),function(e,t,n,r,o,i,a){var s={},l=n.style||{};if(n.shape&&(s.shape=b(n.shape)),n.position&&(s.position=n.position.slice()),n.scale&&(s.scale=n.scale.slice()),n.origin&&(s.origin=n.origin.slice()),n.rotation&&(s.rotation=n.rotation),"image"===e.type&&n.style){var u=s.style={};M(["x","y","width","height"],function(t){ST(t,u,l,e.style,i)})}"text"===e.type&&n.style&&(u=s.style={},M(["x","y"],function(t){ST(t,u,l,e.style,i)}),!l.hasOwnProperty("textFill")&&l.fill&&(l.textFill=l.fill),!l.hasOwnProperty("textStroke")&&l.stroke&&(l.textStroke=l.stroke));if("group"!==e.type&&(e.useStyle(l),i)){e.style.opacity=0;var c=l.opacity;null==c&&(c=1),_l(e,{style:{opacity:c}},r,t)}i?e.attr(s):wl(e,s,r,t),n.hasOwnProperty("z2")&&e.attr("z2",n.z2||0),n.hasOwnProperty("silent")&&e.attr("silent",n.silent),n.hasOwnProperty("invisible")&&e.attr("invisible",n.invisible),n.hasOwnProperty("ignore")&&e.attr("ignore",n.ignore),n.hasOwnProperty("info")&&e.attr("info",n.info);var f=n.styleEmphasis;el(e,f),a&&sl(e,!1!==f)}(e,t,n,o,0,p,s),"group"===c&&function(e,t,n,o,i){var a=n.children,s=a?a.length:0,l=n.$mergeChildren,u="byName"===l||n.diffChildrenByName,c=!1===l;if(!s&&!u&&!c)return;if(u)return void new Dp((f={oldChildren:e.children()||[],newChildren:a||[],dataIndex:t,animatableModel:o,group:e,data:i}).oldChildren,f.newChildren,kT,kT,f).add(CT).update(CT).remove(MT).execute();var f;c&&e.removeAll();for(var h=0;h<s;h++)a[h]&&TT(e.childAt(h),t,a[h],o,e,i);r&&Q(!c||e.childCount()===h,"MUST NOT contain empty item in children array when `group.$mergeChildren` is `false`.")}(e,t,n,o,a),i.add(e),e}}function kT(e,t){var n=e&&e.name;return null!=n?n:_T+t}function CT(e,t){var n=this.context,r=null!=e?n.newChildren[e]:null;TT(null!=t?n.oldChildren[t]:null,n.dataIndex,r,n.animatableModel,n.group,n.data)}function ET(e,t){var n=new Bl({},t);return M(vT,function(t,r){e.hasOwnProperty(t)&&(n.option[r]=e[t])}),n}function AT(e,t){for(var n in t)!t.hasOwnProperty(n)&&vT.hasOwnProperty(n)||(e[n]=t[n])}function MT(e){var t=this.context,n=t.oldChildren[e];n&&t.group.remove(n)}function RT(e){return e&&(e.pathData||e.d)}function IT(e,t){return e&&e.hasOwnProperty(t)}function jT(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function LT(e,t){return t.dim+e.model.componentIndex}function DT(e,t){Uy.call(this,"radius",e,t),this.type="category"}uf.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(e,t){return xd(this.getSource(),this)},getDataParams:function(e,t,n){var r=uf.prototype.getDataParams.apply(this,arguments);return n&&(r.info=n.info),r}}),xf.extend({type:"custom",_data:null,render:function(e,t,n,r){var o=this._data,i=e.getData(),a=this.group,s=OT(e,i,t,n);i.diff(o).add(function(t){PT(null,t,s(t,r),e,a,i)}).update(function(t,n){PT(o.getItemGraphicEl(n),t,s(t,r),e,a,i)}).remove(function(e){var t=o.getItemGraphicEl(e);t&&a.remove(t)}).execute();var l=e.get("clip",!0)?Cv(e.coordinateSystem,!1,e):null;l?a.setClipPath(l):a.removeClipPath(),this._data=i},incrementalPrepareRender:function(e,t,n){this.group.removeAll(),this._data=null},incrementalRender:function(e,t,n,r,o){var i=t.getData(),a=OT(t,i,n,r);function s(e){e.isGroup||(e.incremental=!0,e.useHoverLayer=!0)}for(var l=e.start;l<e.end;l++){PT(null,l,a(l,o),t,this.group,i).traverse(s)}},dispose:ie,filterForExposedEvent:function(e,t,n,r){var o=t.element;if(null==o||n.name===o)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1}}),DT.prototype={constructor:DT,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToRadius:Uy.prototype.dataToCoord,radiusToData:Uy.prototype.coordToData},C(DT,Uy);var NT=ei();function BT(e,t){t=t||[0,360],Uy.call(this,"angle",e,t),this.type="category"}BT.prototype={constructor:BT,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToAngle:Uy.prototype.dataToCoord,angleToData:Uy.prototype.coordToData,calculateCategoryInterval:function(){var e=this.getLabelModel(),t=this.scale,n=t.getExtent(),r=t.count();if(n[1]-n[0]<1)return 0;var o=n[0],i=this.dataToCoord(o+1)-this.dataToCoord(o),a=Math.abs(i),s=wr(o,e.getFont(),"center","top"),l=Math.max(s.height,7)/a;isNaN(l)&&(l=1/0);var u=Math.max(0,Math.floor(l)),c=NT(this.model),f=c.lastAutoInterval,h=c.lastTickCount;return null!=f&&null!=h&&Math.abs(f-u)<=1&&Math.abs(h-r)<=1&&f>u?u=f:(c.lastTickCount=r,c.lastAutoInterval=u),u}},C(BT,Uy);var FT=function(e){this.name=e||"",this.cx=0,this.cy=0,this._radiusAxis=new DT,this._angleAxis=new BT,this._radiusAxis.polar=this._angleAxis.polar=this};FT.prototype={type:"polar",axisPointerEnabled:!0,constructor:FT,dimensions:["radius","angle"],model:null,containPoint:function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},containData:function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},getAxis:function(e){return this["_"+e+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(e){var t=[],n=this._angleAxis,r=this._radiusAxis;return n.scale.type===e&&t.push(n),r.scale.type===e&&t.push(r),t},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},dataToPoint:function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},pointToData:function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},pointToCoord:function(e){var t=e[0]-this.cx,n=e[1]-this.cy,r=this.getAngleAxis(),o=r.getExtent(),i=Math.min(o[0],o[1]),a=Math.max(o[0],o[1]);r.inverse?i=a-360:a=i+360;var s=Math.sqrt(t*t+n*n);t/=s,n/=s;for(var l=Math.atan2(-n,t)/Math.PI*180,u=l<i?1:-1;l<i||l>a;)l+=360*u;return[s,l]},coordToPoint:function(e){var t=e[0],n=e[1]/180*Math.PI;return[Math.cos(n)*t+this.cx,-Math.sin(n)*t+this.cy]},getArea:function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var n=e.getExtent(),r=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-n[0]*r,endAngle:-n[1]*r,clockwise:e.inverse,contain:function(e,t){var n=e-this.cx,r=t-this.cy,o=n*n+r*r,i=this.r,a=this.r0;return o<=i*i&&o>=a*a}}}};var GT=Fu.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});w(GT.prototype,gy);var zT={splitNumber:5};function VT(e,t){return t.type||(t.data?"category":"value")}function HT(e,t){var n=this,r=n.getAngleAxis(),o=n.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),e.eachSeries(function(e){if(e.coordinateSystem===n){var t=e.getData();M(t.mapDimension("radius",!0),function(e){o.scale.unionExtentFromData(t,_d(t,e))}),M(t.mapDimension("angle",!0),function(e){r.scale.unionExtentFromData(t,_d(t,e))})}}),fy(r.scale,r.model),fy(o.scale,o.model),"category"===r.type&&!r.onBand){var i=r.getExtent(),a=360/r.scale.count();r.inverse?i[1]+=a:i[1]-=a,r.setExtent(i[0],i[1])}}function WT(e,t){if(e.type=t.get("type"),e.scale=hy(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),"angleAxis"===t.mainType){e.inverse^=t.get("clockwise");var n=t.get("startAngle");e.setExtent(n,n+(e.inverse?-360:360))}t.axis=e,e.model=t}Jv("angle",GT,VT,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),Jv("radius",GT,VT,zT),Mp({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(e){var t;return this.ecModel.eachComponent(e,function(e){e.getCoordSysModel()===this&&(t=e)},this),t},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}});var UT={dimensions:FT.prototype.dimensions,create:function(e,t){var n=[];return e.eachComponent("polar",function(e,r){var o=new FT(r);o.update=HT;var i=o.getRadiusAxis(),a=o.getAngleAxis(),s=e.findAxisModel("radiusAxis"),l=e.findAxisModel("angleAxis");WT(i,s),WT(a,l),function(e,t,n){var r=t.get("center"),o=n.getWidth(),i=n.getHeight();e.cx=Ul(r[0],o),e.cy=Ul(r[1],i);var a=e.getRadiusAxis(),s=Math.min(o,i)/2,l=t.get("radius");null==l?l=[0,"100%"]:B(l)||(l=[0,l]),l=[Ul(l[0],s),Ul(l[1],s)],a.inverse?a.setExtent(l[1],l[0]):a.setExtent(l[0],l[1])}(o,e,t),n.push(o),e.coordinateSystem=o,o.model=e}),e.eachSeries(function(t){if("polar"===t.get("coordinateSystem")){var n=e.queryComponents({mainType:"polar",index:t.get("polarIndex"),id:t.get("polarId")})[0];if(r&&!n)throw new Error('Polar "'+J(t.get("polarIndex"),t.get("polarId"),0)+'" not found');t.coordinateSystem=n.coordinateSystem}}),n}};gc.register("polar",UT);var JT=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function qT(e,t,n){t[1]>t[0]&&(t=t.slice().reverse());var r=e.coordToPoint([t[0],n]),o=e.coordToPoint([t[1],n]);return{x1:r[0],y1:r[1],x2:o[0],y2:o[1]}}function YT(e){return e.getRadiusAxis().inverse?0:1}function XT(e){var t=e[0],n=e[e.length-1];t&&n&&Math.abs(Math.abs(t.coord-n.coord)-360)<1e-4&&e.pop()}_g.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,r=n.polar,o=r.getRadiusAxis().getExtent(),i=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=R(n.getViewLabels(),function(e){return(e=b(e)).coord=n.dataToCoord(e.tickValue),e});XT(s),XT(i),M(JT,function(t){!e.get(t+".show")||n.scale.isBlank()&&"axisLine"!==t||this["_"+t](e,r,i,a,o,s)},this)}},_axisLine:function(e,t,n,r,o){var i,a=e.getModel("axisLine.lineStyle"),s=YT(t),l=s?0:1;(i=0===o[l]?new $a({shape:{cx:t.cx,cy:t.cy,r:o[s]},style:a.getLineStyle(),z2:1,silent:!0}):new rs({shape:{cx:t.cx,cy:t.cy,r:o[s],r0:o[l]},style:a.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(i)},_axisTick:function(e,t,n,r,o){var i=e.getModel("axisTick"),a=(i.get("inside")?-1:1)*i.get("length"),s=o[YT(t)],l=R(n,function(e){return new gs({shape:qT(t,[s,s+a],e.coord)})});this.group.add(Ws(l,{style:S(i.getModel("lineStyle").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})}))},_minorTick:function(e,t,n,r,o){if(r.length){for(var i=e.getModel("axisTick"),a=e.getModel("minorTick"),s=(i.get("inside")?-1:1)*a.get("length"),l=o[YT(t)],u=[],c=0;c<r.length;c++)for(var f=0;f<r[c].length;f++)u.push(new gs({shape:qT(t,[l,l+s],r[c][f].coord)}));this.group.add(Ws(u,{style:S(a.getModel("lineStyle").getLineStyle(),S(i.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(e,t,n,r,o,i){var a=e.getCategories(!0),s=e.getModel("axisLabel"),l=s.get("margin"),u=e.get("triggerEvent");M(i,function(n,r){var i=s,c=n.tickValue,f=o[YT(t)],h=t.coordToPoint([f+l,n.coord]),p=t.cx,d=t.cy,y=Math.abs(h[0]-p)/f<.3?"center":h[0]>p?"left":"right",v=Math.abs(h[1]-d)/f<.3?"middle":h[1]>d?"top":"bottom";a&&a[c]&&a[c].textStyle&&(i=new Bl(a[c].textStyle,s,s.ecModel));var g=new Ka({silent:ig.isLabelSilent(e)});this.group.add(g),hl(g.style,i,{x:h[0],y:h[1],textFill:i.getTextColor()||e.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:y,textVerticalAlign:v}),u&&(g.eventData=ig.makeAxisEventDataBase(e),g.eventData.targetType="axisLabel",g.eventData.value=n.rawLabel)},this)},_splitLine:function(e,t,n,r,o){var i=e.getModel("splitLine").getModel("lineStyle"),a=i.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=0;u<n.length;u++){var c=s++%a.length;l[c]=l[c]||[],l[c].push(new gs({shape:qT(t,o,n[u].coord)}))}for(u=0;u<l.length;u++)this.group.add(Ws(l[u],{style:S({stroke:a[u%a.length]},i.getLineStyle()),silent:!0,z:e.get("z")}))},_minorSplitLine:function(e,t,n,r,o){if(r.length){for(var i=e.getModel("minorSplitLine").getModel("lineStyle"),a=[],s=0;s<r.length;s++)for(var l=0;l<r[s].length;l++)a.push(new gs({shape:qT(t,o,r[s][l].coord)}));this.group.add(Ws(a,{style:i.getLineStyle(),silent:!0,z:e.get("z")}))}},_splitArea:function(e,t,n,r,o){if(n.length){var i=e.getModel("splitArea").getModel("areaStyle"),a=i.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=Math.PI/180,c=-n[0].coord*u,f=Math.min(o[0],o[1]),h=Math.max(o[0],o[1]),p=e.get("clockwise"),d=1;d<n.length;d++){var y=s++%a.length;l[y]=l[y]||[],l[y].push(new ns({shape:{cx:t.cx,cy:t.cy,r0:f,r:h,startAngle:c,endAngle:-n[d].coord*u,clockwise:p},silent:!0})),c=-n[d].coord*u}for(d=0;d<l.length;d++)this.group.add(Ws(l[d],{style:S({fill:a[d%a.length]},i.getAreaStyle()),silent:!0}))}}});var ZT=["axisLine","axisTickLabel","axisName"],QT=["splitLine","splitArea","minorSplitLine"];_g.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,r=n.polar,o=r.getAngleAxis(),i=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=o.getExtent()[0],l=n.getExtent(),u=function(e,t,n){return{position:[e.cx,e.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}(r,e,s),c=new ig(e,u);M(ZT,c.add,c),this.group.add(c.getGroup()),M(QT,function(t){e.get(t+".show")&&!n.scale.isBlank()&&this["_"+t](e,r,s,l,i,a)},this)}},_splitLine:function(e,t,n,r,o){var i=e.getModel("splitLine").getModel("lineStyle"),a=i.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=0;u<o.length;u++){var c=s++%a.length;l[c]=l[c]||[],l[c].push(new $a({shape:{cx:t.cx,cy:t.cy,r:o[u].coord}}))}for(u=0;u<l.length;u++)this.group.add(Ws(l[u],{style:S({stroke:a[u%a.length],fill:null},i.getLineStyle()),silent:!0}))},_minorSplitLine:function(e,t,n,r,o,i){if(i.length){for(var a=e.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<i.length;l++)for(var u=0;u<i[l].length;u++)s.push(new $a({shape:{cx:t.cx,cy:t.cy,r:i[l][u].coord}}));this.group.add(Ws(s,{style:S({fill:null},a.getLineStyle()),silent:!0}))}},_splitArea:function(e,t,n,r,o){if(o.length){var i=e.getModel("splitArea").getModel("areaStyle"),a=i.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=o[0].coord,c=1;c<o.length;c++){var f=s++%a.length;l[f]=l[f]||[],l[f].push(new ns({shape:{cx:t.cx,cy:t.cy,r0:u,r:o[c].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),u=o[c].coord}for(c=0;c<l.length;c++)this.group.add(Ws(l[c],{style:S({fill:a[c%a.length]},i.getAreaStyle()),silent:!0}))}}});var KT=IP.extend({makeElOption:function(e,t,n,r,o){var i=n.axis;"angle"===i.dim&&(this.animationThreshold=Math.PI/18);var a,s=i.polar,l=s.getOtherAxis(i).getExtent();a=i["dataTo"+xu(i.dim)](t);var u=r.get("type");if(u&&"none"!==u){var c=BP(r),f=$T[u](i,s,a,l,c);f.style=c,e.graphicKey=f.type,e.pointer=f}FP(e,n,r,o,function(e,t,n,r,o){var i=t.axis,a=i.dataToCoord(e),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,u,c,f=r.getRadiusAxis().getExtent();if("radius"===i.dim){var h=ut();dt(h,h,s),pt(h,h,[r.cx,r.cy]),l=Sl([a,-o],h);var p=t.getModel("axisLabel").get("rotate")||0,d=ig.innerTextLayout(s,p*Math.PI/180,-1);u=d.textAlign,c=d.textVerticalAlign}else{var y=f[1];l=r.coordToPoint([y+o,a]);var v=r.cx,g=r.cy;u=Math.abs(l[0]-v)/y<.3?"center":l[0]>v?"left":"right",c=Math.abs(l[1]-g)/y<.3?"middle":l[1]>g?"top":"bottom"}return{position:l,align:u,verticalAlign:c}}(t,n,0,s,r.get("label.margin")))}});var $T={line:function(e,t,n,r,o){return"angle"===e.dim?{type:"Line",shape:HP(t.coordToPoint([r[0],n]),t.coordToPoint([r[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(e,t,n,r,o){var i=Math.max(1,e.getBandWidth()),a=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:UP(t.cx,t.cy,r[0],r[1],(-n-i/2)*a,(i/2-n)*a)}:{type:"Sector",shape:UP(t.cx,t.cy,n-i/2,n+i/2,0,2*Math.PI)}}};function ek(e,t){t.update="updateView",Pp(t,function(t,n){var r={};return n.eachComponent({mainType:"geo",query:t},function(n){n[e](t.name),M(n.coordinateSystem.regions,function(e){r[e.name]=n.isSelected(e.name)||!1})}),{selected:r,name:t.name}})}_g.registerAxisPointerClass("PolarAxisPointer",KT),kp(N(function(e,t,n){var r={},o=function(e,t){var n={};M(e,function(e,t){var r=e.getData(),o=e.coordinateSystem,i=o.getBaseAxis(),a=LT(o,i),s=i.getExtent(),l="category"===i.type?i.getBandWidth():Math.abs(s[1]-s[0])/r.count(),u=n[a]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=u.stacks;n[a]=u;var f=jT(e);c[f]||u.autoWidthCount++,c[f]=c[f]||{width:0,maxWidth:0};var h=Ul(e.get("barWidth"),l),p=Ul(e.get("barMaxWidth"),l),d=e.get("barGap"),y=e.get("barCategoryGap");h&&!c[f].width&&(h=Math.min(u.remainedWidth,h),c[f].width=h,u.remainedWidth-=h),p&&(c[f].maxWidth=p),null!=d&&(u.gap=d),null!=y&&(u.categoryGap=y)});var r={};return M(n,function(e,t){r[t]={};var n=e.stacks,o=e.bandWidth,i=Ul(e.categoryGap,o),a=Ul(e.gap,1),s=e.remainedWidth,l=e.autoWidthCount,u=(s-i)/(l+(l-1)*a);u=Math.max(u,0),M(n,function(e,t){var n=e.maxWidth;n&&n<u&&(n=Math.min(n,s),e.width&&(n=Math.min(n,e.width)),s-=n,e.width=n,l--)}),u=(s-i)/(l+(l-1)*a),u=Math.max(u,0);var c,f=0;M(n,function(e,t){e.width||(e.width=u),c=e,f+=e.width*(1+a)}),c&&(f-=c.width*a);var h=-f/2;M(n,function(e,n){r[t][n]=r[t][n]||{offset:h,width:e.width},h+=e.width*(1+a)})}),r}(j(t.getSeriesByType(e),function(e){return!t.isSeriesFiltered(e)&&e.coordinateSystem&&"polar"===e.coordinateSystem.type}));t.eachSeriesByType(e,function(e){if("polar"===e.coordinateSystem.type){var t=e.getData(),n=e.coordinateSystem,i=n.getBaseAxis(),a=LT(n,i),s=jT(e),l=o[a][s],u=l.offset,c=l.width,f=n.getOtherAxis(i),h=e.coordinateSystem.cx,p=e.coordinateSystem.cy,d=e.get("barMinHeight")||0,y=e.get("barMinAngle")||0;r[s]=r[s]||[];for(var v=t.mapDimension(f.dim),g=t.mapDimension(i.dim),m=wd(t,v),b="radius"!==i.dim||!e.get("roundCap",!0),w="radius"===f.dim?f.dataToRadius(0):f.dataToAngle(0),_=0,x=t.count();_<x;_++){var S,O,P,T,k=t.get(v,_),C=t.get(g,_),E=k>=0?"p":"n",A=w;if(m&&(r[s][C]||(r[s][C]={p:w,n:w}),A=r[s][C][E]),"radius"===f.dim){var M=f.dataToRadius(k)-w,R=i.dataToAngle(C);Math.abs(M)<d&&(M=(M<0?-1:1)*d),S=A,O=A+M,T=(P=R-u)-c,m&&(r[s][C][E]=O)}else{var I=f.dataToAngle(k,b)-w,j=i.dataToRadius(C);Math.abs(I)<y&&(I=(I<0?-1:1)*y),O=(S=j+u)+c,P=A,T=A+I,m&&(r[s][C][E]=T)}t.setItemLayout(_,{cx:h,cy:p,r0:S,r:O,startAngle:-P*Math.PI/180,endAngle:-T*Math.PI/180})}}},this)},"bar")),Rp({type:"polar"}),E(Fu.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(e){Fu.prototype.init.apply(this,arguments),Jo(e,"label",["show"])},optionUpdated:function(){var e=this.option,t=this;e.regions=bb.getFilledRegions(e.regions,e.map,e.nameMap),this._optionModelMap=I(e.regions||[],function(e,n){return n.name&&e.set(n.name,new Bl(n,t)),e},re()),this.updateSelectedMap(e.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(e){return this._optionModelMap.get(e)||new Bl(null,this,this.ecModel)},getFormattedLabel:function(e,t){t=t||"normal";var n=this.getRegionModel(e).get(("normal"===t?"":t+".")+"label.formatter"),r={name:e};return"function"==typeof n?(r.status=t,n(r)):"string"==typeof n?n.replace("{a}",null!=e?e:""):void 0},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e}}),$g),Rp({type:"geo",init:function(e,t){var n=new ib(t,!0);this._mapDraw=n,this.group.add(n.group)},render:function(e,t,n,r){if(!r||"geoToggleSelect"!==r.type||r.from!==this.uid){var o=this._mapDraw;e.get("show")?o.draw(e,t,n,this,r):this._mapDraw.group.removeAll(),this.group.silent=e.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),ek("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),ek("select",{type:"geoSelect",event:"geoselected"}),ek("unSelect",{type:"geoUnSelect",event:"geounselected"});function tk(e,t,n){this._model=e}function nk(e,t,n,r){var o=n.calendarModel,i=n.seriesModel,a=o?o.coordinateSystem:i?i.coordinateSystem:null;return a===this?a[e](r):null}tk.prototype={constructor:tk,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(e){var t=(e=nu(e)).getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var r=e.getDate();r=r<10?"0"+r:r;var o=e.getDay();return{y:t,m:n,d:r,day:o=Math.abs((o+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+n+"-"+r,date:e}},getNextNDay:function(e,t){return 0===(t=t||0)?this.getDateInfo(e):((e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e))},update:function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,r=["width","height"],o=this._model.get("cellSize").slice(),i=this._model.getBoxLayoutParams(),a="horizontal"===this._orient?[n,7]:[7,n];M([0,1],function(e){u(o,e)&&(i[r[e]]=o[e]*a[e])});var s={width:t.getWidth(),height:t.getHeight()},l=this._rect=Mu(i,s);function u(e,t){return null!=e[t]&&"auto"!==e[t]}M([0,1],function(e){u(o,e)||(o[e]=l[r[e]]/a[e])}),this._sw=o[0],this._sh=o[1]},dataToPoint:function(e,t){B(e)&&(e=e[0]),null==t&&(t=!0);var n=this.getDateInfo(e),r=this._rangeInfo,o=n.formatedDate;if(t&&!(n.time>=r.start.time&&n.time<r.end.time+864e5))return[NaN,NaN];var i=n.day,a=this._getRangeInfo([r.start.time,o]).nthWeek;return"vertical"===this._orient?[this._rect.x+i*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+i*this._sh+this._sh/2]},pointToData:function(e){var t=this.pointToDate(e);return t&&t.time},dataToRect:function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,r=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,t-1,r):this._getDateByWeeksAndDay(t,n-1,r)},convertToPixel:N(nk,"dataToPoint"),convertFromPixel:N(nk,"pointToData"),_initRangeOption:function(){var e=this._model.get("range"),t=e;if(B(t)&&1===t.length&&(t=t[0]),/^\d{4}$/.test(t)&&(e=[t+"-01-01",t+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(t)){var n=this.getDateInfo(t),r=n.date;r.setMonth(r.getMonth()+1);var o=this.getNextNDay(r,-1);e=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(t)&&(e=[t,t]);var i=this._getRangeInfo(e);return i.start.time>i.end.time&&e.reverse(),e},_getRangeInfo:function(e){var t;(e=[this.getDateInfo(e[0]),this.getDateInfo(e[1])])[0].time>e[1].time&&(t=!0,e.reverse());var n=Math.floor(e[1].time/864e5)-Math.floor(e[0].time/864e5)+1,r=new Date(e[0].time),o=r.getDate(),i=e[1].date.getDate();r.setDate(o+n-1);var a=r.getDate();if(a!==i)for(var s=r.getTime()-e[1].time>0?1:-1;(a=r.getDate())!==i&&(r.getTime()-e[1].time)*s>0;)n-=s,r.setDate(a-s);var l=Math.floor((n+e[0].day+6)/7),u=t?1-l:l-1;return t&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:l,nthWeek:u,fweek:e[0].day,lweek:e[1].day}},_getDateByWeeksAndDay:function(e,t,n){var r=this._getRangeInfo(n);if(e>r.weeks||0===e&&t<r.fweek||e===r.weeks&&t>r.lweek)return!1;var o=7*(e-1)-r.fweek+t,i=new Date(r.start.time);return i.setDate(r.start.d+o),this.getDateInfo(i)}},tk.dimensions=tk.prototype.dimensions,tk.getDimensionsInfo=tk.prototype.getDimensionsInfo,tk.create=function(e,t){var n=[];return e.eachComponent("calendar",function(r){var o=new tk(r,e,t);n.push(o),r.coordinateSystem=o}),e.eachSeries(function(e){"calendar"===e.get("coordinateSystem")&&(e.coordinateSystem=n[e.get("calendarIndex")||0])}),n},gc.register("calendar",tk);var rk=Fu.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(e,t,n,r){var o=ju(e);rk.superApply(this,"init",arguments),ok(e,o)},mergeOption:function(e,t){rk.superApply(this,"mergeOption",arguments),ok(this.option,e)}});function ok(e,t){var n=e.cellSize;B(n)?1===n.length&&(n[1]=n[0]):n=e.cellSize=[n,n];var r=R([0,1],function(e){return function(e,t){return null!=e[Cu[t][0]]||null!=e[Cu[t][1]]&&null!=e[Cu[t][2]]}(t,e)&&(n[e]="auto"),null!=n[e]&&"auto"!==n[e]});Iu(e,t,{type:"box",ignoreSize:r})}var ik={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["ä¸æ","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ","åäºæ"]},ak={EN:["S","M","T","W","T","F","S"],CN:["æ¥","ä¸","äº","ä¸","å","äº","å­"]};Rp({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(e,t,n){var r=this.group;r.removeAll();var o=e.coordinateSystem,i=o.getRangeInfo(),a=o.getOrient();this._renderDayRect(e,i,r),this._renderLines(e,i,a,r),this._renderYearText(e,i,a,r),this._renderMonthText(e,a,r),this._renderWeekText(e,i,a,r)},_renderDayRect:function(e,t,n){for(var r=e.coordinateSystem,o=e.getModel("itemStyle").getItemStyle(),i=r.getCellWidth(),a=r.getCellHeight(),s=t.start.time;s<=t.end.time;s=r.getNextNDay(s,1).time){var l=r.dataToRect([s],!1).tl,u=new ys({shape:{x:l[0],y:l[1],width:i,height:a},cursor:"default",style:o});n.add(u)}},_renderLines:function(e,t,n,r){var o=this,i=e.coordinateSystem,a=e.getModel("splitLine.lineStyle").getLineStyle(),s=e.get("splitLine.show"),l=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var u=t.start,c=0;u.time<=t.end.time;c++){h(u.formatedDate),0===c&&(u=i.getDateInfo(t.start.y+"-"+t.start.m));var f=u.date;f.setMonth(f.getMonth()+1),u=i.getDateInfo(f)}function h(t){o._firstDayOfMonth.push(i.getDateInfo(t)),o._firstDayPoints.push(i.dataToRect([t],!1).tl);var l=o._getLinePointsOfOneWeek(e,t,n);o._tlpoints.push(l[0]),o._blpoints.push(l[l.length-1]),s&&o._drawSplitline(l,a,r)}h(i.getNextNDay(t.end.time,1).formatedDate),s&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,l,n),a,r),s&&this._drawSplitline(o._getEdgesPoints(o._blpoints,l,n),a,r)},_getEdgesPoints:function(e,t,n){var r=[e[0].slice(),e[e.length-1].slice()],o="horizontal"===n?0:1;return r[0][o]=r[0][o]-t/2,r[1][o]=r[1][o]+t/2,r},_drawSplitline:function(e,t,n){var r=new us({z2:20,shape:{points:e},style:t});n.add(r)},_getLinePointsOfOneWeek:function(e,t,n){var r=e.coordinateSystem;t=r.getDateInfo(t);for(var o=[],i=0;i<7;i++){var a=r.getNextNDay(t.time,i),s=r.dataToRect([a.time],!1);o[2*a.day]=s.tl,o[2*a.day+1]=s["horizontal"===n?"bl":"tr"]}return o},_formatterLabel:function(e,t){return"string"==typeof e&&e?mu(e,t):"function"==typeof e?e(t):t.nameMap},_yearTextPositionControl:function(e,t,n,r,o){t=t.slice();var i=["center","bottom"];"bottom"===r?(t[1]+=o,i=["center","top"]):"left"===r?t[0]-=o:"right"===r?(t[0]+=o,i=["center","top"]):t[1]-=o;var a=0;return"left"!==r&&"right"!==r||(a=Math.PI/2),{rotation:a,position:t,style:{textAlign:i[0],textVerticalAlign:i[1]}}},_renderYearText:function(e,t,n,r){var o=e.getModel("yearLabel");if(o.get("show")){var i=o.get("margin"),a=o.get("position");a||(a="horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,u=(s[0][1]+s[1][1])/2,c="horizontal"===n?0:1,f={top:[l,s[c][1]],bottom:[l,s[1-c][1]],left:[s[1-c][0],u],right:[s[c][0],u]},h=t.start.y;+t.end.y>+t.start.y&&(h=h+"-"+t.end.y);var p=o.get("formatter"),d={start:t.start.y,end:t.end.y,nameMap:h},y=this._formatterLabel(p,d),v=new Ka({z2:30});hl(v.style,o,{text:y}),v.attr(this._yearTextPositionControl(v,f[a],n,a,i)),r.add(v)}},_monthTextPositionControl:function(e,t,n,r,o){var i="left",a="top",s=e[0],l=e[1];return"horizontal"===n?(l+=o,t&&(i="center"),"start"===r&&(a="bottom")):(s+=o,t&&(a="middle"),"start"===r&&(i="right")),{x:s,y:l,textAlign:i,textVerticalAlign:a}},_renderMonthText:function(e,t,n){var r=e.getModel("monthLabel");if(r.get("show")){var o=r.get("nameMap"),i=r.get("margin"),a=r.get("position"),s=r.get("align"),l=[this._tlpoints,this._blpoints];G(o)&&(o=ik[o.toUpperCase()]||[]);var u="start"===a?0:1,c="horizontal"===t?0:1;i="start"===a?-i:i;for(var f="center"===s,h=0;h<l[u].length-1;h++){var p=l[u][h].slice(),d=this._firstDayOfMonth[h];if(f){var y=this._firstDayPoints[h];p[c]=(y[c]+l[0][h+1][c])/2}var v=r.get("formatter"),g=o[+d.m-1],m={yyyy:d.y,yy:(d.y+"").slice(2),MM:d.m,M:+d.m,nameMap:g},b=this._formatterLabel(v,m),w=new Ka({z2:30});x(hl(w.style,r,{text:b}),this._monthTextPositionControl(p,f,t,a,i)),n.add(w)}}},_weekTextPositionControl:function(e,t,n,r,o){var i="center",a="middle",s=e[0],l=e[1],u="start"===n;return"horizontal"===t?(s=s+r+(u?1:-1)*o[0]/2,i=u?"right":"left"):(l=l+r+(u?1:-1)*o[1]/2,a=u?"bottom":"top"),{x:s,y:l,textAlign:i,textVerticalAlign:a}},_renderWeekText:function(e,t,n,r){var o=e.getModel("dayLabel");if(o.get("show")){var i=e.coordinateSystem,a=o.get("position"),s=o.get("nameMap"),l=o.get("margin"),u=i.getFirstDayOfWeek();G(s)&&(s=ak[s.toUpperCase()]||[]);var c=i.getNextNDay(t.end.time,7-t.lweek).time,f=[i.getCellWidth(),i.getCellHeight()];l=Ul(l,f["horizontal"===n?0:1]),"start"===a&&(c=i.getNextNDay(t.start.time,-(7+t.fweek)).time,l=-l);for(var h=0;h<7;h++){var p,d=i.getNextNDay(c,h),y=i.dataToRect([d.time],!1).center;p=Math.abs((h+u)%7);var v=new Ka({z2:30});x(hl(v.style,o,{text:s[p]}),this._weekTextPositionControl(y,n,a,l,f)),r.add(v)}}}});var sk={path:null,compoundPath:null,group:Ln,image:io,text:Ka};Sp(function(e){var t=e.graphic;B(t)?t[0]&&t[0].elements?e.graphic=[e.graphic[0]]:e.graphic=[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])});var lk=Mp({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(e){var t=this.option.elements;this.option.elements=null,lk.superApply(this,"mergeOption",arguments),this.option.elements=t},optionUpdated:function(e,t){var n=this.option,o=(t?n:e).elements,i=n.elements=t?[]:n.elements,a=[];this._flatten(o,a);var s=Xo(i,a);Zo(s);var l=this._elOptionsToUpdate=[];M(s,function(e,t){var n=e.option;r&&Q(z(n)||e.exist,"Empty graphic option definition"),n&&(l.push(n),function(e,t){var n=e.exist;if(t.id=e.keyInfo.id,!t.type&&n&&(t.type=n.type),null==t.parentId){var r=t.parentOption;r?t.parentId=r.id:n&&(t.parentId=n.parentId)}t.parentOption=null}(e,n),function(e,t,n){var o=x({},n),i=e[t],a=n.$action||"merge";if("merge"===a)if(i){if(r){var s=n.type;Q(!s||i.type===s,'Please set $action: "replace" to change `type`')}w(i,o,!0),Iu(i,o,{ignoreSize:!0}),Lu(n,i)}else e[t]=o;else"replace"===a?e[t]=o:"remove"===a&&i&&(e[t]=null)}(i,t,n),function(e,t){if(!e)return;e.hv=t.hv=[fk(t,["left","right"]),fk(t,["top","bottom"])],"group"===e.type&&(null==e.width&&(e.width=t.width=0),null==e.height&&(e.height=t.height=0))}(i[t],n))},this);for(var u=i.length-1;u>=0;u--)null==i[u]?i.splice(u,1):delete i[u].$action},_flatten:function(e,t,n){M(e,function(e){if(e){n&&(e.parentOption=n),t.push(e);var r=e.children;"group"===e.type&&r&&this._flatten(r,t,e),delete e.children}},this)},useElOptionsToUpdate:function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e}});function uk(e,t,n,o){var i=n.type;r&&Q(i,"graphic type MUST be set");var a=sk.hasOwnProperty(i)?sk[i]:Gs(i);r&&Q(a,"graphic type can not be found");var s=new a(n);t.add(s),o.set(e,s),s.__ecGraphicId=e}function ck(e,t){var n=e&&e.parent;n&&("group"===e.type&&e.traverse(function(e){ck(e,t)}),t.removeKey(e.__ecGraphicId),n.remove(e))}function fk(e,t){var n;return M(t,function(t){null!=e[t]&&"auto"!==e[t]&&(n=!0)}),n}Rp({type:"graphic",init:function(e,t){this._elMap=re(),this._lastGraphicModel},render:function(e,t,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},_updateElements:function(e){var t=e.useElOptionsToUpdate();if(t){var n=this._elMap,o=this.group;M(t,function(t){var i=t.$action,a=t.id,s=n.get(a),l=t.parentId,u=null!=l?n.get(l):o,c=t.style;"text"===t.type&&c&&(t.hv&&t.hv[1]&&(c.textVerticalAlign=c.textBaseline=null),!c.hasOwnProperty("textFill")&&c.fill&&(c.textFill=c.fill),!c.hasOwnProperty("textStroke")&&c.stroke&&(c.textStroke=c.stroke));var f=function(e){return e=x({},e),M(["id","parentId","$action","hv","bounding"].concat(ku),function(t){delete e[t]}),e}(t);r&&s&&Q(u===s.parent,"Changing parent is not supported."),i&&"merge"!==i?"replace"===i?(ck(s,n),uk(a,u,f,n)):"remove"===i&&ck(s,n):s?s.attr(f):uk(a,u,f,n);var h=n.get(a);h&&(h.__ecGraphicWidthOption=t.width,h.__ecGraphicHeightOption=t.height,function(e,t,n){var r=e.eventData;e.silent||e.ignore||r||(r=e.eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name});r&&(r.info=e.info)}(h,e))})}},_relocate:function(e,t){for(var n=e.option.elements,r=this.group,o=this._elMap,i=t.getWidth(),a=t.getHeight(),s=0;s<n.length;s++){var l=n[s];if((c=o.get(l.id))&&c.isGroup){var u=(f=c.parent)===r;c.__ecGraphicWidth=Ul(c.__ecGraphicWidthOption,u?i:f.__ecGraphicWidth)||0,c.__ecGraphicHeight=Ul(c.__ecGraphicHeightOption,u?a:f.__ecGraphicHeight)||0}}for(s=n.length-1;s>=0;s--){var c,f;l=n[s];if(c=o.get(l.id))Ru(c,l,(f=c.parent)===r?{width:i,height:a}:{width:f.__ecGraphicWidth,height:f.__ecGraphicHeight},null,{hv:l.hv,boundingMode:l.bounding})}},_clear:function(){var e=this._elMap;e.each(function(t){ck(t,e)}),this._elMap=re()},dispose:function(){this._clear()}});var hk={};function pk(e,t){hk[e]=t}function dk(e){return hk[e]}var yk=Mp({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){yk.superApply(this,"optionUpdated",arguments),M(this.option.feature,function(e,t){var n=dk(t);n&&w(e,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function vk(e,t){var n=fu(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),e=new ys({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1})}Rp({type:"toolbox",render:function(e,t,n,r){var o=this.group;if(o.removeAll(),e.get("show")){var i=+e.get("itemSize"),a=e.get("feature")||{},s=this._features||(this._features={}),l=[];M(a,function(e,t){l.push(t)}),new Dp(this._featureNames||[],l).add(u).update(u).remove(N(u,null)).execute(),this._featureNames=l,function(e,t,n){var r=t.getBoxLayoutParams(),o=t.get("padding"),i={width:n.getWidth(),height:n.getHeight()},a=Mu(r,i,o);Au(t.get("orient"),e,t.get("itemGap"),a.width,a.height),Ru(e,r,i,o)}(o,e,n),o.add(vk(o.getBoundingRect(),e)),o.eachChild(function(e){var t=e.__title,r=e.hoverStyle;if(r&&t){var a=wr(t,Ir(r)),s=e.position[0]+o.position[0],l=!1;e.position[1]+o.position[1]+i+a.height>n.getHeight()&&(r.textPosition="top",l=!0);var u=l?-5-a.height:i+8;s+a.width/2>n.getWidth()?(r.textPosition=["100%",u],r.textAlign="right"):s-a.width/2<0&&(r.textPosition=[0,u],r.textAlign="left")}})}function u(u,c){var f,h=l[u],p=l[c],d=a[h],y=new Bl(d,e,e.ecModel);if(r&&null!=r.newTitle&&r.featureName===h&&(d.title=r.newTitle),h&&!p){if(function(e){return 0===e.indexOf("my")}(h))f={model:y,onclick:y.option.onclick,featureName:h};else{var v=dk(h);if(!v)return;f=new v(y,t,n)}s[h]=f}else{if(!(f=s[p]))return;f.model=y,f.ecModel=t,f.api=n}h||!p?y.get("show")&&!f.unusable?(!function(r,a,s){var l=r.getModel("iconStyle"),u=r.getModel("emphasis.iconStyle"),c=a.getIcons?a.getIcons():r.get("icon"),f=r.get("title")||{};if("string"==typeof c){var h=c,p=f;f={},(c={})[s]=h,f[s]=p}var d=r.iconPaths={};M(c,function(s,c){var h=kl(s,{},{x:-i/2,y:-i/2,width:i,height:i});h.setStyle(l.getItemStyle()),h.hoverStyle=u.getItemStyle(),h.setStyle({text:f[c],textAlign:u.get("textAlign"),textBorderRadius:u.get("textBorderRadius"),textPadding:u.get("textPadding"),textFill:null});var p=e.getModel("tooltip");p&&p.get("show")&&h.attr("tooltip",x({content:f[c],formatter:p.get("formatter",!0)||function(){return f[c]},formatterParams:{componentType:"toolbox",name:c,title:f[c],$vars:["name","title"]},position:p.get("position",!0)||"bottom"},p.option)),al(h),e.get("showTitle")&&(h.__title=f[c],h.on("mouseover",function(){var t=u.getItemStyle(),n="vertical"===e.get("orient")?null==e.get("right")?"right":"left":null==e.get("bottom")?"bottom":"top";h.setStyle({textFill:u.get("textFill")||t.fill||t.stroke||"#000",textBackgroundColor:u.get("textBackgroundColor"),textPosition:u.get("textPosition")||n})}).on("mouseout",function(){h.setStyle({textFill:null,textBackgroundColor:null})})),h.trigger(r.get("iconStatus."+c)||"normal"),o.add(h),h.on("click",D(a.onclick,a,t,n,c)),d[c]=h})}(y,f,h),y.setIconStatus=function(e,t){var n=this.option,r=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,r[e]&&r[e].trigger(t)},f.render&&f.render(y,t,n,r)):f.remove&&f.remove(t,n):f.dispose&&f.dispose(t,n)}},updateView:function(e,t,n,r){M(this._features,function(e){e.updateView&&e.updateView(e.model,t,n,r)})},remove:function(e,t){M(this._features,function(n){n.remove&&n.remove(e,t)}),this.group.removeAll()},dispose:function(e,t){M(this._features,function(n){n.dispose&&n.dispose(e,t)})}});var gk=Df.toolbox.saveAsImage;function mk(e){this.model=e}mk.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:gk.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:gk.lang.slice()},mk.prototype.unusable=!a.canvasSupported,mk.prototype.onclick=function(e,t){var n=this.model,r=n.get("name")||e.get("title.0.text")||"echarts",o="svg"===t.getZr().painter.getType()?"svg":n.get("type",!0)||"png",i=t.getConnectedDataURL({type:o,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||a.browser.ie||a.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(i.split(",")[1]),l=s.length,u=new Uint8Array(l);l--;)u[l]=s.charCodeAt(l);var c=new Blob([u]);window.navigator.msSaveOrOpenBlob(c,r+"."+o)}else{var f=n.get("lang"),h='<body style="margin:0;"><img src="'+i+'" style="max-width:100%;" title="'+(f&&f[0]||"")+'" /></body>';window.open().document.write(h)}else{var p=document.createElement("a");p.download=r+"."+o,p.target="_blank",p.href=i;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});p.dispatchEvent(d)}},pk("saveAsImage",mk);var bk=Df.toolbox.magicType;function wk(e){this.model=e}wk.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:b(bk.title),option:{},seriesIndex:{}};var _k=wk.prototype;_k.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return M(e.get("type"),function(e){t[e]&&(n[e]=t[e])}),n};var xk={line:function(e,t,n,r){if("bar"===e)return w({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get("option.line")||{},!0)},bar:function(e,t,n,r){if("line"===e)return w({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get("option.bar")||{},!0)},stack:function(e,t,n,r){var o="__ec_magicType_stack__"===n.get("stack");if("line"===e||"bar"===e)return r.setIconStatus("stack",o?"normal":"emphasis"),w({id:t,stack:o?"":"__ec_magicType_stack__"},r.get("option.stack")||{},!0)}},Sk=[["line","bar"],["stack"]];_k.onclick=function(e,t,n){var r=this.model,o=r.get("seriesIndex."+n);if(xk[n]){var i,a={series:[]};if(M(Sk,function(e){k(e,n)>=0&&M(e,function(e){r.setIconStatus(e,"normal")})}),r.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},function(t){var o=t.subType,i=t.id,s=xk[n](o,i,t,r);s&&(S(s,t.option),a.series.push(s));var l=t.coordinateSystem;if(l&&"cartesian2d"===l.type&&("line"===n||"bar"===n)){var u=l.getAxesByScale("ordinal")[0];if(u){var c=u.dim+"Axis",f=e.queryComponents({mainType:c,index:t.get(name+"Index"),id:t.get(name+"Id")})[0].componentIndex;a[c]=a[c]||[];for(var h=0;h<=f;h++)a[c][f]=a[c][f]||{};a[c][f].boundaryGap="bar"===n}}}),"stack"===n)i=a.series&&a.series[0]&&"__ec_magicType_stack__"===a.series[0].stack?w({stack:bk.title.tiled},bk.title):b(bk.title);t.dispatchAction({type:"changeMagicType",currentType:n,newOption:a,newTitle:i,featureName:"magicType"})}},Pp({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)}),pk("magicType",wk);var Ok=Df.toolbox.dataView,Pk=new Array(60).join("-"),Tk="\t";function kk(e){var t,n,r=function(e){var t={},n=[],r=[];return e.eachRawSeries(function(e){var o=e.coordinateSystem;if(!o||"cartesian2d"!==o.type&&"polar"!==o.type)n.push(e);else{var i=o.getBaseAxis();if("category"===i.type){var a=i.dim+"_"+i.index;t[a]||(t[a]={categoryAxis:i,valueAxis:o.getOtherAxis(i),series:[]},r.push({axisDim:i.dim,axisIndex:i.index})),t[a].series.push(e)}else n.push(e)}}),{seriesGroupByCategoryAxis:t,other:n,meta:r}}(e);return{value:j([(t=r.seriesGroupByCategoryAxis,n=[],M(t,function(e,t){var r=e.categoryAxis,o=e.valueAxis.dim,i=[" "].concat(R(e.series,function(e){return e.name})),a=[r.model.getCategories()];M(e.series,function(e){var t=e.getRawData();a.push(e.getRawData().mapArray(t.mapDimension(o),function(e){return e}))});for(var s=[i.join(Tk)],l=0;l<a[0].length;l++){for(var u=[],c=0;c<a.length;c++)u.push(a[c][l]);s.push(u.join(Tk))}n.push(s.join("\n"))}),n.join("\n\n"+Pk+"\n\n")),function(e){return R(e,function(e){var t=e.getRawData(),n=[e.name],r=[];return t.each(t.dimensions,function(){for(var e=arguments.length,o=arguments[e-1],i=t.getName(o),a=0;a<e-1;a++)r[a]=arguments[a];n.push((i?i+Tk:"")+r.join(Tk))}),n.join("\n")}).join("\n\n"+Pk+"\n\n")}(r.other)],function(e){return e.replace(/[\n\t\s]/g,"")}).join("\n\n"+Pk+"\n\n"),meta:r.meta}}function Ck(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Ek=new RegExp("["+Tk+"]+","g");function Ak(e,t){var n={series:[]};return M(e.split(new RegExp("\n*"+Pk+"\n*","g")),function(e,r){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(Tk)>=0)return!0}(e)){var o=function(e){for(var t=e.split(/\n+/g),n=[],r=R(Ck(t.shift()).split(Ek),function(e){return{name:e,data:[]}}),o=0;o<t.length;o++){var i=Ck(t[o]).split(Ek);n.push(i.shift());for(var a=0;a<i.length;a++)r[a]&&(r[a].data[o]=i[a])}return{series:r,categories:n}}(e),i=t[r],a=i.axisDim+"Axis";i&&(n[a]=n[a]||[],n[a][i.axisIndex]={data:o.categories},n.series=n.series.concat(o.series))}else{o=function(e){for(var t=e.split(/\n+/g),n=Ck(t.shift()),r=[],o=0;o<t.length;o++){var i=Ck(t[o]);if(i){var a,s=i.split(Ek),l="",u=!1;isNaN(s[0])?(u=!0,l=s[0],s=s.slice(1),r[o]={name:l,value:[]},a=r[o].value):a=r[o]=[];for(var c=0;c<s.length;c++)a.push(+s[c]);1===a.length&&(u?r[o].value=a[0]:r[o]=a[0])}}return{name:n,data:r}}(e);n.series.push(o)}}),n}function Mk(e){this._dom=null,this.model=e}Mk.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:b(Ok.title),lang:b(Ok.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},Mk.prototype.onclick=function(e,t){var n=t.getDom(),r=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=r.get("backgroundColor")||"#fff";var i=document.createElement("h4"),a=r.get("lang")||[];i.innerHTML=a[0]||r.get("title"),i.style.cssText="margin: 10px 20px;",i.style.color=r.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var u=r.get("optionToContent"),c=r.get("contentToOption"),f=kk(e);if("function"==typeof u){var h=u(t.getOption());"string"==typeof h?s.innerHTML=h:W(h)&&s.appendChild(h)}else s.appendChild(l),l.readOnly=r.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=r.get("textColor"),l.style.borderColor=r.get("textareaBorderColor"),l.style.backgroundColor=r.get("textareaColor"),l.value=f.value;var p=f.meta,d=document.createElement("div");d.style.cssText="position:absolute;bottom:0;left:0;right:0;";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),g=document.createElement("div");y+=";background-color:"+r.get("buttonColor"),y+=";color:"+r.get("buttonTextColor");var m=this;function b(){n.removeChild(o),m._dom=null}Xe(v,"click",b),Xe(g,"click",function(){var e;try{e="function"==typeof c?c(s,t.getOption()):Ak(l.value,p)}catch(e){throw b(),new Error("Data view format error "+e)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),b()}),v.innerHTML=a[1],g.innerHTML=a[2],g.style.cssText=y,v.style.cssText=y,!r.get("readOnly")&&d.appendChild(g),d.appendChild(v),o.appendChild(i),o.appendChild(s),o.appendChild(d),s.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},Mk.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},Mk.prototype.dispose=function(e,t){this.remove(e,t)},pk("dataView",Mk),Pp({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var n=[];M(e.newOption.series,function(e){var r=t.getSeriesByName(e.name)[0];if(r){var o=r.get("data");n.push({name:e.name,data:function(e,t){return R(e,function(e,n){var r=t&&t[n];if(z(r)&&!B(r)){z(e)&&!B(e)||(e={value:e});var o=null!=r.name&&null==e.name;return e=S(e,r),o&&delete e.name,e}return e})}(e.data,o)})}else n.push(x({type:"scatter"},e))}),t.mergeOption(S({series:n},e.newOption))});var Rk=M,Ik=k,jk=N,Lk=["dataToPoint","pointToData"],Dk=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function Nk(e,t,n){var r=this._targetInfoList=[],o={},i=Gk(t,e);Rk(zk,function(e,t){(!n||!n.include||Ik(n.include,t)>=0)&&e(i,r,o)})}var Bk=Nk.prototype;function Fk(e){return e[0]>e[1]&&e.reverse(),e}function Gk(e,t){return ni(e,t,{includeMainTypes:Dk})}Bk.setOutputRanges=function(e,t){this.matchOutputRanges(e,t,function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var r=Wk[e.brushType](0,n,t);e.__rangeOffset={offset:Jk[e.brushType](r.values,e.range,[1,1]),xyMinMax:r.xyMinMax}}})},Bk.matchOutputRanges=function(e,t,n){Rk(e,function(e){var r=this.findTargetInfo(e,t);r&&!0!==r&&M(r.coordSyses,function(r){var o=Wk[e.brushType](1,r,e.range);n(e,o.values,r,t)})},this)},Bk.setInputRanges=function(e,t){Rk(e,function(e){var n,o,i,a,s,l=this.findTargetInfo(e,t);if(r&&(Q(!l||!0===l||e.coordRange,"coordRange must be specified when coord index specified."),Q(!l||!0!==l||e.range,"range must be specified in global brush.")),e.range=e.range||[],l&&!0!==l){e.panelId=l.panelId;var u=Wk[e.brushType](0,l.coordSys,e.coordRange),c=e.__rangeOffset;e.range=c?Jk[e.brushType](u.values,c.offset,(n=u.xyMinMax,o=c.xyMinMax,i=Yk(n),a=Yk(o),s=[i[0]/a[0],i[1]/a[1]],isNaN(s[0])&&(s[0]=1),isNaN(s[1])&&(s[1]=1),s)):u.values}},this)},Bk.makePanelOpts=function(e,t){return R(this._targetInfoList,function(n){var r=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t&&t(n),clipPath:hS(r),isTargetByCursor:dS(r,e,n.coordSysModel),getLinearBrushOtherExtent:pS(r)}})},Bk.controlSeries=function(e,t,n){var r=this.findTargetInfo(e,n);return!0===r||r&&Ik(r.coordSyses,t.coordinateSystem)>=0},Bk.findTargetInfo=function(e,t){for(var n=this._targetInfoList,r=Gk(t,e),o=0;o<n.length;o++){var i=n[o],a=e.panelId;if(a){if(i.panelId===a)return i}else for(o=0;o<Vk.length;o++)if(Vk[o](r,i))return i}return!0};var zk={grid:function(e,t){var n=e.xAxisModels,r=e.yAxisModels,o=e.gridModels,i=re(),a={},s={};(n||r||o)&&(Rk(n,function(e){var t=e.axis.grid.model;i.set(t.id,t),a[t.id]=!0}),Rk(r,function(e){var t=e.axis.grid.model;i.set(t.id,t),s[t.id]=!0}),Rk(o,function(e){i.set(e.id,e),a[e.id]=!0,s[e.id]=!0}),i.each(function(e){var o=e.coordinateSystem,i=[];Rk(o.getCartesians(),function(e,t){(Ik(n,e.getAxis("x").model)>=0||Ik(r,e.getAxis("y").model)>=0)&&i.push(e)}),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:i[0],coordSyses:i,getPanelRect:Hk.grid,xAxisDeclared:a[e.id],yAxisDeclared:s[e.id]})}))},geo:function(e,t){Rk(e.geoModels,function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:Hk.geo})})}},Vk=[function(e,t){var n=e.xAxisModel,r=e.yAxisModel,o=e.gridModel;return!o&&n&&(o=n.axis.grid.model),!o&&r&&(o=r.axis.grid.model),o&&o===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],Hk={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(xl(e)),t}},Wk={lineX:jk(Uk,0),lineY:jk(Uk,1),rect:function(e,t,n){var r=t[Lk[e]]([n[0][0],n[1][0]]),o=t[Lk[e]]([n[0][1],n[1][1]]),i=[Fk([r[0],o[0]]),Fk([r[1],o[1]])];return{values:i,xyMinMax:i}},polygon:function(e,t,n){var r=[[1/0,-1/0],[1/0,-1/0]];return{values:R(n,function(n){var o=t[Lk[e]](n);return r[0][0]=Math.min(r[0][0],o[0]),r[1][0]=Math.min(r[1][0],o[1]),r[0][1]=Math.max(r[0][1],o[0]),r[1][1]=Math.max(r[1][1],o[1]),o}),xyMinMax:r}}};function Uk(e,t,n,o){r&&Q("cartesian2d"===n.type,"lineX/lineY brush is available only in cartesian2d.");var i=n.getAxis(["x","y"][e]),a=Fk(R([0,1],function(e){return t?i.coordToData(i.toLocalCoord(o[e])):i.toGlobalCoord(i.dataToCoord(o[e]))})),s=[];return s[e]=a,s[1-e]=[NaN,NaN],{values:a,xyMinMax:s}}var Jk={lineX:jk(qk,0),lineY:jk(qk,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return R(e,function(e,r){return[e[0]-n[0]*t[r][0],e[1]-n[1]*t[r][1]]})}};function qk(e,t,n,r){return[t[0]-r[e]*n[0],t[1]-r[e]*n[1]]}function Yk(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var Xk=M,Zk="\0_ec_hist_store";function Qk(e){var t=e[Zk];return t||(t=e[Zk]=[{}]),t}Fu.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var Kk=["cartesian2d","polar","singleAxis"];var $k,eC,tC,nC,rC=(eC=["axisIndex","axis","index","id"],tC=R($k=($k=["x","y","z","radius","angle","single"]).slice(),xu),nC=R(eC=(eC||[]).slice(),xu),function(e,t){M($k,function(n,r){for(var o={name:n,capital:tC[r]},i=0;i<eC.length;i++)o[eC[i]]=n+nC[i];e.call(t,o)})});function oC(e,t,n){return function(o){var i,a={nodes:[],records:{}};if(t(function(e){a.records[e.name]={}}),!o)return a;r(o,a);do{i=!1,e(s)}while(i);function s(e){!function(e,t){return k(t.nodes,e)>=0}(e,a)&&function(e,r){var o=!1;return t(function(t){M(n(e,t)||[],function(e){r.records[t.name][e]&&(o=!0)})}),o}(e,a)&&(r(e,a),i=!0)}return a};function r(e,r){r.nodes.push(e),t(function(t){M(n(e,t)||[],function(e){r.records[t.name][e]=!0})})}}var iC=M,aC=ql,sC=function(e,t,n,r){this._dimName=e,this._axisIndex=t,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=r,this._dataZoomModel=n};function lC(e,t){var n=e.getAxisModel(),r=e._percentWindow,o=e._valueWindow;if(r){var i=Zl(o,[0,500]);i=Math.min(i,20);var a=t||0===r[0]&&100===r[1];n.setRange(a?null:+o[0].toFixed(i),a?null:+o[1].toFixed(i))}}sC.prototype={constructor:sC,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var e=[],t=this.ecModel;return t.eachSeries(function(n){if(i=n.get("coordinateSystem"),k(Kk,i)>=0){var r=this._dimName,o=t.queryComponents({mainType:r+"Axis",index:n.get(r+"AxisIndex"),id:n.get(r+"AxisId")})[0];this._axisIndex===(o&&o.componentIndex)&&e.push(n)}var i},this),e},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,n,r=this._dimName,o=this.ecModel,i=this.getAxisModel();return"x"===r||"y"===r?(t="gridIndex",e="x"===r?"y":"x"):(t="polarIndex",e="angle"===r?"radius":"angle"),o.eachComponent(e+"Axis",function(e){(e.get(t)||0)===(i.get(t)||0)&&(n=e)}),n},getMinMaxSpan:function(){return b(this._minMaxSpan)},calculateDataWindow:function(e){var t,n=this._dataExtent,r=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),i=[0,100],a=[],s=[];iC(["start","end"],function(l,u){var c=e[l],f=e[l+"Value"];"percent"===o[u]?(null==c&&(c=i[u]),f=r.parse(Wl(c,i,n))):(t=!0,c=Wl(f=null==f?n[u]:r.parse(f),n,i)),s[u]=f,a[u]=c}),aC(s),aC(a);var l=this._minMaxSpan;function u(e,t,n,o,i){var a=i?"Span":"ValueSpan";lx(0,e,n,"all",l["min"+a],l["max"+a]);for(var s=0;s<2;s++)t[s]=Wl(e[s],n,o,!0),i&&(t[s]=r.parse(t[s]))}return t?u(s,a,n,i,!1):u(a,s,i,n,!0),{valueWindow:s,percentWindow:a}},reset:function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var r=[1/0,-1/0];iC(n,function(e){var n=e.getData();n&&iC(n.mapDimension(t,!0),function(e){var t=n.getApproximateExtent(e);t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])})}),r[1]<r[0]&&(r=[NaN,NaN]);return function(e,t){var n=e.getAxisModel(),r=n.getMin(!0),o="category"===n.get("type"),i=o&&n.getCategories().length;null!=r&&"dataMin"!==r&&"function"!=typeof r?t[0]=r:o&&(t[0]=i>0?0:NaN);var a=n.getMax(!0);null!=a&&"dataMax"!==a&&"function"!=typeof a?t[1]=a:o&&(t[1]=i>0?i-1:NaN),n.get("scale",!0)||(t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0))}(e,r),r}(this,this._dimName,t),function(e){var t=e._minMaxSpan={},n=e._dataZoomModel,r=e._dataExtent;iC(["min","max"],function(o){var i=n.get(o+"Span"),a=n.get(o+"ValueSpan");null!=a&&(a=e.getAxisModel().axis.scale.parse(a)),null!=a?i=Wl(r[0]+a,r,[0,100],!0):null!=i&&(a=Wl(i,[0,100],r,!0)-r[0]),t[o+"Span"]=i,t[o+"ValueSpan"]=a})}(this);var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,lC(this)}},restore:function(e){e===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,lC(this,!0))},filterData:function(e,t){if(e===this._dataZoomModel){var n=this._dimName,r=this.getTargetSeriesModels(),o=e.get("filterMode"),i=this._valueWindow;"none"!==o&&iC(r,function(e){var t=e.getData(),r=t.mapDimension(n,!0);r.length&&("weakFilter"===o?t.filterSelf(function(e){for(var n,o,a,s=0;s<r.length;s++){var l=t.get(r[s],e),u=!isNaN(l),c=l<i[0],f=l>i[1];if(u&&!c&&!f)return!0;u&&(a=!0),c&&(n=!0),f&&(o=!0)}return a&&n&&o}):iC(r,function(n){if("empty"===o)e.setData(t=t.map(n,function(e){return function(e){return e>=i[0]&&e<=i[1]}(e)?e:NaN}));else{var r={};r[n]=i,t.selectRange(r)}}),iC(r,function(e){t.setApproximateExtent(i,e)}))})}}};var uC=M,cC=rC,fC=Mp({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(e,t,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var r=hC(e);this.settledOption=r,this.mergeDefaultAndTheme(e,n),this.doInit(r)},mergeOption:function(e){var t=hC(e);w(this.option,e,!0),w(this.settledOption,t,!0),this.doInit(t)},doInit:function(e){var t=this.option;a.canvasSupported||(t.realtime=!1),this._setDefaultThrottle(e),pC(this,e);var n=this.settledOption;uC([["start","startValue"],["end","endValue"]],function(e,r){"value"===this._rangePropMode[r]&&(t[e[0]]=n[e[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var e=this._axisProxies;this.eachTargetAxis(function(t,n,r,o){var i=this.dependentModels[t.axis][n],a=i.__dzAxisProxy||(i.__dzAxisProxy=new sC(t.name,n,this,o));e[t.name+"_"+n]=a},this)},_resetTarget:function(){var e=this.option,t=this._judgeAutoMode();cC(function(t){var n=t.axisIndex;e[n]=Uo(e[n])},this),"axisIndex"===t?this._autoSetAxisIndex():"orient"===t&&this._autoSetOrient()},_judgeAutoMode:function(){var e=this.option,t=!1;cC(function(n){null!=e[n.axisIndex]&&(t=!0)},this);var n=e.orient;return null==n&&t?"orient":t?void 0:(null==n&&(e.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var e=!0,t=this.get("orient",!0),n=this.option,o=this.dependentModels;if(e){var i="vertical"===t?"y":"x";o[i+"Axis"].length?(n[i+"AxisIndex"]=[0],e=!1):uC(o.singleAxis,function(r){e&&r.get("orient",!0)===t&&(n.singleAxisIndex=[r.componentIndex],e=!1)})}e&&cC(function(t){if(e){var r=[],o=this.dependentModels[t.axis];if(o.length&&!r.length)for(var i=0,a=o.length;i<a;i++)"category"===o[i].get("type")&&r.push(i);n[t.axisIndex]=r,r.length&&(e=!1)}},this),e&&this.ecModel.eachSeries(function(e){this._isSeriesHasAllAxesTypeOf(e,"value")&&cC(function(t){var o=n[t.axisIndex],i=e.get(t.axisIndex),a=e.get(t.axisId),s=e.ecModel.queryComponents({mainType:t.axis,index:i,id:a})[0];if(r&&!s)throw new Error(t.axis+' "'+J(i,a,0)+'" not found');k(o,i=s.componentIndex)<0&&o.push(i)})},this)},_autoSetOrient:function(){var e;this.eachTargetAxis(function(t){!e&&(e=t.name)},this),this.option.orient="y"===e?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(e,t){var n=!0;return cC(function(r){var o=e.get(r.axisIndex),i=this.dependentModels[r.axis][o];i&&i.get("type")===t||(n=!1)},this),n},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var e;return cC(function(t){if(null==e){var n=this.get(t.axisIndex);n.length&&(e=this.dependentModels[t.axis][n[0]])}},this),e},eachTargetAxis:function(e,t){var n=this.ecModel;cC(function(r){uC(this.get(r.axisIndex),function(o){e.call(t,r,o,this,n)},this)},this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var n=this.getAxisProxy(e,t);return n&&n.getAxisModel()},setRawRange:function(e){var t=this.option,n=this.settledOption;uC([["start","startValue"],["end","endValue"]],function(r){null==e[r[0]]&&null==e[r[1]]||(t[r[0]]=n[r[0]]=e[r[0]],t[r[1]]=n[r[1]]=e[r[1]])},this),pC(this,e)},setCalculatedRange:function(e){var t=this.option;uC(["start","startValue","end","endValue"],function(n){t[n]=e[n]})},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},getValueRange:function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(e){if(e)return e.__dzAxisProxy;var t=this._axisProxies;for(var n in t)if(t.hasOwnProperty(n)&&t[n].hostedBy(this))return t[n];for(var n in t)if(t.hasOwnProperty(n)&&!t[n].hostedBy(this))return t[n]},getRangePropMode:function(){return this._rangePropMode.slice()}});function hC(e){var t={};return uC(["start","end","startValue","endValue","throttle"],function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function pC(e,t){var n=e._rangePropMode,r=e.get("rangeMode");uC([["start","startValue"],["end","endValue"]],function(e,o){var i=null!=t[e[0]],a=null!=t[e[1]];i&&!a?n[o]="percent":!i&&a?n[o]="value":r?n[o]=r[o]:i&&(n[o]="percent")})}var dC=gf.extend({type:"dataZoom",render:function(e,t,n,r){this.dataZoomModel=e,this.ecModel=t,this.api=n},getTargetCoordInfo:function(){var e=this.dataZoomModel,t=this.ecModel,n={};return e.eachTargetAxis(function(e,r){var o=t.getComponent(e.axis,r);if(o){var i=o.getCoordSysModel();i&&function(e,t,n,r){for(var o,i=0;i<n.length;i++)if(n[i].model===e){o=n[i];break}o||n.push(o={model:e,axisModels:[],coordIndex:r});o.axisModels.push(t)}(i,o,n[i.mainType]||(n[i.mainType]=[]),i.componentIndex)}},this),n}});fC.extend({type:"dataZoom.select"}),dC.extend({type:"dataZoom.select"}),Op({getTargetSeries:function(e){var t=re();return e.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(e,n,r){M(r.getAxisProxy(e.name,n).getTargetSeriesModels(),function(e){t.set(e.uid,e)})})}),t},modifyOutputEnd:!0,overallReset:function(e,t){e.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(e,n,r){r.getAxisProxy(e.name,n).reset(r,t)}),e.eachTargetAxis(function(e,n,r){r.getAxisProxy(e.name,n).filterData(r,t)})}),e.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy(),n=t.getDataPercentWindow(),r=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:r[0],endValue:r[1]})})}}),Pp("dataZoom",function(e,t){var n=oC(D(t.eachComponent,t,"dataZoom"),rC,function(e,t){return e.get(t.axisIndex)}),r=[];t.eachComponent({mainType:"dataZoom",query:e},function(e,t){r.push.apply(r,n(e).nodes)}),M(r,function(t,n){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})});var yC=Df.toolbox.dataZoom,vC=M,gC="\0_ec_\0toolbox-dataZoom_";function mC(e,t,n){(this._brushController=new Dx(n.getZr())).on("brush",D(this._onBrush,this)).mount(),this._isZoomActive}mC.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:b(yC.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var bC=mC.prototype;bC.render=function(e,t,n,r){this.model=e,this.ecModel=t,this.api=n,function(e,t,n,r,o){var i=n._isZoomActive;r&&"takeGlobalCursor"===r.type&&(i="dataZoomSelect"===r.key&&r.dataZoomSelectActive);n._isZoomActive=i,e.setIconStatus("zoom",i?"emphasis":"normal");var a=new Nk(_C(e.option),t,{include:["grid"]});n._brushController.setPanels(a.makePanelOpts(o,function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"})).enableBrush(!!i&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,r,n),function(e,t){e.setIconStatus("back",function(e){return Qk(e).length}(t)>1?"emphasis":"normal")}(e,t)},bC.onclick=function(e,t,n){wC[n].call(this)},bC.remove=function(e,t){this._brushController.unmount()},bC.dispose=function(e,t){this._brushController.dispose()};var wC={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=Qk(e),n=t[t.length-1];t.length>1&&t.pop();var r={};return Xk(n,function(e,n){for(var o=t.length-1;o>=0;o--)if(e=t[o][n]){r[n]=e;break}}),r}(this.ecModel))}};function _C(e){var t={};return M(["xAxisIndex","yAxisIndex"],function(n){t[n]=e[n],null==t[n]&&(t[n]="all"),(!1===t[n]||"none"===t[n])&&(t[n]=[])}),t}bC._onBrush=function(e,t){if(t.isEnd&&e.length){var n={},r=this.ecModel;this._brushController.updateCovers([]),new Nk(_C(this.model.option),r,{include:["grid"]}).matchOutputRanges(e,r,function(e,t,n){if("cartesian2d"===n.type){var r=e.brushType;"rect"===r?(o("x",n,t[0]),o("y",n,t[1])):o({lineX:"x",lineY:"y"}[r],n,t)}}),function(e,t){var n=Qk(e);Xk(t,function(t,r){for(var o=n.length-1;o>=0&&!n[o][r];o--);if(o<0){var i=e.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0];if(i){var a=i.getPercentRange();n[0][r]={dataZoomId:r,start:a[0],end:a[1]}}}}),n.push(t)}(r,n),this._dispatchZoomAction(n)}function o(e,t,o){var i=t.getAxis(e),a=i.model,s=function(e,t,n){var r;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){n.getAxisModel(e,t.componentIndex)&&(r=n)}),r}(e,a,r),l=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(o=lx(0,o.slice(),i.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:o[0],endValue:o[1]})}},bC._dispatchZoomAction=function(e){var t=[];vC(e,function(e,n){t.push(b(e))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},pk("dataZoom",mC),Sp(function(e){if(e){var t=e.dataZoom||(e.dataZoom=[]);B(t)||(e.dataZoom=t=[t]);var n=e.toolbox;if(n&&(B(n)&&(n=n[0]),n&&n.feature)){var r=n.feature.dataZoom;o("xAxis",r),o("yAxis",r)}}function o(n,r){if(r){var o=n+"Index",i=r[o];null==i||"all"===i||B(i)||(i=!1===i||"none"===i?[]:[i]),function(t,n){var r=e[t];B(r)||(r=r?[r]:[]);vC(r,n)}(n,function(e,a){if(null==i||"all"===i||-1!==k(i,a)){var s={type:"select",$fromToolbox:!0,filterMode:r.filterMode||"filter",id:gC+n+a};s[o]=a,t.push(s)}})}}});var xC=Df.toolbox.restore;function SC(e){this.model=e}SC.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:xC.title},SC.prototype.onclick=function(e,t,n){!function(e){e[Zk]=null}(e),t.dispatchAction({type:"restore",from:this.uid})},pk("restore",SC),Pp({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")}),Mp({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var OC=M,PC=cu,TC=["","-webkit-","-moz-","-o-"];function kC(e){var t,n,r=[],o=e.get("transitionDuration"),i=e.get("backgroundColor"),s=e.getModel("textStyle"),l=e.get("padding");return o&&r.push((n="left "+(t=o)+"s cubic-bezier(0.23, 1, 0.32, 1),top "+t+"s cubic-bezier(0.23, 1, 0.32, 1)",R(TC,function(e){return e+"transition:"+n}).join(";"))),i&&(a.canvasSupported?r.push("background-Color:"+i):(r.push("background-Color:#"+Xt(i)),r.push("filter:alpha(opacity=70)"))),OC(["width","color","radius"],function(t){var n="border-"+t,o=PC(n),i=e.get(o);null!=i&&r.push(n+":"+i+("color"===t?"":"px"))}),r.push(function(e){var t=[],n=e.get("fontSize"),r=e.getTextColor();r&&t.push("color:"+r),t.push("font:"+e.getFont());var o=e.get("lineHeight");null==o&&(o=Math.round(3*n/2)),n&&t.push("line-height:"+o+"px");var i=e.get("textShadowColor"),a=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,l=e.get("textShadowOffsetY")||0;return a&&t.push("text-shadow:"+s+"px "+l+"px "+a+"px "+i),OC(["decoration","align"],function(n){var r=e.get(n);r&&t.push("text-"+n+":"+r)}),t.join(";")}(s)),null!=l&&r.push("padding:"+fu(l).join("px ")+"px"),r.join(";")+";"}function CC(e,t,n,r,o){var i=t&&t.painter;if(n){var a=i&&i.getViewportRoot();a&&function(e,t,n,r,o){Ge(Fe,t,r,o,!0)&&Ge(e,n,Fe[0],Fe[1])}(e,a,document.body,r,o)}else{e[0]=r,e[1]=o;var s=i&&i.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function EC(e,t,n){if(a.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var o=this._zr=t.getZr(),i=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0,0,0],CC(this._styleCoord,o,i,t.getWidth()/2,t.getHeight()/2),i?document.body.appendChild(r):e.appendChild(r),this._container=e,this._show=!1,this._hideTimeout;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(e){if(e=e||window.event,!s._enterable){var t=o.handler;Ye(o.painter.getViewportRoot(),e,!0),t.dispatch("mousemove",e)}},r.onmouseleave=function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}}function AC(e,t,n,r){e[0]=n,e[1]=r,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function MC(e){var t=this._zr=e.getZr();this._styleCoord=[0,0,0,0],AC(this._styleCoord,t,e.getWidth()/2,e.getHeight()/2),this._show=!1,this._hideTimeout}EC.prototype={constructor:EC,_enterable:!0,update:function(e){var t=this._container,n=t.currentStyle||document.defaultView.getComputedStyle(t),r=t.style;"absolute"!==r.position&&"absolute"!==n.position&&(r.position="relative"),e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var e=this._styleCoord[2],t=this._styleCoord[3],n=e*this._zr.getWidth(),r=t*this._zr.getHeight();this.moveTo(n,r)},show:function(e){clearTimeout(this._hideTimeout);var t=this.el,n=this._styleCoord;t.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+kC(e)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(e.get("extraCssText")||""),t.style.display=t.innerHTML?"block":"none",t.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(e){this.el.innerHTML=null==e?"":e},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el;return[e.clientWidth,e.clientHeight]},moveTo:function(e,t){var n=this._styleCoord;CC(n,this._zr,this._appendToBody,e,t);var r=this.el.style;r.left=n[0]+"px",r.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(D(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var e=this.el.clientWidth,t=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(e+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),t+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:e,height:t}}},MC.prototype={constructor:MC,_enterable:!0,update:function(e){e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var e=this._styleCoord[2],t=this._styleCoord[3],n=e*this._zr.getWidth(),r=t*this._zr.getHeight();this.moveTo(n,r)},show:function(e){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(e,t,n){this.el&&this._zr.remove(this.el);for(var r={},o=e,i=o.indexOf("{marker");i>=0;){var a=o.indexOf("|}"),s=o.substr(i+"{marker".length,a-i-"{marker".length);s.indexOf("sub")>-1?r["marker"+s]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:t[s],textOffset:[3,0]}:r["marker"+s]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:t[s]},i=(o=o.substr(a+1)).indexOf("{marker")}var l=n.getModel("textStyle"),u=l.get("fontSize"),c=n.get("textLineHeight");null==c&&(c=Math.round(3*u/2)),this.el=new Ka({style:hl({},l,{rich:r,text:e,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding"),textLineHeight:c}),z:n.get("z")}),this._zr.add(this.el);var f=this;this.el.on("mouseover",function(){f._enterable&&(clearTimeout(f._hideTimeout),f._show=!0),f._inContent=!0}),this.el.on("mouseout",function(){f._enterable&&f._show&&f.hideLater(f._hideDelay),f._inContent=!1})},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el.getBoundingRect();return[e.width,e.height]},moveTo:function(e,t){if(this.el){var n=this._styleCoord;AC(n,this._zr,e,t),this.el.attr("position",[n[0],n[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(D(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var e=this.getSize();return{width:e[0],height:e[1]}}};var RC=D,IC=M,jC=Ul,LC=new ys({shape:{x:-1,y:-1,width:2,height:2}});function DC(e){for(var t=e.pop();e.length;){var n=e.pop();n&&(Bl.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),t=new Bl(n,t,t.ecModel))}return t}function NC(e,t){return e.dispatchAction||D(t.dispatchAction,t)}function BC(e){return"center"===e||"middle"===e}Rp({type:"tooltip",init:function(e,t){if(!a.node){var n,r=e.getComponent("tooltip"),o=r.get("renderMode");this._renderMode=ii(o),"html"===this._renderMode?(n=new EC(t.getDom(),t,{appendToBody:r.get("appendToBody",!0)}),this._newLine="<br/>"):(n=new MC(t),this._newLine="\n"),this._tooltipContent=n}},render:function(e,t,n){if(!a.node){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=e.get("alwaysShowContent");var r=this._tooltipContent;r.update(e),r.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var e=this._tooltipModel.get("triggerOn");PP("itemTooltip",this._api,RC(function(t,n,r){"none"!==e&&(e.indexOf(t)>=0?this._tryShow(n,r):"leave"===t&&this._hide(r))},this))},_keepShow:function(){var e=this._tooltipModel,t=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var r=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&r.manuallyShowTip(e,t,n,{x:r._lastX,y:r._lastY})})}},manuallyShowTip:function(e,t,n,r){if(r.from!==this.uid&&!a.node){var o=NC(r,n);this._ticket="";var i=r.dataByCoordSys;if(r.tooltip&&null!=r.x&&null!=r.y){var s=LC;s.position=[r.x,r.y],s.update(),s.tooltip=r.tooltip,this._tryShow({offsetX:r.x,offsetY:r.y,target:s},o)}else if(i)this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,dataByCoordSys:r.dataByCoordSys,tooltipOption:r.tooltipOption},o);else if(null!=r.seriesIndex){if(this._manuallyAxisShowTip(e,t,n,r))return;var l=dP(r,t),u=l.point[0],c=l.point[1];null!=u&&null!=c&&this._tryShow({offsetX:u,offsetY:c,position:r.position,target:l.el},o)}else null!=r.x&&null!=r.y&&(n.dispatchAction({type:"updateAxisPointer",x:r.x,y:r.y}),this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,target:n.getZr().findHover(r.x,r.y).target},o))}},manuallyHideTip:function(e,t,n,r){var o=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,r.from!==this.uid&&this._hide(NC(r,n))},_manuallyAxisShowTip:function(e,t,n,r){var o=r.seriesIndex,i=r.dataIndex,a=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=i&&null!=a){var s=t.getSeriesByIndex(o);if(s)if("axis"===(e=DC([s.getData().getItemModel(i),s,(s.coordinateSystem||{}).model,e])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:i,position:r.position}),!0}},_tryShow:function(e,t){var n=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var r=e.dataByCoordSys;r&&r.length?this._showAxisTooltip(r,e):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(e,n,t)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(e,n,t)):(this._lastDataByCoordSys=null,this._hide(t))}},_showOrMove:function(e,t){var n=e.get("showDelay");t=D(t,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(t,n):t()},_showAxisTooltip:function(e,t){var n=this._ecModel,r=this._tooltipModel,o=[t.offsetX,t.offsetY],i=[],a=[],s=DC([t.tooltipOption,r]),l=this._renderMode,u=this._newLine,c={};IC(e,function(e){IC(e.dataByAxis,function(e){var t=n.getComponent(e.axisDim+"Axis",e.axisIndex),r=e.value,o=[];if(t&&null!=r){var s=GP(r,t.axis,n,e.seriesDataIndices,e.valueLabelOpt);M(e.seriesDataIndices,function(i){var u=n.getSeriesByIndex(i.seriesIndex),f=i.dataIndexInside,h=u&&u.getDataParams(f);if(h.axisDim=e.axisDim,h.axisIndex=e.axisIndex,h.axisType=e.axisType,h.axisId=e.axisId,h.axisValue=dy(t.axis,r),h.axisValueLabel=s,h){a.push(h);var p,d=u.formatTooltip(f,!0,null,l);if(z(d)){p=d.html;var y=d.markers;w(c,y)}else p=d;o.push(p)}});var f=s;"html"!==l?i.push(o.join(u)):i.push((f?du(f)+u:"")+o.join(u))}})},this),i.reverse(),i=i.join(this._newLine+this._newLine);var f=t.position;this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(e)?this._updatePosition(s,f,o[0],o[1],this._tooltipContent,a):this._showTooltipContent(s,i,a,Math.random(),o[0],o[1],f,void 0,c)})},_showSeriesItemTooltip:function(e,t,n){var r=this._ecModel,o=t.seriesIndex,i=r.getSeriesByIndex(o),a=t.dataModel||i,s=t.dataIndex,l=t.dataType,u=a.getData(l),c=DC([u.getItemModel(s),a,i&&(i.coordinateSystem||{}).model,this._tooltipModel]),f=c.get("trigger");if(null==f||"item"===f){var h,p,d=a.getDataParams(s,l),y=a.formatTooltip(s,!1,l,this._renderMode);z(y)?(h=y.html,p=y.markers):(h=y,p=null);var v="item_"+a.name+"_"+s;this._showOrMove(c,function(){this._showTooltipContent(c,h,d,v,e.offsetX,e.offsetY,e.position,e.target,p)}),n({type:"showTip",dataIndexInside:s,dataIndex:u.getRawIndex(s),seriesIndex:o,from:this.uid})}},_showComponentItemTooltip:function(e,t,n){var r=t.tooltip;if("string"==typeof r){r={content:r,formatter:r}}var o=new Bl(r,this._tooltipModel,this._ecModel),i=o.get("content"),a=Math.random();this._showOrMove(o,function(){this._showTooltipContent(o,i,o.get("formatterParams")||{},a,e.offsetX,e.offsetY,e.position,t)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(e,t,n,r,o,i,a,s,l){if(this._ticket="",e.get("showContent")&&e.get("show")){var u=this._tooltipContent,c=e.get("formatter");a=a||e.get("position");var f=t;if(c&&"string"==typeof c)f=gu(c,n,!0);else if("function"==typeof c){var h=RC(function(t,r){t===this._ticket&&(u.setContent(r,l,e),this._updatePosition(e,a,o,i,u,n,s))},this);this._ticket=r,f=c(n,r,h)}u.setContent(f,l,e),u.show(e),this._updatePosition(e,a,o,i,u,n,s)}},_updatePosition:function(e,t,n,r,o,i,a){var s=this._api.getWidth(),l=this._api.getHeight();t=t||e.get("position");var u=o.getSize(),c=e.get("align"),f=e.get("verticalAlign"),h=a&&a.getBoundingRect().clone();if(a&&h.applyTransform(a.transform),"function"==typeof t&&(t=t([n,r],i,o.el,h,{viewSize:[s,l],contentSize:u.slice()})),B(t))n=jC(t[0],s),r=jC(t[1],l);else if(z(t)){t.width=u[0],t.height=u[1];var p=Mu(t,{width:s,height:l});n=p.x,r=p.y,c=null,f=null}else if("string"==typeof t&&a){var d=function(e,t,n){var r=n[0],o=n[1],i=0,a=0,s=t.width,l=t.height;switch(e){case"inside":i=t.x+s/2-r/2,a=t.y+l/2-o/2;break;case"top":i=t.x+s/2-r/2,a=t.y-o-5;break;case"bottom":i=t.x+s/2-r/2,a=t.y+l+5;break;case"left":i=t.x-r-5,a=t.y+l/2-o/2;break;case"right":i=t.x+s+5,a=t.y+l/2-o/2}return[i,a]}(t,h,u);n=d[0],r=d[1]}else{d=function(e,t,n,r,o,i,a){var s=n.getOuterSize(),l=s.width,u=s.height;null!=i&&(e+l+i>r?e-=l+i:e+=i);null!=a&&(t+u+a>o?t-=u+a:t+=a);return[e,t]}(n,r,o,s,l,c?null:20,f?null:20);n=d[0],r=d[1]}if(c&&(n-=BC(c)?u[0]/2:"right"===c?u[0]:0),f&&(r-=BC(f)?u[1]/2:"bottom"===f?u[1]:0),e.get("confine")){d=function(e,t,n,r,o){var i=n.getOuterSize(),a=i.width,s=i.height;return e=Math.min(e+a,r)-a,t=Math.min(t+s,o)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}(n,r,o,s,l);n=d[0],r=d[1]}o.moveTo(n,r)},_updateContentNotChangedOnAxis:function(e){var t=this._lastDataByCoordSys,n=!!t&&t.length===e.length;return n&&IC(t,function(t,r){var o=t.dataByAxis||{},i=(e[r]||{}).dataByAxis||[];(n&=o.length===i.length)&&IC(o,function(e,t){var r=i[t]||{},o=e.seriesDataIndices||[],a=r.seriesDataIndices||[];(n&=e.value===r.value&&e.axisType===r.axisType&&e.axisId===r.axisId&&o.length===a.length)&&IC(o,function(e,t){var r=a[t];n&=e.seriesIndex===r.seriesIndex&&e.dataIndex===r.dataIndex})})}),this._lastDataByCoordSys=e,!!n},_hide:function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},dispose:function(e,t){a.node||(this._tooltipContent.dispose(),CP("itemTooltip",t))}}),Pp({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),Pp({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});var FC=["rect","polygon","keep","clear"];var GC=M;function zC(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function VC(e,t,n){var r={};return GC(t,function(t){var o,i=r[t]=((o=function(){}).prototype.__hidden=o.prototype,new o);GC(e[t],function(e,r){if(xw.isValidType(r)){var o={type:r,visual:e};n&&n(o,t),i[r]=new xw(o),"opacity"===r&&((o=b(o)).type="colorAlpha",i.__hidden.__alphaForOpacity=new xw(o))}})}),r}function HC(e,t,n){var r;M(n,function(e){t.hasOwnProperty(e)&&zC(t[e])&&(r=!0)}),r&&M(n,function(n){t.hasOwnProperty(n)&&zC(t[n])?e[n]=b(t[n]):delete e[n]})}var WC={lineX:UC(0),lineY:UC(1),rect:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])},rect:function(e,t,n){return e&&n.boundingRect.intersect(e)}},polygon:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])&&My(n.range,e[0],e[1])},rect:function(e,t,n){var r=n.range;if(!e||r.length<=1)return!1;var o=e.x,i=e.y,a=e.width,s=e.height,l=r[0];return!!(My(r,o,i)||My(r,o+a,i)||My(r,o,i+s)||My(r,o+a,i+s)||jn.create(e).contain(l[0],l[1])||Cl(o,i,o+a,i,r)||Cl(o,i,o,i+s,r)||Cl(o+a,i,o+a,i+s,r)||Cl(o,i+s,o+a,i+s,r))||void 0}}};function UC(e){var t=["x","y"],n=["width","height"];return{point:function(t,n,r){if(t){var o=r.range;return JC(t[e],o)}},rect:function(r,o,i){if(r){var a=i.range,s=[r[t[e]],r[t[e]]+r[n[e]]];return s[1]<s[0]&&s.reverse(),JC(s[0],a)||JC(s[1],a)||JC(a[0],s)||JC(a[1],s)}}}}function JC(e,t){return t[0]<=e&&e<=t[1]}var qC=["inBrush","outOfBrush"],YC="__ecBrushSelect",XC="__ecInBrushSelectEvent",ZC=Lh.VISUAL.BRUSH;function QC(e){e.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new Nk(t.option,e)).setInputRanges(t.areas,e)})}function KC(e,t){if(!e.isDisposed()){var n=e.getZr();n[XC]=!0,e.dispatchAction({type:"brushSelect",batch:t}),n[XC]=!1}}function $C(e,t,n,r){for(var o=0,i=t.length;o<i;o++){var a=t[o];if(e[a.brushType](r,n,a.selectors,a))return!0}}function eE(e){var t=e.brushSelector;if(G(t)){var n=[];return M(WC,function(e,r){n[r]=function(n,r,o,i){var a=r.getItemLayout(n);return e[t](a,o,i)}}),n}if(F(t)){var r={};return M(WC,function(e,n){r[n]=t}),r}return t}kp(ZC,function(e,t,n){e.eachComponent({mainType:"brush"},function(e){n&&"takeGlobalCursor"===n.type&&e.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),QC(e)}),Cp(ZC,function(e,t,n){var r,o,i=[];e.eachComponent({mainType:"brush"},function(t,n){var a={brushId:t.id,brushIndex:n,brushName:t.name,areas:b(t.areas),selected:[]};i.push(a);var s=t.option,l=s.brushLink,u=[],c=[],f=[],h=0;n||(r=s.throttleType,o=s.throttleDelay);var p=R(t.areas,function(e){return function(e){var t=e.selectors={};return M(WC[e.brushType],function(n,r){t[r]=function(r){return n(r,t,e)}}),e}(S({boundingRect:tE[e.brushType](e)},e))}),d=VC(t.option,qC,function(e){e.mappingMethod="fixed"});function y(e){return"all"===l||u[e]}function v(e){return!!e.length}B(l)&&M(l,function(e){u[e]=1}),e.eachSeries(function(n,r){var o=f[r]=[];"parallel"===n.subType?function(e,t){var n=e.coordinateSystem;h|=n.hasAxisBrushed(),y(t)&&n.eachActiveState(e.getData(),function(e,t){"active"===e&&(c[t]=1)})}(n,r):function(n,r,o){var i=eE(n);if(!i||function(e,t){var n=e.option.seriesIndex;return null!=n&&"all"!==n&&(B(n)?k(n,t)<0:t!==n)}(t,r))return;if(M(p,function(r){i[r.brushType]&&t.brushTargetManager.controlSeries(r,n,e)&&o.push(r),h|=v(o)}),y(r)&&v(o)){var a=n.getData();a.each(function(e){$C(i,o,a,e)&&(c[e]=1)})}}(n,r,o)}),e.eachSeries(function(e,t){var n={seriesId:e.id,seriesIndex:t,seriesName:e.name,dataIndex:[]};a.selected.push(n);var r=eE(e),o=f[t],i=e.getData(),s=y(t)?function(e){return c[e]?(n.dataIndex.push(i.getRawIndex(e)),"inBrush"):"outOfBrush"}:function(e){return $C(r,o,i,e)?(n.dataIndex.push(i.getRawIndex(e)),"inBrush"):"outOfBrush"};(y(t)?h:v(o))&&function(e,t,n,r,o,i){var a,s={};function l(e){return n.getItemVisual(a,e)}function u(e,t){n.setItemVisual(a,e,t)}function c(e,c){a=null==i?e:c;var f=n.getRawDataItem(a);if(!f||!1!==f.visualMap)for(var h=r.call(o,e),p=t[h],d=s[h],y=0,v=d.length;y<v;y++){var g=d[y];p[g]&&p[g].applyVisual(e,l,u)}}M(e,function(e){var n=xw.prepareVisualTypes(t[e]);s[e]=n}),null==i?n.each(c):n.each([i],c)}(qC,d,i,s)})}),function(e,t,n,r,o){if(!o)return;var i=e.getZr();if(i[XC])return;i[YC]||(i[YC]=KC);If(i,YC,n,t)(e,r)}(t,r,o,i,n)});var tE={lineX:ie,lineY:ie,rect:function(e){return nE(e.range)},polygon:function(e){for(var t,n=e.range,r=0,o=n.length;r<o;r++){t=t||[[1/0,-1/0],[1/0,-1/0]];var i=n[r];i[0]<t[0][0]&&(t[0][0]=i[0]),i[0]>t[0][1]&&(t[0][1]=i[0]),i[1]<t[1][0]&&(t[1][0]=i[1]),i[1]>t[1][1]&&(t[1][1]=i[1])}return t&&nE(t)}};function nE(e){return new jn(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var rE=["#ddd"];Mp({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(e,t){var n=this.option;!t&&HC(n,e,["inBrush","outOfBrush"]);var r=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:rE},r.hasOwnProperty("liftZ")||(r.liftZ=5)},setAreas:function(e){r&&(Q(B(e)),M(e,function(e){Q(e.brushType,"Illegal areas")})),e&&(this.areas=R(e,function(e){return oE(this.option,e)},this))},setBrushOption:function(e){this.brushOption=oE(this.option,e),this.brushType=this.brushOption.brushType}});function oE(e,t){return w({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new Bl(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}function iE(e,t,n,r){(!r||r.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())}Rp({type:"brush",init:function(e,t){this.ecModel=e,this.api=t,this.model,(this._brushController=new Dx(t.getZr())).on("brush",D(this._onBrush,this)).mount()},render:function(e){return this.model=e,iE.apply(this,arguments)},updateTransform:function(e,t){return QC(t),iE.apply(this,arguments)},updateView:iE,dispose:function(){this._brushController.dispose()},_onBrush:function(e,t){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(e,this.ecModel),(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:b(e),$from:n}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:b(e),$from:n})}}),Pp({type:"brush",event:"brush"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(t){t.setAreas(e.areas)})}),Pp({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),Pp({type:"brushEnd",event:"brushEnd",update:"none"},function(){});var aE=Df.toolbox.brush;function sE(e,t,n){this.model=e,this.ecModel=t,this.api=n,this._brushType,this._brushMode}sE.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:b(aE.title)};var lE=sE.prototype;lE.render=lE.updateView=function(e,t,n){var r,o,i;t.eachComponent({mainType:"brush"},function(e){r=e.brushType,o=e.brushOption.brushMode||"single",i|=e.areas.length}),this._brushType=r,this._brushMode=o,M(e.get("type",!0),function(t){e.setIconStatus(t,("keep"===t?"multiple"===o:"clear"===t?i:t===r)?"emphasis":"normal")})},lE.getIcons=function(){var e=this.model,t=e.get("icon",!0),n={};return M(e.get("type",!0),function(e){t[e]&&(n[e]=t[e])}),n},lE.onclick=function(e,t,n){var r=this._brushType,o=this._brushMode;"clear"===n?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?r:r!==n&&n,brushMode:"keep"===n?"multiple"===o?"single":"multiple":o}})},pk("brush",sE),Sp(function(e,t){var n=e&&e.brush;if(B(n)||(n=n?[n]:[]),n.length){var r=[];M(n,function(e){var t=e.hasOwnProperty("toolbox")?e.toolbox:[];t instanceof Array&&(r=r.concat(t))});var o=e&&e.toolbox;B(o)&&(o=o[0]),o||(o={feature:{}},e.toolbox=[o]);var i,a,s=o.feature||(o.feature={}),l=s.brush||(s.brush={}),u=l.type||(l.type=[]);u.push.apply(u,r),a={},M(i=u,function(e){a[e]=1}),i.length=0,M(a,function(e,t){i.push(t)}),t&&!u.length&&u.push.apply(u,FC)}}),Mp({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),Rp({type:"title",render:function(e,t,n){if(this.group.removeAll(),e.get("show")){var r=this.group,o=e.getModel("textStyle"),i=e.getModel("subtextStyle"),a=e.get("textAlign"),s=q(e.get("textBaseline"),e.get("textVerticalAlign")),l=new Ka({style:hl({},o,{text:e.get("text"),textFill:o.getTextColor()},{disableBox:!0}),z2:10}),u=l.getBoundingRect(),c=e.get("subtext"),f=new Ka({style:hl({},i,{text:c,textFill:i.getTextColor(),y:u.height+e.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),h=e.get("link"),p=e.get("sublink"),d=e.get("triggerEvent",!0);l.silent=!h&&!d,f.silent=!p&&!d,h&&l.on("click",function(){Ou(h,"_"+e.get("target"))}),p&&f.on("click",function(){Ou(p,"_"+e.get("subtarget"))}),l.eventData=f.eventData=d?{componentType:"title",componentIndex:e.componentIndex}:null,r.add(l),c&&r.add(f);var y=r.getBoundingRect(),v=e.getBoxLayoutParams();v.width=y.width,v.height=y.height;var g=Mu(v,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));a||("middle"===(a=e.get("left")||e.get("right"))&&(a="center"),"right"===a?g.x+=g.width:"center"===a&&(g.x+=g.width/2)),s||("center"===(s=e.get("top")||e.get("bottom"))&&(s="middle"),"bottom"===s?g.y+=g.height:"middle"===s&&(g.y+=g.height/2),s=s||"top"),r.attr("position",[g.x,g.y]);var m={textAlign:a,textVerticalAlign:s};l.setStyle(m),f.setStyle(m),y=r.getBoundingRect();var b=g.margin,w=e.getItemStyle(["color","opacity"]);w.fill=e.get("backgroundColor");var _=new ys({shape:{x:y.x-b[3],y:y.y-b[0],width:y.width+b[1]+b[3],height:y.height+b[0]+b[2],r:e.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});r.add(_)}}});function uE(e){var t=e.itemStyle||(e.itemStyle={}),n=t.emphasis||(t.emphasis={}),r=e.label||e.label||{},o=r.normal||(r.normal={}),i={normal:1,emphasis:1};M(r,function(e,t){i[t]||cE(o,t)||(o[t]=e)}),n.label&&!cE(r,"emphasis")&&(r.emphasis=n.label,delete n.label)}function cE(e,t){return e.hasOwnProperty(t)}Fu.registerSubTypeDefaulter("timeline",function(){return"slider"}),Pp({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t){var n=t.getComponent("timeline");return n&&null!=e.currentIndex&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),t.resetOption("timeline"),S({currentIndex:n.option.currentIndex},e)}),Pp({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var n=t.getComponent("timeline");n&&null!=e.playState&&n.setPlayState(e.playState)});var fE=Fu.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(e,t,n){this._data,this._names,this.mergeDefaultAndTheme(e,n),this._initData()},mergeOption:function(e){fE.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(e>=t&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(e){this.option.autoPlay=!!e},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var e=this.option,t=e.data||[],n=e.axisType,r=this._names=[];if("category"===n){var o=[];M(t,function(e,t){var n,i=Yo(e);z(e)?(n=b(e)).value=t:n=t,o.push(n),G(i)||null!=i&&!isNaN(i)||(i=""),r.push(i+"")}),t=o}var i={category:"ordinal",time:"time"}[n]||"number";(this._data=new $p([{name:"value",type:i}],this)).initData(t,r)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});E(fE.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),tf);var hE=gf.extend({type:"timeline"}),pE=function(e,t,n,r){Uy.call(this,e,t,n),this.type=r||"value",this.model=null};pE.prototype={constructor:pE,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},C(pE,Uy);var dE=D,yE=M,vE=Math.PI;function gE(e,t,n,r,o,i){var a=t.get("color");o?(o.setColor(a),n.add(o),i&&i.onUpdate(o)):((o=Ty(e.get("symbol"),-1,-1,2,2,a)).setStyle("strokeNoScale",!0),n.add(o),i&&i.onCreate(o));var s=t.getItemStyle(["color","symbol","symbolSize"]);o.setStyle(s),r=w({rectHover:!0,z2:100},r,!0);var l=e.get("symbolSize");(l=l instanceof Array?l.slice():[+l,+l])[0]/=2,l[1]/=2,r.scale=l;var u=e.get("symbolOffset");if(u){var c=r.position=r.position||[0,0];c[0]+=Ul(u[0],l[0]),c[1]+=Ul(u[1],l[1])}var f=e.get("symbolRotate");return r.rotation=(f||0)*Math.PI/180||0,o.attr(r),o.updateTransform(),o}function mE(e,t,n,r,o){if(!e.dragging){var i=r.getModel("checkpointStyle"),a=n.dataToCoord(r.getData().get(["value"],t));o||!i.get("animation",!0)?e.attr({position:[a,0]}):(e.stopAnimation(!0),e.animateTo({position:[a,0]},i.get("animationDuration",!0),i.get("animationEasing",!0)))}}hE.extend({type:"timeline.slider",init:function(e,t){this.api=t,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(e,t,n,r){if(this.model=e,this.api=n,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var o=this._layout(e,n),i=this._createGroup("mainGroup"),a=this._createGroup("labelGroup"),s=this._axis=this._createAxis(o,e);e.formatTooltip=function(e){return du(s.scale.getLabel(e))},yE(["AxisLine","AxisTick","Control","CurrentPointer"],function(t){this["_render"+t](o,i,s,e)},this),this._renderAxisLabel(o,a,s,e),this._position(o,e)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(e,t){var n=e.get("label.position"),r=e.get("orient"),o=function(e,t){return Mu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}(e,t);null==n||"auto"===n?n="horizontal"===r?o.y+o.height/2<t.getHeight()/2?"-":"+":o.x+o.width/2<t.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[r][n]);var i,a,s,l,u={horizontal:"center",vertical:n>=0||"+"===n?"left":"right"},c={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},f={horizontal:0,vertical:vE/2},h="vertical"===r?o.height:o.width,p=e.getModel("controlStyle"),d=p.get("show",!0),y=d?p.get("itemSize"):0,v=d?p.get("itemGap"):0,g=y+v,m=e.get("label.rotate")||0;m=m*vE/180;var b=p.get("position",!0),w=d&&p.get("showPlayBtn",!0),_=d&&p.get("showPrevBtn",!0),x=d&&p.get("showNextBtn",!0),S=0,O=h;return"left"===b||"bottom"===b?(w&&(i=[0,0],S+=g),_&&(a=[S,0],S+=g),x&&(s=[O-y,0],O-=g)):(w&&(i=[O-y,0],O-=g),_&&(a=[0,0],S+=g),x&&(s=[O-y,0],O-=g)),l=[S,O],e.get("inverse")&&l.reverse(),{viewRect:o,mainLength:h,orient:r,rotation:f[r],labelRotation:m,labelPosOpt:n,labelAlign:e.get("label.align")||u[r],labelBaseline:e.get("label.verticalAlign")||e.get("label.baseline")||c[r],playPosition:i,prevBtnPosition:a,nextBtnPosition:s,axisExtent:l,controlSize:y,controlGap:v}},_position:function(e,t){var n=this._mainGroup,r=this._labelGroup,o=e.viewRect;if("vertical"===e.orient){var i=ut(),a=o.x,s=o.y+o.height;pt(i,i,[-a,-s]),dt(i,i,-vE/2),pt(i,i,[a,s]),(o=o.clone()).applyTransform(i)}var l=v(o),u=v(n.getBoundingRect()),c=v(r.getBoundingRect()),f=n.position,h=r.position;h[0]=f[0]=l[0][0];var p,d=e.labelPosOpt;isNaN(d)?(g(f,u,l,1,p="+"===d?0:1),g(h,c,l,1,1-p)):(g(f,u,l,1,p=d>=0?0:1),h[1]=f[1]+d);function y(e){var t=e.position;e.origin=[l[0][0]-t[0],l[1][0]-t[1]]}function v(e){return[[e.x,e.x+e.width],[e.y,e.y+e.height]]}function g(e,t,n,r,o){e[r]+=n[r][o]-t[r][o]}n.attr("position",f),r.attr("position",h),n.rotation=r.rotation=e.rotation,y(n),y(r)},_createAxis:function(e,t){var n=t.getData(),r=t.get("axisType"),o=hy(t,r);o.getTicks=function(){return n.mapArray(["value"],function(e){return e})};var i=n.getDataExtent("value");o.setExtent(i[0],i[1]),o.niceTicks();var a=new pE("value",o,e.axisExtent,r);return a.model=t,a},_createGroup:function(e){var t=this["_"+e]=new Ln;return this.group.add(t),t},_renderAxisLine:function(e,t,n,r){var o=n.getExtent();r.get("lineStyle.show")&&t.add(new gs({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:x({lineCap:"round"},r.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(e,t,n,r){var o=r.getData(),i=n.scale.getTicks();yE(i,function(e){var i=n.dataToCoord(e),a=o.getItemModel(e),s=a.getModel("itemStyle"),l=a.getModel("emphasis.itemStyle"),u={position:[i,0],onclick:dE(this._changeTimeline,this,e)},c=gE(a,s,t,u);al(c,l.getItemStyle()),a.get("tooltip")?(c.dataIndex=e,c.dataModel=r):c.dataIndex=c.dataModel=null},this)},_renderAxisLabel:function(e,t,n,r){if(n.getLabelModel().get("show")){var o=r.getData(),i=n.getViewLabels();yE(i,function(r){var i=r.tickValue,a=o.getItemModel(i),s=a.getModel("label"),l=a.getModel("emphasis.label"),u=n.dataToCoord(r.tickValue),c=new Ka({position:[u,0],rotation:e.labelRotation-e.rotation,onclick:dE(this._changeTimeline,this,i),silent:!1});hl(c.style,s,{text:r.formattedLabel,textAlign:e.labelAlign,textVerticalAlign:e.labelBaseline}),t.add(c),al(c,hl({},l))},this)}},_renderControl:function(e,t,n,r){var o=e.controlSize,i=e.rotation,a=r.getModel("controlStyle").getItemStyle(),s=r.getModel("emphasis.controlStyle").getItemStyle(),l=[0,-o/2,o,o],u=r.getPlayState(),c=r.get("inverse",!0);function f(e,n,u,c){if(e){var f=function(e,t,n,r){var o=r.style,i=kl(e.get(t),r||{},new jn(n[0],n[1],n[2],n[3]));o&&i.setStyle(o);return i}(r,n,l,{position:e,origin:[o/2,0],rotation:c?-i:0,rectHover:!0,style:a,onclick:u});t.add(f),al(f,s)}}f(e.nextBtnPosition,"controlStyle.nextIcon",dE(this._changeTimeline,this,c?"-":"+")),f(e.prevBtnPosition,"controlStyle.prevIcon",dE(this._changeTimeline,this,c?"+":"-")),f(e.playPosition,"controlStyle."+(u?"stopIcon":"playIcon"),dE(this._handlePlayClick,this,!u),!0)},_renderCurrentPointer:function(e,t,n,r){var o=r.getData(),i=r.getCurrentIndex(),a=o.getItemModel(i).getModel("checkpointStyle"),s=this,l={onCreate:function(e){e.draggable=!0,e.drift=dE(s._handlePointerDrag,s),e.ondragend=dE(s._handlePointerDragend,s),mE(e,i,n,r,!0)},onUpdate:function(e){mE(e,i,n,r)}};this._currentPointer=gE(a,a,this._mainGroup,{},this._currentPointer,l)},_handlePlayClick:function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},_handlePointerDrag:function(e,t,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},_pointerChangeTimeline:function(e,t){var n=this._toAxisCoord(e)[0],r=ql(this._axis.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var o=this._findNearestTick(n),i=this.model;(t||o!==i.getCurrentIndex()&&i.get("realtime"))&&this._changeTimeline(o)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(dE(function(){var e=this.model;this._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(e){return Sl(e,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(e){var t,n=this.model.getData(),r=1/0,o=this._axis;return n.each(["value"],function(n,i){var a=o.dataToCoord(n),s=Math.abs(a-e);s<r&&(r=s,t=i)}),t},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})}}),Sp(function(e){var t=e&&e.timeline;B(t)||(t=t?[t]:[]),M(t,function(e){e&&function(e){var t=e.type,n={number:"value",time:"time"};if(n[t]&&(e.axisType=n[t],delete e.type),uE(e),cE(e,"controlPosition")){var r=e.controlStyle||(e.controlStyle={});cE(r,"position")||(r.position=e.controlPosition),"none"!==r.position||cE(r,"show")||(r.show=!1,delete r.position),delete e.controlPosition}M(e.data||[],function(e){z(e)&&!B(e)&&(!cE(e,"value")&&cE(e,"name")&&(e.value=e.name),uE(e))})}(e)})});var bE=uu,wE=du;function _E(e){Jo(e,"label",["show"])}var xE=Mp({type:"marker",dependencies:["series","grid","polar","geo"],init:function(e,t,n){if(r&&"marker"===this.type)throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.");this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},isAnimationEnabled:function(){if(a.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},mergeOption:function(e,t){this._mergeOption(e,t,!1,!1)},_mergeOption:function(e,t,n,r){var o=this.constructor,i=this.mainType+"Model";n||t.eachSeries(function(e){var n=e.get(this.mainType,!0),a=e[i];n&&n.data?(a?a._mergeOption(n,t,!0):(r&&_E(n),M(n.data,function(e){e instanceof Array?(_E(e[0]),_E(e[1])):_E(e)}),x(a=new o(n,this,t),{mainType:this.mainType,seriesIndex:e.seriesIndex,name:e.name,createdBySelf:!0}),a.__hostSeries=e),e[i]=a):e[i]=null},this)},formatTooltip:function(e,t,n,r){var o=this.getData(),i=this.getRawValue(e),a=B(i)?R(i,bE).join(", "):bE(i),s=o.getName(e),l=wE(this.name);return(null!=i||s)&&(l+="html"===r?"<br/>":"\n"),s&&(l+=wE(s),null!=i&&(l+=" : ")),null!=i&&(l+=wE(a)),l},getData:function(){return this._data},setData:function(e){this._data=e}});E(xE,tf),xE.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var SE=k;function OE(e,t,n,r,o,i){var a=[],s=wd(t,r)?t.getCalculationInfo("stackResultDimension"):r,l=ME(t,s,e),u=t.indicesOfNearest(s,l)[0];a[o]=t.get(n,u),a[i]=t.get(s,u);var c=t.get(r,u),f=Yl(t.get(r,u));return(f=Math.min(f,20))>=0&&(a[i]=+a[i].toFixed(f)),[a,c]}var PE=N,TE={min:PE(OE,"min"),max:PE(OE,"max"),average:PE(OE,"average")};function kE(e,t){var n=e.getData(),r=e.coordinateSystem;if(t&&!function(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}(t)&&!B(t.coord)&&r){var o=r.dimensions,i=CE(t,n,r,e);if((t=b(t)).type&&TE[t.type]&&i.baseAxis&&i.valueAxis){var a=SE(o,i.baseAxis.dim),s=SE(o,i.valueAxis.dim),l=TE[t.type](n,i.baseDataDim,i.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else{for(var u=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis],c=0;c<2;c++)TE[u[c]]&&(u[c]=ME(n,n.mapDimension(o[c]),u[c]));t.coord=u}}return t}function CE(e,t,n,r){var o={};return null!=e.valueIndex||null!=e.valueDim?(o.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,o.valueAxis=n.getAxis(function(e,t){var n=e.getData(),r=n.dimensions;t=n.getDimension(t);for(var o=0;o<r.length;o++){var i=n.getDimensionInfo(r[o]);if(i.name===t)return i.coordDim}}(r,o.valueDataDim)),o.baseAxis=n.getOtherAxis(o.valueAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim)):(o.baseAxis=r.getBaseAxis(),o.valueAxis=n.getOtherAxis(o.baseAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim),o.valueDataDim=t.mapDimension(o.valueAxis.dim)),o}function EE(e,t){return!(e&&e.containData&&t.coord&&!function(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}(t))||e.containData(t.coord)}function AE(e,t,n,r){return r<2?e.coord&&e.coord[r]:e.value}function ME(e,t,n){if("average"===n){var r=0,o=0;return e.each(t,function(e,t){isNaN(e)||(r+=e,o++)}),r/o}return"median"===n?e.getMedian(t):e.getDataExtent(t,!0)["max"===n?1:0]}var RE=Rp({type:"marker",init:function(){this.markerGroupMap=re()},render:function(e,t,n){var r=this.markerGroupMap;r.each(function(e){e.__keep=!1});var o=this.type+"Model";t.eachSeries(function(e){var r=e[o];r&&this.renderSeries(e,r,t,n)},this),r.each(function(e){!e.__keep&&this.group.remove(e.group)},this)},renderSeries:function(){}});function IE(e,t,n){var r=t.coordinateSystem;e.each(function(o){var i,a=e.getItemModel(o),s=Ul(a.get("x"),n.getWidth()),l=Ul(a.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(t.getMarkerPosition)i=t.getMarkerPosition(e.getValues(e.dimensions,o));else if(r){var u=e.get(r.dimensions[0],o),c=e.get(r.dimensions[1],o);i=r.dataToPoint([u,c])}}else i=[s,l];isNaN(s)||(i[0]=s),isNaN(l)||(i[1]=l),e.setItemLayout(o,i)})}RE.extend({type:"markPoint",updateTransform:function(e,t,n){t.eachSeries(function(e){var t=e.markPointModel;t&&(IE(t.getData(),e,n),this.markerGroupMap.get(e.id).updateLayout(t))},this)},renderSeries:function(e,t,n,r){var o=e.coordinateSystem,i=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(i)||s.set(i,new sv),u=function(e,t,n){var r;r=e?R(e&&e.dimensions,function(e){var n=t.getData().getDimensionInfo(t.getData().mapDimension(e))||{};return S({name:e},n)}):[{name:"value",type:"float"}];var o=new $p(r,n),i=R(n.get("data"),N(kE,t));e&&(i=j(i,N(EE,e)));return o.initData(i,null,e?AE:function(e){return e.value}),o}(o,e,t);t.setData(u),IE(t.getData(),e,r),u.each(function(e){var n=u.getItemModel(e),r=n.getShallow("symbol"),o=n.getShallow("symbolSize"),i=n.getShallow("symbolRotate"),s=F(r),l=F(o),c=F(i);if(s||l||c){var f=t.getRawValue(e),h=t.getDataParams(e);s&&(r=r(f,h)),l&&(o=o(f,h)),c&&(i=i(f,h))}u.setItemVisual(e,{symbol:r,symbolSize:o,symbolRotate:i,color:n.get("itemStyle.color")||a.getVisual("color")})}),l.updateData(u),this.group.add(l.group),u.eachItemGraphicEl(function(e){e.traverse(function(e){e.dataModel=t})}),l.__keep=!0,l.group.silent=t.get("silent")||e.get("silent")}}),Sp(function(e){e.markPoint=e.markPoint||{}}),xE.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});var jE=function(e,t,n,r){var o=e.getData(),i=r.type;if(!B(r)&&("min"===i||"max"===i||"average"===i||"median"===i||null!=r.xAxis||null!=r.yAxis)){var a,s;if(null!=r.yAxis||null!=r.xAxis)a=t.getAxis(null!=r.yAxis?"y":"x"),s=J(r.yAxis,r.xAxis);else{var l=CE(r,o,t,e);a=l.valueAxis,s=ME(o,_d(o,l.valueDataDim),i)}var u="x"===a.dim?0:1,c=1-u,f=b(r),h={};f.type=null,f.coord=[],h.coord=[],f.coord[c]=-1/0,h.coord[c]=1/0;var p=n.get("precision");p>=0&&"number"==typeof s&&(s=+s.toFixed(Math.min(p,20))),f.coord[u]=h.coord[u]=s,r=[f,h,{type:i,valueIndex:r.valueIndex,value:s}]}return(r=[kE(e,r[0]),kE(e,r[1]),x({},r[2])])[2].type=r[2].type||"",w(r[2],r[0]),w(r[2],r[1]),r};function LE(e){return!isNaN(e)&&!isFinite(e)}function DE(e,t,n,r){var o=1-e,i=r.dimensions[e];return LE(t[o])&&LE(n[o])&&t[e]===n[e]&&r.getAxis(i).containData(t[e])}function NE(e,t){if("cartesian2d"===e.type){var n=t[0].coord,r=t[1].coord;if(n&&r&&(DE(1,n,r,e)||DE(0,n,r,e)))return!0}return EE(e,t[0])&&EE(e,t[1])}function BE(e,t,n,r,o){var i,a=r.coordinateSystem,s=e.getItemModel(t),l=Ul(s.get("x"),o.getWidth()),u=Ul(s.get("y"),o.getHeight());if(isNaN(l)||isNaN(u)){if(r.getMarkerPosition)i=r.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=a.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);i=a.dataToPoint([f,h])}if("cartesian2d"===a.type){var p=a.getAxis("x"),d=a.getAxis("y");c=a.dimensions;LE(e.get(c[0],t))?i[0]=p.toGlobalCoord(p.getExtent()[n?0:1]):LE(e.get(c[1],t))&&(i[1]=d.toGlobalCoord(d.getExtent()[n?0:1]))}isNaN(l)||(i[0]=l),isNaN(u)||(i[1]=u)}else i=[l,u];e.setItemLayout(t,i)}RE.extend({type:"markLine",updateTransform:function(e,t,n){t.eachSeries(function(e){var t=e.markLineModel;if(t){var r=t.getData(),o=t.__from,i=t.__to;o.each(function(t){BE(o,t,!0,e,n),BE(i,t,!1,e,n)}),r.each(function(e){r.setItemLayout(e,[o.getItemLayout(e),i.getItemLayout(e)])}),this.markerGroupMap.get(e.id).updateLayout()}},this)},renderSeries:function(e,t,n,r){var o=e.coordinateSystem,i=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(i)||s.set(i,new P_);this.group.add(l.group);var u=function(e,t,n){var r;r=e?R(e&&e.dimensions,function(e){var n=t.getData().getDimensionInfo(t.getData().mapDimension(e))||{};return S({name:e},n)}):[{name:"value",type:"float"}];var o=new $p(r,n),i=new $p(r,n),a=new $p([],n),s=R(n.get("data"),N(jE,t,e,n));e&&(s=j(s,N(NE,e)));var l=e?AE:function(e){return e.value};return o.initData(R(s,function(e){return e[0]}),null,l),i.initData(R(s,function(e){return e[1]}),null,l),a.initData(R(s,function(e){return e[2]})),a.hasItemOption=!0,{from:o,to:i,line:a}}(o,e,t),c=u.from,f=u.to,h=u.line;t.__from=c,t.__to=f,t.setData(h);var p=t.get("symbol"),d=t.get("symbolSize");function y(t,n,o){var i=t.getItemModel(n);BE(t,n,o,e,r),t.setItemVisual(n,{symbolRotate:i.get("symbolRotate"),symbolSize:i.get("symbolSize")||d[o?0:1],symbol:i.get("symbol",!0)||p[o?0:1],color:i.get("itemStyle.color")||a.getVisual("color")})}B(p)||(p=[p,p]),"number"==typeof d&&(d=[d,d]),u.from.each(function(e){y(c,e,!0),y(f,e,!1)}),h.each(function(e){var t=h.getItemModel(e).get("lineStyle.color");h.setItemVisual(e,{color:t||c.getItemVisual(e,"color")}),h.setItemLayout(e,[c.getItemLayout(e),f.getItemLayout(e)]),h.setItemVisual(e,{fromSymbolRotate:c.getItemVisual(e,"symbolRotate"),fromSymbolSize:c.getItemVisual(e,"symbolSize"),fromSymbol:c.getItemVisual(e,"symbol"),toSymbolRotate:f.getItemVisual(e,"symbolRotate"),toSymbolSize:f.getItemVisual(e,"symbolSize"),toSymbol:f.getItemVisual(e,"symbol")})}),l.updateData(h),u.line.eachItemGraphicEl(function(e,n){e.traverse(function(e){e.dataModel=t})}),l.__keep=!0,l.group.silent=t.get("silent")||e.get("silent")}}),Sp(function(e){e.markLine=e.markLine||{}}),xE.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var FE=function(e,t,n,r){var o=kE(e,r[0]),i=kE(e,r[1]),a=J,s=o.coord,l=i.coord;s[0]=a(s[0],-1/0),s[1]=a(s[1],-1/0),l[0]=a(l[0],1/0),l[1]=a(l[1],1/0);var u=_([{},o,i]);return u.coord=[o.coord,i.coord],u.x0=o.x,u.y0=o.y,u.x1=i.x,u.y1=i.y,u};function GE(e){return!isNaN(e)&&!isFinite(e)}function zE(e,t,n,r){var o=1-e;return GE(t[o])&&GE(n[o])}function VE(e,t){var n=t.coord[0],r=t.coord[1];return!("cartesian2d"!==e.type||!n||!r||!zE(1,n,r)&&!zE(0,n,r))||(EE(e,{coord:n,x:t.x0,y:t.y0})||EE(e,{coord:r,x:t.x1,y:t.y1}))}function HE(e,t,n,r,o){var i,a=r.coordinateSystem,s=e.getItemModel(t),l=Ul(s.get(n[0]),o.getWidth()),u=Ul(s.get(n[1]),o.getHeight());if(isNaN(l)||isNaN(u)){if(r.getMarkerPosition)i=r.getMarkerPosition(e.getValues(n,t));else{var c=[p=e.get(n[0],t),d=e.get(n[1],t)];a.clampData&&a.clampData(c,c),i=a.dataToPoint(c,!0)}if("cartesian2d"===a.type){var f=a.getAxis("x"),h=a.getAxis("y"),p=e.get(n[0],t),d=e.get(n[1],t);GE(p)?i[0]=f.toGlobalCoord(f.getExtent()["x0"===n[0]?0:1]):GE(d)&&(i[1]=h.toGlobalCoord(h.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(i[0]=l),isNaN(u)||(i[1]=u)}else i=[l,u];return i}var WE=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];RE.extend({type:"markArea",updateTransform:function(e,t,n){t.eachSeries(function(e){var t=e.markAreaModel;if(t){var r=t.getData();r.each(function(t){var o=R(WE,function(o){return HE(r,t,o,e,n)});r.setItemLayout(t,o),r.getItemGraphicEl(t).setShape("points",o)})}},this)},renderSeries:function(e,t,n,r){var o=e.coordinateSystem,i=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(i)||s.set(i,{group:new Ln});this.group.add(l.group),l.__keep=!0;var u=function(e,t,n){var r,o;e?(r=R(e&&e.dimensions,function(e){var n=t.getData(),r=n.getDimensionInfo(n.mapDimension(e))||{};return S({name:e},r)}),o=new $p(R(["x0","y0","x1","y1"],function(e,t){return{name:e,type:r[t%2].type}}),n)):o=new $p(r=[{name:"value",type:"float"}],n);var i=R(n.get("data"),N(FE,t,e,n));e&&(i=j(i,N(VE,e)));var a=e?function(e,t,n,r){return e.coord[Math.floor(r/2)][r%2]}:function(e){return e.value};return o.initData(i,null,a),o.hasItemOption=!0,o}(o,e,t);t.setData(u),u.each(function(t){var n=R(WE,function(n){return HE(u,t,n,e,r)}),i=!0;M(WE,function(e){if(i){var n=u.get(e[0],t),r=u.get(e[1],t);(GE(n)||o.getAxis("x").containData(n))&&(GE(r)||o.getAxis("y").containData(r))&&(i=!1)}}),u.setItemLayout(t,{points:n,allClipped:i}),u.setItemVisual(t,{color:a.getVisual("color")})}),u.diff(l.__data).add(function(e){var t=u.getItemLayout(e);if(!t.allClipped){var n=new ls({shape:{points:t.points}});u.setItemGraphicEl(e,n),l.group.add(n)}}).update(function(e,n){var r=l.__data.getItemGraphicEl(n),o=u.getItemLayout(e);o.allClipped?r&&l.group.remove(r):(r?wl(r,{shape:{points:o.points}},t,e):r=new ls({shape:{points:o.points}}),u.setItemGraphicEl(e,r),l.group.add(r))}).remove(function(e){var t=l.__data.getItemGraphicEl(e);l.group.remove(t)}).execute(),u.eachItemGraphicEl(function(e,n){var r=u.getItemModel(n),o=r.getModel("label"),i=r.getModel("emphasis.label"),a=u.getItemVisual(n,"color");e.useStyle(S(r.getModel("itemStyle").getItemStyle(),{fill:tn(a,.4),stroke:a})),e.hoverStyle=r.getModel("emphasis.itemStyle").getItemStyle(),cl(e.style,e.hoverStyle,o,i,{labelFetcher:t,labelDataIndex:n,defaultText:u.getName(n)||"",isRectText:!0,autoColor:a}),al(e,{}),e.dataModel=t}),l.__data=u,l.group.silent=t.get("silent")||e.get("silent")}}),Sp(function(e){e.markArea=e.markArea||{}});var UE=Df.legend.selector,JE={all:{type:"all",title:b(UE.all)},inverse:{type:"inverse",title:b(UE.inverse)}},qE=Mp({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},mergeOption:function(e){qE.superCall(this,"mergeOption",e),this._updateSelector(e)},_updateSelector:function(e){var t=e.selector;!0===t&&(t=e.selector=["all","inverse"]),B(t)&&M(t,function(e,n){G(e)&&(e={type:e}),t[n]=w(e,JE[e.type])})},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var r=e[n].get("name");if(this.isSelected(r)){this.select(r),t=!0;break}}!t&&this.select(e[0].get("name"))}},_updateData:function(e){var t=[],n=[];e.eachRawSeries(function(r){var o,i=r.name;if(n.push(i),r.legendVisualProvider){var a=r.legendVisualProvider.getAllNames();e.isSeriesFiltered(r)||(n=n.concat(a)),a.length?t=t.concat(a):o=!0}else o=!0;o&&Qo(r)&&t.push(r.name)}),this._availableNames=n;var r=R(this.get("data")||t,function(e){return"string"!=typeof e&&"number"!=typeof e||(e={name:e}),new Bl(e,this,this.ecModel)},this);this._data=r},getData:function(){return this._data},select:function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&M(this._data,function(e){t[e.get("name")]=!1});t[e]=!0},unSelect:function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},toggleSelected:function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},allSelect:function(){var e=this._data,t=this.option.selected;M(e,function(e){t[e.get("name",!0)]=!0})},inverseSelect:function(){var e=this._data,t=this.option.selected;M(e,function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]})},isSelected:function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&k(this._availableNames,e)>=0},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function YE(e,t,n){var r,o={},i="toggleSelected"===e;return n.eachComponent("legend",function(n){i&&null!=r?n[r?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?n[e]():(n[e](t.name),r=n.isSelected(t.name)),M(n.getData(),function(e){var t=e.get("name");if("\n"!==t&&""!==t){var r=n.isSelected(t);o.hasOwnProperty(t)?o[t]=o[t]&&r:o[t]=r}})}),"allSelect"===e||"inverseSelect"===e?{selected:o}:{name:t.name,selected:o}}Pp("legendToggleSelect","legendselectchanged",N(YE,"toggleSelected")),Pp("legendAllSelect","legendselectall",N(YE,"allSelect")),Pp("legendInverseSelect","legendinverseselect",N(YE,"inverseSelect")),Pp("legendSelect","legendselected",N(YE,"select")),Pp("legendUnSelect","legendunselected",N(YE,"unSelect"));var XE=N,ZE=M,QE=Ln,KE=Rp({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new QE),this._backgroundEl,this.group.add(this._selectorGroup=new QE),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,n){var r=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var o=e.get("align"),i=e.get("orient");o&&"auto"!==o||(o="right"===e.get("left")&&"vertical"===i?"right":"left");var a=e.get("selector",!0),s=e.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===i?"end":"start"),this.renderInner(o,e,t,n,a,i,s);var l=e.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},c=e.get("padding"),f=Mu(l,u,c),h=this.layoutInner(e,o,f,r,a,s),p=Mu(S({width:h.width,height:h.height},l),u,c);this.group.attr("position",[p.x-h.x,p.y-h.y]),this.group.add(this._backgroundEl=vk(h,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,n,o,i,a,s){var l=this.getContentGroup(),u=re(),c=t.get("selectedMode"),f=[];n.eachRawSeries(function(e){!e.get("legendHoverLink")&&f.push(e.id)}),ZE(t.getData(),function(i,a){var s=i.get("name");if(this.newlineDisabled||""!==s&&"\n"!==s){var h=n.getSeriesByName(s)[0];if(!u.get(s)){if(h){var p=h.getData(),d=p.getVisual("color"),y=p.getVisual("borderColor");"function"==typeof d&&(d=d(h.getDataParams(0))),"function"==typeof y&&(y=y(h.getDataParams(0)));var v=p.getVisual("legendSymbol")||"roundRect",g=p.getVisual("symbol");this._createItem(s,a,i,t,v,g,e,d,y,c).on("click",XE(eA,s,null,o,f)).on("mouseover",XE(tA,h.name,null,o,f)).on("mouseout",XE(nA,h.name,null,o,f)),u.set(s,!0)}else n.eachRawSeries(function(n){if(!u.get(s)&&n.legendVisualProvider){var r=n.legendVisualProvider;if(!r.containName(s))return;var l=r.indexOfName(s),h=r.getItemVisual(l,"color"),p=r.getItemVisual(l,"borderColor");this._createItem(s,a,i,t,"roundRect",null,e,h,p,c).on("click",XE(eA,null,s,o,f)).on("mouseover",XE(tA,null,s,o,f)).on("mouseout",XE(nA,null,s,o,f)),u.set(s,!0)}},this);r&&(u.get(s)||console.warn(s+" series not exists. Legend data should be same with series name or data name."))}}else l.add(new QE({newline:!0}))},this),i&&this._createSelector(i,t,o,a,s)},_createSelector:function(e,t,n,r,o){var i=this.getSelectorGroup();ZE(e,function(e){!function(e){var r=e.type,o=new Ka({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===r?"legendAllSelect":"legendInverseSelect"})}});i.add(o);var a=t.getModel("selectorLabel"),s=t.getModel("emphasis.selectorLabel");cl(o.style,o.hoverStyle={},a,s,{defaultText:e.title,isRectText:!1}),al(o)}(e)})},_createItem:function(e,t,n,r,o,i,a,s,l,u){var c=r.get("itemWidth"),f=r.get("itemHeight"),h=r.get("inactiveColor"),p=r.get("inactiveBorderColor"),d=r.get("symbolKeepAspect"),y=r.getModel("itemStyle"),v=r.isSelected(e),g=new QE,m=n.getModel("textStyle"),b=n.get("icon"),w=n.getModel("tooltip"),_=w.parentModel,S=Ty(o=b||o,0,0,c,f,v?s:h,null==d||d);if(g.add($E(S,o,y,l,p,v)),!b&&i&&(i!==o||"none"===i)){var O=.8*f;"none"===i&&(i="circle");var P=Ty(i,(c-O)/2,(f-O)/2,O,O,v?s:h,null==d||d);g.add($E(P,i,y,l,p,v))}var T="left"===a?c+5:-5,k=a,C=r.get("formatter"),E=e;"string"==typeof C&&C?E=C.replace("{name}",null!=e?e:""):"function"==typeof C&&(E=C(e)),g.add(new Ka({style:hl({},m,{text:E,x:T,y:f/2,textFill:v?m.getTextColor():h,textAlign:k,textVerticalAlign:"middle"})}));var A=new ys({shape:g.getBoundingRect(),invisible:!0,tooltip:w.get("show")?x({content:e,formatter:_.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:r.componentIndex,name:e,$vars:["name"]}},w.option):null});return g.add(A),g.eachChild(function(e){e.silent=!0}),A.silent=!u,this.getContentGroup().add(g),al(g),g.__legendDataIndex=t,g},layoutInner:function(e,t,n,r,o,i){var a=this.getContentGroup(),s=this.getSelectorGroup();Au(e.get("orient"),a,e.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),u=[-l.x,-l.y];if(o){Au("horizontal",s,e.get("selectorItemGap",!0));var c=s.getBoundingRect(),f=[-c.x,-c.y],h=e.get("selectorButtonGap",!0),p=e.getOrient().index,d=0===p?"width":"height",y=0===p?"height":"width",v=0===p?"y":"x";"end"===i?f[p]+=l[d]+h:u[p]+=c[d]+h,f[1-p]+=l[y]/2-c[y]/2,s.attr("position",f),a.attr("position",u);var g={x:0,y:0};return g[d]=l[d]+h+c[d],g[y]=Math.max(l[y],c[y]),g[v]=Math.min(0,c[v]+f[1-p]),g}return a.attr("position",u),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function $E(e,t,n,r,o,i){var a;return"line"!==t&&t.indexOf("empty")<0?(a=n.getItemStyle(),e.style.stroke=r,i||(a.stroke=o)):a=n.getItemStyle(["borderWidth","borderColor"]),e.setStyle(a)}function eA(e,t,n,r){nA(e,t,n,r),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),tA(e,t,n,r)}function tA(e,t,n,r){var o=n.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function nA(e,t,n,r){var o=n.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}Op(Lh.PROCESSOR.SERIES_FILTER,function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0})}),Fu.registerSubTypeDefaulter("legend",function(){return"plain"});var rA=qE.extend({type:"legend.scroll",setScrollDataIndex:function(e){this.option.scrollDataIndex=e},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(e,t,n,r){var o=ju(e);rA.superCall(this,"init",e,t,n,r),oA(this,e,o)},mergeOption:function(e,t){rA.superCall(this,"mergeOption",e,t),oA(this,this.option,e)}});function oA(e,t,n){var r=[1,1];r[e.getOrient().index]=0,Iu(t,n,{type:"box",ignoreSize:r})}var iA=Ln,aA=["width","height"],sA=["x","y"],lA=KE.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){lA.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new iA),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new iA),this._showController},resetInner:function(){lA.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,n,r,o,i,a){var s=this;lA.superCall(this,"renderInner",e,t,n,r,o,i,a);var l=this._controllerGroup,u=t.get("pageIconSize",!0);B(u)||(u=[u,u]),f("pagePrev",0);var c=t.getModel("pageTextStyle");function f(e,n){var o=e+"DataIndex",i=kl(t.get("pageIcons",!0)[t.getOrient().name][n],{onclick:D(s._pageGo,s,o,t,r)},{x:-u[0]/2,y:-u[1]/2,width:u[0],height:u[1]});i.name=e,l.add(i)}l.add(new Ka({name:"pageText",style:{textFill:c.getTextColor(),font:c.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),f("pageNext",1)},layoutInner:function(e,t,n,r,o,i){var a=this.getSelectorGroup(),s=e.getOrient().index,l=aA[s],u=sA[s],c=aA[1-s],f=sA[1-s];o&&Au("horizontal",a,e.get("selectorItemGap",!0));var h=e.get("selectorButtonGap",!0),p=a.getBoundingRect(),d=[-p.x,-p.y],y=b(n);o&&(y[l]=n[l]-p[l]-h);var v=this._layoutContentAndController(e,r,y,s,l,c,f);if(o){if("end"===i)d[s]+=v[l]+h;else{var g=p[l]+h;d[s]-=g,v[u]-=g}v[l]+=p[l]+h,d[1-s]+=v[f]+v[c]/2-p[c]/2,v[c]=Math.max(v[c],p[c]),v[f]=Math.min(v[f],p[f]+d[1-s]),a.attr("position",d)}return v},_layoutContentAndController:function(e,t,n,r,o,i,a){var s=this.getContentGroup(),l=this._containerGroup,u=this._controllerGroup;Au(e.get("orient"),s,e.get("itemGap"),r?n.width:null,r?null:n.height),Au("horizontal",u,e.get("pageButtonItemGap",!0));var c=s.getBoundingRect(),f=u.getBoundingRect(),h=this._showController=c[o]>n[o],p=[-c.x,-c.y];t||(p[r]=s.position[r]);var d=[0,0],y=[-f.x,-f.y],v=q(e.get("pageButtonGap",!0),e.get("itemGap",!0));h&&("end"===e.get("pageButtonPosition",!0)?y[r]+=n[o]-f[o]:d[r]+=f[o]+v);y[1-r]+=c[i]/2-f[i]/2,s.attr("position",p),l.attr("position",d),u.attr("position",y);var g={x:0,y:0};if(g[o]=h?n[o]:c[o],g[i]=Math.max(c[i],f[i]),g[a]=Math.min(0,f[a]+y[1-r]),l.__rectSize=n[o],h){var m={x:0,y:0};m[o]=Math.max(n[o]-f[o]-v,0),m[i]=g[i],l.setClipPath(new ys({shape:m})),l.__rectSize=m[o]}else u.eachChild(function(e){e.attr({invisible:!0,silent:!0})});var b=this._getPageInfo(e);return null!=b.pageIndex&&wl(s,{position:b.contentPosition},!!h&&e),this._updatePageInfoView(e,b),g},_pageGo:function(e,t,n){var r=this._getPageInfo(t)[e];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:t.id})},_updatePageInfoView:function(e,t){var n=this._controllerGroup;M(["pagePrev","pageNext"],function(r){var o=null!=t[r+"DataIndex"],i=n.childOfName(r);i&&(i.setStyle("fill",o?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),i.cursor=o?"pointer":"default")});var r=n.childOfName("pageText"),o=e.get("pageFormatter"),i=t.pageIndex,a=null!=i?i+1:0,s=t.pageCount;r&&o&&r.setStyle("text",G(o)?o.replace("{current}",a).replace("{total}",s):o({current:a,total:s}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),r=this._containerGroup.__rectSize,o=e.getOrient().index,i=aA[o],a=sA[o],s=this._findTargetItemIndex(t),l=n.children(),u=l[s],c=l.length,f=c?1:0,h={contentPosition:n.position.slice(),pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return h;var p=m(u);h.contentPosition[o]=-p.s;for(var d=s+1,y=p,v=p,g=null;d<=c;++d)(!(g=m(l[d]))&&v.e>y.s+r||g&&!b(g,y.s))&&(y=v.i>y.i?v:g)&&(null==h.pageNextDataIndex&&(h.pageNextDataIndex=y.i),++h.pageCount),v=g;for(d=s-1,y=p,v=p,g=null;d>=-1;--d)(g=m(l[d]))&&b(v,g.s)||!(y.i<v.i)||(v=y,null==h.pagePrevDataIndex&&(h.pagePrevDataIndex=y.i),++h.pageCount,++h.pageIndex),y=g;return h;function m(e){if(e){var t=e.getBoundingRect(),n=t[a]+e.position[o];return{s:n,e:n+t[i],i:e.__legendDataIndex}}}function b(e,t){return e.e>=t&&e.s<=t+r}},_findTargetItemIndex:function(e){return this._showController?(this.getContentGroup().eachChild(function(r,o){var i=r.__legendDataIndex;null==n&&null!=i&&(n=o),i===e&&(t=o)}),null!=t?t:n):0;var t,n}});Pp("legendScroll","legendscroll",function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(e){e.setScrollDataIndex(n)})});fC.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var uA=ys,cA=Wl,fA=ql,hA=D,pA=M,dA="horizontal",yA=5,vA=["line","bar","candlestick","scatter"],gA=dC.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=t},render:function(e,t,n,r){gA.superApply(this,"render",arguments),If(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),!1!==this.dataZoomModel.get("show")?(r&&"dataZoom"===r.type&&r.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){gA.superApply(this,"remove",arguments),jf(this,"_dispatchZoomAction")},dispose:function(){gA.superApply(this,"dispose",arguments),jf(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new Ln;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,t=this.api,n=this._findCoordRect(),r={width:t.getWidth(),height:t.getHeight()},o=this._orient===dA?{right:r.width-n.x-n.width,top:r.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},i=ju(e.option);M(["right","top","width","height"],function(e){"ph"===i[e]&&(i[e]=o[e])});var a=Mu(i,r,e.padding);this._location={x:a.x,y:a.y},this._size=[a.width,a.height],"vertical"===this._orient&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,n=this._orient,r=this.dataZoomModel.getFirstTargetAxisModel(),o=r&&r.get("inverse"),i=this._displayables.barGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;i.attr(n!==dA||o?n===dA&&o?{scale:a?[-1,1]:[-1,-1]}:"vertical"!==n||o?{scale:a?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:a?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:a?[1,1]:[1,-1]});var s=e.getBoundingRect([i]);e.attr("position",[t.x-s.x,t.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var e=this.dataZoomModel,t=this._size,n=this._displayables.barGroup;n.add(new uA({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40})),n.add(new uA({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:D(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var t=this._size,n=e.series,r=n.getRawData(),o=n.getShadowDim?n.getShadowDim():e.otherDim;if(null!=o){var i=r.getDataExtent(o),a=.3*(i[1]-i[0]);i=[i[0]-a,i[1]+a];var s,l=[0,t[1]],u=[0,t[0]],c=[[t[0],0],[0,0]],f=[],h=u[1]/(r.count()-1),p=0,d=Math.round(r.count()/t[0]);r.each([o],function(e,t){if(d>0&&t%d)p+=h;else{var n=null==e||isNaN(e)||""===e,r=n?0:cA(e,i,l,!0);n&&!s&&t?(c.push([c[c.length-1][0],0]),f.push([f[f.length-1][0],0])):!n&&s&&(c.push([p,0]),f.push([p,0])),c.push([p,r]),f.push([p,r]),p+=h,s=n}});var y=this.dataZoomModel;this._displayables.barGroup.add(new ls({shape:{points:c},style:S({fill:y.get("dataBackgroundColor")},y.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new us({shape:{points:f},style:y.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,r=this.ecModel;return e.eachTargetAxis(function(o,i){M(e.getAxisProxy(o.name,i).getTargetSeriesModels(),function(e){if(!(n||!0!==t&&k(vA,e.get("type"))<0)){var a,s=r.getComponent(o.axis,i).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[o.name],u=e.coordinateSystem;null!=l&&u.getOtherAxis&&(a=u.getOtherAxis(s).inverse),l=e.getData().mapDimension(l),n={thisAxis:s,series:e,thisDim:o.name,otherDim:l,otherAxisInverse:a}}},this)},this),n}},_renderHandle:function(){var e=this._displayables,t=e.handles=[],n=e.handleLabels=[],r=this._displayables.barGroup,o=this._size,i=this.dataZoomModel;r.add(e.filler=new uA({draggable:!0,cursor:mA(this._orient),drift:hA(this._onDragMove,this,"all"),ondragstart:hA(this._showDataInfo,this,!0),ondragend:hA(this._onDragEnd,this),onmouseover:hA(this._showDataInfo,this,!0),onmouseout:hA(this._showDataInfo,this,!1),style:{fill:i.get("fillerColor"),textPosition:"inside"}})),r.add(new uA({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{stroke:i.get("dataBackgroundColor")||i.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),pA([0,1],function(e){var o=kl(i.get("handleIcon"),{cursor:mA(this._orient),draggable:!0,drift:hA(this._onDragMove,this,e),ondragend:hA(this._onDragEnd,this),onmouseover:hA(this._showDataInfo,this,!0),onmouseout:hA(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),a=o.getBoundingRect();this._handleHeight=Ul(i.get("handleSize"),this._size[1]),this._handleWidth=a.width/a.height*this._handleHeight,o.setStyle(i.getModel("handleStyle").getItemStyle());var s=i.get("handleColor");null!=s&&(o.style.fill=s),r.add(t[e]=o);var l=i.textStyleModel;this.group.add(n[e]=new Ka({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:l.getTextColor(),textFont:l.getFont()},z2:10}))},this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[cA(e[0],[0,100],t,!0),cA(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var n=this.dataZoomModel,r=this._handleEnds,o=this._getViewExtent(),i=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];lx(t,r,o,n.get("zoomLock")?"all":e,null!=i.minSpan?cA(i.minSpan,a,o,!0):null,null!=i.maxSpan?cA(i.maxSpan,a,o,!0):null);var s=this._range,l=this._range=fA([cA(r[0],o,a,!0),cA(r[1],o,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(e){var t=this._displayables,n=this._handleEnds,r=fA(n.slice()),o=this._size;pA([0,1],function(e){var r=t.handles[e],i=this._handleHeight;r.attr({scale:[i/2,i/2],position:[n[e],o[1]/2-i/2]})},this),t.filler.setShape({x:r[0],y:0,width:r[1]-r[0],height:o[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){var t=this.dataZoomModel,n=this._displayables,r=n.handleLabels,o=this._orient,i=["",""];if(t.get("showDetail")){var a=t.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,l=this._range,u=e?a.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:a.getDataValueWindow();i=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var c=fA(this._handleEnds.slice());function f(e){var t=xl(n.handles[e].parent,this.group),a=Ol(0===e?"right":"left",t),s=this._handleWidth/2+yA,l=Sl([c[e]+(0===e?-s:s),this._size[1]/2],t);r[e].setStyle({x:l[0],y:l[1],textVerticalAlign:o===dA?"middle":a,textAlign:o===dA?a:"center",text:i[e]})}f.call(this,0),f.call(this,1)},_formatLabel:function(e,t){var n=this.dataZoomModel,r=n.get("labelFormatter"),o=n.get("labelPrecision");null!=o&&"auto"!==o||(o=t.getPixelPrecision());var i=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel(Math.round(e)):e.toFixed(Math.min(o,20));return F(r)?r(e,i):G(r)?r.replace("{value}",i):i},_showDataInfo:function(e){e=this._dragging||e;var t=this._displayables.handleLabels;t[0].attr("invisible",!e),t[1].attr("invisible",!e)},_onDragMove:function(e,t,n,r){this._dragging=!0,Ze(r.event);var o=Sl([t,n],this._displayables.barGroup.getLocalTransform(),!0),i=this._updateInterval(e,o[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),i&&a&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction()},_onClickPanelClick:function(e){var t=this._size,n=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var r=this._handleEnds,o=(r[0]+r[1])/2,i=this._updateInterval("all",n[0]-o);this._updateView(),i&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_findCoordRect:function(){var e;if(pA(this.getTargetCoordInfo(),function(t){if(!e&&t.length){var n=t[0].model.coordinateSystem;e=n.getRect&&n.getRect()}}),!e){var t=this.api.getWidth(),n=this.api.getHeight();e={x:.2*t,y:.2*n,width:.6*t,height:.6*n}}return e}});function mA(e){return"vertical"===e?"ns-resize":"ew-resize"}fC.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var bA="\0_ec_dataZoom_roams";function wA(e,t){var n=xA(e),r=t.dataZoomId,o=t.coordId;M(n,function(e,n){var i=e.dataZoomInfos;i[r]&&k(t.allCoordIds,o)<0&&(delete i[r],e.count--)}),SA(n);var i=n[o];i||((i=n[o]={coordId:o,dataZoomInfos:{},count:0}).controller=function(e,t){var n=new Wm(e.getZr());return M(["pan","zoom","scrollMove"],function(e){n.on(e,function(n){var r=[];M(t.dataZoomInfos,function(o){if(n.isAvailableBehavior(o.dataZoomModel.option)){var i=(o.getRange||{})[e],a=i&&i(t.controller,n);!o.dataZoomModel.get("disabled",!0)&&a&&r.push({dataZoomId:o.dataZoomId,start:a[0],end:a[1]})}}),r.length&&t.dispatchAction(r)})}),n}(e,i),i.dispatchAction=N(OA,e)),!i.dataZoomInfos[r]&&i.count++,i.dataZoomInfos[r]=t;var a,s,l,u,c=(a=i.dataZoomInfos,l={type_true:2,type_move:1,type_false:0,type_undefined:-1},u=!0,M(a,function(e){var t=e.dataZoomModel,n=!t.get("disabled",!0)&&(!t.get("zoomLock",!0)||"move");l["type_"+n]>l["type_"+s]&&(s=n),u&=t.get("preventDefaultMouseMove",!0)}),{controlType:s,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!u}});i.controller.enable(c.controlType,c.opt),i.controller.setPointerChecker(t.containsPoint),If(i,"dispatchAction",t.dataZoomModel.get("throttle",!0),"fixRate")}function _A(e){return e.type+"\0_"+e.id}function xA(e){var t=e.getZr();return t[bA]||(t[bA]={})}function SA(e){M(e,function(t,n){t.count||(t.controller.dispose(),delete e[n])})}function OA(e,t){e.dispatchAction({type:"dataZoom",batch:t})}var PA=D,TA=dC.extend({type:"dataZoom.inside",init:function(e,t){this._range},render:function(e,t,n,r){TA.superApply(this,"render",arguments),this._range=e.getPercentRange(),M(this.getTargetCoordInfo(),function(t,r){var o=R(t,function(e){return _A(e.model)});M(t,function(t){var i=t.model,a={};M(["pan","zoom","scrollMove"],function(e){a[e]=PA(kA[e],this,t,r)},this),wA(n,{coordId:_A(i),allCoordIds:o,containsPoint:function(e,t,n){return i.coordinateSystem.containPoint([t,n])},dataZoomId:e.id,dataZoomModel:e,getRange:a})},this)},this)},dispose:function(){var e,t,n;e=this.api,t=this.dataZoomModel.id,M(n=xA(e),function(e){e.controller.dispose();var n=e.dataZoomInfos;n[t]&&(delete n[t],e.count--)}),SA(n),TA.superApply(this,"dispose",arguments),this._range=null}}),kA={zoom:function(e,t,n,r){var o=this._range,i=o.slice(),a=e.axisModels[0];if(a){var s=EA[t](null,[r.originX,r.originY],a,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(i[1]-i[0])+i[0],u=Math.max(1/r.scale,0);i[0]=(i[0]-l)*u+l,i[1]=(i[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return lx(0,i,[0,100],0,c.minSpan,c.maxSpan),this._range=i,o[0]!==i[0]||o[1]!==i[1]?i:void 0}},pan:CA(function(e,t,n,r,o,i){var a=EA[r]([i.oldX,i.oldY],[i.newX,i.newY],t,o,n);return a.signal*(e[1]-e[0])*a.pixel/a.pixelLength}),scrollMove:CA(function(e,t,n,r,o,i){return EA[r]([0,0],[i.scrollDelta,i.scrollDelta],t,o,n).signal*(e[1]-e[0])*i.scrollDelta})};function CA(e){return function(t,n,r,o){var i=this._range,a=i.slice(),s=t.axisModels[0];if(s){var l=e(a,s,t,n,r,o);return lx(l,a,[0,100],"all"),this._range=a,i[0]!==a[0]||i[1]!==a[1]?a:void 0}}}var EA={grid:function(e,t,n,r,o){var i=n.axis,a={},s=o.model.coordinateSystem.getRect();return e=e||[0,0],"x"===i.dim?(a.pixel=t[0]-e[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=i.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=i.inverse?-1:1),a},polar:function(e,t,n,r,o){var i=n.axis,a={},s=o.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===n.mainType?(a.pixel=t[0]-e[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=i.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=u[1]-u[0],a.pixelStart=u[0],a.signal=i.inverse?-1:1),a},singleAxis:function(e,t,n,r,o){var i=n.axis,a=o.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===i.orient?(s.pixel=t[0]-e[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=i.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=i.inverse?-1:1),s}},AA=M,MA=function(e){var t=e&&e.visualMap;B(t)||(t=t?[t]:[]),AA(t,function(e){if(e){RA(e,"splitList")&&!RA(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&B(t)&&AA(t,function(e){z(e)&&(RA(e,"start")&&!RA(e,"min")&&(e.min=e.start),RA(e,"end")&&!RA(e,"max")&&(e.max=e.end))})}})};function RA(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}Fu.registerSubTypeDefaulter("visualMap",function(e){return e.categories||(e.pieces?e.pieces.length>0:e.splitNumber>0)&&!e.calculable?"piecewise":"continuous"});var IA=Lh.VISUAL.COMPONENT;function jA(e,t,n,r){for(var o=t.targetVisuals[r],i=xw.prepareVisualTypes(o),a={color:e.getData().getVisual("color")},s=0,l=i.length;s<l;s++){var u=i[s],c=o["opacity"===u?"__alphaForOpacity":u];c&&c.applyVisual(n,f,h)}return a.color;function f(e){return a[e]}function h(e,t){a[e]=t}}Cp(IA,{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",function(t){var r,o,i,a,s,l=e.pipelineContext;!t.isTargetSeries(e)||l&&l.large||n.push((r=t.stateList,o=t.targetVisuals,i=D(t.getValueState,t),a=t.getDataDimension(e.getData()),s={},M(r,function(e){var t=xw.prepareVisualTypes(o[e]);s[e]=t}),{progress:function(e,t){function n(e){return t.getItemVisual(l,e)}function r(e,n){t.setItemVisual(l,e,n)}var l;for(null!=a&&(a=t.getDimension(a));null!=(l=e.next());){var u=t.getRawDataItem(l);if(!u||!1!==u.visualMap)for(var c=null!=a?t.get(a,l,!0):l,f=i(c),h=o[f],p=s[f],d=0,y=p.length;d<y;d++){var v=p[d];h[v]&&h[v].applyVisual(c,n,r)}}}}))}),n}}),Cp(IA,{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),r=[];t.eachComponent("visualMap",function(t){if(t.isTargetSeries(e)){var o=t.getVisualMeta(D(jA,null,e,t))||{stops:[],outerColors:[]},i=t.getDataDimension(n),a=n.getDimensionInfo(i);null!=a&&(o.dimension=a.index,r.push(o))}}),e.getData().setVisual("visualMeta",r)}});var LA={get:function(e,t,n){var r=b((DA[e]||{})[t]);return n&&B(r)?r[r.length-1]:r}},DA={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},NA=xw.mapVisual,BA=xw.eachVisual,FA=B,GA=M,zA=ql,VA=Wl,HA=Mp({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(e,t,n){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(e,n)},optionUpdated:function(e,t){var n=this.option;a.canvasSupported||(n.realtime=!1),!t&&HC(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(e){var t=this.stateList;e=D(e,this),this.controllerVisuals=VC(this.option.controller,t,e),this.targetVisuals=VC(this.option.target,t,e)},getTargetSeriesIndices:function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries(function(e,n){t.push(n)}):t=Uo(e),t},eachTargetSeries:function(e,t){M(this.getTargetSeriesIndices(),function(n){e.call(t,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(e){var t=!1;return this.eachTargetSeries(function(n){n===e&&(t=!0)}),t},formatValueText:function(e,t,n){var r,o,i=this.option,a=i.precision,s=this.dataBound,l=i.formatter;return n=n||["<",">"],B(e)&&(e=e.slice(),r=!0),o=t?e:r?[u(e[0]),u(e[1])]:u(e),G(l)?l.replace("{value}",r?o[0]:o).replace("{value2}",r?o[1]:o):F(l)?r?l(e[0],e[1]):l(e):r?e[0]===s[0]?n[0]+" "+o[1]:e[1]===s[1]?n[1]+" "+o[0]:o[0]+" - "+o[1]:o;function u(e){return e===s[0]?"min":e===s[1]?"max":(+e).toFixed(Math.min(a,20))}},resetExtent:function(){var e=this.option,t=zA([e.min,e.max]);this._dataExtent=t},getDataDimension:function(e){var t=this.option.dimension,n=e.dimensions;if(null!=t||n.length){if(null!=t)return e.getDimension(t);for(var r=e.dimensions,o=r.length-1;o>=0;o--){var i=r[o];if(!e.getDimensionInfo(i).isCalculationCoord)return i}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var e=this.ecModel,t=this.option,n={inRange:t.inRange,outOfRange:t.outOfRange},r=t.target||(t.target={}),o=t.controller||(t.controller={});w(r,n),w(o,n);var i=this.isCategory();function a(n){FA(t.color)&&!n.inRange&&(n.inRange={color:t.color.slice().reverse()}),n.inRange=n.inRange||{color:e.get("gradientColor")},GA(this.stateList,function(e){var t=n[e];if(G(t)){var r=LA.get(t,"active",i);r?(n[e]={},n[e][t]=r):delete n[e]}},this)}a.call(this,r),a.call(this,o),function(e,t,n){var r=e[t],o=e[n];r&&!o&&(o=e[n]={},GA(r,function(e,t){if(xw.isValidType(t)){var n=LA.get(t,"inactive",i);null!=n&&(o[t]=n,"color"!==t||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}}))}.call(this,r,"inRange","outOfRange"),function(e){var t=(e.inRange||{}).symbol||(e.outOfRange||{}).symbol,n=(e.inRange||{}).symbolSize||(e.outOfRange||{}).symbolSize,r=this.get("inactiveColor");GA(this.stateList,function(o){var a=this.itemSize,s=e[o];s||(s=e[o]={color:i?r:[r]}),null==s.symbol&&(s.symbol=t&&b(t)||(i?"roundRect":["roundRect"])),null==s.symbolSize&&(s.symbolSize=n&&b(n)||(i?a[0]:[a[0],a[0]])),s.symbol=NA(s.symbol,function(e){return"none"===e||"square"===e?"roundRect":e});var l=s.symbolSize;if(null!=l){var u=-1/0;BA(l,function(e){e>u&&(u=e)}),s.symbolSize=NA(l,function(e){return VA(e,[0,u],[0,a[0]],!0)})}},this)}.call(this,o)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:ie,getValueState:ie,getVisualMeta:ie}),WA=[20,140],UA=HA.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(e,t){UA.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){UA.superApply(this,"resetItemSize",arguments);var e=this.itemSize;"horizontal"===this._orient&&e.reverse(),(null==e[0]||isNaN(e[0]))&&(e[0]=WA[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=WA[1])},_resetRange:function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):B(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},completeVisualOption:function(){HA.prototype.completeVisualOption.apply(this,arguments),M(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=0)},this)},setSelected:function(e){this.option.range=e.slice(),this._resetRange()},getSelected:function(){var e=this.getExtent(),t=ql((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},getValueState:function(e){var t=this.option.range,n=this.getExtent();return(t[0]<=n[0]||t[0]<=e)&&(t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(n){var r=[],o=n.getData();o.each(this.getDataDimension(o),function(t,n){e[0]<=t&&t<=e[1]&&r.push(n)},this),t.push({seriesId:n.id,dataIndex:r})},this),t},getVisualMeta:function(e){var t=JA(this,"outOfRange",this.getExtent()),n=JA(this,"inRange",this.option.range.slice()),r=[];function o(t,n){r.push({value:t,color:e(t,n)})}for(var i=0,a=0,s=n.length,l=t.length;a<l&&(!n.length||t[a]<=n[0]);a++)t[a]<n[i]&&o(t[a],"outOfRange");for(var u=1;i<s;i++,u=0)u&&r.length&&o(n[i],"outOfRange"),o(n[i],"inRange");for(u=1;a<l;a++)(!n.length||n[n.length-1]<t[a])&&(u&&(r.length&&o(r[r.length-1].value,"outOfRange"),u=0),o(t[a],"outOfRange"));var c=r.length;return{stops:r,outerColors:[c?r[0].color:"transparent",c?r[c-1].color:"transparent"]}}});function JA(e,t,n){if(n[0]===n[1])return n.slice();for(var r=(n[1]-n[0])/200,o=n[0],i=[],a=0;a<=200&&o<n[1];a++)i.push(o),o+=r;return i.push(n[1]),i}var qA=Rp({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(e,t){this.ecModel=e,this.api=t,this.visualMapModel},render:function(e,t,n,r){this.visualMapModel=e,!1!==e.get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(e){var t=this.visualMapModel,n=fu(t.get("padding")||0),r=e.getBoundingRect();e.add(new ys({z2:-1,silent:!0,shape:{x:r.x-n[3],y:r.y-n[0],width:r.width+n[3]+n[1],height:r.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},getControllerVisual:function(e,t,n){var r=(n=n||{}).forceState,o=this.visualMapModel,i={};if("symbol"===t&&(i.symbol=o.get("itemSymbol")),"color"===t){var a=o.get("contentColor");i.color=a}function s(e){return i[e]}function l(e,t){i[e]=t}var u=o.controllerVisuals[r||o.getValueState(e)];return M(xw.prepareVisualTypes(u),function(r){var o=u[r];n.convertOpacityToAlpha&&"opacity"===r&&(r="colorAlpha",o=u.__alphaForOpacity),xw.dependsOn(r,t)&&o&&o.applyVisual(e,s,l)}),i[t]},positionGroup:function(e){var t=this.visualMapModel,n=this.api;Ru(e,t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},doRender:ie});function YA(e,t,n){var r=e.option,o=r.align;if(null!=o&&"auto"!==o)return o;for(var i={width:t.getWidth(),height:t.getHeight()},a="horizontal"===r.orient?1:0,s=[["left","right","width"],["top","bottom","height"]],l=s[a],u=[0,null,10],c={},f=0;f<3;f++)c[s[1-a][f]]=u[f],c[l[f]]=2===f?n[0]:r[l[f]];var h=[["x","width",3],["y","height",0]][a],p=Mu(c,i,r.padding);return l[(p.margin[h[2]]||0)+p[h[0]]+.5*p[h[1]]<.5*i[h[1]]?0:1]}function XA(e,t){return M(e||[],function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var ZA=Wl,QA=M,KA=Math.min,$A=Math.max,eM=12,tM=6,nM=qA.extend({type:"visualMap.continuous",init:function(){nM.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(e,t,n,r){r&&"selectDataRange"===r.type&&r.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},_renderEndsText:function(e,t,n){if(t){var r=t[1-n];r=null!=r?r+"":"";var o=this.visualMapModel,i=o.get("textGap"),a=o.itemSize,s=this._shapes.barGroup,l=this._applyTransform([a[0]/2,0===n?-i:a[1]+i],s),u=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new Ka({style:{x:l[0],y:l[1],textVerticalAlign:"horizontal"===c?"middle":u,textAlign:"horizontal"===c?u:"center",text:r,textFont:f.getFont(),textFill:f.getTextColor()}}))}},_renderBar:function(e){var t=this.visualMapModel,n=this._shapes,r=t.itemSize,o=this._orient,i=this._useHandle,a=YA(t,this.api,r),s=n.barGroup=this._createBarGroup(a);s.add(n.outOfRange=rM()),s.add(n.inRange=rM(null,i?iM(this._orient):null,D(this._dragHandle,this,"all",!1),D(this._dragHandle,this,"all",!0)));var l=t.textStyleModel.getTextRect("å½"),u=$A(l.width,l.height);i&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(s,0,r,u,o,a),this._createHandle(s,1,r,u,o,a)),this._createIndicator(s,r,u,o),e.add(s)},_createHandle:function(e,t,n,r,o){var i=D(this._dragHandle,this,t,!1),a=D(this._dragHandle,this,t,!0),s=rM(function(e,t){return 0===e?[[0,0],[t,0],[t,-t]]:[[0,0],[t,0],[t,t]]}(t,r),iM(this._orient),i,a);s.position[0]=n[0],e.add(s);var l=this.visualMapModel.textStyleModel,u=new Ka({draggable:!0,drift:i,onmousemove:function(e){Ze(e.event)},ondragend:a,style:{x:0,y:0,text:"",textFont:l.getFont(),textFill:l.getTextColor()}});this.group.add(u);var c=["horizontal"===o?r/2:1.5*r,"horizontal"===o?0===t?-1.5*r:1.5*r:0===t?-r/2:r/2],f=this._shapes;f.handleThumbs[t]=s,f.handleLabelPoints[t]=c,f.handleLabels[t]=u},_createIndicator:function(e,t,n,r){var o=rM([[0,0]],"move");o.position[0]=t[0],o.attr({invisible:!0,silent:!0}),e.add(o);var i=this.visualMapModel.textStyleModel,a=new Ka({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:i.getFont(),textFill:i.getTextColor()}});this.group.add(a);var s=["horizontal"===r?n/2:tM+3,0],l=this._shapes;l.indicator=o,l.indicatorLabel=a,l.indicatorLabelPoint=s},_dragHandle:function(e,t,n,r){if(this._useHandle){if(this._dragging=!t,!t){var o=this._applyTransform([n,r],this._shapes.barGroup,!0);this._updateInterval(e,o[1]),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():oM(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},_resetInterval:function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),r=[0,e.itemSize[1]];this._handleEnds=[ZA(t[0],n,r,!0),ZA(t[1],n,r,!0)]},_updateInterval:function(e,t){t=t||0;var n=this.visualMapModel,r=this._handleEnds,o=[0,n.itemSize[1]];lx(t,r,o,e,0);var i=n.getExtent();this._dataInterval=[ZA(r[0],o,i,!0),ZA(r[1],o,i,!0)]},_updateView:function(e){var t=this.visualMapModel,n=t.getExtent(),r=this._shapes,o=[0,t.itemSize[1]],i=e?o:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,i,"inRange"),s=this._createBarVisual(n,n,o,"outOfRange");r.inRange.setStyle({fill:a.barColor,opacity:a.opacity}).setShape("points",a.barPoints),r.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(i,a)},_createBarVisual:function(e,t,n,r){var o={forceState:r,convertOpacityToAlpha:!0},i=this._makeColorGradient(e,o),a=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],s=this._createBarPoints(n,a);return{barColor:new Os(0,0,0,1,i),barPoints:s,handlesColor:[i[0].color,i[i.length-1].color]}},_makeColorGradient:function(e,t){var n=[],r=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var o=1;o<100;o++){var i=e[0]+r*o;if(i>e[1])break;n.push({color:this.getControllerVisual(i,"color",t),offset:o/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},_createBarPoints:function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},_createBarGroup:function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new Ln("horizontal"!==t||n?"horizontal"===t&&n?{scale:"bottom"===e?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==t||n?{scale:"left"===e?[1,1]:[-1,1]}:{scale:"left"===e?[1,-1]:[-1,-1]}:{scale:"bottom"===e?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(e,t){if(this._useHandle){var n=this._shapes,r=this.visualMapModel,o=n.handleThumbs,i=n.handleLabels;QA([0,1],function(a){var s=o[a];s.setStyle("fill",t.handlesColor[a]),s.position[1]=e[a];var l=Sl(n.handleLabelPoints[a],xl(s,this.group));i[a].setStyle({x:l[0],y:l[1],text:r.formatValueText(this._dataInterval[a]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===a?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(e,t,n,r){var o=this.visualMapModel,i=o.getExtent(),a=o.itemSize,s=[0,a[1]],l=ZA(e,i,s,!0),u=this._shapes,c=u.indicator;if(c){c.position[1]=l,c.attr("invisible",!1),c.setShape("points",function(e,t,n,r){return e?[[0,-KA(t,$A(n,0))],[tM,0],[0,KA(t,$A(r-n,0))]]:[[0,0],[5,-5],[5,5]]}(!!n,r,l,a[1]));var f=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0});c.setStyle("fill",f);var h=Sl(u.indicatorLabelPoint,xl(c,this.group)),p=u.indicatorLabel;p.attr("invisible",!1);var d=this._applyTransform("left",u.barGroup),y=this._orient;p.setStyle({text:(n||"")+o.formatValueText(t),textVerticalAlign:"horizontal"===y?d:"middle",textAlign:"horizontal"===y?"center":d,x:h[0],y:h[1]})}},_enableHoverLinkToSeries:function(){var e=this;this._shapes.barGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,r=e._applyTransform([t.offsetX,t.offsetY],e._shapes.barGroup,!0,!0);r[1]=KA($A(0,r[1]),n[1]),e._doHoverLinkToSeries(r[1],0<=r[0]&&r[0]<=n[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(e,t){var n=this.visualMapModel,r=n.itemSize;if(n.option.hoverLink){var o=[0,r[1]],i=n.getExtent();e=KA($A(o[0],e),o[1]);var a=function(e,t,n){var r=eM/2,o=e.get("hoverLinkDataSize");o&&(r=ZA(o,t,n,!0)/2);return r}(n,i,o),s=[e-a,e+a],l=ZA(e,o,i,!0),u=[ZA(s[0],o,i,!0),ZA(s[1],o,i,!0)];s[0]<o[0]&&(u[0]=-1/0),s[1]>o[1]&&(u[1]=1/0),t&&(u[0]===-1/0?this._showIndicator(l,u[1],"< ",a):u[1]===1/0?this._showIndicator(l,u[0],"> ",a):this._showIndicator(l,l,"â ",a));var c=this._hoverLinkDataIndices,f=[];(t||oM(n))&&(f=this._hoverLinkDataIndices=n.findTargetDataIndices(u));var h=function(e,t){var n={},r={};return o(e||[],n),o(t||[],r,n),[i(n),i(r)];function o(e,t,n){for(var r=0,o=e.length;r<o;r++)for(var i=e[r].seriesId,a=Uo(e[r].dataIndex),s=n&&n[i],l=0,u=a.length;l<u;l++){var c=a[l];s&&s[c]?s[c]=null:(t[i]||(t[i]={}))[c]=1}}function i(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)&&null!=e[r])if(t)n.push(+r);else{var o=i(e[r],!0);o.length&&n.push({seriesId:r,dataIndex:o})}return n}}(c,f);this._dispatchHighDown("downplay",XA(h[0],n)),this._dispatchHighDown("highlight",XA(h[1],n))}},_hoverLinkFromSeriesMouseOver:function(e){var t=e.target,n=this.visualMapModel;if(t&&null!=t.dataIndex){var r=this.ecModel.getSeriesByIndex(t.seriesIndex);if(n.isTargetSeries(r)){var o=r.getData(t.dataType),i=o.get(n.getDataDimension(o),t.dataIndex,!0);isNaN(i)||this._showIndicator(i,i)}}},_hideIndicator:function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",XA(e,this.visualMapModel)),e.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},_applyTransform:function(e,t,n,r){var o=xl(t,r?null:this.group);return Ml[B(e)?"applyTransform":"transformDirection"](e,o,n)},_dispatchHighDown:function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function rM(e,t,n,r){return new ls({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(e){Ze(e.event)},ondragend:r})}function oM(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function iM(e){return"vertical"===e?"ns-resize":"ew-resize"}Pp({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(t){t.setSelected(e.selected)})}),Sp(MA);var aM=HA.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(e,t){aM.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();sM[this._mode].call(this),this._resetSelected(e,t);var r=this.option.categories;this.resetVisual(function(e,t){"categories"===n?(e.mappingMethod="category",e.categories=b(r)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=R(this._pieceList,function(e){e=b(e);return"inRange"!==t&&(e.visual=null),e}))})},completeVisualOption:function(){var e=this.option,t={},n=xw.listVisualTypes(),r=this.isCategory();function o(e,t,n){return e&&e[t]&&(z(e[t])?e[t].hasOwnProperty(n):e[t]===n)}M(e.pieces,function(e){M(n,function(n){e.hasOwnProperty(n)&&(t[n]=1)})}),M(t,function(t,n){var i=0;M(this.stateList,function(t){i|=o(e,t,n)||o(e.target,t,n)},this),!i&&M(this.stateList,function(t){(e[t]||(e[t]={}))[n]=LA.get(n,"inRange"===t?"active":"inactive",r)})},this),HA.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(e,t){var n=this.option,r=this._pieceList,o=(t?n:e).selected||{};if(n.selected=o,M(r,function(e,t){var n=this.getSelectedMapKey(e);o.hasOwnProperty(n)||(o[n]=!0)},this),"single"===n.selectedMode){var i=!1;M(r,function(e,t){var n=this.getSelectedMapKey(e);o[n]&&(i?o[n]=!1:i=!0)},this)}},getSelectedMapKey:function(e){return"categories"===this._mode?e.value+"":e.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(e){this.option.selected=b(e)},getValueState:function(e){var t=xw.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(n){var r=[],o=n.getData();o.each(this.getDataDimension(o),function(t,n){xw.findPieceIndex(t,this._pieceList)===e&&r.push(n)},this),t.push({seriesId:n.id,dataIndex:r})},this),t},getRepresentValue:function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},getVisualMeta:function(e){if(!this.isCategory()){var t=[],n=[],r=this,o=this._pieceList.slice();if(o.length){var i=o[0].interval[0];i!==-1/0&&o.unshift({interval:[-1/0,i]}),(i=o[o.length-1].interval[1])!==1/0&&o.push({interval:[i,1/0]})}else o.push({interval:[-1/0,1/0]});var a=-1/0;return M(o,function(e){var t=e.interval;t&&(t[0]>a&&s([a,t[0]],"outOfRange"),s(t.slice()),a=t[1])},this),{stops:t,outerColors:n}}function s(o,i){var a=r.getRepresentValue({interval:o});i||(i=r.getValueState(a));var s=e(a,i);o[0]===-1/0?n[0]=s:o[1]===1/0?n[1]=s:t.push({value:o[0],color:s},{value:o[1],color:s})}}}),sM={splitNumber:function(){var e=this.option,t=this._pieceList,n=Math.min(e.precision,20),r=this.getExtent(),o=e.splitNumber;o=Math.max(parseInt(o,10),1),e.splitNumber=o;for(var i=(r[1]-r[0])/o;+i.toFixed(n)!==i&&n<5;)n++;e.precision=n,i=+i.toFixed(n),e.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var a=0,s=r[0];a<o;s+=i,a++){var l=a===o-1?r[1]:s+i;t.push({interval:[s,l],close:[1,1]})}e.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),au(t),M(t,function(e,t){e.index=t,e.text=this.formatValueText(e.interval)},this)},categories:function(){var e=this.option;M(e.categories,function(e){this._pieceList.push({text:this.formatValueText(e,!0),value:e})},this),lM(e,this._pieceList)},pieces:function(){var e=this.option,t=this._pieceList;M(e.pieces,function(e,n){z(e)||(e={value:e});var o={text:"",index:n};if(null!=e.label&&(o.text=e.label),e.hasOwnProperty("value")){var i=o.value=e.value;o.interval=[i,i],o.close=[1,1]}else{for(var a=o.interval=[],s=o.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],p=0;p<3&&null==a[f];p++)a[f]=e[h[p]],s[f]=l[p],c[f]=2===p;null==a[f]&&(a[f]=u[f])}c[0]&&a[1]===1/0&&(s[0]=0),c[1]&&a[0]===-1/0&&(s[1]=0),r&&a[0]>a[1]&&console.warn("Piece "+n+"is illegal: "+a+" lower bound should not greater then uppper bound."),a[0]===a[1]&&s[0]&&s[1]&&(o.value=a[0])}o.visual=xw.retrieveVisuals(e),t.push(o)},this),lM(e,t),au(t),M(t,function(e){var t=e.close,n=[["<","â¤"][t[1]],[">","â¥"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,n)},this)}};function lM(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}qA.extend({type:"visualMap.piecewise",doRender:function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),r=t.textStyleModel,o=r.getFont(),i=r.getTextColor(),a=this._getItemAlign(),s=t.itemSize,l=this._getViewData(),u=l.endsText,c=J(t.get("showLabel",!0),!u);u&&this._renderEndsText(e,u[0],s,c,a),M(l.viewPieceList,function(r){var l=r.piece,u=new Ln;u.onclick=D(this._onItemClick,this,l),this._enableHoverLink(u,r.indexInModelPieceList);var f=t.getRepresentValue(l);if(this._createItemSymbol(u,f,[0,0,s[0],s[1]]),c){var h=this.visualMapModel.getValueState(f);u.add(new Ka({style:{x:"right"===a?-n:s[0]+n,y:s[1]/2,text:l.text,textVerticalAlign:"middle",textAlign:a,textFont:o,textFill:i,opacity:"outOfRange"===h?.5:1}}))}e.add(u)},this),u&&this._renderEndsText(e,u[1],s,c,a),Au(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(e,t){function n(e){var n=this.visualMapModel;n.option.hoverLink&&this.api.dispatchAction({type:e,batch:XA(n.findTargetDataIndices(t),n)})}e.on("mouseover",D(n,this,"highlight")).on("mouseout",D(n,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return YA(e,this.api,e.itemSize);var n=t.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(e,t,n,r,o){if(t){var i=new Ln,a=this.visualMapModel.textStyleModel;i.add(new Ka({style:{x:r?"right"===o?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:r?o:"center",text:t,textFont:a.getFont(),textFill:a.getTextColor()}})),e.add(i)}},_getViewData:function(){var e=this.visualMapModel,t=R(e.getPieceList(),function(e,t){return{piece:e,indexInModelPieceList:t}}),n=e.get("text"),r=e.get("orient"),o=e.get("inverse");return("horizontal"===r?o:!o)?t.reverse():n&&(n=n.slice().reverse()),{viewPieceList:t,endsText:n}},_createItemSymbol:function(e,t,n){e.add(Ty(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,n=t.option,r=b(n.selected),o=t.getSelectedMapKey(e);"single"===n.selectedMode?(r[o]=!0,M(r,function(e,t){r[t]=t===o})):r[o]=!r[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:r})}});Sp(MA);var uM,cM="urn:schemas-microsoft-com:vml",fM="undefined"==typeof window?null:window,hM=!1,pM=fM&&fM.document;function dM(e){return uM(e)}if(pM&&!a.canvasSupported)try{!pM.namespaces.zrvml&&pM.namespaces.add("zrvml",cM),uM=function(e){return pM.createElement("<zrvml:"+e+' class="zrvml">')}}catch(e){uM=function(e){return pM.createElement("<"+e+' xmlns="'+cM+'" class="zrvml">')}}var yM=pa.CMD,vM=Math.round,gM=Math.sqrt,mM=Math.abs,bM=Math.cos,wM=Math.sin,_M=Math.max;if(!a.canvasSupported){var xM=21600,SM=xM/2,OM=function(e){e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",e.coordsize=xM+","+xM,e.coordorigin="0,0"},PM=function(e,t,n){return"rgb("+[e,t,n].join(",")+")"},TM=function(e,t){t&&e&&t.parentNode!==e&&e.appendChild(t)},kM=function(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)},CM=function(e,t,n){return 1e5*(parseFloat(e)||0)+1e3*(parseFloat(t)||0)+n},EM=$r,AM=function(e,t,n){var r=Jt(t);n=+n,isNaN(n)&&(n=1),r&&(e.color=PM(r[0],r[1],r[2]),e.opacity=n*r[3])},MM=function(e,t,n,r){var o="fill"===t,i=e.getElementsByTagName(t)[0];null!=n[t]&&"none"!==n[t]&&(o||!o&&n.lineWidth)?(e[o?"filled":"stroked"]="true",n[t]instanceof Ss&&kM(e,i),i||(i=dM(t)),o?function(e,t,n){var r,o,i=t.fill;if(null!=i)if(i instanceof Ss){var a,s=0,l=[0,0],u=0,c=1,f=n.getBoundingRect(),h=f.width,p=f.height;if("linear"===i.type){a="gradient";var d=n.transform,y=[i.x*h,i.y*p],v=[i.x2*h,i.y2*p];d&&(Te(y,y,d),Te(v,v,d));var g=v[0]-y[0],m=v[1]-y[1];(s=180*Math.atan2(g,m)/Math.PI)<0&&(s+=360),s<1e-6&&(s=0)}else{a="gradientradial",y=[i.x*h,i.y*p],d=n.transform;var b=n.scale,w=h,_=p;l=[(y[0]-f.x)/w,(y[1]-f.y)/_],d&&Te(y,y,d),w/=b[0]*xM,_/=b[1]*xM;var x=_M(w,_);u=0/x,c=2*i.r/x-u}var S=i.colorStops.slice();S.sort(function(e,t){return e.offset-t.offset});for(var O=S.length,P=[],T=[],k=0;k<O;k++){var C=S[k],E=(r=C.color,o=Jt(r),[PM(o[0],o[1],o[2]),o[3]]);T.push(C.offset*c+u+" "+E[0]),0!==k&&k!==O-1||P.push(E)}if(O>=2){var A=P[0][0],M=P[1][0],R=P[0][1]*t.opacity,I=P[1][1]*t.opacity;e.type=a,e.method="none",e.focus="100%",e.angle=s,e.color=A,e.color2=M,e.colors=T.join(","),e.opacity=I,e.opacity2=R}"radial"===a&&(e.focusposition=l.join(","))}else AM(e,i,t.opacity)}(i,n,r):function(e,t){t.lineDash&&(e.dashstyle=t.lineDash.join(" ")),null==t.stroke||t.stroke instanceof Ss||AM(e,t.stroke,t.opacity)}(i,n),TM(e,i)):(e[o?"filled":"stroked"]="false",kM(e,i))},RM=[[],[],[]];ja.prototype.brushVML=function(e){var t=this.style,n=this._vmlEl;n||(n=dM("shape"),OM(n),this._vmlEl=n),MM(n,"fill",t,this),MM(n,"stroke",t,this);var r=this.transform,o=null!=r,i=n.getElementsByTagName("stroke")[0];if(i){var a=t.lineWidth;if(o&&!t.strokeNoScale){var s=r[0]*r[3]-r[1]*r[2];a*=gM(mM(s))}i.weight=a+"px"}var l=this.path||(this.path=new pa);this.__dirtyPath&&(l.beginPath(),l.subPixelOptimize=!1,this.buildPath(l,this.shape),l.toStatic(),this.__dirtyPath=!1),n.path=function(e,t){var n,r,o,i,a,s,l=yM.M,u=yM.C,c=yM.L,f=yM.A,h=yM.Q,p=[],d=e.data,y=e.len();for(i=0;i<y;){switch(r="",n=0,o=d[i++]){case l:r=" m ",n=1,a=d[i++],s=d[i++],RM[0][0]=a,RM[0][1]=s;break;case c:r=" l ",n=1,a=d[i++],s=d[i++],RM[0][0]=a,RM[0][1]=s;break;case h:case u:r=" c ",n=3;var v,g,m=d[i++],b=d[i++],w=d[i++],_=d[i++];o===h?(v=w,g=_,w=(w+2*m)/3,_=(_+2*b)/3,m=(a+2*m)/3,b=(s+2*b)/3):(v=d[i++],g=d[i++]),RM[0][0]=m,RM[0][1]=b,RM[1][0]=w,RM[1][1]=_,RM[2][0]=v,RM[2][1]=g,a=v,s=g;break;case f:var x=0,S=0,O=1,P=1,T=0;t&&(x=t[4],S=t[5],O=gM(t[0]*t[0]+t[1]*t[1]),P=gM(t[2]*t[2]+t[3]*t[3]),T=Math.atan2(-t[1]/P,t[0]/O));var k=d[i++],C=d[i++],E=d[i++],A=d[i++],M=d[i++]+T,R=d[i++]+M+T;i++;var I=d[i++],j=k+bM(M)*E,L=C+wM(M)*A,D=(m=k+bM(R)*E,b=C+wM(R)*A,I?" wa ":" at ");Math.abs(j-m)<1e-4&&(Math.abs(R-M)>.01?I&&(j+=.0125):Math.abs(L-C)<1e-4?I&&j<k||!I&&j>k?b-=.0125:b+=.0125:I&&L<C||!I&&L>C?m+=.0125:m-=.0125),p.push(D,vM(((k-E)*O+x)*xM-SM),",",vM(((C-A)*P+S)*xM-SM),",",vM(((k+E)*O+x)*xM-SM),",",vM(((C+A)*P+S)*xM-SM),",",vM((j*O+x)*xM-SM),",",vM((L*P+S)*xM-SM),",",vM((m*O+x)*xM-SM),",",vM((b*P+S)*xM-SM)),a=m,s=b;break;case yM.R:var N=RM[0],B=RM[1];N[0]=d[i++],N[1]=d[i++],B[0]=N[0]+d[i++],B[1]=N[1]+d[i++],t&&(Te(N,N,t),Te(B,B,t)),N[0]=vM(N[0]*xM-SM),B[0]=vM(B[0]*xM-SM),N[1]=vM(N[1]*xM-SM),B[1]=vM(B[1]*xM-SM),p.push(" m ",N[0],",",N[1]," l ",B[0],",",N[1]," l ",B[0],",",B[1]," l ",N[0],",",B[1]);break;case yM.Z:p.push(" x ")}if(n>0){p.push(r);for(var F=0;F<n;F++){var G=RM[F];t&&Te(G,G,t),p.push(vM(G[0]*xM-SM),",",vM(G[1]*xM-SM),F<n-1?",":"")}}}return p.join("")}(l,this.transform),n.style.zIndex=CM(this.zlevel,this.z,this.z2),TM(e,n),null!=t.text?this.drawRectText(e,this.getBoundingRect()):this.removeRectText(e)},ja.prototype.onRemove=function(e){kM(e,this._vmlEl),this.removeRectText(e)},ja.prototype.onAdd=function(e){TM(e,this._vmlEl),this.appendRectText(e)};io.prototype.brushVML=function(e){var t,n,r,o=this.style,i=o.image;if("object"===s(r=i)&&r.tagName&&"IMG"===r.tagName.toUpperCase()){var a=i.src;if(a===this._imageSrc)t=this._imageWidth,n=this._imageHeight;else{var l=i.runtimeStyle,u=l.width,c=l.height;l.width="auto",l.height="auto",t=i.width,n=i.height,l.width=u,l.height=c,this._imageSrc=a,this._imageWidth=t,this._imageHeight=n}i=a}else i===this._imageSrc&&(t=this._imageWidth,n=this._imageHeight);if(i){var f=o.x||0,h=o.y||0,p=o.width,d=o.height,y=o.sWidth,v=o.sHeight,g=o.sx||0,m=o.sy||0,b=y&&v,w=this._vmlEl;w||(w=pM.createElement("div"),OM(w),this._vmlEl=w);var _,x=w.style,S=!1,O=1,P=1;if(this.transform&&(_=this.transform,O=gM(_[0]*_[0]+_[1]*_[1]),P=gM(_[2]*_[2]+_[3]*_[3]),S=_[1]||_[2]),S){var T=[f,h],k=[f+p,h],C=[f,h+d],E=[f+p,h+d];Te(T,T,_),Te(k,k,_),Te(C,C,_),Te(E,E,_);var A=_M(T[0],k[0],C[0],E[0]),M=_M(T[1],k[1],C[1],E[1]),R=[];R.push("M11=",_[0]/O,",","M12=",_[2]/P,",","M21=",_[1]/O,",","M22=",_[3]/P,",","Dx=",vM(f*O+_[4]),",","Dy=",vM(h*P+_[5])),x.padding="0 "+vM(A)+"px "+vM(M)+"px 0",x.filter="progid:DXImageTransform.Microsoft.Matrix("+R.join("")+", SizingMethod=clip)"}else _&&(f=f*O+_[4],h=h*P+_[5]),x.filter="",x.left=vM(f)+"px",x.top=vM(h)+"px";var I=this._imageEl,j=this._cropEl;I||(I=pM.createElement("div"),this._imageEl=I);var L=I.style;if(b){if(t&&n)L.width=vM(O*t*p/y)+"px",L.height=vM(P*n*d/v)+"px";else{var D=new Image,N=this;D.onload=function(){D.onload=null,t=D.width,n=D.height,L.width=vM(O*t*p/y)+"px",L.height=vM(P*n*d/v)+"px",N._imageWidth=t,N._imageHeight=n,N._imageSrc=i},D.src=i}j||((j=pM.createElement("div")).style.overflow="hidden",this._cropEl=j);var B=j.style;B.width=vM((p+g*p/y)*O),B.height=vM((d+m*d/v)*P),B.filter="progid:DXImageTransform.Microsoft.Matrix(Dx="+-g*p/y*O+",Dy="+-m*d/v*P+")",j.parentNode||w.appendChild(j),I.parentNode!==j&&j.appendChild(I)}else L.width=vM(O*p)+"px",L.height=vM(P*d)+"px",w.appendChild(I),j&&j.parentNode&&(w.removeChild(j),this._cropEl=null);var F="",G=o.opacity;G<1&&(F+=".Alpha(opacity="+vM(100*G)+") "),F+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+i+", SizingMethod=scale)",L.filter=F,w.style.zIndex=CM(this.zlevel,this.z,this.z2),TM(e,w),null!=o.text&&this.drawRectText(e,this.getBoundingRect())}},io.prototype.onRemove=function(e){kM(e,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(e)},io.prototype.onAdd=function(e){TM(e,this._vmlEl),this.appendRectText(e)};var IM,jM={},LM=0,DM=document.createElement("div");!function(e,t){mr[e]=t}("measureText",function(e,t){var n=pM;IM||((IM=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",pM.body.appendChild(IM));try{IM.style.font=t}catch(e){}return IM.innerHTML="",IM.appendChild(n.createTextNode(e)),{width:IM.offsetWidth}});for(var NM=new jn,BM=function(e,t,n,r){var o=this.style;this.__dirty&&zr(o);var i=o.text;if(null!=i&&(i+=""),i){if(o.rich){var a=Mr(i,o);i=[];for(var s=0;s<a.lines.length;s++){for(var l=a.lines[s].tokens,u=[],c=0;c<l.length;c++)u.push(l[c].text);i.push(u.join(""))}i=i.join("\n")}var f,h,p=o.textAlign,d=o.textVerticalAlign,y=function(e){var t=jM[e];if(!t){LM>100&&(LM=0,jM={});var n,r=DM.style;try{r.font=e,n=r.fontFamily.split(",")[0]}catch(e){}t={style:r.fontStyle||"normal",variant:r.fontVariant||"normal",weight:r.fontWeight||"normal",size:0|parseFloat(r.fontSize||12),family:n||"Microsoft YaHei"},jM[e]=t,LM++}return t}(o.font),v=y.style+" "+y.variant+" "+y.weight+" "+y.size+'px "'+y.family+'"';n=n||wr(i,v,p,d,o.textPadding,o.textLineHeight);var g=this.transform;if(g&&!r&&(NM.copy(t),NM.applyTransform(g),t=NM),r)f=t.x,h=t.y;else{var m=o.textPosition;if(m instanceof Array)f=t.x+EM(m[0],t.width),h=t.y+EM(m[1],t.height),p=p||"left";else{var b=this.calculateTextPosition?this.calculateTextPosition({},o,t):Sr({},o,t);f=b.x,h=b.y,p=p||b.textAlign,d=d||b.textVerticalAlign}}f=_r(f,n.width,p),h=xr(h,n.height,d),h+=n.height/2;var w,_,x,S=dM,O=this._textVmlEl;O?_=(w=(x=O.firstChild).nextSibling).nextSibling:(O=S("line"),w=S("path"),_=S("textpath"),x=S("skew"),_.style["v-text-align"]="left",OM(O),w.textpathok=!0,_.on=!0,O.from="0 0",O.to="1000 0.05",TM(O,x),TM(O,w),TM(O,_),this._textVmlEl=O);var P=[f,h],T=O.style;g&&r?(Te(P,P,g),x.on=!0,x.matrix=g[0].toFixed(3)+","+g[2].toFixed(3)+","+g[1].toFixed(3)+","+g[3].toFixed(3)+",0,0",x.offset=(vM(P[0])||0)+","+(vM(P[1])||0),x.origin="0 0",T.left="0px",T.top="0px"):(x.on=!1,T.left=vM(f)+"px",T.top=vM(h)+"px"),_.string=String(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{_.style.font=v}catch(e){}MM(O,"fill",{fill:o.textFill,opacity:o.opacity},this),MM(O,"stroke",{stroke:o.textStroke,opacity:o.opacity,lineDash:o.lineDash||null},this),O.style.zIndex=CM(this.zlevel,this.z,this.z2),TM(e,O)}},FM=function(e){kM(e,this._textVmlEl),this._textVmlEl=null},GM=function(e){TM(e,this._textVmlEl)},zM=[ro,oo,io,ja,Ka],VM=0;VM<zM.length;VM++){var HM=zM[VM].prototype;HM.drawRectText=BM,HM.removeRectText=FM,HM.appendRectText=GM}Ka.prototype.brushVML=function(e){var t=this.style;null!=t.text?this.drawRectText(e,{x:t.x||0,y:t.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(e)},Ka.prototype.onRemove=function(e){this.removeRectText(e)},Ka.prototype.onAdd=function(e){this.appendRectText(e)}}function WM(e){return parseInt(e,10)}function UM(e,t){!function(){if(!hM&&pM){hM=!0;var e=pM.styleSheets;e.length<31?pM.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):e[0].addRule(".zrvml","behavior:url(#default#VML)")}}(),this.root=e,this.storage=t;var n=document.createElement("div"),r=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",r.style.cssText="position:absolute;left:0;top:0;",e.appendChild(n),this._vmlRoot=r,this._vmlViewport=n,this.resize();var o=t.delFromStorage,i=t.addToStorage;t.delFromStorage=function(e){o.call(t,e),e&&e.onRemove&&e.onRemove(r)},t.addToStorage=function(e){e.onAdd&&e.onAdd(r),i.call(t,e)},this._firstPaint=!0}UM.prototype={constructor:UM,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0,!0);this._paintList(e)},_paintList:function(e){for(var t=this._vmlRoot,n=0;n<e.length;n++){var r=e[n];r.invisible||r.ignore?(r.__alreadyNotVisible||r.onRemove(t),r.__alreadyNotVisible=!0):(r.__alreadyNotVisible&&r.onAdd(t),r.__alreadyNotVisible=!1,r.__dirty&&(r.beforeBrush&&r.beforeBrush(),(r.brushVML||r.brush).call(r,t),r.afterBrush&&r.afterBrush())),r.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(t),this._firstPaint=!1)},resize:function(e,t){e=null==e?this._getWidth():e,t=null==t?this._getHeight():t;if(this._width!==e||this._height!==t){this._width=e,this._height=t;var n=this._vmlViewport.style;n.width=e+"px",n.height=t+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var e=this.root,t=e.currentStyle;return(e.clientWidth||WM(t.width))-WM(t.paddingLeft)-WM(t.paddingRight)|0},_getHeight:function(){var e=this.root,t=e.currentStyle;return(e.clientHeight||WM(t.height))-WM(t.paddingTop)-WM(t.paddingBottom)|0}},M(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(e){var t;UM.prototype[e]=(t=e,function(){xn('In IE8.0 VML mode painter not support method "'+t+'"')})}),Bo("vml",UM);var JM="http://www.w3.org/2000/svg";function qM(e){return document.createElementNS(JM,e)}var YM=pa.CMD,XM=Array.prototype.join,ZM="none",QM=Math.round,KM=Math.sin,$M=Math.cos,eR=Math.PI,tR=2*Math.PI,nR=180/eR,rR=1e-4;function oR(e){return QM(1e4*e)/1e4}function iR(e){return e<rR&&e>-rR}function aR(e,t){t&&sR(e,"transform","matrix("+XM.call(t,",")+")")}function sR(e,t,n){(!n||"linear"!==n.type&&"radial"!==n.type)&&e.setAttribute(t,n)}function lR(e,t,n,r){if(function(e,t){var n=t?e.textFill:e.fill;return null!=n&&n!==ZM}(t,n)){var o=n?t.textFill:t.fill;sR(e,"fill",o="transparent"===o?ZM:o),sR(e,"fill-opacity",null!=t.fillOpacity?t.fillOpacity*t.opacity:t.opacity)}else sR(e,"fill",ZM);if(function(e,t){var n=t?e.textStroke:e.stroke;return null!=n&&n!==ZM}(t,n)){var i=n?t.textStroke:t.stroke;sR(e,"stroke",i="transparent"===i?ZM:i),sR(e,"stroke-width",(n?t.textStrokeWidth:t.lineWidth)/(!n&&t.strokeNoScale?r.getLineScale():1)),sR(e,"paint-order",n?"stroke":"fill"),sR(e,"stroke-opacity",null!=t.strokeOpacity?t.strokeOpacity:t.opacity),t.lineDash?(sR(e,"stroke-dasharray",t.lineDash.join(",")),sR(e,"stroke-dashoffset",QM(t.lineDashOffset||0))):sR(e,"stroke-dasharray",""),t.lineCap&&sR(e,"stroke-linecap",t.lineCap),t.lineJoin&&sR(e,"stroke-linejoin",t.lineJoin),t.miterLimit&&sR(e,"stroke-miterlimit",t.miterLimit)}else sR(e,"stroke",ZM)}var uR={};uR.brush=function(e){var t=e.style,n=e.__svgEl;n||(n=qM("path"),e.__svgEl=n),e.path||e.createPathProxy();var r=e.path;if(e.__dirtyPath){r.beginPath(),r.subPixelOptimize=!1,e.buildPath(r,e.shape),e.__dirtyPath=!1;var o=function(e){for(var t=[],n=e.data,r=e.len(),o=0;o<r;){var i="",a=0;switch(n[o++]){case YM.M:i="M",a=2;break;case YM.L:i="L",a=2;break;case YM.Q:i="Q",a=4;break;case YM.C:i="C",a=6;break;case YM.A:var s=n[o++],l=n[o++],u=n[o++],c=n[o++],f=n[o++],h=n[o++],p=n[o++],d=n[o++],y=Math.abs(h),v=iR(y-tR)||(d?h>=tR:-h>=tR),g=h>0?h%tR:h%tR+tR,m=!1;m=!!v||!iR(y)&&g>=eR==!!d;var b=oR(s+u*$M(f)),w=oR(l+c*KM(f));v&&(h=d?tR-1e-4:1e-4-tR,m=!0,9===o&&t.push("M",b,w));var _=oR(s+u*$M(f+h)),x=oR(l+c*KM(f+h));t.push("A",oR(u),oR(c),QM(p*nR),+m,+d,_,x);break;case YM.Z:i="Z";break;case YM.R:_=oR(n[o++]),x=oR(n[o++]);var S=oR(n[o++]),O=oR(n[o++]);t.push("M",_,x,"L",_+S,x,"L",_+S,x+O,"L",_,x+O,"L",_,x)}i&&t.push(i);for(var P=0;P<a;P++)t.push(oR(n[o++]))}return t.join(" ")}(r);o.indexOf("NaN")<0&&sR(n,"d",o)}lR(n,t,!1,e),aR(n,e.transform),null!=t.text?vR(e,e.getBoundingRect()):mR(e)};var cR={brush:function(e){var t=e.style,n=t.image;n instanceof HTMLImageElement&&(n=n.src);if(n){var r=t.x||0,o=t.y||0,i=t.width,a=t.height,s=e.__svgEl;s||(s=qM("image"),e.__svgEl=s),n!==e.__imageSrc&&(!function(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}(s,"href",n),e.__imageSrc=n),sR(s,"width",i),sR(s,"height",a),sR(s,"x",r),sR(s,"y",o),aR(s,e.transform),null!=t.text?vR(e,e.getBoundingRect()):mR(e)}}},fR={},hR=new jn,pR={},dR=[],yR={left:"start",right:"end",center:"middle",middle:"middle"},vR=function(e,t){var n=e.style,r=e.transform,o=e instanceof Ka||n.transformText;e.__dirty&&zr(n);var i=n.text;if(null!=i&&(i+=""),to(i,n)){null==i&&(i=""),!o&&r&&(hR.copy(t),hR.applyTransform(r),t=hR);var a=e.__textSvgEl;a||(a=qM("text"),e.__textSvgEl=a);var s=a.style,l=n.font||gr,u=a.__computedFont;l!==a.__styleFont&&(s.font=a.__styleFont=l,u=a.__computedFont=s.font);var c=n.textPadding,f=n.textLineHeight,h=e.__textCotentBlock;h&&!e.__dirtyText||(h=e.__textCotentBlock=Ar(i,u,c,f,n.truncate));var p=h.outerHeight,d=h.lineHeight;Xr(pR,e,n,t);var y=pR.baseX,v=pR.baseY,g=pR.textAlign||"left",m=pR.textVerticalAlign;!function(e,t,n,r,o,i,a){ct(dR),t&&n&&ft(dR,n);var s=r.textRotation;if(o&&s){var l=r.textOrigin;"center"===l?(i=o.width/2+o.x,a=o.height/2+o.y):l&&(i=l[0]+o.x,a=l[1]+o.y),dR[4]-=i,dR[5]-=a,dt(dR,dR,s),dR[4]+=i,dR[5]+=a}aR(e,dR)}(a,o,r,n,t,y,v);var b=y,w=xr(v,p,m);c&&(b=function(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}(y,g,c),w+=c[0]),w+=d/2,lR(a,n,!0,e);var _=h.canCacheByTextString,x=e.__tspanList||(e.__tspanList=[]),S=x.length;if(_&&e.__canCacheByTextString&&e.__text===i){if(e.__dirtyText&&S)for(var O=0;O<S;++O)gR(x[O],g,b,w+O*d)}else{e.__text=i,e.__canCacheByTextString=_;var P=h.lines,T=P.length;for(O=0;O<T;O++){var k=x[O],C=P[O];k?k.__zrText!==C&&(k.innerHTML="",k.appendChild(document.createTextNode(C))):(k=x[O]=qM("tspan"),a.appendChild(k),k.appendChild(document.createTextNode(C))),gR(k,g,b,w+O*d)}if(S>T){for(;O<S;O++)a.removeChild(x[O]);x.length=T}}}};function gR(e,t,n,r){sR(e,"dominant-baseline","middle"),sR(e,"text-anchor",yR[t]),sR(e,"x",n),sR(e,"y",r)}function mR(e){e&&e.__textSvgEl&&(e.__textSvgEl.parentNode&&e.__textSvgEl.parentNode.removeChild(e.__textSvgEl),e.__textSvgEl=null,e.__tspanList=[],e.__text=null)}function bR(){}function wR(e,t,n,r){for(var o=0,i=t.length,a=0,s=0;o<i;o++){var l=t[o];if(l.removed){for(u=[],c=s;c<s+l.count;c++)u.push(c);l.indices=u,s+=l.count}else{for(var u=[],c=a;c<a+l.count;c++)u.push(c);l.indices=u,a+=l.count,l.added||(s+=l.count)}}return t}fR.drawRectText=vR,fR.brush=function(e){null!=e.style.text?vR(e,!1):mR(e)},bR.prototype={diff:function(e,t,n){n||(n=function(e,t){return e===t}),this.equals=n;var r=this;e=e.slice();var o=(t=t.slice()).length,i=e.length,a=1,s=o+i,l=[{newPos:-1,components:[]}],u=this.extractCommon(l[0],t,e,0);if(l[0].newPos+1>=o&&u+1>=i){for(var c=[],f=0;f<t.length;f++)c.push(f);return[{indices:c,count:t.length}]}function h(){for(var n=-1*a;n<=a;n+=2){var s,u=l[n-1],c=l[n+1],f=(c?c.newPos:0)-n;u&&(l[n-1]=void 0);var h=u&&u.newPos+1<o,p=c&&0<=f&&f<i;if(h||p){if(!h||p&&u.newPos<c.newPos?(s={newPos:(d=c).newPos,components:d.components.slice(0)},r.pushComponent(s.components,void 0,!0)):((s=u).newPos++,r.pushComponent(s.components,!0,void 0)),f=r.extractCommon(s,t,e,n),s.newPos+1>=o&&f+1>=i)return wR(r,s.components,t,e);l[n]=s}else l[n]=void 0}var d;a++}for(;a<=s;){var p=h();if(p)return p}},pushComponent:function(e,t,n){var r=e[e.length-1];r&&r.added===t&&r.removed===n?e[e.length-1]={count:r.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,r){for(var o=t.length,i=n.length,a=e.newPos,s=a-r,l=0;a+1<o&&s+1<i&&this.equals(t[a+1],n[s+1]);)a++,s++,l++;return l&&e.components.push({count:l}),e.newPos=a,s},tokenize:function(e){return e.slice()},join:function(e){return e.slice()}};var _R=new bR;function xR(e,t,n,r,o){this._zrId=e,this._svgRoot=t,this._tagNames="string"==typeof n?[n]:n,this._markLabel=r,this._domName=o||"_dom",this.nextId=0}function SR(e,t){xR.call(this,e,t,["linearGradient","radialGradient"],"__gradient_in_use__")}function OR(e,t){xR.call(this,e,t,"clipPath","__clippath_in_use__")}function PR(e,t){xR.call(this,e,t,["filter"],"__filter_in_use__","_shadowDom")}function TR(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY||e.textShadowBlur||e.textShadowOffsetX||e.textShadowOffsetY)}function kR(e){return parseInt(e,10)}function CR(e,t){return t&&e&&t.parentNode!==e}function ER(e,t,n){if(CR(e,t)&&n){var r=n.nextSibling;r?e.insertBefore(t,r):e.appendChild(t)}}function AR(e,t){if(CR(e,t)){var n=e.firstChild;n?e.insertBefore(t,n):e.appendChild(t)}}function MR(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)}function RR(e){return e.__textSvgEl}function IR(e){return e.__svgEl}xR.prototype.createElement=qM,xR.prototype.getDefs=function(e){var t=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?e?((n=t.insertBefore(this.createElement("defs"),t.firstChild)).contains||(n.contains=function(e){var t=n.children;if(!t)return!1;for(var r=t.length-1;r>=0;--r)if(t[r]===e)return!0;return!1}),n):null:n[0]},xR.prototype.update=function(e,t){if(e){var n=this.getDefs(!1);if(e[this._domName]&&n.contains(e[this._domName]))"function"==typeof t&&t(e);else{var r=this.add(e);r&&(e[this._domName]=r)}}},xR.prototype.addDom=function(e){this.getDefs(!0).appendChild(e)},xR.prototype.removeDom=function(e){var t=this.getDefs(!1);t&&e[this._domName]&&(t.removeChild(e[this._domName]),e[this._domName]=null)},xR.prototype.getDoms=function(){var e=this.getDefs(!1);if(!e)return[];var t=[];return M(this._tagNames,function(n){var r=e.getElementsByTagName(n);t=t.concat([].slice.call(r))}),t},xR.prototype.markAllUnused=function(){var e=this;M(this.getDoms(),function(t){t[e._markLabel]="0"})},xR.prototype.markUsed=function(e){e&&(e[this._markLabel]="1")},xR.prototype.removeUnused=function(){var e=this.getDefs(!1);if(e){var t=this;M(this.getDoms(),function(n){"1"!==n[t._markLabel]&&e.removeChild(n)})}},xR.prototype.getSvgProxy=function(e){return e instanceof ja?uR:e instanceof io?cR:e instanceof Ka?fR:uR},xR.prototype.getTextSvgElement=function(e){return e.__textSvgEl},xR.prototype.getSvgElement=function(e){return e.__svgEl},C(SR,xR),SR.prototype.addWithoutUpdate=function(e,t){if(t&&t.style){var n=this;M(["fill","stroke"],function(r){if(t.style[r]&&("linear"===t.style[r].type||"radial"===t.style[r].type)){var o,i=t.style[r],a=n.getDefs(!0);i._dom?(o=i._dom,a.contains(i._dom)||n.addDom(o)):o=n.add(i),n.markUsed(t);var s=o.getAttribute("id");e.setAttribute(r,"url(#"+s+")")}})}},SR.prototype.add=function(e){var t;if("linear"===e.type)t=this.createElement("linearGradient");else{if("radial"!==e.type)return xn("Illegal gradient type."),null;t=this.createElement("radialGradient")}return e.id=e.id||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-gradient-"+e.id),this.updateDom(e,t),this.addDom(t),t},SR.prototype.update=function(e){var t=this;xR.prototype.update.call(this,e,function(){var n=e.type,r=e._dom.tagName;"linear"===n&&"linearGradient"===r||"radial"===n&&"radialGradient"===r?t.updateDom(e,e._dom):(t.removeDom(e),t.add(e))})},SR.prototype.updateDom=function(e,t){if("linear"===e.type)t.setAttribute("x1",e.x),t.setAttribute("y1",e.y),t.setAttribute("x2",e.x2),t.setAttribute("y2",e.y2);else{if("radial"!==e.type)return void xn("Illegal gradient type.");t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("r",e.r)}e.global?t.setAttribute("gradientUnits","userSpaceOnUse"):t.setAttribute("gradientUnits","objectBoundingBox"),t.innerHTML="";for(var n=e.colorStops,r=0,o=n.length;r<o;++r){var i=this.createElement("stop");i.setAttribute("offset",100*n[r].offset+"%");var a=n[r].color;if(a.indexOf("rgba")>-1){var s=Jt(a)[3],l=Xt(a);i.setAttribute("stop-color","#"+l),i.setAttribute("stop-opacity",s)}else i.setAttribute("stop-color",n[r].color);t.appendChild(i)}e._dom=t},SR.prototype.markUsed=function(e){if(e.style){var t=e.style.fill;t&&t._dom&&xR.prototype.markUsed.call(this,t._dom),(t=e.style.stroke)&&t._dom&&xR.prototype.markUsed.call(this,t._dom)}},C(OR,xR),OR.prototype.update=function(e){var t=this.getSvgElement(e);t&&this.updateDom(t,e.__clipPaths,!1);var n=this.getTextSvgElement(e);n&&this.updateDom(n,e.__clipPaths,!0),this.markUsed(e)},OR.prototype.updateDom=function(e,t,n){if(t&&t.length>0){var r,o,i=this.getDefs(!0),a=t[0],s=n?"_textDom":"_dom";a[s]?(o=a[s].getAttribute("id"),r=a[s],i.contains(r)||i.appendChild(r)):(o="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(r=this.createElement("clipPath")).setAttribute("id",o),i.appendChild(r),a[s]=r);var l=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!n){var u=Array.prototype.slice.call(a.transform);ht(a.transform,a.parent.invTransform,a.transform),l.brush(a),a.transform=u}else l.brush(a);var c=this.getSvgElement(a);r.innerHTML="",r.appendChild(c.cloneNode()),e.setAttribute("clip-path","url(#"+o+")"),t.length>1&&this.updateDom(r,t.slice(1),n)}else e&&e.setAttribute("clip-path","none")},OR.prototype.markUsed=function(e){var t=this;e.__clipPaths&&M(e.__clipPaths,function(e){e._dom&&xR.prototype.markUsed.call(t,e._dom),e._textDom&&xR.prototype.markUsed.call(t,e._textDom)})},C(PR,xR),PR.prototype.addWithoutUpdate=function(e,t){if(t&&TR(t.style)){var n;if(t._shadowDom)n=t._shadowDom,this.getDefs(!0).contains(t._shadowDom)||this.addDom(n);else n=this.add(t);this.markUsed(t);var r=n.getAttribute("id");e.style.filter="url(#"+r+")"}},PR.prototype.add=function(e){var t=this.createElement("filter");return e._shadowDomId=e._shadowDomId||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-shadow-"+e._shadowDomId),this.updateDom(e,t),this.addDom(t),t},PR.prototype.update=function(e,t){if(TR(t.style)){var n=this;xR.prototype.update.call(this,t,function(){n.updateDom(t,t._shadowDom)})}else this.remove(e,t)},PR.prototype.remove=function(e,t){null!=t._shadowDomId&&(this.removeDom(e),e.style.filter="")},PR.prototype.updateDom=function(e,t){var n=t.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var r,o,i,a,s=e.style,l=e.scale&&e.scale[0]||1,u=e.scale&&e.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)r=s.shadowOffsetX||0,o=s.shadowOffsetY||0,i=s.shadowBlur,a=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(t,s);r=s.textShadowOffsetX||0,o=s.textShadowOffsetY||0,i=s.textShadowBlur,a=s.textShadowColor}n.setAttribute("dx",r/l),n.setAttribute("dy",o/u),n.setAttribute("flood-color",a);var c=i/2/l+" "+i/2/u;n.setAttribute("stdDeviation",c),t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width",Math.ceil(i/2*200)+"%"),t.setAttribute("height",Math.ceil(i/2*200)+"%"),t.appendChild(n),e._shadowDom=t},PR.prototype.markUsed=function(e){e._shadowDom&&xR.prototype.markUsed.call(this,e._shadowDom)};var jR=function(e,t,n,r){this.root=e,this.storage=t,this._opts=n=x({},n||{});var o=qM("svg");o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("version","1.1"),o.setAttribute("baseProfile","full"),o.style.cssText="user-select:none;position:absolute;left:0;top:0;";var i=qM("g");o.appendChild(i);var a=qM("g");o.appendChild(a),this.gradientManager=new SR(r,a),this.clipPathManager=new OR(r,a),this.shadowManager=new PR(r,a);var s=document.createElement("div");s.style.cssText="overflow:hidden;position:relative",this._svgDom=o,this._svgRoot=a,this._backgroundRoot=i,this._viewport=s,e.appendChild(s),s.appendChild(o),this.resize(n.width,n.height),this._visibleList=[]};jR.prototype={constructor:jR,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0);this._paintList(e)},setBackgroundColor:function(e){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var t=qM("rect");t.setAttribute("width",this.getWidth()),t.setAttribute("height",this.getHeight()),t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("id",0),t.style.fill=e,this._backgroundRoot.appendChild(t),this._backgroundNode=t},_paintList:function(e){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var t,n,r=this._svgRoot,o=this._visibleList,i=e.length,a=[];for(t=0;t<i;t++){var s=e[t],l=(n=s)instanceof ja?uR:n instanceof io?cR:n instanceof Ka?fR:uR,u=IR(s)||RR(s);s.invisible||(s.__dirty&&(l&&l.brush(s),this.clipPathManager.update(s),s.style&&(this.gradientManager.update(s.style.fill),this.gradientManager.update(s.style.stroke),this.shadowManager.update(u,s)),s.__dirty=!1),a.push(s))}var c,f,h,p,d=(c=o,f=a,_R.diff(c,f,h));for(t=0;t<d.length;t++){if((g=d[t]).removed)for(var y=0;y<g.count;y++){u=IR(s=o[g.indices[y]]);var v=RR(s);MR(r,u),MR(r,v)}}for(t=0;t<d.length;t++){var g;if((g=d[t]).added)for(y=0;y<g.count;y++){u=IR(s=a[g.indices[y]]),v=RR(s);p?ER(r,u,p):AR(r,u),u?ER(r,v,u):p?ER(r,v,p):AR(r,v),ER(r,v,u),p=v||u||p,this.gradientManager.addWithoutUpdate(u||v,s),this.shadowManager.addWithoutUpdate(u||v,s),this.clipPathManager.markUsed(s)}else if(!g.removed)for(y=0;y<g.count;y++){u=IR(s=a[g.indices[y]]),v=RR(s),u=IR(s),v=RR(s);this.gradientManager.markUsed(s),this.gradientManager.addWithoutUpdate(u||v,s),this.shadowManager.markUsed(s),this.shadowManager.addWithoutUpdate(u||v,s),this.clipPathManager.markUsed(s),v&&ER(r,v,u),p=u||v||p}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(e){var t,n=this._svgDom;return 0===(t=n.getElementsByTagName("defs")).length?e?((t=n.insertBefore(qM("defs"),n.firstChild)).contains||(t.contains=function(e){var n=t.children;if(!n)return!1;for(var r=n.length-1;r>=0;--r)if(n[r]===e)return!0;return!1}),t):null:t[0]},resize:function(e,t){var n=this._viewport;n.style.display="none";var r=this._opts;if(null!=e&&(r.width=e),null!=t&&(r.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||this._height!==t){this._width=e,this._height=t;var o=n.style;o.width=e+"px",o.height=t+"px";var i=this._svgDom;i.setAttribute("width",e),i.setAttribute("height",t)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",e),this._backgroundNode.setAttribute("height",t))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],r=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],i=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[r]||kR(s[n])||kR(a.style[n]))-(kR(s[o])||0)-(kR(s[i])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"))}},M(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(e){var t;jR.prototype[e]=(t=e,function(){xn('In SVG mode painter not support method "'+t+'"')})}),Bo("svg",jR),e.version=Ah,e.dependencies=Mh,e.PRIORITY=Lh,e.init=function(e,t,n){if(r){if(Do.replace(".","")-0<Mh.zrender.replace(".","")-0)throw new Error("zrender/src "+Do+" is too old for ECharts "+Ah+". Current version need ZRender "+Mh.zrender+"+");if(!e)throw new Error("Initialize failed: invalid dom.")}var o=_p(e);if(o)return r&&console.warn("There is a chart instance already initialized on the dom."),o;r&&(!W(e)||"CANVAS"===e.nodeName.toUpperCase()||(e.clientWidth||n&&null!=n.width)&&(e.clientHeight||n&&null!=n.height)||console.warn("Can't get DOM width or height. Please check dom.clientWidth and dom.clientHeight. They should not be 0.For example, you may need to call this in the callback of window.onload."));var i=new zh(e,t,n);return i.id="ec_"+vp++,dp[i.id]=i,oi(e,mp,i.id),function(e){var t="__connectUpdateStatus";function n(e,n){for(var r=0;r<e.length;r++)e[r][t]=n}Th(sp,function(r,o){e._messageCenter.on(o,function(r){if(yp[e.group]&&0!==e[t]){if(r&&r.escapeConnect)return;var o=e.makeActionFromEvent(r),i=[];Th(dp,function(t){t!==e&&t.group===e.group&&i.push(t)}),n(i,0),Th(i,function(e){1!==e[t]&&e.dispatchAction(o)}),n(i,2)}})})}(i),i},e.connect=function(e){if(B(e)){var t=e;e=null,Th(t,function(t){null!=t.group&&(e=t.group)}),e=e||"g_"+gp++,Th(t,function(t){t.group=e})}return yp[e]=!0,e},e.disConnect=bp,e.disconnect=wp,e.dispose=function(e){"string"==typeof e?e=dp[e]:e instanceof zh||(e=_p(e)),e instanceof zh&&!e.isDisposed()&&e.dispose()},e.getInstanceByDom=_p,e.getInstanceById=function(e){return dp[e]},e.registerTheme=xp,e.registerPreprocessor=Sp,e.registerProcessor=Op,e.registerPostUpdate=function(e){cp.push(e)},e.registerAction=Pp,e.registerCoordinateSystem=Tp,e.getCoordinateSystemDimensions=function(e){var t=gc.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},e.registerLayout=kp,e.registerVisual=Cp,e.registerLoading=Ap,e.extendComponentModel=Mp,e.extendComponentView=Rp,e.extendSeriesModel=Ip,e.extendChartView=jp,e.setCanvasCreator=function(e){m("createCanvas",e)},e.registerMap=function(e,t,n){Sh.registerMap(e,t,n)},e.getMap=function(e){var t=Sh.retrieveMap(e);return t&&t[0]&&{geoJson:t[0].geoJSON,specialAreas:t[0].specialAreas}},e.dataTool={},e.zrender=Go,e.number=lu,e.format=Pu,e.throttle=Rf,e.helper=Cy,e.matrix=mt,e.vector=Ee,e.color=rn,e.parseGeoJSON=jy,e.parseGeoJson=qy,e.util=Yy,e.graphic=Xy,e.List=$p,e.Model=Bl,e.Axis=Uy,e.env=a},"object"===s(t)?a(t):(o=[t],void 0===(i="function"==typeof(r=a)?r.apply(t,o):r)||(e.exports=i))},937:function(e){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){s.prototype.append=function(e,t){e=i(e),t=a(t);var n=this.map[e];n||(n=[],this.map[e]=n),n.push(t)},s.prototype.delete=function(e){delete this.map[i(e)]},s.prototype.get=function(e){var t=this.map[i(e)];return t?t[0]:null},s.prototype.getAll=function(e){return this.map[i(e)]||[]},s.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},s.prototype.set=function(e,t){this.map[i(e)]=[a(t)]},s.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)};var n={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},f.call(h.prototype),f.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},d.error=function(){var e=new d(null,{status:0,statusText:""});return e.type="error",e};var o=[301,302,303,307,308];d.redirect=function(e,t){if(-1===o.indexOf(t))throw new RangeError("Invalid status code");return new d(null,{status:t,headers:{location:e}})},t.Headers=s,t.Request=h,t.Response=d,t.fetch=function(e,t){return new Promise(function(r,o){var i;i=h.prototype.isPrototypeOf(e)&&!t?e:new h(e,t);var a=new XMLHttpRequest;var l=!1;function u(){if(4===a.readyState){var e=1223===a.status?204:a.status;if(e<100||e>599){if(l)return;return l=!0,void o(new TypeError("Network request failed"))}var t={status:e,statusText:a.statusText,headers:function(e){var t=new s;return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();t.append(r,o)}),t}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},n="response"in a?a.response:a.responseText;l||(l=!0,r(new d(n,t)))}}a.onreadystatechange=u,a.onload=u,a.onerror=function(){l||(l=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in a&&n.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0,e.exports&&(e.exports=t.fetch)}function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function s(e){this.map={},e instanceof s?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),u(t)}function f(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(n.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(n.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},n.blob?(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e,t,n,r,o,i,a,s=l(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,n=new FileReader,r=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=e.type.match(o)||r.match(o),a=[e],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,a),u(n);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=l(this);return e||Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e,t){var n,o,i=(t=t||{}).body;if(h.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new s(e.headers)),this.method=e.method,this.mode=e.mode,i||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new s(t.headers)),this.method=(n=t.method||this.method||"GET",o=n.toUpperCase(),r.indexOf(o)>-1?o:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,t)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function d(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof s?t.headers:new s(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:this)},238:function(e,t){var n,r,o;r=[t,e],void 0===(o="function"==typeof(n=function(e,t){"use strict";var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function r(e){try{delete window[e]}catch(t){window[e]=void 0}}function o(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,a=t.timeout||n.timeout,s=t.jsonpCallback||n.jsonpCallback,l=void 0;return new Promise(function(n,u){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),l&&clearTimeout(l),o(f),r(c)},i+=-1===i.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",""+i+s+"="+c),t.charset&&h.setAttribute("charset",t.charset),h.id=f,document.getElementsByTagName("head")[0].appendChild(h),l=setTimeout(function(){u(new Error("JSONP request to "+e+" timed out")),r(c),o(f),window[c]=function(){r(c)}},a),h.onerror=function(){u(new Error("JSONP request to "+e+" failed")),r(c),o(f),l&&clearTimeout(l)}})}})?n.apply(t,r):n)||(e.exports=o)},634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;var r=n(603),o=n(83),i=function(){function e(e){var t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,t=e||1024,this.bb=r.ByteBuffer.allocate(t),this.space=t}return e.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null},e.prototype.forceDefaults=function(e){this.force_defaults=e},e.prototype.dataBuffer=function(){return this.bb},e.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},e.prototype.prep=function(t,n){t>this.minalign&&(this.minalign=t);for(var r=1+~(this.bb.capacity()-this.space+n)&t-1;this.space<r+t+n;){var o=this.bb.capacity();this.bb=e.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(r)},e.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0)},e.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e)},e.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e)},e.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e)},e.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e)},e.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e)},e.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e)},e.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e)},e.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e)},e.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e)},e.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e)},e.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e)},e.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e)},e.prototype.addFieldInt8=function(e,t,n){(this.force_defaults||t!=n)&&(this.addInt8(t),this.slot(e))},e.prototype.addFieldInt16=function(e,t,n){(this.force_defaults||t!=n)&&(this.addInt16(t),this.slot(e))},e.prototype.addFieldInt32=function(e,t,n){(this.force_defaults||t!=n)&&(this.addInt32(t),this.slot(e))},e.prototype.addFieldInt64=function(e,t,n){(this.force_defaults||t!==n)&&(this.addInt64(t),this.slot(e))},e.prototype.addFieldFloat32=function(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat32(t),this.slot(e))},e.prototype.addFieldFloat64=function(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat64(t),this.slot(e))},e.prototype.addFieldOffset=function(e,t,n){(this.force_defaults||t!=n)&&(this.addOffset(t),this.slot(e))},e.prototype.addFieldStruct=function(e,t,n){t!=n&&(this.nested(t),this.slot(e))},e.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},e.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},e.prototype.slot=function(e){null!==this.vtable&&(this.vtable[e]=this.offset())},e.prototype.offset=function(){return this.bb.capacity()-this.space},e.growByteBuffer=function(e){var t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=t<<1,o=r.ByteBuffer.allocate(n);return o.setPosition(n-t),o.bytes().set(e.bytes(),n-t),o},e.prototype.addOffset=function(e){this.prep(o.SIZEOF_INT,0),this.writeInt32(this.offset()-e+o.SIZEOF_INT)},e.prototype.startObject=function(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()},e.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;t>=0&&0==this.vtable[t];t--);for(var n=t+1;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);var r=(n+2)*o.SIZEOF_SHORT;this.addInt16(r);var i=0,a=this.space;e:for(t=0;t<this.vtables.length;t++){var s=this.bb.capacity()-this.vtables[t];if(r==this.bb.readInt16(s)){for(var l=o.SIZEOF_SHORT;l<r;l+=o.SIZEOF_SHORT)if(this.bb.readInt16(a+l)!=this.bb.readInt16(s+l))continue e;i=this.vtables[t];break}}return i?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,i-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e},e.prototype.finish=function(e,t,n){var r=n?o.SIZE_PREFIX_LENGTH:0;if(t){var i=t;if(this.prep(this.minalign,o.SIZEOF_INT+o.FILE_IDENTIFIER_LENGTH+r),i.length!=o.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+o.FILE_IDENTIFIER_LENGTH);for(var a=o.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(i.charCodeAt(a))}this.prep(this.minalign,o.SIZEOF_INT+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},e.prototype.finishSizePrefixed=function(e,t){this.finish(e,t,!0)},e.prototype.requiredField=function(e,t){var n=this.bb.capacity()-e,r=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(r+t)))throw new Error("FlatBuffers: field "+t+" must be set")},e.prototype.startVector=function(e,t,n){this.notNested(),this.vector_num_elems=t,this.prep(o.SIZEOF_INT,e*t),this.prep(n,e*t)},e.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},e.prototype.createSharedString=function(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);var t=this.createString(e);return this.string_maps.set(e,t),t},e.prototype.createString=function(e){if(null===e||void 0===e)return 0;var t;t=e instanceof Uint8Array?e:this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(var n=0,r=this.space,o=this.bb.bytes();n<t.length;n++)o[r++]=t[n];return this.endVector()},e.prototype.createObjectOffset=function(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)},e.prototype.createObjectOffsetList=function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];if(null===r)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");t.push(this.createObjectOffset(r))}return t},e.prototype.createStructOffsetList=function(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()},e}();t.Builder=i},603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ByteBuffer=void 0;var r=n(83),o=n(700),i=n(958),a=function(){function e(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}return e.allocate=function(t){return new e(new Uint8Array(t))},e.prototype.clear=function(){this.position_=0},e.prototype.bytes=function(){return this.bytes_},e.prototype.position=function(){return this.position_},e.prototype.setPosition=function(e){this.position_=e},e.prototype.capacity=function(){return this.bytes_.length},e.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24},e.prototype.readUint8=function(e){return this.bytes_[e]},e.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16},e.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8},e.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24},e.prototype.readUint32=function(e){return this.readInt32(e)>>>0},e.prototype.readInt64=function(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))},e.prototype.readUint64=function(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))},e.prototype.readFloat32=function(e){return o.int32[0]=this.readInt32(e),o.float32[0]},e.prototype.readFloat64=function(e){return o.int32[o.isLittleEndian?0:1]=this.readInt32(e),o.int32[o.isLittleEndian?1:0]=this.readInt32(e+4),o.float64[0]},e.prototype.writeInt8=function(e,t){this.bytes_[e]=t},e.prototype.writeUint8=function(e,t){this.bytes_[e]=t},e.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},e.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},e.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},e.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},e.prototype.writeInt64=function(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))},e.prototype.writeUint64=function(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))},e.prototype.writeFloat32=function(e,t){o.float32[0]=t,this.writeInt32(e,o.int32[0])},e.prototype.writeFloat64=function(e,t){o.float64[0]=t,this.writeInt32(e,o.int32[o.isLittleEndian?0:1]),this.writeInt32(e+4,o.int32[o.isLittleEndian?1:0])},e.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<r.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+r.SIZEOF_INT+t));return e},e.prototype.__offset=function(e,t){var n=e-this.readInt32(e);return t<this.readInt16(n)?this.readInt16(n+t):0},e.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e},e.prototype.__string=function(e,t){e+=this.readInt32(e);var n=this.readInt32(e);e+=r.SIZEOF_INT;var o=this.bytes_.subarray(e,e+n);return t===i.Encoding.UTF8_BYTES?o:this.text_decoder_.decode(o)},e.prototype.__union_with_string=function(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)},e.prototype.__indirect=function(e){return e+this.readInt32(e)},e.prototype.__vector=function(e){return e+this.readInt32(e)+r.SIZEOF_INT},e.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e))},e.prototype.__has_identifier=function(e){if(e.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var t=0;t<r.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+r.SIZEOF_INT+t))return!1;return!0},e.prototype.createScalarList=function(e,t){for(var n=[],r=0;r<t;++r){var o=e(r);null!==o&&n.push(o)}return n},e.prototype.createObjList=function(e,t){for(var n=[],r=0;r<t;++r){var o=e(r);null!==o&&n.push(o.unpack())}return n},e}();t.ByteBuffer=a},83:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIZE_PREFIX_LENGTH=t.FILE_IDENTIFIER_LENGTH=t.SIZEOF_INT=t.SIZEOF_SHORT=void 0,t.SIZEOF_SHORT=2,t.SIZEOF_INT=4,t.FILE_IDENTIFIER_LENGTH=4,t.SIZE_PREFIX_LENGTH=4},958:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Encoding=void 0,function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"}(t.Encoding||(t.Encoding={}))},828:function(e,t,n){"use strict";t.cZ=t.XU=void 0;var r=n(83);var o=n(83);var i=n(83);var a=n(83);Object.defineProperty(t,"XU",{enumerable:!0,get:function(){return a.SIZE_PREFIX_LENGTH}});var s=n(700);var l=n(958);var u=n(634);var c=n(603);Object.defineProperty(t,"cZ",{enumerable:!0,get:function(){return c.ByteBuffer}})},700:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLittleEndian=t.float64=t.float32=t.int32=void 0,t.int32=new Int32Array(2),t.float32=new Float32Array(t.int32.buffer),t.float64=new Float64Array(t.int32.buffer),t.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0]},820:function(e,t,n){function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",l="[object Map]",u="[object Set]",c=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,h="object"==(void 0===n.g?"undefined":r(n.g))&&n.g&&n.g.Object===Object&&n.g,p="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,d=h||p||Function("return this")();function y(e,t){return function(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(t,function(t){return[t,e[t]]})}var v,g,m,b=Function.prototype,w=Object.prototype,_=d["__core-js_shared__"],x=(v=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",S=b.toString,O=w.hasOwnProperty,P=w.toString,T=RegExp("^"+S.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=w.propertyIsEnumerable,C=(g=Object.keys,m=Object,function(e){return g(m(e))}),E=V(d,"DataView"),A=V(d,"Map"),M=V(d,"Promise"),R=V(d,"Set"),I=V(d,"WeakMap"),j=U(E),L=U(A),D=U(M),N=U(R),B=U(I);function F(e,t){var n=J(e)||function(e){return function(e){return function(e){return!!e&&"object"==r(e)}(e)&&q(e)}(e)&&O.call(e,"callee")&&(!k.call(e,"callee")||P.call(e)==i)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=n.length,a=!!o;for(var s in e)!t&&!O.call(e,s)||a&&("length"==s||W(s,o))||n.push(s);return n}function G(e){return!(!X(e)||x&&x in e)&&(Y(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?T:c).test(U(e))}function z(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||w,t!==r)return C(e);var t,n,r,o=[];for(var i in Object(e))O.call(e,i)&&"constructor"!=i&&o.push(i);return o}function V(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return G(n)?n:void 0}var H=function(e){return P.call(e)};function W(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||f.test(e))&&e>-1&&e%1==0&&e<t}function U(e){if(null!=e){try{return S.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(E&&"[object DataView]"!=H(new E(new ArrayBuffer(1)))||A&&H(new A)!=l||M&&"[object Promise]"!=H(M.resolve())||R&&H(new R)!=u||I&&"[object WeakMap]"!=H(new I))&&(H=function(e){var t=P.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?U(n):void 0;if(r)switch(r){case j:return"[object DataView]";case L:return l;case D:return"[object Promise]";case N:return u;case B:return"[object WeakMap]"}return t});var J=Array.isArray;function q(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!Y(e)}function Y(e){var t=X(e)?P.call(e):"";return t==a||t==s}function X(e){var t=r(e);return!!e&&("object"==t||"function"==t)}var Z,Q=(Z=function(e){return q(e)?F(e):z(e)},function(e){var t,n,r,o=H(e);return o==l?(t=e,n=-1,r=Array(t.size),t.forEach(function(e,t){r[++n]=[t,e]}),r):o==u?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(e):y(e,Z(e))});e.exports=Q},957:function(e,t,n){var r,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";function e(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}function t(e){return new this(function(t,n){if(!e||void 0===e.length)return n(new TypeError(a(e)+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,n){if(n&&("object"===a(n)||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,function(t){i(e,t)},function(n){r[e]={status:"rejected",reason:n},0==--o&&t(r)})}r[e]={status:"fulfilled",value:n},0==--o&&t(r)}for(var s=0;s<r.length;s++)i(s,r[s])})}var r=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function i(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function l(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}u(t.promise,r)}else(1===e._state?u:c)(t.promise,e._value)})):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===a(t)||"function"==typeof t)){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void f(e);if("function"==typeof n)return void h((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){c(e,t)}var r,o}function c(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&s._immediateFn(function(){e._handled||s._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)l(e,e._deferreds[t]);e._deferreds=null}function h(e,t){var n=!1;try{e(function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(i);return l(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},s.prototype.finally=e,s.all=function(e){return new s(function(t,n){if(!o(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function s(e,o){try{if(o&&("object"===a(o)||"function"==typeof o)){var l=o.then;if("function"==typeof l)return void l.call(o,function(t){s(e,t)},n)}r[e]=o,0==--i&&t(r)}catch(e){n(e)}}for(var l=0;l<r.length;l++)s(l,r[l])})},s.allSettled=t,s.resolve=function(e){return e&&"object"===a(e)&&e.constructor===s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,n){n(e)})},s.race=function(e){return new s(function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)s.resolve(e[r]).then(t,n)})},s._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){r(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();"function"!=typeof p.Promise?p.Promise=s:(p.Promise.prototype.finally||(p.Promise.prototype.finally=e),p.Promise.allSettled||(p.Promise.allSettled=t))},"object"===a(t)?i():void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o)},861:function(e,t,n){"use strict";e.exports=o,e.exports.default=o;var r=n(333);function o(e,t){if(!(this instanceof o))return new o(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function i(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function a(e,t){s(e,0,e.children.length,t,e)}function s(e,t,n,r,o){o||(o=y(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=t;a<n;a++)i=e.children[a],l(o,e.leaf?r(i):i);return o}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function u(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function f(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function d(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function y(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,n,o,i){for(var a,s=[t,n];s.length;)(n=s.pop())-(t=s.pop())<=o||(a=t+Math.ceil((n-t)/o/2)*o,r(e,a,t,n,i),s.push(t,a,a,n))}o.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!d(e,t))return n;for(var o,i,a,s,l=[];t;){for(o=0,i=t.children.length;o<i;o++)a=t.children[o],d(e,s=t.leaf?r(a):a)&&(t.leaf?n.push(a):p(e,s)?this._all(a,n):l.push(a));t=l.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!d(e,t))return!1;for(var r,o,i,a,s=[];t;){for(r=0,o=t.children.length;r<o;r++)if(i=t.children[r],d(e,a=t.leaf?n(i):i)){if(t.leaf||p(e,a))return!0;s.push(i)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var o=this.data;this.data=r,r=o}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(e,t){if(!e)return this;for(var n,r,o,a,s=this.data,l=this.toBBox(e),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),a=!0),s.leaf&&-1!==(o=i(e,s.children,t)))return s.children.splice(o,1),u.push(s),this._condense(u),this;a||s.leaf||!p(s,l)?r?(n++,s=r.children[n],a=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(e){return e},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var o,i=n-t+1,s=this._maxEntries;if(i<=s)return a(o=y(e.slice(t,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,r-1))),(o=y([])).leaf=!1,o.height=r;var l,u,c,f,h=Math.ceil(i/s),p=h*Math.ceil(Math.sqrt(s));for(v(e,t,n,p,this.compareMinX),l=t;l<=n;l+=p)for(v(e,l,c=Math.min(l+p-1,n),h,this.compareMinY),u=l;u<=c;u+=h)f=Math.min(u+h-1,c),o.children.push(this._build(e,u,f,r-1));return a(o,this.toBBox),o},_chooseSubtree:function(e,t,n,r){for(var o,i,a,s,l,u,c,h,p,d;r.push(t),!t.leaf&&r.length-1!==n;){for(c=h=1/0,o=0,i=t.children.length;o<i;o++)l=f(a=t.children[o]),p=e,d=a,(u=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,o=n?e:r(e),i=[],a=this._chooseSubtree(o,this.data,t,i);for(a.children.push(e),l(a,o);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(o,i,t)},_split:function(e,t){var n=e[t],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var i=this._chooseSplitIndex(n,o,r),s=y(n.children.splice(i,n.children.length-i));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(e,t){this.data=y([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,o,i,a,l,u,c,h,p,d,y,v,g,m;for(u=c=1/0,r=t;r<=n-t;r++)o=s(e,0,r,this.toBBox),i=s(e,r,n,this.toBBox),p=o,d=i,void 0,void 0,void 0,void 0,y=Math.max(p.minX,d.minX),v=Math.max(p.minY,d.minY),g=Math.min(p.maxX,d.maxX),m=Math.min(p.maxY,d.maxY),a=Math.max(0,g-y)*Math.max(0,m-v),l=f(o)+f(i),a<u?(u=a,h=r,c=l<c?l:c):a===u&&l<c&&(c=l,h=r);return h},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:u,o=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,o)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var o,i,a=this.toBBox,u=s(e,0,t,a),c=s(e,n-t,n,a),f=h(u)+h(c);for(o=t;o<n-t;o++)i=e.children[o],l(u,e.leaf?a(i):i),f+=h(u);for(o=n-t-1;o>=t;o--)i=e.children[o],l(c,e.leaf?a(i):i),f+=h(c);return f},_adjustParentBBoxes:function(e,t,n){for(var r=n;r>=0;r--)l(t[r],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():a(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},333:function(e,t,n){var r,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";function e(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function t(e,t){return e<t?-1:e>t?1:0}return function(n,r,o,i,a){!function t(n,r,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,l=r-o+1,u=Math.log(s),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1),h=Math.max(o,Math.floor(r-l*c/s+f)),p=Math.min(i,Math.floor(r+(s-l)*c/s+f));t(n,r,h,p,a)}var d=n[r],y=o,v=i;for(e(n,o,r),a(n[i],d)>0&&e(n,o,i);y<v;){for(e(n,y,v),y++,v--;a(n[y],d)<0;)y++;for(;a(n[v],d)>0;)v--}0===a(n[o],d)?e(n,o,v):e(n,++v,i),v<=r&&(o=v+1),r<=v&&(i=v-1)}}(n,r,o||0,i||n.length-1,a||t)}},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o)},425:function(e,t,n){var r,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";var e=new Uint8Array(0);function t(t){this._source=t,this._array=e,this._index=0}return t.prototype.read=function(){var t=this,n=t._array.subarray(t._index);return t._source.read().then(function(r){return t._array=e,t._index=0,r.done?n.length>0?{done:!1,value:n}:{done:!0,value:void 0}:{done:!1,value:function(e,t){if(!e.length)return t;if(!t.length)return e;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(n,r.value)}})},t.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var n=this,r=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var o=new Uint8Array(t);return o.set(this._array.subarray(this._index)),function i(){return n._source.read().then(function(a){return a.done?(n._array=e,n._index=0,r>0?o.subarray(0,r):null):r+a.value.length>=t?(n._array=a.value,n._index=t-r,o.set(a.value.subarray(0,t-r),r),o):(o.set(a.value,r),r+=a.value.length,i())})}()},t.prototype.cancel=function(){return this._source.cancel()},function(e){return"function"==typeof e.slice?e:new t("function"==typeof e.read?e:e.getReader())}},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o)},351:function(e,t){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})}function o(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e){return this instanceof a?(this.v=e,this):new a(e)}function s(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||l(e,t)})})}function l(e,t){try{(n=o[e](t)).value instanceof a?Promise.resolve(n.value.v).then(u,c):f(i[0][2],n)}catch(e){f(i[0][3],e)}var n}function u(e){l("next",e)}function c(e){l("throw",e)}function f(e,t){e(t),i.shift(),i.length&&l(i[0][0],i[0][1])}}var l=function(e){function t(t){var n=e.call(this,t)||this;return Object.defineProperty(n,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(n,n.constructor.prototype):n.__proto__=n.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n}return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t}(Error),u=function(){function e(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),e.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e}(),c=function(){function e(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e}(),f=function(){function e(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e}();function h(e){null!=e&&"function"==typeof e.then&&e.then(b,b)}var p=0,d=1,y=2,v=3,g=4,m=1024,b=function(){};function w(e){var t=e.err,n=Promise.resolve(e.execution).then(function(e){if(null!=t)throw t;return e});return e.err=void 0,e.execution=n.then(function(){},function(){}),void 0===e.pending?n:e.pending.then(function(){return n})}function _(e,t){var n=e.state>=v;return Promise.resolve(t).then(function(t){return!n&&e.state>=g?w(e).then(function(e){return{value:e,done:!0}}):{value:t,done:n}})}function x(e,t){var n,r;if(!(e.state>=y))if(e.state=y,e.onnext(),e.onstop(),null==e.err&&(e.err=t),0!==e.pushes.length||void 0!==e.buffer&&!e.buffer.empty)try{for(var o=i(e.pushes),a=o.next();!a.done;a=o.next()){a.value.resolve()}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}else S(e)}function S(e){var t,n;if(!(e.state>=v)){e.state<y&&x(e),e.state=v,e.buffer=void 0;try{for(var r=i(e.nexts),o=r.next();!o.done;o=r.next()){var a=o.value,s=void 0===e.pending?w(e):e.pending.then(function(){return w(e)});a.resolve(_(e,s))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.pushes=[],e.nexts=[]}}function O(e){e.state>=g||(e.state<v&&S(e),e.state=g)}function P(e){if(!(e.state>=d)){e.state=d;var t=function(e,t){if(h(t),e.pushes.length>=m)throw new l("No more than "+m+" pending calls to push are allowed on a single repeater.");if(e.state>=y)return Promise.resolve(void 0);var n,r=void 0===e.pending?Promise.resolve(t):e.pending.then(function(){return t});r=r.catch(function(t){e.state<y&&(e.err=t),O(e)}),e.nexts.length?(e.nexts.shift().resolve(_(e,r)),n=e.nexts.length?Promise.resolve(e.nexts[0].value):new Promise(function(t){return e.onnext=t})):void 0===e.buffer||e.buffer.full?n=new Promise(function(t){return e.pushes.push({resolve:t,value:r})}):(e.buffer.add(r),n=Promise.resolve(void 0));var o=!0,i={},a=n.catch(function(e){if(o)throw e});return i.then=function(e,t){return o=!1,Promise.prototype.then.call(n,e,t)},i.catch=function(e){return o=!1,Promise.prototype.catch.call(n,e)},i.finally=n.finally.bind(n),e.pending=r.then(function(){return a}).catch(function(t){e.err=t,O(e)}),i}.bind(null,e),n=function(e){var t=x.bind(null,e),n=new Promise(function(t){return e.onstop=t});return t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),t}(e);e.execution=new Promise(function(r){return r(e.executor(t,n))}),e.execution.catch(function(){return x(e)})}}var T=new WeakMap,k=function(){function e(e,t){T.set(this,{executor:e,buffer:t,err:void 0,state:p,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:b,onstop:b})}return e.prototype.next=function(e){h(e);var t=T.get(this);if(void 0===t)throw new Error("WeakMap error");if(t.nexts.length>=m)throw new l("No more than "+m+" pending calls to next are allowed on a single repeater.");if(t.state<=p&&P(t),t.onnext(e),void 0!==t.buffer&&!t.buffer.empty){var n=_(t,t.buffer.remove());if(t.pushes.length){var r=t.pushes.shift();t.buffer.add(r.value),t.onnext=r.resolve}return n}if(t.pushes.length){var o=t.pushes.shift();return t.onnext=o.resolve,_(t,o.value)}return t.state>=y?(S(t),_(t,w(t))):new Promise(function(n){return t.nexts.push({resolve:n,value:e})})},e.prototype.return=function(e){h(e);var t=T.get(this);if(void 0===t)throw new Error("WeakMap error");return S(t),t.execution=Promise.resolve(t.execution).then(function(){return e}),_(t,w(t))},e.prototype.throw=function(e){var t=T.get(this);if(void 0===t)throw new Error("WeakMap error");return t.state<=p||t.state>=y||void 0!==t.buffer&&!t.buffer.empty?(S(t),null==t.err&&(t.err=e),_(t,w(t))):this.next(Promise.reject(e))},e.prototype[Symbol.asyncIterator]=function(){return this},e.race=E,e.merge=A,e.zip=M,e.latest=R,e}();function C(e,t){var n,r,l=[],u=function(e){null!=e&&"function"==typeof e[Symbol.asyncIterator]?l.push(e[Symbol.asyncIterator]()):null!=e&&"function"==typeof e[Symbol.iterator]?l.push(e[Symbol.iterator]()):l.push(function(){return s(this,arguments,function(){return o(this,function(n){switch(n.label){case 0:return t.yieldValues?[4,a(e)]:[3,3];case 1:return[4,n.sent()];case 2:n.sent(),n.label=3;case 3:return t.returnValues?[4,a(e)]:[3,5];case 4:return[2,n.sent()];case 5:return[2]}})})}())};try{for(var c=i(e),f=c.next();!f.done;f=c.next()){u(f.value)}}catch(e){n={error:e}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return l}function E(e){var t=this,n=C(e,{returnValues:!0});return new k(function(e,a){return r(t,void 0,void 0,function(){var t,r,s,l,u,c;return o(this,function(f){switch(f.label){case 0:if(!n.length)return a(),[2];r=!1,a.then(function(){t(),r=!0}),f.label=1;case 1:f.trys.push([1,,5,7]),l=void 0,u=0,c=function(){var r,c,f,h,p,d;return o(this,function(o){switch(o.label){case 0:r=u;try{for(p=void 0,c=i(n),f=c.next();!f.done;f=c.next())h=f.value,Promise.resolve(h.next()).then(function(e){e.done?(a(),void 0===s&&(s=e)):u===r&&(u++,t(e))},function(e){return a(e)})}catch(e){p={error:e}}finally{try{f&&!f.done&&(d=c.return)&&d.call(c)}finally{if(p)throw p.error}}return[4,new Promise(function(e){return t=e})];case 1:return void 0===(l=o.sent())?[3,3]:[4,e(l.value)];case 2:o.sent(),o.label=3;case 3:return[2]}})},f.label=2;case 2:return r?[3,4]:[5,c()];case 3:return f.sent(),[3,2];case 4:return[2,s&&s.value];case 5:return a(),[4,Promise.race(n.map(function(e){return e.return&&e.return()}))];case 6:return f.sent(),[7];case 7:return[2]}})})})}function A(e){var t=this,n=C(e,{yieldValues:!0});return new k(function(e,a){return r(t,void 0,void 0,function(){var t,s,l,u=this;return o(this,function(c){switch(c.label){case 0:if(!n.length)return a(),[2];t=[],s=!1,a.then(function(){var e,n;s=!0;try{for(var r=i(t),o=r.next();!o.done;o=r.next()){(0,o.value)()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,Promise.all(n.map(function(n,i){return r(u,void 0,void 0,function(){var r;return o(this,function(o){switch(o.label){case 0:o.trys.push([0,,6,9]),o.label=1;case 1:return s?[3,5]:(Promise.resolve(n.next()).then(function(e){return t[i](e)},function(e){return a(e)}),[4,new Promise(function(e){t[i]=e})]);case 2:return void 0===(r=o.sent())?[3,4]:r.done?(l=r,[2]):[4,e(r.value)];case 3:o.sent(),o.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return n.return?[4,n.return()]:[3,8];case 7:o.sent(),o.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return c.sent(),[2,l&&l.value];case 3:return a(),[7];case 4:return[2]}})})})}function M(e){var t=this,n=C(e,{returnValues:!0});return new k(function(e,i){return r(t,void 0,void 0,function(){var t,r,a,s;return o(this,function(o){switch(o.label){case 0:if(!n.length)return i(),[2,[]];r=!1,i.then(function(){t(),r=!0}),o.label=1;case 1:o.trys.push([1,,6,8]),o.label=2;case 2:return r?[3,5]:(Promise.all(n.map(function(e){return e.next()})).then(function(e){return t(e)},function(e){return i(e)}),[4,new Promise(function(e){return t=e})]);case 3:return void 0===(a=o.sent())?[2]:(s=a.map(function(e){return e.value}),a.some(function(e){return e.done})?[2,s]:[4,e(s)]);case 4:return o.sent(),[3,2];case 5:return[3,8];case 6:return i(),[4,Promise.all(n.map(function(e){return e.return&&e.return()}))];case 7:return o.sent(),[7];case 8:return[2]}})})})}function R(e){var t=this,n=C(e,{yieldValues:!0,returnValues:!0});return new k(function(e,a){return r(t,void 0,void 0,function(){var t,s,l,u,c,f=this;return o(this,function(h){switch(h.label){case 0:if(!n.length)return a(),[2,[]];s=[],l=!1,a.then(function(){var e,n;t();try{for(var r=i(s),o=r.next();!o.done;o=r.next()){(0,o.value)()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}l=!0}),h.label=1;case 1:return h.trys.push([1,,5,7]),Promise.all(n.map(function(e){return e.next()})).then(function(e){return t(e)},function(e){return a(e)}),[4,new Promise(function(e){return t=e})];case 2:return void 0===(u=h.sent())?[2]:(c=u.map(function(e){return e.value}),u.every(function(e){return e.done})?[2,c]:[4,e(c.slice())]);case 3:return h.sent(),[4,Promise.all(n.map(function(t,n){return r(f,void 0,void 0,function(){var r;return o(this,function(o){switch(o.label){case 0:if(u[n].done)return[2,u[n].value];o.label=1;case 1:return l?[3,4]:(Promise.resolve(t.next()).then(function(e){return s[n](e)},function(e){return a(e)}),[4,new Promise(function(e){return s[n]=e})]);case 2:return void 0===(r=o.sent())?[2,u[n].value]:r.done?[2,r.value]:(c[n]=r.value,[4,e(c.slice())]);case 3:return o.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,h.sent()];case 5:return a(),[4,Promise.all(n.map(function(e){return e.return&&e.return()}))];case 6:return h.sent(),[7];case 7:return[2]}})})})}t.ZN=k}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var t=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=0;r<n.length;r++)s(this,new n[r](t))}),i=0;i<n.length;i++){var a=n[i];s(o,a),s(o.prototype,a.prototype),s(o.prototype,new a)}return o;function s(e,t){var n=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t)));for(var r=0;r<n.length;r++){var o=n[r];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(t,o);window.ActiveXObject?Object.defineProperty(e,o,i||{}):Object.defineProperty(e,o,i)}}}},r={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),n=t[0],r=1,o=t.length;r<o;r++){var i=t[r];n+=i.charAt(0).toUpperCase()+i.substring(1)}return n},format:function(e,t,n){t||(t=window);return e.replace(r.tokenRegEx,function(e,r){for(var o,i=r.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=t),o=o[i[a]];return"function"==typeof o&&(o=n?o.apply(null,n):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return r.numberRegEx.test(e)},numericIf:function(e){return r.isNumeric(e)?parseFloat(e):e}},o={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var n=0;return t>0&&(n=parseFloat(e.toPrecision(t))),n},format:function(e,t,n,r){t=void 0!==t?t:0,n=void 0!==n?n:o.thousandsSeparator,r=void 0!==r?r:o.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var i=e.toString().split(".");1===i.length&&null==t&&(t=0);var a,s=i[0];if(n)for(var l=/(-?[0-9]+)([0-9]{3})/;l.test(s);)s=s.replace(l,"$1"+n+"$2");if(0==t)a=s;else{var u=i.length>1?i[1]:"0";null!=t&&(u+=new Array(t-u.length+1).join("0")),a=s+r+u}return a}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return o.limitSigDigs(this,e)});var i={bind:function(e,t){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var r=n.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,r)}},bindAsEventListener:function(e,t){return function(n){return e.call(t,n||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},a={filter:function(e,t,n){var r=[];if(Array.prototype.filter)r=e.filter(t,n);else{var o=e.length;if("function"!=typeof t)throw new TypeError;for(var i=0;i<o;i++)if(i in e){var a=e[i];t.call(n,a,i,e)&&r.push(a)}}return r}};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Geometry",this.id=w.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new e}},{key:"setBounds",value:function(e){e&&(this.bounds=e.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(e){}},{key:"getArea",value:function(){return 0}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var c,f,h,p,d,y,v,g=(f="",h="",p="pc",(d=navigator.userAgent.toLowerCase()).indexOf("msie")>-1||d.indexOf("trident")>-1&&d.indexOf("rv")>-1?(f="msie",c=d.match(/msie ([\d.]+)/)||d.match(/rv:([\d.]+)/)):d.indexOf("chrome")>-1?(f="chrome",c=d.match(/chrome\/([\d.]+)/)):d.indexOf("firefox")>-1?(f="firefox",c=d.match(/firefox\/([\d.]+)/)):d.indexOf("opera")>-1?(f="opera",c=d.match(/version\/([\d.]+)/)):d.indexOf("safari")>-1&&(f="safari",c=d.match(/version\/([\d.]+)/)),h=c?c[1]:"",d.indexOf("ipad")>-1||d.indexOf("ipod")>-1||d.indexOf("iphone")>-1?p="apple":d.indexOf("android")>-1&&(h=(c=d.match(/version\/([\d.]+)/))?c[1]:"",p="android"),{name:f,version:h,device:p}),m=(y=!0,v=g,document.createElement("canvas").getContext?("firefox"===v.name&&parseFloat(v.version)<5&&(y=!1),"safari"===v.name&&parseFloat(v.version)<4&&(y=!1),"opera"===v.name&&parseFloat(v.version)<10&&(y=!1),"msie"===v.name&&parseFloat(v.version)<9&&(y=!1)):y=!1,y),b=function(){var e=navigator.userAgent.toLowerCase();return-1===e.indexOf("webkit")&&-1!==e.indexOf("gecko")}(),w={extend:function(e,t){if(e=e||{},t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},copy:function(e,t){var n;if(e=e||{},t)for(var r in e)void 0!==(n=t[r])&&(e[r]=n)},reset:function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===u(e[t])&&e[t]instanceof Array){for(var n in e[t])e[t][n].destroy&&e[t][n].destroy();e[t].length=0}else"object"===u(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},getElement:function(){for(var e=[],t=0,n=arguments.length;t<n;t++){var r=arguments[t];if("string"==typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;e.push(r)}return e},isElement:function(e){return!(!e||1!==e.nodeType)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},removeItem:function(e,t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1);return e},indexOf:function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},modifyDOMElement:function(e,t,n,r,o,i,a,s){t&&(e.id=t),n&&(e.style.left=n.x+"px",e.style.top=n.y+"px"),r&&(e.style.width=r.w+"px",e.style.height=r.h+"px"),o&&(e.style.position=o),i&&(e.style.border=i),a&&(e.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},applyDefaults:function(e,t){e=e||{};var n="function"==typeof window.Event&&t instanceof window.Event;for(var r in t)(void 0===e[r]||!n&&t.hasOwnProperty&&t.hasOwnProperty(r)&&!e.hasOwnProperty(r))&&(e[r]=t[r]);return!n&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},getParameterString:function(e){var t=[];for(var n in e){var r,o=e[n];if(null!=o&&"function"!=typeof o)r=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(n)+"="+r)}return t.join("&")},urlAppend:function(e,t){var n=e;if(t){0===t.indexOf("?")&&(t=t.substring(1));var r=(e+" ").split(/[?&]/);n+=" "===r.pop()?t:r.length?"&"+t:"?"+t}return n},urlPathAppend:function(e,t){var n=e;if(!t)return n;0===t.indexOf("/")&&(t=t.substring(1));var r=e.split("?");return r[0].indexOf("/",r[0].length-1)<0&&(r[0]+="/"),n="".concat(r[0]).concat(t).concat(r.length>1?"?".concat(r[1]):"")},DEFAULT_PRECISION:14,toFloat:function(e,t){return null==t&&(t=w.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},rad:function(e){return e*Math.PI/180},getParameters:function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(r.contains(e,"?")){var n=e.indexOf("?")+1,o=r.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(n,o)}for(var i={},a=t.split(/[&;]/),s=0,l=a.length;s<l;++s){var u=a[s].split("=");if(u[0]){var c=u[0];try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}var f=(u[1]||"").replace(/\+/g," ");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}1==(f=f.split(",")).length&&(f=f[0]),i[c]=f}}return i},lastSeqID:0,createUniqueID:function(e){return null==e&&(e="id_"),w.lastSeqID+=1,e+w.lastSeqID},normalizeScale:function(e){return e>1?1/e:e},getResolutionFromScale:function(e,t){var n;e&&(null==t&&(t="degrees"),n=1/(w.normalizeScale(e)*_[t]*96));return n},getScaleFromResolution:function(e,t){return null==t&&(t="degrees"),e*_[t]*96},getBrowser:function(){return g},isSupportCanvas:m,supportCanvas:function(){return w.isSupportCanvas},isInTheSameDomain:function(e){if(!e)return!0;var t=e.indexOf("//"),n=document.location.toString(),r=n.indexOf("//");if(-1===t)return!0;var o,i=o=e.substring(0,t),a=n.substring(r+2);r=a.indexOf("/");var s=a.indexOf(":"),l=a.substring(0,r),u=document.location.protocol;if(-1!==s||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==i.toLowerCase())return!1;var c=(i=e.substring(t+2)).indexOf(":");t=i.indexOf("/");var f,h=i.substring(0,t);return-1!==c?f=i.substring(0,c):(f=i.substring(0,t),h+=":"+("http:"===o.toLowerCase()?80:443)),f===document.domain&&h===l},calculateDpi:function(e,t,n,r,o){if(e&&t&&n){var i,a=e.getWidth(),s=e.getHeight(),l=t.w,u=t.h;if(o=o||6378137,"degree"===(r=r||"degrees").toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()){var c=a/l,f=s/u;i=254/(c>f?c:f)/n/(2*Math.PI*o/360)/1e4}else{i=254/(a/l)/n/1e4}return i}},toJSON:function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var n="",r=0,o=t.length;r<o;r++)n+=w.toJSON(t[r]),r!==t.length-1&&(n+=",");return"["+n+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===u(t)){if(t.length){for(var i=[],a=0,s=t.length;a<s;a++)i.push(w.toJSON(t[a]));return"["+i.join(",")+"]"}var l=[];for(var c in t)"function"!=typeof t[c]&&"CLASS_NAME"!==c&&"parent"!==c&&l.push("'"+c+"':"+w.toJSON(t[c]));return l.length>0?"{"+l.join(",")+"}":"{}"}return t.toString()}},getResolutionFromScaleDpi:function(e,t,n,r){return r=r||6378137,n=n||"",e>0&&t>0?(e=w.normalizeScale(e),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4):-1},getScaleFromResolutionDpi:function(e,t,n,r){return r=r||6378137,n=n||"",e>0&&t>0?"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4:-1},transformResult:function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},copyAttributes:function(e,t){if(e=e||{},t)for(var n in t){var r=t[n];void 0!==r&&"CLASS_NAME"!==n&&"function"!=typeof r&&(e[n]=r)}return e},copyAttributesWithClip:function(e,t,n){if(e=e||{},t)for(var r in t){var o=!1;if(n&&n.length)for(var i=0,a=n.length;i<a;i++)if(r===n[i]){o=!0;break}if(!0!==o){var s=t[r];void 0!==s&&"CLASS_NAME"!==r&&"function"!=typeof s&&(e[r]=s)}}return e},cloneObject:function(e){if(null===e||"object"!==u(e))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array)return e.slice(0);if(e instanceof Object){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=w.cloneObject(e[r]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(e,t,n,r){var o,i,a=null,s=(r.x-n.x)*(e.y-n.y)-(r.y-n.y)*(e.x-n.x),u=(t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x),c=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y);if(0!=c)i=u/c,a=(o=s/c)>=0&&i<=1&&o<=1&&i>=0?new l.Point(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y)):"No Intersection";else if(0==s&&0==u){var f=Math.max(e.y,t.y),h=Math.min(e.y,t.y),p=Math.max(e.x,t.x),d=Math.min(e.x,t.x);a=(n.y>=h&&n.y<=f||r.y>=h&&r.y<=f)&&n.x>=d&&n.x<=p||r.x>=d&&r.x<=p?"Coincident":"Parallel"}else a="Parallel";return a},getTextBounds:function(e,t,n){document.body.appendChild(n),n.style.width="auto",n.style.height="auto",e.fontSize&&(n.style.fontSize=e.fontSize),e.fontFamily&&(n.style.fontFamily=e.fontFamily),e.fontWeight&&(n.style.fontWeight=e.fontWeight),n.style.position="relative",n.style.visibility="hidden",n.style.display="inline-block",n.innerHTML=t;var r=n.clientWidth,o=n.clientHeight;return document.body.removeChild(n),{textWidth:r,textHeight:o}},convertPath:function(e,t){return t?e.replace(/\{([\w-\.]+)\}/g,function(e,n){var r;return r=t.hasOwnProperty(n)?function(e){if(void 0==e||null==e)return"";if(e instanceof Date)return e.toJSON();if(function(e){if("string"!=typeof e&&"object"!==u(e))return!1;try{var t=e.toString();return"[object Object]"===t||"[object Array]"===t}catch(e){return!1}}(e))return JSON.stringify(e);return e.toString()}(t[n]):e,encodeURIComponent(r)}):e}},_={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};_.in=_.inches,_.degrees=_.dd,_.nmi=1852*_.m;var x=.0254000508001016;w.extend(_,{Inch:_.inches,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500}),w.extend(_,{mm:_.Meter/1e3,cm:_.Meter/100,dm:100*_.Meter,km:1e3*_.Meter,kmi:_.nmi,fath:_.Fathom,ch:_.IntnlChain,link:_.IntnlLink,"us-in":_.inches,"us-ft":_.Foot,"us-yd":_.Yard,"us-ch":_.GunterChain,"us-mi":_.Mile,"ind-yd":_.IndianYd37,"ind-ft":_.IndianFt37,"ind-ch":791.9942845122}),_.degree=_.dd,_.meter=_.m,_.foot=_.ft,_.inch=_.inches,_.mile=_.mi,_.kilometer=_.km,_.yard=_.yd;var S=mapboxgl,O=n.n(S),P=function(){var e={};return{addLayer:function(t,n){e[t]||(e[t]=[]),!e[t].includes(n)&&e[t].push(n)},removeLayer:function(t,n){if(n)return e[t]=e[t].filter(function(e){return e!==n}),void(e[t].length<2&&delete e[t]);delete e[t]},getLayers:function(t){return e[t]},getCompositeLayerId:function(t){for(var n in e)if(e[n].find(function(e){return e===t}))return n}}};n(378);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={color:"#000",opacity:1,rotate:0,translate:[0,0],offset:0,blur:0,height:0,raisingHeight:0,heightfixed:!1},A={color:E.color,opacity:E.opacity},M=k(k({size:.16},A),{},{rotate:E.rotate,translate:E.translate,raisingHeight:E.raisingHeight,heightfixed:E.heightfixed}),R=k(k({size:.16},A),{},{shape:"circle",strokeColor:"#FFF",strokeWidth:0,strokeOpacity:E.opacity,blur:E.blur,translate:E.translate,raisingHeight:E.raisingHeight,heightfixed:E.heightfixed}),I=(k(k({},{shape:"cylinder",width:1,length:1,height:10,depth:!0,pickLight:!1,lightEnable:!0,heightfixed:!1,opacityLinearDir:"none"}),{},{repeat:1,speed:.01}),{width:1,color:E.color,opacity:E.opacity,offset:E.offset,blur:E.blur,translate:E.translate,dasharray:[1],cap:"butt",join:"miter",iconStep:100,textureBlend:"normal",heightFixed:!1,rasingHeight:E.height,borderColor:E.color,borderWidth:0,arrowWidth:2,arrowHeight:3,tailWidth:1,segmentNumber:30,thetaOffset:.314,iconStepCount:1}),j={opacity:E.opacity},L=(k(k({},j),{},{color:E.color}),k(k({},A),{},{color:E.color,raisingHeight:E.raisingHeight,opacityLinearDir:E.opacityLinearDir}),k(k({},A),{},{shallowWaterColor:"#6D99A8",deepWaterColor:"#0F121C"}),k(k({},A),{},{texture:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",color:E.color,speed:.1}),{size:16,color:E.color,opacity:E.opacity,translate:E.translate,fontFamily:["Open Sans Regular","Arial Unicode MS Regular"],haloWidth:0,anchor:"center",spacing:0,allowOverlap:!1,padding:0,strokeColor:"#fff",strokeWidth:0,fontPath:"",heightfixed:E.heightfixed,raisingHeiht:E.raisingHeight,gamma:2,fontWeight:400,blur:E.blur});function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B={symbol:function(e){var t,n,r,o,i;return{paint:{"icon-color":null!==(t=e.color)&&void 0!==t?t:M.color,"icon-opacity":null!==(n=e.opacity)&&void 0!==n?n:M.opacity,"icon-translate":null!==(r=e.translate)&&void 0!==r?r:M.translate},layout:{"icon-size":null!==(o=e.size)&&void 0!==o?o:M.size,"icon-image":e.image,"icon-rotate":null!==(i=e.rotate)&&void 0!==i?i:M.rotate}}},circle:function(e){var t,n,r,o,i,a,s,l;return{paint:{"circle-blur":null!==(t=e.blur)&&void 0!==t?t:R.blur,"circle-color":null!==(n=e.color)&&void 0!==n?n:R.color,"circle-opacity":null!==(r=e.opacity)&&void 0!==r?r:R.opacity,"circle-radius":null!==(o=e.size/2)&&void 0!==o?o:R.size/2,"circle-stroke-color":null!==(i=e.strokeColor)&&void 0!==i?i:R.strokeColor,"circle-stroke-width":null!==(a=e.strokeWidth)&&void 0!==a?a:R.strokeWidth,"circle-stroke-opacity":null!==(s=e.strokeOpacity)&&void 0!==s?s:R.strokeOpacity,"circle-translate":null!==(l=e.translate)&&void 0!==l?l:R.translate},layout:{visibility:"visible"}}}};function F(e){var t=function(e){var t={textField:["",void 0],shape:["",void 0,"circle"],image:["",void 0,"circle"],anchor:[void 0,"center"],allowOverlap:[void 0,!0],ignorePlacement:[void 0,!0]};return Object.keys(t).filter(function(n){return!t[n].includes(e[n])}).length?"symbol":"circle"}(e);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){N(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({type:t},B[t](e))}function G(e){var t=e.opacity,n=e.color,r=e.width,o=e.offset,i=e.translate,a=e.blur,s=e.dasharray,l=e.image,u=e.cap,c=e.join;return{type:"line",paint:{"line-opacity":null!==t&&void 0!==t?t:I.opacity,"line-color":null!==n&&void 0!==n?n:I.color,"line-width":null!==r&&void 0!==r?r:I.width,"line-offset":null!==o&&void 0!==o?o:I.offset,"line-translate":null!==i&&void 0!==i?i:I.translate,"line-blur":null!==a&&void 0!==a?a:I.blur,"line-dasharray":null!==s&&void 0!==s?s:I.dasharray,"line-pattern":l},layout:{"line-cap":null!==u&&void 0!==u?u:I.cap,"line-join":null!==c&&void 0!==c?c:I.join}}}function z(e){var t=e.opacity,n=e.color,r=e.image;return{type:"fill",paint:{"fill-opacity":null!==t&&void 0!==t?t:j.opacity,"fill-color":null!==n&&void 0!==n?n:j.color,"fill-pattern":r},layout:{}}}function V(e){var t=e.field,n=e.color,r=e.opacity,o=e.size,i=e.fontFamily,a=e.translate,s=e.haloWidth,l=e.anchor,u=e.allowOverlap,c=e.padding,f=e.spacing;return{type:"symbol",paint:{"text-color":null!==n&&void 0!==n?n:L.color,"text-opacity":null!==r&&void 0!==r?r:L.opacity,"text-translate":null!==a&&void 0!==a?a:L.translate,"text-halo-width":null!==s&&void 0!==s?s:L.haloWidth},layout:{"text-field":null!==t&&void 0!==t?t:L.field,"text-size":null!==o&&void 0!==o?o:L.size,"text-font":null!==i&&void 0!==i?i:L.fontFamily,"text-anchor":null!==l&&void 0!==l?l:L.anchor,"text-allow-overlap":null!==u&&void 0!==u?u:L.allowOverlap,"text-padding":null!==c&&void 0!==c?c:L.padding,"text-letter-spacing":null!==f&&void 0!==f?f:L.spacing}}}var H={color:{type:"paint",name:"circle-color"},opacity:{type:"paint",name:"circle-opacity"},radius:{type:"paint",name:"circle-radius"},strokeColor:{type:"paint",name:"circle-stroke-color"},strokeWidth:{type:"paint",name:"circle-stroke-width"},strokeOpacity:{type:"paint",name:"circle-stroke-opacity"},translate:{type:"paint",name:"circle-translate"},blur:{type:"paint",name:"circle-blur"},visibility:{type:"layout",name:"visibility"}};function W(e,t){if(H[e]){var n=H[e];return{type:n.type,name:n.name,value:t}}}var U={color:{type:"paint",name:"icon-color"},opacity:{type:"paint",name:"icon-opacity"},translate:{type:"paint",name:"icon-translate"},size:{type:"layout",name:"icon-size"},image:{type:"layout",name:"icon-image"},rotate:{type:"layout",name:"icon-rotate"},visibility:{type:"layout",name:"visibility"}};function J(e,t,n){if(U[e]){var r,o=U[e],i=o.type,a=o.name,s=o.transform;return{type:i,name:a,value:null!==(r=null===s||void 0===s?void 0:s(t,n))&&void 0!==r?r:t}}}var q={color:{type:"paint",name:"line-color"},opacity:{type:"paint",name:"line-opacity"},width:{type:"paint",name:"line-width"},offset:{type:"paint",name:"line-offset"},blur:{type:"paint",name:"line-blur"},dasharray:{type:"paint",name:"line-dasharray"},translate:{type:"paint",name:"line-translate"},image:{type:"paint",name:"line-pattern"},cap:{type:"layout",name:"line-cap"},join:{type:"layout",name:"line-join"},visibility:{type:"layout",name:"visibility"}};function Y(e,t){if(q[e]){var n=q[e];return{type:n.type,name:n.name,value:t}}}var X={color:{type:"paint",name:"fill-color"},opacity:{type:"paint",name:"fill-opacity"},image:{type:"paint",name:"fill-pattern"},visibility:{type:"layout",name:"visibility"}};function Z(e,t){if(X[e]){var n=X[e];return{type:n.type,name:n.name,value:t}}}var Q={color:{type:"paint",name:"text-color"},opacity:{type:"paint",name:"text-opacity"},translate:{type:"paint",name:"text-translate"},haloWidth:{type:"paint",name:"text-halo-width"},size:{type:"layout",name:"text-size"},field:{type:"layout",name:"text-field"},fontFamily:{type:"layout",name:"text-font"},anchor:{type:"layout",name:"text-anchor"},allowOverlap:{type:"layout",name:"text-allow-overlap"},padding:{type:"layout",name:"text-padding"},spacing:{type:"layout",name:"text-letter-spacing"},visibility:{type:"layout",name:"visibility"}};function K(e,t){if(Q[e]){var n=Q[e];return{type:n.type,name:n.name,value:t}}}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){te(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=function(e){var t=e;return{isMultiSymbol:function(e){return["MultiLine"].includes(e)},addLayer:function(e,t,n){delete e.symbol,this.isMultiSymbol(t.type)?this.addMultiSymbol(e,t,n):this.addSimpleSymbol(e,t,n)},symbolToLayerStyle:function(e){var t,n,r={Point:F,ImagePoint:F,Line:G,ImageLine:G,Polygon:z,ImagePolygon:z,Text:V};return null!==(t=null===(n=r[e.type])||void 0===n?void 0:n.call(r,e))&&void 0!==t?t:{}},addSimpleSymbol:function(e,n,r){var o=this.symbolToLayerStyle(n),i={},a={};Object.keys(o.paint).forEach(function(e){void 0!==o.paint[e]&&(i[e]=o.paint[e])}),Object.keys(o.layout).forEach(function(e){void 0!==o.layout[e]&&(a[e]=o.layout[e])}),t.addLayerBak(ee(ee(ee({},e),o),{},{paint:i,layout:a}),r)},addMultiSymbol:function(e,n,r){var o=this;n.styles.forEach(function(n,i){var a=0===i?e.id:w.createUniqueID("SuperMap.Symbol_");o.addSimpleSymbol(ee(ee({},e),{},{id:a}),n,r),t.compositeLayersManager.addLayer(e.id,a)})},setSymbol:function(e,n){var r,o,i,a=null!==(r=t.compositeLayersManager.getLayers(e))&&void 0!==r?r:[e];a.slice(null!==(o=null===(i=n.styles)||void 0===i?void 0:i.length)&&void 0!==o?o:1).forEach(function(n){t.removeLayer(n),t.compositeLayersManager.removeLayer(e,n)}),this.isMultiSymbol(n.type)?this.setMultiSymbol(e,n,a):this.setSimpleSymbol(e,n)},setSymbolProperty:function(e,n,r){var o,i=t.symbolManager.getImageInfoByLayerId(e),a=t.symbolManager.getSymbolByLayerId(e),s=t.getLayer(e),l={circle:W,symbol:J,line:Y,fill:Z,text:K},u=null===(o=l["Text"===(null===a||void 0===a?void 0:a.type)?"text":null===s||void 0===s?void 0:s.type])||void 0===o?void 0:o.call(l,n,r,null===i||void 0===i?void 0:i.width);if(u){var c=u.type,f=u.name,h=u.value;t[{paint:"setPaintProperty",layout:"setLayoutProperty"}[c]](e,f,h)}},setSimpleSymbol:function(e,n){var r=this.symbolToLayerStyle(n),o=r.paint,i=r.layout;Object.keys(o).forEach(function(n){t.setPaintProperty(e,n,o[n])}),Object.keys(i).forEach(function(n){t.setLayoutProperty(e,n,i[n])})},setMultiSymbol:function(e,n,r){var o=this;n.styles.forEach(function(n,i){var a=r[i];if(r[i])o.setSimpleSymbol(r[i],n);else{var s,l=t.getLayer(e),u=t.getStyle().layers,c=t.compositeLayersManager.getLayers(e),f=u.findIndex(function(e){return e.id===c[c.length-1]})+1;if(!l)return;var h=l.source,p=l.sourceLayer,d=l.filter,y={id:a=w.createUniqueID("SuperMap.Symbol_"),source:h,"source-layer":p};d&&(y.filter=d),o.addSimpleSymbol(y,n,null===(s=u[f])||void 0===s?void 0:s.id)}t.compositeLayersManager.addLayer(e,a)})}}},re=function(){var e={};return function(t,n){var r;return e[t]||(e[t]={mapbox:ne}[t]),null===(r=e[t])||void 0===r?void 0:r.call(e,n)}};function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ue(e,t,"get"))}function le(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ue(e,t,"set"),n),n}function ue(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ce=new WeakMap,fe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ae(this,"symbols",void 0),ae(this,"images",void 0),ie(this,ce,{writable:!0,value:void 0}),this.symbols={},this.images={},le(this,ce,{})}var t,n,r;return t=e,(n=[{key:"addSymbol",value:function(e,t){this.symbols[e]=t}},{key:"getSymbol",value:function(e){return this.symbols[e]}},{key:"removeSymbol",value:function(e){delete this.symbols[e]}},{key:"addImageInfo",value:function(e,t){this.images[e]=t}},{key:"getImageInfo",value:function(e){return this.images[e]}},{key:"getImageInfoByLayerId",value:function(e){var t;return this.getImageInfo(null===(t=this.getSymbolByLayerId(e))||void 0===t?void 0:t.image)}},{key:"setSymbolTolayer",value:function(e,t){se(this,ce)[e]=t}},{key:"getSymbolByLayerId",value:function(e){return this.getSymbol(se(this,ce)[e])}}])&&oe(t.prototype,n),r&&oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function he(e){"@babel/helpers - typeof";return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(){pe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&n.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var r;this._invoke=function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,s){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==he(f)&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,a,s)},function(e){r("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,s)})}s(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function de(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
!function(){O().Map.prototype.overlayLayersManager={},O().Map.prototype.compositeLayersManager=P(),O().Map.prototype.symbolLayerManager=re(),O().Map.prototype.symbolManager=new fe,void 0===O().Map.prototype.addLayerBak&&(O().Map.prototype.addLayerBak=O().Map.prototype.addLayer,O().Map.prototype.addLayer=function(e,t){var n=e.symbol;if(n){var r=this.symbolManager.getSymbol(n);return r?(this.symbolLayerManager("mapbox",this).addLayer(e,r,t),this):void console.warn('Symbol "'.concat(n,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))}return e.source||"custom"===e.type||"background"===e.type?(this.addLayerBak(e,t),this):this.overlayLayersManager[e.id]||this.style._layers[e.id]?void this.fire("error",{error:new Error("A layer with this id already exists.")}):(function(e,t){e.onAdd&&e.onAdd(t)}(e,this),this.overlayLayersManager[e.id]=e,this)}),O().Map.prototype.getLayer=function(e){return this.overlayLayersManager[e]?this.overlayLayersManager[e]:this.style.getLayer(e)},O().Map.prototype.moveLayer=function(e,t){return this.overlayLayersManager[e]?(this.overlayLayersManager[e].moveLayer?this.overlayLayersManager[e].moveLayer(e,t):function(e,t){var n=document.getElementById(e);if(t){var r=document.getElementById(t);r||O().Evented.prototype.fire("error",{error:new Error('Layer with id "'.concat(t,'" does not exist on this document.'))})}n&&r?r.parentNode.insertBefore(n,r):n.parentNode.appendChild(n)}(e,t),this):this.style._layers[e]?(this.style.moveLayer(e,t),this._update(!0),this):void 0},O().Map.prototype.removeLayer=function(e){return this.overlayLayersManager[e]?((t=this.overlayLayersManager[e]).removeFromMap&&t.removeFromMap(),delete this.overlayLayersManager[e],this):(this.style.removeLayer(e),this._update(!0),this);var t},O().Map.prototype.setLayoutProperty=function(e,t,n){return this.overlayLayersManager[e]?("visibility"===t&&(n="visible"===n,r=this.overlayLayersManager[e],o=n,r.setVisibility&&r.setVisibility(o),this.style.fire("data",{dataType:"style"})),this):(this.style.setLayoutProperty(e,t,n),this._update(!0),this);var r,o},O().Map.prototype.updateTransform=function(e,t,n,r,o,i,a){this.transform.units=e;var s=this.mercatorZfromAltitude;O().MercatorCoordinate.fromLngLat=function(e,r){r=r||0;var o=O().LngLat.convert(e);return new(O().MercatorCoordinate)((o.lng-t)/i,(n-o.lat)/a,s(r,o.lat))},O().MercatorCoordinate.prototype.toLngLat=function(){return new(O().LngLat)(this.x*i+t,n-this.y*a)},this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+r+") / "+i+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+o+") / "+a+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+a+"+"+o+";}}"],{type:"text/javascript"}))},O().Map.prototype.setSymbol=function(e,t){var n=this.symbolManager.getSymbol(t);n?this.symbolLayerManager("mapbox",this).setSymbol(e,n):console.warn('Symbol "'.concat(t,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))},O().Map.prototype.setStyleBak||(O().Map.prototype.setStyleBak=O().Map.prototype.setStyle,O().Map.prototype.setStyle=function(e,t){var n=this;return this.setStyleBak(e,t),this.style.once("style.load",function(){e.layers.filter(function(e){return e.symbol}).forEach(function(e){n.setSymbol(e.id,e.symbol)})}),this});var e=function(e,t){return new Promise(function(n){e.loadImage(t,function(t,r){if(t)n(void 0);else{var o=w.createUniqueID("SuperMap.Symbol_");e.addImage(o,r),e.symbolManager.addImageInfo(o,r),n(o)}})})};O().Map.prototype.loadSymbol=function(){var t,n=(t=pe().mark(function t(n,r){var o,i,a;return pe().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof n){t.next=6;break}return void(t.next=3);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=n;case 7:if(i=t.t0){t.next=12;break}o={message:"this symbol is not exists."},t.next=17;break;case 12:if(!["ImagePoint","ImageLine","ImagePolygon"].includes(i.type)){t.next=17;break}return t.next=15,e(this,i.image);case 15:(a=t.sent)?i.image=a:o={message:"this symbol.image is not found."};case 17:r(o,i);case 18:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){de(i,r,o,a,s,"next",e)}function s(e){de(i,r,o,a,s,"throw",e)}a(void 0)})});return function(e,t){return n.apply(this,arguments)}}(),O().Map.prototype.addSymbol=function(e,t){if(this.symbolManager.getSymbol(e))return this.fire("error",{error:new Error("An symbol with this name already exists.")});this.symbolManager.addSymbol(e,t)},O().Map.prototype.hasSymbol=function(e){return e?!!this.symbolManager.getSymbol(e):(this.fire("error",{error:new Error("Missing required symbol id")}),!1)},O().Map.prototype.removeSymbol=function(e){this.symbolManager.removeSymbol(e)}}();function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ve=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageUrl=null,this.link=null,this.width=null,this.height=null,this.alt="SuperMap iClient",this._extend(this,t)}var t,n,r;return t=e,(n=[{key:"onAdd",value:function(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl iclient-logo",this._container.style.marginTop=0,this._container.style.marginBottom=0,this._container.style.marginLeft=0,this._container.style.marginRight=0;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.imageUrl&&(t=this.imageUrl);var n=this.alt,r="94px",o="29px",i="width:"+r+";height:"+o+";";this.imageUrl&&(i="width:"+(r=this.width)+";height:"+(o=this.height)+";",r&&o||(i=""));var a=this.link||"https://iclient.supermap.io";return this._container.innerHTML="<a href='"+a+"' target='_blank'><img src="+t+" alt='"+n+"' style='"+i+"margin-bottom: 2px'></a>",this._createStyleSheet(),this._container}},{key:"_createStyleSheet",value:function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".iclient-logo{margin:0 !important;}.iclient-logo a{border: none;display: block;height:31px;}.iclient-logo img{border: none;white-space: nowrap}",document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var n=Object.getOwnPropertyNames(arguments)[t];if("caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n){var r=arguments[n];if(r)for(var o=0;o<Object.getOwnPropertyNames(r).length;o++){var i=Object.getOwnPropertyNames(r)[o];"caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n&&(e[i]=r[i])}}}return e}}])&&ye(t.prototype,n),r&&ye(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var me=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.w=t?parseFloat(t):0,this.h=t?parseFloat(n):0,this.CLASS_NAME="SuperMap.Size"}var t,n,r;return t=e,(n=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new e(this.w,this.h)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&ge(t.prototype,n),r&&ge(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var we=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t?parseFloat(t):0,this.y=n?parseFloat(n):0,this.mode=r,this.CLASS_NAME="SuperMap.Pixel"}var t,n,r;return t=e,(n=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+n)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&be(t.prototype,n),r&&be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}we.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xe=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w.isArray(t)&&(n=t[1],t=t[0]),this.lon=t?w.toFloat(t):0,this.lat=n?w.toFloat(n):0,this.CLASS_NAME="SuperMap.LonLat"}var t,n,r;return t=e,r=[{key:"fromString",value:function(t){var n=t.split(",");return new e(n[0],n[1])}},{key:"fromArray",value:function(t){var n=w.isArray(t);return new e(n&&t[0],n&&t[1])}}],(n=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new e(this.lon,this.lat)}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("LonLat.add cannot receive null values");return new e(this.lon+w.toFloat(t),this.lat+w.toFloat(n))}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t}},{key:"wrapDateLine",value:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&_e(t.prototype,n),r&&_e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Oe=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w.isArray(t)&&(o=t[3],r=t[2],n=t[1],t=t[0]),this.left=null!=t?w.toFloat(t):this.left,this.bottom=null!=n?w.toFloat(n):this.bottom,this.right=null!=r?w.toFloat(r):this.right,this.top=null!=o?w.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var t,n,r;return t=e,r=[{key:"fromString",value:function(t,n){var r=t.split(",");return e.fromArray(r,n)}},{key:"fromArray",value:function(t,n){return!0===n?new e(t[1],t[0],t[3],t[2]):new e(t[0],t[1],t[2],t[3])}},{key:"fromSize",value:function(t){return new e(0,t.h,t.w,0)}},{key:"oppositeQuadrant",value:function(e){var t="";return t+="t"===e.charAt(0)?"b":"t",t+="l"===e.charAt(1)?"r":"l"}}],(n=[{key:"clone",value:function(){return new e(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(e,t){null==e&&(e=6);var n=Math.pow(10,e),r=Math.round(this.left*n)/n,o=Math.round(this.bottom*n)/n,i=Math.round(this.right*n)/n,a=Math.round(this.top*n)/n;return!0===t?o+","+r+","+a+","+i:r+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new me(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new we((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new xe((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(t,n){var r,o;return t=t||1,null==n&&(n=this.getCenterLonLat()),"SuperMap.LonLat"===n.CLASS_NAME?(r=n.lon,o=n.lat):(r=n.x,o=n.y),new e((this.left-r)*t+r,(this.bottom-o)*t+o,(this.right-r)*t+r,(this.top-o)*t+o)}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("Bounds.add cannot receive null values");return new e(this.left+t,this.bottom+n,this.right+t,this.top+n)}},{key:"extend",value:function(t){var n=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":n=new e(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":n=new e(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":n=t}n&&(this.centerLonLat=null,(null==this.left||n.left<this.left)&&(this.left=n.left),(null==this.bottom||n.bottom<this.bottom)&&(this.bottom=n.bottom),(null==this.right||n.right>this.right)&&(this.right=n.right),(null==this.top||n.top>this.top)&&(this.top=n.top))}}},{key:"containsLonLat",value:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var n=this.contains(e.lon,e.lat,t.inclusive),r=t.worldBounds;if(r&&!n){var o=r.getWidth(),i=(r.left+r.right)/2,a=Math.round((e.lon-i)/o);n=this.containsLonLat({lon:e.lon-a*o,lat:e.lat},{inclusive:t.inclusive})}return n}},{key:"containsPixel",value:function(e,t){return this.contains(e.x,e.y,t)}},{key:"contains",value:function(e,t,n){if(null==n&&(n=!0),null==e||null==t)return!1;var r=!1;return r=n?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top,r}},{key:"intersectsBounds",value:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),(t=t||{}).worldBounds){var n=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else n=this;null==t.inclusive&&(t.inclusive=!0);var r=!1,o=n.left===e.right||n.right===e.left||n.top===e.bottom||n.bottom===e.top;if(t.inclusive||!o){var i=e.bottom>=n.bottom&&e.bottom<=n.top||n.bottom>=e.bottom&&n.bottom<=e.top,a=e.top>=n.bottom&&e.top<=n.top||n.top>e.bottom&&n.top<e.top,s=e.left>=n.left&&e.left<=n.right||n.left>=e.left&&n.left<=e.right,l=e.right>=n.left&&e.right<=n.right||n.right>=e.left&&n.right<=e.right;r=(i||a)&&(s||l)}if(t.worldBounds&&!r){var u=t.worldBounds,c=u.getWidth(),f=!u.containsBounds(n),h=!u.containsBounds(e);f&&!h?(e=e.add(-c,0),r=n.intersectsBounds(e,{inclusive:t.inclusive})):h&&!f&&(n=n.add(-c,0),r=e.intersectsBounds(n,{inclusive:t.inclusive}))}return r}},{key:"containsBounds",value:function(e,t,n){null==t&&(t=!1),null==n&&(n=!0);var r=this.contains(e.left,e.bottom,n),o=this.contains(e.right,e.bottom,n),i=this.contains(e.left,e.top,n),a=this.contains(e.right,e.top,n);return t?r||o||i||a:r&&o&&i&&a}},{key:"determineQuadrant",value:function(e){var t="",n=this.getCenterLonLat();return t+=e.lat<n.lat?"b":"t",t+=e.lon<n.lon?"l":"r"}},{key:"wrapDateLine",value:function(e,t){var n=(t=t||{}).leftTolerance||0,r=t.rightTolerance||0,o=this.clone();if(e){for(var i=e.getWidth();o.left<e.left&&o.right-r<=e.left;)o=o.add(i,0);for(;o.left+n>=e.right&&o.right>e.right;)o=o.add(-i,0);var a=o.left+n;a<e.right&&a>e.left&&o.right-r>e.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&Se(t.prototype,n),r&&Se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Pe(e){"@babel/helpers - typeof";return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(){return(ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Ce(e,t){return(Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ae(e);if(t){var o=Ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(i,l);var t,n,r,o=Ee(i);function i(e,t,n,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,n,r)).x=parseFloat(e),a.y=parseFloat(t),a.tag=r||0==r?parseFloat(r):null,a.type=n||"Point",a.CLASS_NAME="SuperMap.Geometry.Point",a.geometryType="Point",a}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i(this.x,this.y)),w.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new Oe(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"move",value:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,ke(Ae(i.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(){return[this]}}])&&Te(t.prototype,n),r&&Te(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Re(e){"@babel/helpers - typeof";return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(){return(je="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Le(e,t){return(Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ne(e);if(t){var o=Ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Le(e,t)}(i,l);var t,n,r,o=De(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).components=[],t.componentTypes=null,null!=e&&t.addComponents(e),t.CLASS_NAME="SuperMap.Geometry.Collection",t.geometryType="Collection",t}return t=i,(n=[{key:"destroy",value:function(){this.components.length=0,this.components=null,je(Ne(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var e=new i,t=0,n=this.components.length;t<n;t++)e.addComponent(this.components[t].clone());return w.applyDefaults(e,this),e}},{key:"getComponentsString",value:function(){for(var e=[],t=0,n=this.components.length;t<n;t++)e.push(this.components[t].toShortString());return e.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var e=new Oe,t=this.components;if(t)for(var n=0,r=t.length;n<r;n++)e.extend(t[n].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)}},{key:"addComponents",value:function(e){w.isArray(e)||(e=[e]);for(var t=0,n=e.length;t<n;t++)this.addComponent(e[t])}},{key:"addComponent",value:function(e,t){var n=!1;if(e&&(null==this.componentTypes||w.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var r=this.components.slice(0,t),o=this.components.slice(t,this.components.length);r.push(e),this.components=r.concat(o)}else this.components.push(e);e.parent=this,this.clearBounds(),n=!0}return n}},{key:"removeComponents",value:function(e){var t=!1;w.isArray(e)||(e=[e]);for(var n=e.length-1;n>=0;--n)t=this.removeComponent(e[n])||t;return t}},{key:"removeComponent",value:function(e){return w.removeItem(this.components,e),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var e=0,t=0,n=this.components.length;t<n;t++)e+=this.components[t].getArea();return e}},{key:"equals",value:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME)if(w.isArray(e.components)&&e.components.length===this.components.length){for(var n=0,r=this.components.length;n<r;++n)if(!this.components[n].equals(e.components[n])){t=!1;break}}else t=!1;else t=!1;return t}},{key:"getVertices",value:function(e){for(var t=[],n=0,r=this.components.length;n<r;++n)Array.prototype.push.apply(t,this.components[n].getVertices(e));return t}}])&&Ie(t.prototype,n),r&&Ie(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Fe(e){"@babel/helpers - typeof";return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return(ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=He(e);if(t){var o=He(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var We=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}(i,Be);var t,n,r,o=Ve(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point"],t.CLASS_NAME="SuperMap.Geometry.MultiPoint",t.geometryType="MultiPoint",t}return t=i,(n=[{key:"addPoint",value:function(e,t){this.addComponent(e,t)}},{key:"removePoint",value:function(e){this.removeComponent(e)}}])&&Ge(t.prototype,n),r&&Ge(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ue(e){"@babel/helpers - typeof";return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return(qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Xe(e);if(t){var o=Xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(i,We);var t,n,r,o=Ye(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],t.CLASS_NAME="SuperMap.Geometry.Curve",t.geometryType="Curve",t}return t=i,n&&Je(t.prototype,n),r&&Je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}();function Qe(e){"@babel/helpers - typeof";return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(){return($e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function et(e,t){return(et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=nt(e);if(t){var o=nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}(i,Ze);var t,n,r,o=tt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.Geometry.LineString",t.geometryType="LineString",t}return t=i,r=[{key:"calculateCircle",value:function(e){if(e.length<3)return e;var t={},n=e[0],r=e[1],o=e[2],i=0,a=0,s=!0,l=0,u=0,c=0,f=[],h=(o.y-n.y)/(o.x-n.x),p=o.y-h*o.x;if(o.x!=n.x&&o.y!=n.y&&r.y==h*r.x+p||o.x==n.x&&r.x==n.x||o.y==n.y&&r.y==n.y||o.x==n.x&&o.y==n.y||o.x==r.x&&o.y==r.y||n.x==r.x&&n.y==r.y)f.push(n),f.push(r),f.push(o);else{var d=(r.x*r.x+r.y*r.y-(n.x*n.x+n.y*n.y))*(2*(o.y-n.y))-(o.x*o.x+o.y*o.y-(n.x*n.x+n.y*n.y))*(2*(r.y-n.y)),y=2*(r.x-n.x)*(o.x*o.x+o.y*o.y-(n.x*n.x+n.y*n.y))-2*(o.x-n.x)*(r.x*r.x+r.y*r.y-(n.x*n.x+n.y*n.y)),v=4*((r.x-n.x)*(o.y-n.y)-(o.x-n.x)*(r.y-n.y));t.x=d/v,t.y=y/v;var g=(2*(i=Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)))*i-((n.x-o.x)*(n.x-o.x)+(n.y-o.y)*(n.y-o.y)))/(2*i*i);g=(g=g>=1?1:g)<=-1?-1:g,c=180*Math.acos(g)/Math.PI,a=(c=o.x==n.x?t.x>n.x&&r.x>n.x||t.x<n.x&&r.x<n.x?360-c:c:t.y>h*t.x+p&&r.y>h*r.x+p||t.y<h*t.x+p&&r.y<h*r.x+p?360-c:c)/72,o.y!=n.y?o.x==n.x?o.y>n.y?r.x<n.x&&(s=!1):r.x>n.x&&(s=!1):o.x<n.x?r.y<h*r.x+p&&(s=!1):r.y>h*r.x+p&&(s=!1):o.x>n.x?r.y>n.y&&(s=!1):r.y<n.y&&(s=!1);var m=(n.y-t.y)/(n.x-t.x),b=m>=0?180*Math.atan(m)/Math.PI:Math.abs(180*Math.atan(m)/Math.PI)+90,w=Math.abs(t.y);n.y==w&&w==o.y&&n.x<o.x&&(b+=180);var _=n.y-t.y;f.push(n);for(var x=1;x<72;x++){l=a*x,u=b,s?_>=0?m>=0?u+=l:u=180-(u-90)+l:u=m>0?u-180+l:90-u+l:_>=0?m>=0?u-=l:u=180-(u-90)-l:u=m>=0?u-180-l:90-u-l,u=u*Math.PI/180;var S=t.x+i*Math.cos(u),O=t.y+i*Math.sin(u);f.push(new Me(S,O))}f.push(o)}return f}},{key:"createLineEPS",value:function(e){var t=[],n=e.length;if(n<2)return e;for(var r=0;r<n;){if("LTypeArc"==e[r].type){var o=i.createLineArc(t,r,n,e);t=o[0],r=o[1]}else t.push(e[r]),r++}return t}},{key:"createLineArc",value:function(e,t,n,r){if(0==t){var o=i.addPointEPS(r,t,n,"LTypeArc");Array.prototype.push.apply(e,o[0]),t=o[1]+1}else if(t==n-1){var a=[r[t-1],r[t]],s=i.calculateCircle(a);Array.prototype.push.apply(e,s),t++}else{var l=i.addPointEPS(r,t,n,"LTypeArc");e.pop(),Array.prototype.push.apply(e,l[0]),t=l[1]+1}return[e,t]}},{key:"addPointEPS",value:function(e,t,n,r){var o,a=[],s=t+1;return 0==t?Array.prototype.push.apply(a,[e[t],e[t+1]]):t==n-1?Array.prototype.push.apply(a,[e[t-1],e[t]]):Array.prototype.push.apply(a,[e[t-1],e[t],e[t+1]]),"LTypeCurve"==r?o=i.calculatePointsFBZN(a):"LTypeArc"==r&&(o=i.calculateCircle(a)),[o,s]}}],(n=[{key:"removeComponent",value:function(e){var t=this.components&&this.components.length>2;return t&&$e(nt(i.prototype),"removeComponent",this).apply(this,arguments),t}},{key:"getSortedSegments",value:function(){for(var e,t,n=this.components.length-1,r=new Array(n),o=0;o<n;++o)e=this.components[o],t=this.components[o+1],e.x<t.x?r[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:r[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return r.sort(function(e,t){return e.x1-t.x1})}},{key:"getVertices",value:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&Ke(t.prototype,n),r&&Ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ot(e){"@babel/helpers - typeof";return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(){return(at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ut(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function st(e,t){return(st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var o=ut(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(i,rt);var t,n,r,o=lt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point"],t.CLASS_NAME="SuperMap.Geometry.LinearRing",t.geometryType="LinearRing",t}return t=i,(n=[{key:"addComponent",value:function(e,t){var n=!1,r=this.components.pop();null==t&&e.equals(r)||(n=at(ut(i.prototype),"addComponent",this).apply(this,arguments));var o=this.components[0];return at(ut(i.prototype),"addComponent",this).apply(this,[o]),n}},{key:"removeComponent",value:function(e){var t=this.components&&this.components.length>3;if(t){this.components.pop(),at(ut(i.prototype),"removeComponent",this).apply(this,arguments);var n=this.components[0];at(ut(i.prototype),"addComponent",this).apply(this,[n])}return t}},{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,n=0,r=this.components.length;n<r-1;n++){var o=this.components[n],i=this.components[n+1];t+=(o.x+i.x)*(i.y-o.y)}e=-t/2}return e}},{key:"getVertices",value:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)}}])&&it(t.prototype,n),r&&it(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ft(e){"@babel/helpers - typeof";return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return(pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=yt(e);if(t){var o=yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(i,Be);var t,n,r,o=dt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.LinearRing"],t.CLASS_NAME="SuperMap.Geometry.Polygon",t.geometryType="Polygon",t}return t=i,(n=[{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,n=this.components.length;t<n;t++)e-=Math.abs(this.components[t].getArea())}return e}}])&&ht(t.prototype,n),r&&ht(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mt=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Feature",this.layer=t,this.id=w.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=n,this.data=null!=r?r:{}}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&gt(t.prototype,n),r&&gt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bt(e){"@babel/helpers - typeof";return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _t(){return(_t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ot(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function xt(e,t){return(xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ot(e);if(t){var o=Ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Pt="Unknown",Tt="Insert",kt="Update",Ct="Delete",Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xt(e,t)}(i,mt);var t,n,r,o=St(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,null,null,t)).fid=null,r.geometry=e||null,r.attributes={},t&&(r.attributes=w.extend(r.attributes,t)),r.bounds=null,r.state=null,r.style=n||null,r.url=null,r.lonlat=null,r.CLASS_NAME="SuperMap.Feature.Vector",i.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},r}return t=i,(n=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,_t(Ot(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new i(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(e){if(e===kt)switch(this.state){case Pt:case Ct:this.state=e}else if(e===Tt)switch(this.state){case Pt:break;default:this.state=e}else if(e===Ct)switch(this.state){case Tt:case Ct:break;case Pt:case kt:this.state=e}else e===Pt&&(this.state=e)}}])&&wt(t.prototype,n),r&&wt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Mt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.keepData=!1,w.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}])&&At(t.prototype,n),r&&At(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rt(e){"@babel/helpers - typeof";return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t){return(jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Dt(e);if(t){var o=Dt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}(i,Mt);var t,n,r,o=Lt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).indent="    ",t.space=" ",t.newline="\n",t.level=0,t.pretty=!1,t.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),t.CLASS_NAME="SuperMap.Format.JSON",t.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,n,r,o=["{"];this.level+=1;var i=!1;for(t in e)e.hasOwnProperty(t)&&(n=this.write.apply(this,[t,this.pretty]),r=this.write.apply(this,[e[t],this.pretty]),null!=n&&null!=r&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),r),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(e){var t,n=["["];this.level+=1;for(var r=0,o=e.length;r<o;++r)null!=(t=this.write.apply(this,[e[r],this.pretty]))&&(r>0&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,n){var r=t[n];return r||(r=n.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},t}return t=i,(n=[{key:"read",value:function(e,t){var n;if(this.nativeJSON)try{n=JSON.parse(e,t)}catch(t){return{data:e}}return this.keepData&&(this.data=n),n}},{key:"write",value:function(e,t){this.pretty=!!t;var n=null,r=Rt(e);if(this.serialize[r])try{n=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[r].apply(this,[e])}catch(e){}return n}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&It(t.prototype,n),r&&It(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bt(e){"@babel/helpers - typeof";return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return(Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Vt(e);if(t){var o=Vt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gt(e,t)}(i,Be);var t,n,r,o=zt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.LineString"],t.CLASS_NAME="SuperMap.Geometry.MultiLineString",t.geometryType="MultiLineString",t}return t=i,n&&Ft(t.prototype,n),r&&Ft(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}();function Wt(e){"@babel/helpers - typeof";return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t){return(Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Yt(e);if(t){var o=Yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jt(e,t)}(i,Be);var t,n,r,o=qt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Polygon"],t.CLASS_NAME="SuperMap.Geometry.MultiPolygon",t.geometryType="MultiPolygon",t}return t=i,n&&Ut(t.prototype,n),r&&Ut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}();function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Qt=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.red=t||0==t?t:255,this.green=n||0,this.blue=r||0,this.CLASS_NAME="SuperMap.ServerColor"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t){var n=new e,r=255;null!==t.red&&(r=Number(t.red)),n.red=r;var o=0;null!==t.green&&(o=Number(t.green)),n.green=o;var i=0;return null!==t.blue&&(i=Number(t.blue)),n.blue=i,n}}}],(n=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&Zt(t.prototype,n),r&&Zt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $t=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fillBackColor=new Qt(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new Qt(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new Qt(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({fillBackColor:Qt.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:Qt.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:Qt.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}],(n=[{key:"destroy",value:function(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var e={};return e=w.copyAttributes(e,this)}}])&&Kt(t.prototype,n),r&&Kt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function en(e){"@babel/helpers - typeof";return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t){return(nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=an(e);if(t){var o=an(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return on(e)}(this,n)}}function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nn(e,t)}(i,Me);var t,n,r,o=rn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).measure=null,e&&w.extend(on(t),e),t.CLASS_NAME="SuperMap.PointWithMeasure",t}return t=i,r=[{key:"fromJson",value:function(e){if(e)return new i({x:e.x,y:e.y,measure:e.measure})}}],(n=[{key:"equals",value:function(e){var t=!1;if(null!=e){var n=this.x===e.x&&this.y===e.y&&this.measure===e.measure,r=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=n||r&&o}return t}},{key:"toJson",value:function(){var e="{";return null!=this.measure&&void 0!=this.measure&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&tn(t.prototype,n),r&&tn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ln(e){"@babel/helpers - typeof";return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t){return(cn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=pn(e);if(t){var o=pn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ln(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hn(e)}(this,n)}}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cn(e,t)}(i,Be);var t,n,r,o=fn(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).id=null,n.center=null,n.style=null,n.length=null,n.maxM=null,n.minM=null,n.parts=null,n.points=null,n.type=null,n.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],t&&w.extend(hn(n),t),n.CLASS_NAME="SuperMap.Route",n.geometryType="LINEM",n}return t=i,r=[{key:"fromJson",value:function(e){if(e){var t=e.parts||[],n=e.points||[],r=t.length,o=[];if(!(r>0))return null;for(var a=0,s=0,l=[];a<r;a++){for(var u=0;u<t[a];u++)l.push(sn.fromJson(n[s+u]));s+=t[a],l[0].equals(l[t[a]-1])?o.push(new ct(l)):o.push(new rt(l)),l=[]}return new i(o,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}],(n=[{key:"toJson",value:function(){var e="{";if(null!=this.id&&void 0!=this.id&&(e+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(e+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(e+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(e+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(e+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(e+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(null!=this.components&&this.components.length>0){e+='"points":[';for(var n=0,r=this.components.length;n<r;n++)for(var o=0,i=this.components[n].components.length;o<i;o++)e+=this.components[n].components[o].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return e=e.replace(/,$/g,""),e+="}"}},{key:"destroy",value:function(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}}])&&un(t.prototype,n),r&&un(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(),yn={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},vn={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},gn={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},mn={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},bn={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},wn={DISTANCE:"DISTANCE",AREA:"AREA"},_n={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},xn={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},Sn={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},On={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},Pn={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},Tn={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},kn={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},Cn={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},En={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},An={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},Mn={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},Rn={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},In={FLAT:"FLAT",ROUND:"ROUND"},jn={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},Ln={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},Dn={BSPLINE:"BSPLINE",POLISH:"POLISH"},Nn={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},Bn={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},Fn={ADD:"add",UPDATE:"update",DELETE:"delete"},Gn={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},zn={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},Vn={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},Hn={EXP1:"EXP1",EXP2:"EXP2"},Wn={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},Un={CLIP:"clip",INTERSECT:"intersect"},Jn={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},qn={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},Yn={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},Xn={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},Zn={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},Qn={GEOHASH_GRID:"geohash_grid"},Kn={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},$n={NDVI:"NDVI",HILLSHADE:"HILLSHADE"};function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var tr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({id:t.id,style:$t.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}},{key:"fromGeometry",value:function(t){if(t){var n=0,r=[],o=[],i=null,a=t.components,s=t.CLASS_NAME,l={epsgCode:t.SRID};if(isNaN(t.id)||(n=t.id),"SuperMap.Geometry.LinearRing"!=s&&"SuperMap.Geometry.LineString"!=s&&(t instanceof We||t instanceof Ht)){for(var u=a.length,c=0;c<u;c++){var f=a[c].getVertices(),h=f.length;r.push(h);for(var p=0;p<h;p++)o.push(new Me(f[p].x,f[p].y))}i="SuperMap.Geometry.MultiPoint"==s?gn.POINT:gn.LINE}else if(t instanceof Xt){for(var d=a.length,y=0;y<d;y++)for(var v=a[y].components,g=v.length,m=0;m<g;m++){var b=v[m].getVertices(),w=b.length+1;r.push(w);for(var _=0;_<w-1;_++)o.push(new Me(b[_].x,b[_].y));o.push(new Me(b[0].x,b[0].y))}i=gn.REGION}else if(t instanceof vt){for(var x=a.length,S=0;S<x;S++){var O=a[S].getVertices(),P=O.length+1;r.push(P);for(var T=0;T<P-1;T++)o.push(new Me(O[T].x,O[T].y));o.push(new Me(O[0].x,O[0].y))}i=gn.REGION}else{for(var k=t.getVertices(),C=k.length,E=0;E<C;E++)o.push(new Me(k[E].x,k[E].y));t instanceof ct&&(o.push(new Me(k[0].x,k[0].y)),C++),r.push(C),i=t instanceof Me?gn.POINT:gn.LINE}return new e({id:n,style:null,parts:r,points:o,type:i,prjCoordSys:l})}}},{key:"IsClockWise",value:function(e){var t=e.length;if(t<3)return 0;var n=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var r=1;r<t;r++)n+=e[r].y*(e[r-1].x-e[r+1].x);return.5*n}},{key:"bubbleSort",value:function(e,t,n,r){for(var o=0;o<e.length;o++)for(var i=0;i<e.length;i++)if(e[o]>e[i]){var a=e[i];e[i]=e[o],e[o]=a;var s=t[i];if(t[i]=t[o],t[o]=s,n&&n.length>0){var l=n[i];n[i]=n[o],n[o]=l}if(r&&r.length>0){var u=r[i];r[i]=r[o],r[o]=u}}}}],(n=[{key:"destroy",value:function(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null}},{key:"toGeometry",value:function(){var e=this;switch(e.type.toUpperCase()){case gn.POINT:return e.toGeoPoint();case gn.LINE:return e.toGeoLine();case gn.LINEM:return e.toGeoLinem();case gn.REGION:return e.toGeoRegion();case gn.POINTEPS:return e.toGeoPoint();case gn.LINEEPS:return e.toGeoLineEPS();case gn.REGIONEPS:return e.toGeoRegionEPS();case gn.GEOCOMPOUND:return e.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var e=this.parts||[],t=this.points||[],n=e.length;if(n>0){if(1===n)return new Me(t[0].x,t[0].y);for(var r=[],o=0;o<n;o++)r.push(new Me(t[o].x,t[o].y));return new We(r)}return null}},{key:"toGeoLine",value:function(){var e=this.parts||[],t=this.points||[],n=e.length;if(n>0){if(1===n){for(var r=[],o=0;o<e[0];o++)r.push(new Me(t[o].x,t[o].y));return r[0].equals(r[e[0]-1])?new ct(r):new rt(r)}for(var i=[],a=0;a<n;a++){for(var s=[],l=0;l<e[a];l++)s.push(new Me(t[l].x,t[l].y));i.push(new rt(s)),t.splice(0,e[a])}return new Ht(i)}return null}},{key:"toGeoLineEPS",value:function(){var e,t,n,r,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(e=0,n=[];e<i[0];e++)n.push(new Me(a[e].x,a[e].y,a[e].type));return n[0].equals(n[i[0]-1])?(o=rt.createLineEPS(n),new ct(o)):(o=rt.createLineEPS(n),new rt(o))}for(e=0,r=[];e<s;e++){for(t=0,n=[];t<i[e];t++)n.push(new Me(a[t].x,a[t].y));o=rt.createLineEPS(n),r.push(new rt(o)),a.splice(0,i[e])}return new Ht(r)}return null}},{key:"toGeoLinem",value:function(){return dn.fromJson(this)}},{key:"toGeoRegion",value:function(){var t=this.parts||[],n=this.partTopo||[],r=this.points||[],o=t.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<r.length;s++)a.push(new Me(r[s].x,r[s].y));return i.push(new vt([new ct(a)])),new Xt(i)}for(var l=[],u=[],c=[],f=[],h=[],p=0,d=0;p<o;p++){for(var y=0;y<t[p];y++)a.push(new Me(r[d+y].x,r[d+y].y));d+=t[p];var v=new vt([new ct(a)]);a=[],c.push(v),0===n.length&&f.push(v.getBounds()),h.push(1),u.push(v.getArea())}if(0===n.length){e.bubbleSort(u,c,n,f);for(var g=[],m=1;m<c.length;m++)for(var b=m-1;b>=0;b--)if(g[m]=-1,f[b].containsBounds(f[m])){h[m]=-1*h[b],h[m]<0&&(g[m]=b);break}for(var w=0;w<c.length;w++)h[w]>0?i.push(c[w]):(i[g[w]].components=i[g[w]].components.concat(c[w].components),i.push(""))}else{i=new Array;for(var _=0;_<c.length;_++)if(n[_]&&-1==n[_]?l=l.concat(c[_].components):(l.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(l),l=[]),i.push(c[_])),_==o-1){var x=i.length;if(x)i[x-1].components=i[x-1].components.concat(l);else for(var S=0,O=l.length;S<O;S++)i.push(new vt(l))}}return new Xt(i)}},{key:"toGeoRegionEPS",value:function(){var t=this.parts||[],n=this.partTopo||[],r=this.points||[],o=t.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var l=0;l<r.length;l++)s.push(new Me(r[l].x,r[l].y));return i=rt.createLineEPS(s),a.push(new vt([new ct(i)])),new Xt(a)}for(var u=[],c=[],f=[],h=[],p=[],d=0,y=0;d<o;d++){for(var v=0;v<t[d];v++)s.push(new Me(r[y+v].x,r[y+v].y));y+=t[d],i=rt.createLineEPS(s);var g=new vt([new ct(i)]);s=[],f.push(g),0===n.length&&h.push(g.getBounds()),p.push(1),c.push(g.getArea())}if(0===n.length){e.bubbleSort(c,f,n,h);for(var m=[],b=1;b<f.length;b++)for(var w=b-1;w>=0;w--)if(m[b]=-1,h[w].containsBounds(h[b])){p[b]=-1*p[w],p[b]<0&&(m[b]=w);break}for(var _=0;_<f.length;_++)p[_]>0?a.push(f[_]):(a[m[_]].components=a[m[_]].components.concat(f[_].components),a.push(""))}else{a=new Array;for(var x=0;x<f.length;x++)if(n[x]&&-1==n[x]?u=u.concat(f[x].components):(u.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(u),u=[]),a.push(f[x])),x==o-1){var S=a.length;if(S)a[S-1].components=a[S-1].components.concat(u);else for(var O=0,P=u.length;O<P;O++)a.push(new vt(u))}}return new Xt(a)}},{key:"transformGeoCompound",value:function(){var t=this.geoParts||[],n=t.length;if(n<=0)return null;for(var r=[],o=0;o<n;o++){var i=t[o];r.push(new e(i).toGeometry())}return new Be(r)}}])&&er(t.prototype,n),r&&er(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nr(e){"@babel/helpers - typeof";return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function or(){return(or="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ir(e,t){return(ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=sr(e);if(t){var o=sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sr(e){return(sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var lr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ir(e,t)}(i,Nt);var t,n,r,o=ar(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).ignoreExtraDims=!0,t.CLASS_NAME="SuperMap.Format.GeoJSON",t.parseCoords={point:function(e){if(!1===this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new Me(e[0],e[1])},multipoint:function(e){for(var t=[],n=null,r=0,o=e.length;r<o;++r){try{n=this.parseCoords.point.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new We(t)},linestring:function(e){for(var t=[],n=null,r=0,o=e.length;r<o;++r){try{n=this.parseCoords.point.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new rt(t)},multilinestring:function(e){for(var t=[],n=null,r=0,o=e.length;r<o;++r){try{n=this.parseCoords.linestring.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new Ht(t)},polygon:function(e){for(var t,n,r=[],o=0,i=e.length;o<i;++o){try{n=this.parseCoords.linestring.apply(this,[e[o]])}catch(e){throw e}t=new ct(n.components),r.push(t)}return new vt(r)},multipolygon:function(e){for(var t=[],n=null,r=0,o=e.length;r<o;++r){try{n=this.parseCoords.polygon.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new Xt(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new vt([new ct([new Me(e[0][0],e[0][1]),new Me(e[1][0],e[0][1]),new Me(e[1][0],e[1][1]),new Me(e[0][0],e[1][1]),new Me(e[0][0],e[0][1])])])}},t.extract={feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),n={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(n.properties.texts=e.geometry.texts,n.properties.textStyle=e.geometry.textStyle),e.fid&&(n.id=e.fid),e.ID&&(n.id=e.ID),n},geometry:function(e){if(null==e)return null;!e.parts&&e.points&&(e.parts=[e.points.length]);var t,n=e.hasOwnProperty("geometryType")?e:new tr(e).toGeometry()||e,r=n.geometryType||n.type;return"LinearRing"===r&&(r="LineString"),"LINEM"===r&&(r="MultiLineString"),t=this.extract[r.toLowerCase()].apply(this,[n]),"Collection"===(r="TEXT"===r?"Point":r)?{type:"GeometryCollection",geometries:t}:{type:r,coordinates:t}},point:function(e){var t=[e.x,e.y];for(var n in e)"x"===n||"y"===n||null===e[n]||isNaN(e[n])||t.push(e[n]);return t},text:function(e){return[e.points[0].x,e.points[0].y]},multipoint:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},linestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},multilinestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},polygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},multipolygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.polygon.apply(this,[e.components[n]]));return t},collection:function(e){for(var t=e.components.length,n=new Array(t),r=0;r<t;++r)n[r]=this.extract.geometry.apply(this,[e.components[r]]);return n}},t}return t=i,(n=[{key:"read",value:function(e,t,n){t=t||"FeatureCollection";var r=null,o=null;if(o="string"==typeof e?or(sr(i.prototype),"read",this).call(this,e,n):e){if("string"!=typeof o.type);else if(this.isValidType(o,t))switch(t){case"Geometry":try{r=this.parseGeometry(o)}catch(e){}break;case"Feature":try{(r=this.parseFeature(o)).type="Feature"}catch(e){}break;case"FeatureCollection":switch(r=[],o.type){case"Feature":try{r.push(this.parseFeature(o))}catch(e){r=null}break;case"FeatureCollection":for(var a=0,s=o.features.length;a<s;++a)try{r.push(this.parseFeature(o.features[a]))}catch(e){r=null}break;default:try{var l=this.parseGeometry(o);r.push(new Et(l))}catch(e){r=null}}}}else;return r}},{key:"write",value:function(e,t){return or(sr(i.prototype),"write",this).call(this,this.toGeoJSON(e),t)}},{key:"fromGeoJSON",value:function(e,t,n){var r=this,o=this.read(e,t,n);return w.isArray(o)?o.map(function(e){return r._toiSevrerFeature(e)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(e){var t={type:null};if(w.isArray(e)){t.type="FeatureCollection";var n=e.length;t.features=new Array(n);for(var r=0;r<n;++r){var o=e[r];if(s(o)){var i={};i.geometry=o,t.features[r]=this.extract.feature.apply(this,[i])}else t.features[r]=this.extract.feature.apply(this,[o])}}else if(s(e)){var a={};a.geometry=e,t=this.extract.feature.apply(this,[a])}else t=this.extract.feature.apply(this,[e]);function s(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points")||e.hasOwnProperty("geoParts")}return t}},{key:"isValidType",value:function(e,t){var n=!1;switch(t){case"Geometry":-1==w.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)||(n=!0);break;case"FeatureCollection":n=!0;break;default:e.type==t&&(n=!0)}return n}},{key:"parseFeature",value:function(e){var t,n,r,o;r=e.properties?e.properties:{},o=e.geometry&&e.geometry.bbox||e.bbox;try{n=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new Et(n,r),o&&(t.bounds=Oe.fromArray(o)),e.id&&(t.geometry.id=e.id,t.fid=e.id),t}},{key:"parseGeometry",value:function(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!w.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var n=e.geometries.length,r=new Array(n),o=0;o<n;++o)r[o]=this.parseGeometry.apply(this,[e.geometries[o]]);t=new Be(r)}else{if(!w.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return t}},{key:"createCRSObject",value:function(e){var t=e.layer.projection.toString(),n={};if(t.match(/epsg:/i)){var r=parseInt(t.substring(t.indexOf(":")+1));n=4326==r?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+r}}}return n}},{key:"_toiSevrerFeature",value:function(e){var t=e.attributes,n=[],r=[];for(var o in t)n.push(o),r.push(t[o]);var i={fieldNames:n,fieldValues:r,geometry:tr.fromGeometry(e.geometry)};return i.geometry.id=e.fid,i}},{key:"createAttributes",value:function(e){if(!e)return null;var t={};!function(e,t){if(!e.hasOwnProperty("fieldNames")||!e.hasOwnProperty("fieldValues"))return;var n=e.fieldNames,r=e.fieldValues;for(var o in n)t[n[o]]=r[o]}(e,t);var n=["fieldNames","fieldValues","geometry","stringID","ID"];for(var r in e)n.indexOf(r)>-1||(t[r]=e[r]);return t}}])&&rr(t.prototype,n),r&&rr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(),ur=function(e){return"[object Array]"==Object.prototype.toString.call(e)},cr=function(e){return"string"==typeof e&&e.constructor===String},fr={toSuperMapGeometry:function(e){if(e&&e.type)return(new lr).read(e,"FeatureCollection")[0].geometry},toSuperMapBounds:function(e){return ur(e)?new Oe(e[0],e[1],e[2],e[3]):new Oe(e.getWest(),e.getSouth(),e.getEast(),e.getNorth())},toSuperMapPoint:function(e){return ur(e)?new Me(e[0],e[1]):e.lng&&e.lat?new Me(e.lng,e.lat):new Me(e.geometry.coordinates[0],e.geometry.coordinates[1])},toSuperMapPolygon:function(e){var t=e.getWest(),n=e.getEast(),r=e.getSouth(),o=e.getNorth();return new vt([new ct([new Me(t,r),new Me(n,r),new Me(n,o),new Me(t,o)])])},isArray:ur,toGeoJSON:function(e){if(e)return(new lr).toGeoJSON(e)},toProcessingParam:function(e){var t={};if(e.length<1)t="";else{for(var n=[],r=0;r<e.length;r++){var o={};o.x=e[r][0],o.y=e[r][1],n.push(o)}t.type="REGION",t.points=n}return t},extend:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var n=Object.getOwnPropertyNames(arguments)[t];if("caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n){var r=arguments[n];if(r)for(var o=0;o<Object.getOwnPropertyNames(r).length;o++){var i=Object.getOwnPropertyNames(r)[o];"caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n&&(e[i]=r[i])}}}return e},isNumber:function(e){if(""===e)return!1;var t=Number(e);return 0===t||!isNaN(t)},isString:cr,newGuid:function(e){for(var t=e||32,n="",r=1;r<t;r++){n+=Math.floor(16*Math.random()).toString(16)}return n},hexToRgba:function(e,t){var n=[],r=[];if(3==(e=e.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(e.charAt(i)+e.charAt(i));e=o.join("")}for(var a=0;a<6;a+=2)n[a]="0x"+e.substr(a,2),r.push(parseInt(Number(n[a])));return r.push(t),"rgba("+r.join(",")+")"},isMatchAdministrativeName:function(e,t){if(cr(t)){var n=e.substr(0,2);return"å¼ å®¶"===n&&(n=e.substr(0,3)),!!t.match(new RegExp(n))}return!1}};function hr(e){"@babel/helpers - typeof";return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dr(){return(dr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function yr(e,t){return(yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=gr(e);if(t){var o=gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===hr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function gr(e){return(gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var mr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yr(e,t)}(i,l);var t,n,r,o=vr(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n)).x=parseFloat(e),r.y=parseFloat(t),r.text=n.toString(),r.bsInfo={h:null,w:null},r.element=document.createElement("span"),r.CLASS_NAME="SuperMap.Geometry.GeoText",r.geometryType="GeoText",r}return t=i,(n=[{key:"destroy",value:function(){dr(gr(i.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new Me(this.x,this.y)}},{key:"clone",value:function(e){return null==e&&(e=new i(this.x,this.y,this.text)),w.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new Oe(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(e,t,n,r){var o,i,a,s,l=w.cloneObject(e),u=(r.label||this.text).split("\n").length;if(t=parseFloat(t),n=parseFloat(n),u>1&&(n=parseFloat(n)*u),r.labelAlign&&"cm"!==r.labelAlign)switch(r.labelAlign){case"lt":l.x+=t/2,l.y+=n/2;break;case"lm":l.x+=t/2;break;case"lb":l.x+=t/2,l.y-=n/2;break;case"ct":l.y+=n/2;break;case"cb":l.y-=n/2;break;case"rt":l.x-=t/2,l.y+=n/2;break;case"rm":l.x-=t/2;break;case"rb":l.x-=t/2,l.y-=n/2}return this.bsInfo.h=n,this.bsInfo.w=t,o=l.x-parseFloat(t)/2,i=l.y+parseFloat(n)/2,s=l.x+parseFloat(t)/2,a=l.y-parseFloat(n)/2,new Oe(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(e,t){var n,r,o,i,a=this.getLabelPxSize(t),s=w.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,n=s.x-a.w/2,r=s.y+a.h/2,i=t.fontStyle&&"italic"===t.fontStyle?s.x+a.w/2+parseInt(parseFloat(t.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new Oe(n,r,i,o)}},{key:"getLabelPxSize",value:function(e){var t,n,r,o,i=parseFloat(e.strokeWidth);t=e.label||this.text,n=e.fontSize?parseFloat(e.fontSize):parseFloat("12px");var a=t.split("\n"),s=a.length;o=s>1?n*s+s+i+.2*n:n+i+.2*n+1,r=0,this.labelWTmp&&r<this.labelWTmp&&(r=this.labelWTmp);for(var l=0;l<s;l++){var u=this.getTextCount(a[l]),c=this.labelWTmp=w.getTextBounds(e,a[l],this.element).textWidth+1*u.textC+i;r<c&&(r=c)}var f=new Object;return f.h=o,f.w=r,f}},{key:"getTextCount",value:function(e){for(var t={},n=0,r=0,o=0;o<e.length;o++)e.charCodeAt(o)>255?n++:r++;return t.cnC=n,t.enC=r,t.textC=e.length,t}}])&&pr(t.prototype,n),r&&pr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&n&&n.map&&n.renderer&&(this.id=w.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=t,this.shapes=[],this.layer=n,this.CLASS_NAME="SuperMap.Feature.Theme")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(e){var t=this.layer.map.getResolution(),n=this.layer.map.getExtent();return e instanceof Me||e instanceof mr?[e.x/t+-n.left/t,n.top/t-e.y/t]:e instanceof xe?[e.lon/t+-n.left/t,n.top/t-e.lat/t]:null}}])&&br(t.prototype,n),r&&br(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geometry=t,this.attributes=n}var t,n,r;return t=e,(n=[{key:"toFeature",value:function(){var e=fr.toSuperMapGeometry(this.geometry),t=[];return this.geometry instanceof O().LngLat?t=[this.geometry.lng,this.geometry.lat]:this.geometry instanceof O().Point?t=[this.geometry.x,this.geometry.y]:3===this.geometry.length&&(e=new mr(this.geometry[0],this.geometry[1],this.geometry[2])),t.length>1&&(e=new Me(t[0],t[1])),new Et(e,this.attributes)}}])&&_r(t.prototype,n),r&&_r(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Sr(e){"@babel/helpers - typeof";return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Pr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var t,n,r;return t=e,(n=[{key:"clone",value:function(e){var t=this.BUILTIN_OBJECT;if("object"==Sr(e)&&null!==e){var n=e;if(e instanceof Array){n=[];for(var r=0,o=e.length;r<o;r++)n[r]=this.clone(e[r])}else if(!t[Object.prototype.toString.call(e)])for(var i in n={},e)e.hasOwnProperty(i)&&(n[i]=this.clone(e[i]));return n}return e}},{key:"mergeItem",value:function(e,t,n,r){var o=this.BUILTIN_OBJECT;t.hasOwnProperty(n)&&("object"!=Sr(e[n])||o[Object.prototype.toString.call(e[n])]?!r&&n in e||(e[n]=t[n]):this.merge(e[n],t[n],r))}},{key:"merge",value:function(e,t,n){for(var r in t)this.mergeItem(e,t,r,n);return e}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(e,t){var n,r=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,l=this._offsetY;e+s>i&&(i=e+s+100,r.width=i,n=!0),t+l>a&&(a=t+l+100,r.height=a,n=!0),e<-s&&(i+=s=100*Math.ceil(-e/100),r.width=i,n=!0),t<-l&&(a+=l=100*Math.ceil(-t/100),r.height=a,n=!0),n&&o.translate(s,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}},{key:"inherits",value:function(e,t){var n=e.prototype;function r(){}for(var o in r.prototype=t.prototype,e.prototype=new r,n)e.prototype[o]=n[o];e.constructor=e}}])&&Or(t.prototype,n),r&&Or(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(e,t,n){var r=this._handlers;return t&&e?(r[e]||(r[e]=[]),r[e].push({h:t,one:!0,ctx:n||this}),this):this}},{key:"bind",value:function(e,t,n){var r=this._handlers;return t&&e?(r[e]||(r[e]=[]),r[e].push({h:t,one:!1,ctx:n||this}),this):this}},{key:"unbind",value:function(e,t){var n=this._handlers;if(!e)return this._handlers={},this;if(t){if(n[e]){for(var r=[],o=0,i=n[e].length;o<i;o++)n[e][o].h!=t&&r.push(n[e][o]);n[e]=r}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this}},{key:"dispatch",value:function(e){if(this._handlers[e]){var t=arguments,n=t.length;n>3&&(t=Array.prototype.slice.call(t,1));for(var r=this._handlers[e],o=r.length,i=0;i<o;){switch(n){case 1:r[i].h.call(r[i].ctx);break;case 2:r[i].h.call(r[i].ctx,t[1]);break;case 3:r[i].h.call(r[i].ctx,t[1],t[2]);break;default:r[i].h.apply(r[i].ctx,t)}r[i].one?(r.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(e){if(this._handlers[e]){var t=arguments,n=t.length;n>4&&(t=Array.prototype.slice.call(t,1,t.length-1));for(var r=t[t.length-1],o=this._handlers[e],i=o.length,a=0;a<i;){switch(n){case 1:o[a].h.call(r);break;case 2:o[a].h.call(r,t[1]);break;case 3:o[a].h.call(r,t[1],t[2]);break;default:o[a].h.apply(r,t)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&Tr(t.prototype,n),r&&Tr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Er=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var t,n,r;return t=e,(n=[{key:"create",value:function(e,t){var n=new(0,this.ArrayCtor)(2);return n[0]=e||0,n[1]=t||0,n}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e}},{key:"set",value:function(e,t,n){return e[0]=t,e[1]=n,e}},{key:"add",value:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}},{key:"scaleAndAdd",value:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}},{key:"sub",value:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}},{key:"len",value:function(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}},{key:"div",value:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"scale",value:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}},{key:"normalize",value:function(e,t){var n=this.len(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}},{key:"distance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"distanceSquare",value:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}},{key:"negate",value:function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{key:"lerp",value:function(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e}},{key:"applyTransform",value:function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e}},{key:"min",value:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}},{key:"max",value:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}},{key:"length",value:function(e){return this.len(e)}},{key:"lengthSquare",value:function(e){return this.lenSquare(e)}},{key:"dist",value:function(e,t){return this.distance(e,t)}},{key:"distSquare",value:function(e,t){return this.distanceSquare(e,t)}}])&&Cr(t.prototype,n),r&&Cr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Mr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vector=new Er,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var t,n,r;return t=e,(n=[{key:"isAroundZero",value:function(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function(e,t,n,r,o){var i=1-o;return i*i*(i*e+3*o*t)+o*o*(o*r+3*i*n)}},{key:"cubicDerivativeAt",value:function(e,t,n,r,o){var i=1-o;return 3*(((t-e)*i+2*(n-t)*o)*i+(r-n)*o*o)}},{key:"cubicRootAt",value:function(e,t,n,r,o,i){var a=r+3*(t-n)-e,s=3*(n-2*t+e),l=3*(t-e),u=e-o,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,p=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var d=-l/s;d>=0&&d<=1&&(i[p++]=d)}else{var y=f*f-4*c*h;if(this.isAroundZero(y)){var v=f/c,g=-s/a+v,m=-v/2;g>=0&&g<=1&&(i[p++]=g),m>=0&&m<=1&&(i[p++]=m)}else if(y>0){var b=Math.sqrt(y),w=c*s+1.5*a*(-f+b),_=c*s+1.5*a*(-f-b),x=(-s-((w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))+(_=_<0?-Math.pow(-_,this.ONE_THIRD):Math.pow(_,this.ONE_THIRD))))/(3*a);x>=0&&x<=1&&(i[p++]=x)}else{var S=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),O=Math.acos(S)/3,P=Math.sqrt(c),T=Math.cos(O),k=(-s-2*P*T)/(3*a),C=(-s+P*(T+this.THREE_SQRT*Math.sin(O)))/(3*a),E=(-s+P*(T-this.THREE_SQRT*Math.sin(O)))/(3*a);k>=0&&k<=1&&(i[p++]=k),C>=0&&C<=1&&(i[p++]=C),E>=0&&E<=1&&(i[p++]=E)}}return p}},{key:"cubicExtrema",value:function(e,t,n,r,o){var i=6*n-12*t+6*e,a=9*t+3*r-3*e-9*n,s=3*t-3*e,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var u=-s/i;u>=0&&u<=1&&(o[l++]=u)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),h=(-i+f)/(2*a),p=(-i-f)/(2*a);h>=0&&h<=1&&(o[l++]=h),p>=0&&p<=1&&(o[l++]=p)}}return l}},{key:"cubicSubdivide",value:function(e,t,n,r,o,i){var a=(t-e)*o+e,s=(n-t)*o+t,l=(r-n)*o+n,u=(s-a)*o+a,c=(l-s)*o+s,f=(c-u)*o+u;i[0]=e,i[1]=a,i[2]=u,i[3]=f,i[4]=f,i[5]=c,i[6]=l,i[7]=r}},{key:"cubicProjectPoint",value:function(e,t,n,r,o,i,a,s,l,u,c){var f,h=this.vector.create(),p=this.vector.create(),d=this.vector.create(),y=.005,v=1/0;h[0]=l,h[1]=u;for(var g=0;g<1;g+=.05){p[0]=this.cubicAt(e,n,o,a,g),p[1]=this.cubicAt(t,r,i,s,g);var m=this.vector.distSquare(h,p);m<v&&(f=g,v=m)}v=1/0;for(var b=0;b<32&&!(y<this.EPSILON);b++){var w=f-y,_=f+y;p[0]=this.cubicAt(e,n,o,a,w),p[1]=this.cubicAt(t,r,i,s,w);var x=this.vector.distSquare(p,h);if(w>=0&&x<v)f=w,v=x;else{d[0]=this.cubicAt(e,n,o,a,_),d[1]=this.cubicAt(t,r,i,s,_);var S=this.vector.distSquare(d,h);_<=1&&S<v?(f=_,v=S):y*=.5}}return c&&(c[0]=this.cubicAt(e,n,o,a,f),c[1]=this.cubicAt(t,r,i,s,f)),Math.sqrt(v)}},{key:"quadraticAt",value:function(e,t,n,r){var o=1-r;return o*(o*e+2*r*t)+r*r*n}},{key:"quadraticDerivativeAt",value:function(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}},{key:"quadraticRootAt",value:function(e,t,n,r,o){var i=e-2*t+n,a=2*(t-e),s=e-r,l=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var u=-s/a;u>=0&&u<=1&&(o[l++]=u)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[l++]=f)}else if(c>0){var h=Math.sqrt(c),p=(-a+h)/(2*i),d=(-a-h)/(2*i);p>=0&&p<=1&&(o[l++]=p),d>=0&&d<=1&&(o[l++]=d)}}return l}},{key:"quadraticExtremum",value:function(e,t,n){var r=e+n-2*t;return 0===r?.5:(e-t)/r}},{key:"quadraticProjectPoint",value:function(e,t,n,r,o,i,a,s,l){var u,c=this.vector.create(),f=this.vector.create(),h=this.vector.create(),p=.005,d=1/0;c[0]=a,c[1]=s;for(var y=0;y<1;y+=.05){f[0]=this.quadraticAt(e,n,o,y),f[1]=this.quadraticAt(t,r,i,y);var v=this.vector.distSquare(c,f);v<d&&(u=y,d=v)}d=1/0;for(var g=0;g<32&&!(p<this.EPSILON);g++){var m=u-p,b=u+p;f[0]=this.quadraticAt(e,n,o,m),f[1]=this.quadraticAt(t,r,i,m);var w=this.vector.distSquare(f,c);if(m>=0&&w<d)u=m,d=w;else{h[0]=this.quadraticAt(e,n,o,b),h[1]=this.quadraticAt(t,r,i,b);var _=this.vector.distSquare(h,c);b<=1&&_<d?(u=b,d=_):p*=.5}}return l&&(l[0]=this.quadraticAt(e,n,o,u),l[1]=this.quadraticAt(t,r,i,u)),Math.sqrt(d)}}])&&Ar(t.prototype,n),r&&Ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ir=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new Pr,this.curve=new Mr,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var t,n,r;return t=e,(n=[{key:"normalizeRadian",value:function(e){return(e%=this.PI2)<0&&(e+=this.PI2),e}},{key:"isInside",value:function(e,t,n,r){if(!t||!e)return!1;var o=e.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(e,t,n,r);if(void 0!==i)return i;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,n,r);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,n,r,a);case"rose":return this.isInsideCircle(t,n,r,t.maxr);default:return!1}}},{key:"_mathMethod",value:function(e,t,n,r){switch(e.type){case"bezier-curve":return void 0===t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,n,r):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,n,r);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,n,r);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,n,r);case"smicbroken-line":var o=n,i=r;return e.refOriginalPosition&&(o=n-e.refOriginalPosition[0],i=r-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,o,i);case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,n,r);case"smicring":var a=t.x,s=t.y;return e.refOriginalPosition&&(a=t.x+e.refOriginalPosition[0],s=t.y+e.refOriginalPosition[1]),this.isInsideRing(a,s,t.r0,t.r,n,r);case"circle":return this.isInsideCircle(t.x,t.y,t.r,n,r);case"smicpoint":var l=n,u=r;return e.refOriginalPosition&&(l=n-e.refOriginalPosition[0],u=r-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,l,u);case"sector":var c=t.startAngle*Math.PI/180,f=t.endAngle*Math.PI/180;return t.clockWise||(c=-c,f=-f),this.isInsideSector(t.x,t.y,t.r0,t.r,c,f,!t.clockWise,n,r);case"smicsector":var h=t.startAngle*Math.PI/180,p=t.endAngle*Math.PI/180;t.clockWise||(h=-h,p=-p);var d=t.x,y=t.y;return e.refOriginalPosition&&(d=t.x+e.refOriginalPosition[0],y=t.y+e.refOriginalPosition[1]),this.isInsideSector(d,y,t.r0,t.r,h,p,!t.clockWise,n,r);case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,n,r);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,n,r);case"smicpolygon":var v=n,g=r;if(e.refOriginalPosition&&(v=n-e.refOriginalPosition[0],g=r-e.refOriginalPosition[1]),e.holePolygonPointLists&&e.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(t.pointList,v,g),b=e.holePolygonPointLists,w=!1,_=0,x=b.length;_<x;_++){var S=b[_];!0===this.isInsidePolygon(S,v,g)&&(w=!0)}return!0===m&&!1===w}return this.isInsidePolygon(t.pointList,v,g);case"text":var O=t.__rect||e.getRect(t);return this.isInsideRect(O.x,O.y,O.width,O.height,n,r);case"smictext":var P=e.getTextBackground(t);return this.isInsidePolygon(P,n,r);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,n,r);case"smicimage":var T=t.x,k=t.y;return e.refOriginalPosition&&(T=t.x+e.refOriginalPosition[0],k=t.y+e.refOriginalPosition[1]),this.isInsideRect(T,k,t.width,t.height,n,r)}}},{key:"_buildPathMethod",value:function(e,t,n,r,o){return t.beginPath(),e.buildPath(t,n),t.closePath(),t.isPointInPath(r,o)}},{key:"isOutside",value:function(e,t,n,r){return!this.isInside(e,t,n,r)}},{key:"isInsideLine",value:function(e,t,n,r,o,i,a){if(0===o)return!1;var s=Math.max(o,5),l=0;if(a>t+s&&a>r+s||a<t-s&&a<r-s||i>e+s&&i>n+s||i<e-s&&i<n-s)return!1;if(e===n)return Math.abs(i-e)<=s/2;var u=(l=(t-r)/(e-n))*i-a+(e*r-n*t)/(e-n);return u*u/(l*l+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(e,t,n,r,o,i,a,s,l,u,c){if(0===l)return!1;var f=Math.max(l,5);return!(c>t+f&&c>r+f&&c>i+f&&c>s+f||c<t-f&&c<r-f&&c<i-f&&c<s-f||u>e+f&&u>n+f&&u>o+f&&u>a+f||u<e-f&&u<n-f&&u<o-f&&u<a-f)&&this.curve.cubicProjectPoint(e,t,n,r,o,i,a,s,u,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(e,t,n,r,o,i,a,s,l){if(0===a)return!1;var u=Math.max(a,5);return!(l>t+u&&l>r+u&&l>i+u||l<t-u&&l<r-u&&l<i-u||s>e+u&&s>n+u&&s>o+u||s<e-u&&s<n-u&&s<o-u)&&this.curve.quadraticProjectPoint(e,t,n,r,o,i,s,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(e,t,n,r,o,i,a,s,l){var u=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=e,l-=t;var f=Math.sqrt(s*s+l*l);if(f-c>n||f+c<n)return!1;if(Math.abs(r-o)>=u)return!0;if(i){var h=r;r=this.normalizeRadian(o),o=this.normalizeRadian(h)}else r=this.normalizeRadian(r),o=this.normalizeRadian(o);r>o&&(o+=u);var p=Math.atan2(l,s);return p<0&&(p+=u),p>=r&&p<=o||p+u>=r&&p+u<=o}},{key:"isInsideBrokenLine",value:function(e,t,n,r){for(var o=Math.max(t,10),i=0,a=e.length-1;i<a;i++){var s=e[i][0],l=e[i][1],u=e[i+1][0],c=e[i+1][1];if(this.isInsideLine(s,l,u,c,o,n,r))return!0}return!1}},{key:"isInsideRing",value:function(e,t,n,r,o,i){var a=(o-e)*(o-e)+(i-t)*(i-t);return a<r*r&&a>n*n}},{key:"isInsideRect",value:function(e,t,n,r,o,i){return o>=e&&o<=e+n&&i>=t&&i<=t+r}},{key:"isInsideCircle",value:function(e,t,n,r,o){return(r-e)*(r-e)+(o-t)*(o-t)<n*n}},{key:"isInsideSector",value:function(e,t,n,r,o,i,a,s,l){return this.isInsideArcStroke(e,t,(n+r)/2,o,i,a,r-n,s,l)}},{key:"isInsidePolygon",value:function(e,t,n){for(var r=e.length,o=0,i=0,a=r-1;i<r;i++){var s=e[a][0],l=e[a][1],u=e[i][0],c=e[i][1];o+=this.windingLine(s,l,u,c,t,n),a=i}return 0!==o}},{key:"windingLine",value:function(e,t,n,r,o,i){return i>t&&i>r||i<t&&i<r?0:r==t?0:(i-t)/(r-t)*(n-e)+e>o?r<t?1:-1:0}},{key:"swapExtrema",value:function(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e}},{key:"windingCubic",value:function(e,t,n,r,o,i,a,s,l,u){var c=this.curve,f=this.roots,h=this.extrema;if(u>t&&u>r&&u>i&&u>s||u<t&&u<r&&u<i&&u<s)return 0;var p=c.cubicRootAt(t,r,i,s,u,f);if(0===p)return 0;for(var d,y,v=0,g=-1,m=0;m<p;m++){var b=f[m];c.cubicAt(e,n,o,a,b)<l||(g<0&&(g=c.cubicExtrema(t,r,i,s,h),h[1]<h[0]&&g>1&&this.swapExtrema(),d=c.cubicAt(t,r,i,s,h[0]),g>1&&(y=c.cubicAt(t,r,i,s,h[1]))),2==g?b<h[0]?v+=d<t?1:-1:b<h[1]?v+=y<d?1:-1:v+=s<y?1:-1:b<h[0]?v+=d<t?1:-1:v+=s<d?1:-1)}return v}},{key:"windingQuadratic",value:function(e,t,n,r,o,i,a,s){var l=this.curve,u=this.roots;if(s>t&&s>r&&s>i||s<t&&s<r&&s<i)return 0;var c=l.quadraticRootAt(t,r,i,s,u);if(0===c)return 0;var f=l.quadraticExtremum(t,r,i);if(f>=0&&f<=1){for(var h=0,p=l.quadraticAt(t,r,i,f),d=0;d<c;d++){l.quadraticAt(e,n,o,u[d])>a||(u[d]<f?h+=p<t?1:-1:h+=i<p?1:-1)}return h}return l.quadraticAt(e,n,o,u[0])>a?0:i<t?1:-1}},{key:"windingArc",value:function(e,t,n,r,o,i,a,s){var l=this.roots,u=this.PI2;if((s-=t)>n||s<-n)return 0;var c=Math.sqrt(n*n-s*s);if(l[0]=-c,l[1]=c,Math.abs(r-o)>=u){r=0,o=u;var f=i?1:-1;return a>=l[0]+e&&a<=l[1]+e?f:0}if(i){var h=r;r=this.normalizeRadian(o),o=this.normalizeRadian(h)}else r=this.normalizeRadian(r),o=this.normalizeRadian(o);r>o&&(o+=u);for(var p=0,d=0;d<2;d++){var y=l[d];if(y+e>a){var v=Math.atan2(s,y),g=i?1:-1;v<0&&(v=u+v),(v>=r&&v<=o||v+u>=r&&v+u<=o)&&(v>Math.PI/2&&v<1.5*Math.PI&&(g=-g),p+=g)}}return p}},{key:"isInsidePath",value:function(e,t,n,r,o){for(var i=0,a=0,s=0,l=0,u=0,c=!0,f=!0,h="stroke"===(n=n||"fill")||"both"===n,p="fill"===n||"both"===n,d=0;d<e.length;d++){var y=e[d],v=y.points;if(c||"M"===y.command){if(d>0&&(p&&(i+=this.windingLine(a,s,l,u,r,o)),0!==i))return!0;l=v[v.length-2],u=v[v.length-1],c=!1,f&&"A"!==y.command&&(f=!1,a=l,s=u)}switch(y.command){case"M":a=v[0],s=v[1];break;case"L":if(h&&this.isInsideLine(a,s,v[0],v[1],t,r,o))return!0;p&&(i+=this.windingLine(a,s,v[0],v[1],r,o)),a=v[0],s=v[1];break;case"C":if(h&&this.isInsideCubicStroke(a,s,v[0],v[1],v[2],v[3],v[4],v[5],t,r,o))return!0;p&&(i+=this.windingCubic(a,s,v[0],v[1],v[2],v[3],v[4],v[5],r,o)),a=v[4],s=v[5];break;case"Q":if(h&&this.isInsideQuadraticStroke(a,s,v[0],v[1],v[2],v[3],t,r,o))return!0;p&&(i+=this.windingQuadratic(a,s,v[0],v[1],v[2],v[3],r,o)),a=v[2],s=v[3];break;case"A":var g=v[0],m=v[1],b=v[2],w=v[3],_=v[4],x=v[5],S=Math.cos(_)*b+g,O=Math.sin(_)*w+m;f?(f=!1,l=S,u=O):i+=this.windingLine(a,s,S,O);var P=(r-g)*w/b+g;if(h&&this.isInsideArcStroke(g,m,w,_,_+x,1-v[7],t,P,o))return!0;p&&(i+=this.windingArc(g,m,w,_,_+x,1-v[7],P,o)),a=Math.cos(_+x)*b+g,s=Math.sin(_+x)*w+m;break;case"z":if(h&&this.isInsideLine(a,s,l,u,t,r,o))return!0;c=!0}}return p&&(i+=this.windingLine(a,s,l,u,r,o)),0!==i}},{key:"getTextWidth",value:function(e,t){var n=e+":"+t;if(this._textWidthCache[n])return this._textWidthCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var r=0,o=0,i=(e=(e+"").split("\n")).length;o<i;o++)r=Math.max(this._ctx.measureText(e[o]).width,r);return this._ctx.restore(),this._textWidthCache[n]=r,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),r}},{key:"getTextHeight",value:function(e,t){var n=e+":"+t;if(this._textHeightCache[n])return this._textHeightCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");var r=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[n]=r,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),r}}])&&Rr(t.prototype,n),r&&Rr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Lr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new Pr,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var t,n,r;return t=e,(n=[{key:"customPalette",value:function(e){this.palette=e}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(e,t){return e|=0,(t=t||this.palette)[e%t.length]}},{key:"customHighlight",value:function(e){this.highlightColor=e}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(e,t,n,r,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var l=this._ctx.createRadialGradient(e,t,n,r,o,i),u=0,c=a.length;u<c;u++)l.addColorStop(a[u][0],a[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(e,t,n,r,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(e,t,n,r),s=0,l=o.length;s<l;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(e,t,n){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var r=[],o=((t=this.getData(t))[0]-e[0])/n,i=(t[1]-e[1])/n,a=(t[2]-e[2])/n,s=(t[3]-e[3])/n,l=0,u=e[0],c=e[1],f=e[2],h=e[3];l<n;l++)r[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"rgba"),u+=o,c+=i,f+=a,h+=s;return u=t[0],c=t[1],f=t[2],h=t[3],r[l]=this.toColor([u,c,f,h],"rgba"),r}},{key:"getGradientColors",value:function(e,t){var n=[],r=e.length;if(void 0===t&&(t=20),1===r)n=this.getStepColors(e[0],e[0],t);else if(r>1)for(var o=0,i=r-1;o<i;o++){var a=this.getStepColors(e[o],e[o+1],t);o<i-1&&a.pop(),n=n.concat(a)}return n}},{key:"toColor",value:function(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return e>1?Math.ceil(e):e}),t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var n=this.map(e.slice(1,3),function(e){return e+"%"});e[1]=n[0],e[2]=n[1]}return t.indexOf("a")>-1?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],n=0;return e.replace(/[\d.]+/g,function(e){n<3?e|=0:e=+e,t[n++]=e}),t}},{key:"convert",value:function(e,t){if(!this.isCalculableColor(e))return e;var n=this.getData(e),r=n[3];return void 0===r&&(r=1),e.indexOf("hsb")>-1?n=this._HSV_2_RGB(n):e.indexOf("hsl")>-1&&(n=this._HSL_2_RGB(n)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?n=this._RGB_2_HSB(n):t.indexOf("hsl")>-1&&(n=this._RGB_2_HSL(n)),n[3]=r,this.toColor(n,t)}},{key:"toRGBA",value:function(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function(e){return this.convert(e,"rgb")}},{key:"toHex",value:function(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function(e){return this.convert(e,"hsl")}},{key:"toName",value:function(e){for(var t in this._nameColors)if(this.toHex(this._nameColors[t])===this.toHex(e))return t;return null}},{key:"trim",value:function(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,n=(240&e)<<4,r=15&e;e="#"+((1<<24)+(t<<4)+t+(n<<4)+n+(r<<4)+r).toString(16).slice(1)}return e}},{key:"lift",value:function(e,t){if(!this.isCalculableColor(e))return e;var n=t>0?1:-1;void 0===t&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=this.toRGB(e);for(var r=this.getData(e),o=0;o<3;o++)r[o]=1===n?r[o]*(1-t)|0:(255-r[o])*t+r[o]|0;return"rgb("+r.join(",")+")"}},{key:"reverse",value:function(e){if(!this.isCalculableColor(e))return e;var t=this.getData(this.toRGBA(e));return t=this.map(t,function(e){return 255-e}),this.toColor(t,"rgb")}},{key:"mix",value:function(e,t,n){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;void 0===n&&(n=.5);for(var r=2*(n=1-this.adjust(n,[0,1]))-1,o=this.getData(this.toRGBA(e)),i=this.getData(this.toRGBA(t)),a=o[3]-i[3],s=((r*a==-1?r:(r+a)/(1+r*a))+1)/2,l=1-s,u=[],c=0;c<3;c++)u[c]=o[c]*s+i[c]*l;var f=o[3]*n+i[3]*(1-n);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(u,"rgb"):(u[3]=f,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(t){var n,r,o=(t=this.normalize(t)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(n=o[2].replace("#","").split(""))[0]+n[1],n[2]+n[3],n[4]+n[5]],a=this.map(i,function(t){return e.prototype.adjust.call(this,parseInt(t,16),[0,255])});else if(o[4]){var s=o[4].split(",");r=s[3],i=s.slice(0,3),a=this.map(i,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e.prototype.adjust.call(this,t,[0,255])}),void 0!==r&&a.push(this.adjust(parseFloat(r),[0,1]))}else if(o[5]||o[6]){var l=(o[5]||o[6]).split(","),u=parseInt(l[0],0)/360,c=l[1],f=l[2];r=l[3],(a=this.map([c,f],function(t){return e.prototype.adjust.call(this,parseFloat(t)/100,[0,1])})).unshift(u),void 0!==r&&a.push(this.adjust(parseFloat(r),[0,1]))}return a}},{key:"alpha",value:function(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);var n=this.getData(this.toRGBA(e));return n[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(n,"rgba")}},{key:"map",value:function(e,t){if("function"!=typeof t)throw new TypeError;for(var n=e?e.length:0,r=0;r<n;r++)e[r]=t(e[r]);return e}},{key:"adjust",value:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}},{key:"isCalculableColor",value:function(e){return e instanceof Array||"string"==typeof e}},{key:"_HSV_2_RGB",value:function(e){var t,n,r,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,n=255*a,r=255*a;else{var s=6*o;6===s&&(s=0);var l=0|s,u=a*(1-i),c=a*(1-i*(s-l)),f=a*(1-i*(1-(s-l))),h=0,p=0,d=0;0===l?(h=a,p=f,d=u):1===l?(h=c,p=a,d=u):2===l?(h=u,p=a,d=f):3===l?(h=u,p=c,d=a):4===l?(h=f,p=u,d=a):(h=a,p=u,d=c),t=255*h,n=255*p,r=255*d}return[t,n,r]}},{key:"_HSL_2_RGB",value:function(e){var t,n,r,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,n=255*a,r=255*a;else{var s,l=2*a-(s=a<.5?a*(1+i):a+i-i*a);t=255*this._HUE_2_RGB(l,s,o+1/3),n=255*this._HUE_2_RGB(l,s,o),r=255*this._HUE_2_RGB(l,s,o-1/3)}return[t,n,r]}},{key:"_HUE_2_RGB",value:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}},{key:"_RGB_2_HSB",value:function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),l=s-a,u=s;if(0===l)t=0,n=0;else{n=l/s;var c=((s-r)/6+l/2)/l,f=((s-o)/6+l/2)/l,h=((s-i)/6+l/2)/l;r===s?t=h-f:o===s?t=1/3+c-h:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,n*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),l=s-a,u=(s+a)/2;if(0===l)t=0,n=0;else{n=u<.5?l/(s+a):l/(2-s-a);var c=((s-r)/6+l/2)/l,f=((s-o)/6+l/2)/l,h=((s-i)/6+l/2)/l;r===s?t=h-f:o===s?t=1/3+c-h:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,n*=100,u*=100]}}])&&jr(t.prototype,n),r&&jr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Nr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var t,n,r;return t=e,(n=[{key:"computeBoundingBox",value:function(e,t,n){if(0!==e.length){for(var r=e[0][0],o=e[0][0],i=e[0][1],a=e[0][1],s=1;s<e.length;s++){var l=e[s];l[0]<r&&(r=l[0]),l[0]>o&&(o=l[0]),l[1]<i&&(i=l[1]),l[1]>a&&(a=l[1])}t[0]=r,t[1]=i,n[0]=o,n[1]=a}}},{key:"cubeBezier",value:function(e,t,n,r,o,i){var a=new Mr,s=[];a.cubicExtrema(e[0],t[0],n[0],r[0],s);for(var l=0;l<s.length;l++)s[l]=a.cubicAt(e[0],t[0],n[0],r[0],s[l]);var u=[];a.cubicExtrema(e[1],t[1],n[1],r[1],u);for(var c=0;c<u.length;c++)u[c]=a.cubicAt(e[1],t[1],n[1],r[1],u[c]);s.push(e[0],r[0]),u.push(e[1],r[1]);var f=Math.min.apply(null,s),h=Math.max.apply(null,s),p=Math.min.apply(null,u),d=Math.max.apply(null,u);o[0]=f,o[1]=p,i[0]=h,i[1]=d}},{key:"quadraticBezier",value:function(e,t,n,r,o){var i=new Mr,a=i.quadraticExtremum(e[0],t[0],n[0]),s=i.quadraticExtremum(e[1],t[1],n[1]),l=1-(a=Math.max(Math.min(a,1),0)),u=1-(s=Math.max(Math.min(s,1),0)),c=l*l*e[0]+2*l*a*t[0]+a*a*n[0],f=l*l*e[1]+2*l*a*t[1]+a*a*n[1],h=u*u*e[0]+2*u*s*t[0]+s*s*n[0],p=u*u*e[1]+2*u*s*t[1]+s*s*n[1];r[0]=Math.min(e[0],n[0],c,h),r[1]=Math.min(e[1],n[1],f,p),o[0]=Math.max(e[0],n[0],c,h),o[1]=Math.max(e[1],n[1],f,p)}},{key:"arc",value:function(e,t,n,r,o,i,a,s){var l=new Er,u=l.create(),c=l.create(),f=l.create();if(u[0]=Math.cos(r)*n+e,u[1]=Math.sin(r)*n+t,c[0]=Math.cos(o)*n+e,c[1]=Math.sin(o)*n+t,l.min(a,u,c),l.max(s,u,c),(r%=2*Math.PI)<0&&(r+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),r>o&&!i?o+=2*Math.PI:r<o&&i&&(r+=2*Math.PI),i){var h=o;o=r,r=h}for(var p=0;p<o;p+=Math.PI/2)p>r&&(f[0]=Math.cos(p)*n+e,f[1]=Math.sin(p)*n+t,l.min(a,f,a),l.max(s,f,s))}}])&&Dr(t.prototype,n),r&&Dr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Fr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var t,n,r,o,i,a,s,l,u,c,f,h,p,d,y,v,g,m,b,w,_,x=this;return t=navigator.userAgent,n=x.os={},r=x.browser={},o=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),l=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=u&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),h=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),d=t.match(/(BB10).*Version\/([\d.]+)/),y=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=t.match(/PlayBook/),g=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),m=t.match(/Firefox\/([\d.]+)/),b=t.match(/MSIE ([\d.]+)/),w=o&&t.match(/Mobile\//)&&!g,_=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g,(r.webkit=!!o)&&(r.version=o[1]),i&&(n.android=!0,n.version=i[2]),l&&!s&&(n.ios=n.iphone=!0,n.version=l[2].replace(/_/g,".")),a&&(n.ios=n.ipad=!0,n.version=a[2].replace(/_/g,".")),s&&(n.ios=n.ipod=!0,n.version=s[3]?s[3].replace(/_/g,"."):null),u&&(n.webos=!0,n.version=u[2]),c&&(n.touchpad=!0),p&&(n.blackberry=!0,n.version=p[2]),d&&(n.bb10=!0,n.version=d[2]),y&&(n.rimtabletos=!0,n.version=y[2]),v&&(r.playbook=!0),f&&(n.kindle=!0,n.version=f[1]),h&&(r.silk=!0,r.version=h[1]),!h&&n.android&&t.match(/Kindle Fire/)&&(r.silk=!0),g&&(r.chrome=!0,r.version=g[1]),m&&(r.firefox=!0,r.version=m[1]),b&&(r.ie=!0,r.version=b[1]),w&&(t.match(/Safari/)||n.ios)&&(r.safari=!0),_&&(r.webview=!0),b&&(r.ie=!0,r.version=b[1]),n.tablet=!!(a||v||i&&!t.match(/Mobile/)||m&&t.match(/Tablet/)||b&&!t.match(/Phone/)&&t.match(/Touch/)),n.phone=!(n.tablet||n.ipod||!(i||l||u||p||d||g&&t.match(/Android/)||g&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)||b&&t.match(/Touch/))),{browser:r,os:n,canvasSupported:!!document.createElement("canvas").getContext}}var t,n,r;return t=e,(n=[{key:"destory",value:function(){return!0}}])&&Br(t.prototype,n),r&&Br(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var t,n,r;return t=e,(n=[{key:"getX",value:function(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX}},{key:"getY",value:function(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY}},{key:"getDelta",value:function(e){return void 0!==e.zrenderDelta&&e.zrenderDelta||void 0!==e.wheelDelta&&e.wheelDelta||void 0!==e.detail&&-e.detail}}])&&Gr(t.prototype,n),r&&Gr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vr(e){"@babel/helpers - typeof";return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t,n){if("object"===Vr(e)){var r=e;e=r.url,t=r.onsuccess,n=r.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?t&&t(o.responseText):n&&n(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&Hr(t.prototype,n),r&&Hr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Jr=function(e,t,n){return t&&Ur(e.prototype,t),n&&Ur(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)});function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Jr.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},Jr.catchBrushException=!1,Jr.debugMode=0;
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yr=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!=+Jr.debugMode)if(1==+Jr.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(+Jr.debugMode>1)for(var t in arguments)console.log(arguments[t])}}var t,n,r;return t=e,(n=[{key:"destory",value:function(){return!0}}])&&qr(t.prototype,n),r&&qr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Zr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var t,n,r;return t=e,(n=[{key:"sin",value:function(e,t){return window.Math.sin(t?e*this._radians:e)}},{key:"cos",value:function(e,t){return window.Math.cos(t?e*this._radians:e)}},{key:"degreeToRadian",value:function(e){return e*this._radians}},{key:"radianToDegree",value:function(e){return e/this._radians}}])&&Xr(t.prototype,n),r&&Xr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var t,n,r;return t=e,(n=[{key:"create",value:function(){var e=new(0,this.ArrayCtor)(6);return this.identity(e),e}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}},{key:"mul",value:function(e,t,n){return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=t[1]*n[0]+t[3]*n[1],e[2]=t[0]*n[2]+t[2]*n[3],e[3]=t[1]*n[2]+t[3]*n[3],e[4]=t[0]*n[4]+t[2]*n[5]+t[4],e[5]=t[1]*n[4]+t[3]*n[5]+t[5],e}},{key:"translate",value:function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}},{key:"rotate",value:function(e,t,n){var r=t[0],o=t[2],i=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*u,e[1]=-r*u+a*c,e[2]=o*c+s*u,e[3]=-o*u+c*s,e[4]=c*i+u*l,e[5]=c*l-u*i,e}},{key:"scale",value:function(e,t,n){var r=n[0],o=n[1];return e[0]=t[0]*r,e[1]=t[1]*o,e[2]=t[2]*r,e[3]=t[3]*o,e[4]=t[4]*r,e[5]=t[5]*o,e}},{key:"invert",value:function(e,t){var n=t[0],r=t[2],o=t[4],i=t[1],a=t[3],s=t[5],l=n*a-i*r;return l?(l=1/l,e[0]=a*l,e[1]=-i*l,e[2]=-r*l,e[3]=n*l,e[4]=(r*s-a*o)*l,e[5]=(i*o-n*s)*l,e):null}},{key:"mulVector",value:function(e,t,n){var r=t[0],o=t[2],i=t[4],a=t[1],s=t[3],l=t[5];return e[0]=n[0]*r+n[1]*o+i,e[1]=n[0]*a+n[1]*s+l,e}}])&&Qr(t.prototype,n),r&&Qr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var eo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"SUtil_smoothBezier",value:function(t,n,r,o,i){i&&2===i.length||(i=[0,0]);var a,s,l=i,u=[],c=[],f=[],h=[],p=!!o;if(p){a=[1/0,1/0],s=[-1/0,-1/0];for(var d=t.length,y=0;y<d;y++)e.Util_vector.min(a,a,[t[y][0]+l[0],t[y][1]+l[1]]),e.Util_vector.max(s,s,[t[y][0]+l[0],t[y][1]+l[1]]);e.Util_vector.min(a,a,o[0]),e.Util_vector.max(s,s,o[1])}for(var v=t.length,g=0;g<v;g++){var m=[t[g][0]+l[0],t[g][1]+l[1]],b=void 0,w=void 0;if(r)b=[t[g?g-1:v-1][0]+l[0],t[g?g-1:v-1][1]+l[1]],w=[t[(g+1)%v][0]+l[0],t[(g+1)%v][1]+l[1]];else{if(0===g||g===v-1){u.push([t[g][0]+l[0],t[g][1]+l[1]]);continue}b=[t[g-1][0]+l[0],t[g-1][1]+l[1]],w=[t[g+1][0]+l[0],t[g+1][1]+l[1]]}e.Util_vector.sub(c,w,b),e.Util_vector.scale(c,c,n);var _=e.Util_vector.distance(m,b),x=e.Util_vector.distance(m,w),S=_+x;0!==S&&(_/=S,x/=S),e.Util_vector.scale(f,c,-_),e.Util_vector.scale(h,c,x);var O=e.Util_vector.add([],m,f),P=e.Util_vector.add([],m,h);p&&(e.Util_vector.max(O,O,a),e.Util_vector.min(O,O,s),e.Util_vector.max(P,P,a),e.Util_vector.min(P,P,s)),u.push(O),u.push(P)}return r&&u.push(u.shift()),u}},{key:"SUtil_smoothSpline",value:function(t,n,r,o){o&&2===o.length||(o=[0,0]);for(var i=o,a=t.length,s=[],l=0,u=1;u<a;u++)l+=e.Util_vector.distance([t[u-1][0]+i[0],t[u-1][1]+i[1]],[t[u][0]+i[0],t[u][1]+i[1]]);var c=l/5;c=c<a?a:c;for(var f=0;f<c;f++){var h=f/(c-1)*(n?a:a-1),p=Math.floor(h),d=h-p,y=void 0,v=[t[p%a][0]+i[0],t[p%a][1]+i[1]],g=void 0,m=void 0;n?(y=[t[(p-1+a)%a][0]+i[0],t[(p-1+a)%a][1]+i[1]],g=[t[(p+1)%a][0]+i[0],t[(p+1)%a][1]+i[1]],m=[t[(p+2)%a][0]+i[0],t[(p+2)%a][1]+i[1]]):(y=[t[0===p?p:p-1][0]+i[0],t[0===p?p:p-1][1]+i[1]],g=[t[p>a-2?a-1:p+1][0]+i[0],t[p>a-2?a-1:p+1][1]+i[1]],m=[t[p>a-3?a-1:p+2][0]+i[0],t[p>a-3?a-1:p+2][1]+i[1]]);var b=d*d,w=d*b;s.push([_(y[0],v[0],g[0],m[0],d,b,w),_(y[1],v[1],g[1],m[1],d,b,w)])}return s;function _(e,t,n,r,o,i,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*i+s*o+t}}},{key:"SUtil_dashedLineTo",value:function(e,t,n,r,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,e.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?e.setLineDash(a):e.setLineDash(s),e.moveTo(t,n),void e.lineTo(r,o);var l=r-t,u=o-n,c=Math.floor(Math.sqrt(l*l+u*u)/i);l/=c,u/=c;for(var f=!0,h=0;h<c;++h)f?e.moveTo(t,n):e.lineTo(t,n),f=!f,t+=l,n+=u;e.lineTo(r,o)}}],(n=null)&&$r(t.prototype,n),r&&$r(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function to(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}eo.Util_area=new Ir,eo.Util_color=new Lr,eo.Util_computeBoundingBox=new Nr,eo.Util_curve=new Mr,eo.Util_env=new Fr,eo.Util_event=new zr,eo.Util_http=new Wr,eo.Util_log=new Yr,eo.Util_math=new Zr,eo.Util_matrix=new Kr,eo.Util=new Pr,eo.Util_vector=new Er;
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var no=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(t=eo.Util_vector.create(),function(e){this.transform||(this.transform=eo.Util_matrix.create());var n=this.transform;function r(e){return e>-5e-5&&e<5e-5}eo.Util_vector.sub(t,e,this.position),r(t[0])&&r(t[1])||(eo.Util_vector.normalize(t,t),n[2]=t[0]*this.scale[1],n[3]=t[1]*this.scale[1],n[0]=t[1]*this.scale[0],n[1]=-t[0]*this.scale[0],n[4]=this.position[0],n[5]=this.position[1],this.decomposeTransform())})}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function e(e){return e>5e-5||e<-5e-5}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var e=[0,0],t=this.transform||eo.Util_matrix.create();if(eo.Util_matrix.identity(t),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0;var n=o(e[0])||o(e[1]);n&&eo.Util_matrix.translate(t,t,e),eo.Util_matrix.scale(t,t,this.scale),n&&(e[0]=-e[0],e[1]=-e[1],eo.Util_matrix.translate(t,t,e))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0;var r=o(e[0])||o(e[1]);r&&eo.Util_matrix.translate(t,t,e),eo.Util_matrix.rotate(t,t,this.rotation[0]),r&&(e[0]=-e[0],e[1]=-e[1],eo.Util_matrix.translate(t,t,e))}}else 0!=+this.rotation&&eo.Util_matrix.rotate(t,t,this.rotation);(o(this.position[0])||o(this.position[1]))&&eo.Util_matrix.translate(t,t,this.position)}this.transform=t,this.parent&&this.parent.needTransform&&(this.needLocalTransform?eo.Util_matrix.mul(this.transform,this.parent.transform,this.transform):eo.Util_matrix.copy(this.transform,this.parent.transform))}function o(e){return e>5e-5||e<-5e-5}}},{key:"setTransform",value:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var e=this.transform,t=e[0]*e[0]+e[1]*e[1],n=this.position,r=this.scale,o=this.rotation;a(t-1)&&(t=Math.sqrt(t));var i=e[2]*e[2]+e[3]*e[3];a(i-1)&&(i=Math.sqrt(i)),n[0]=e[4],n[1]=e[5],r[0]=t,r[1]=i,r[2]=r[3]=0,o[0]=Math.atan2(-e[1]/i,e[0]/t),o[1]=o[2]=0}function a(e){return e>5e-5||e<-5e-5}}}])&&to(t.prototype,n),r&&to(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ro(e){"@babel/helpers - typeof";return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function io(){return(io="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ao(e,t){return(ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function so(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=uo(e);if(t){var o=uo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ro(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lo(e)}(this,n)}}function lo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uo(e){return(uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ao(e,t)}(a,t(kr,no));var n,r,o,i=so(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),e=e||{},t.id=null,t.type="group",t.clipShape=null,t._children=[],t._storage=null,t.__dirty=!0,t.ignore=!1,w.extend(lo(t),e),t.id=t.id||w.createUniqueID("smShapeGroup_"),t.CLASS_NAME="SuperMap.LevelRenderer.Group",t}return n=a,(r=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,io(uo(a.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(e){return this._children[e]}},{key:"addChild",value:function(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof a&&e.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(e){var t=w.indexOf(this._children,e);this._children.splice(t,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof a&&e.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(e,t){for(var n=!!t,r=0;r<this._children.length;r++){var o=this._children[r];n?e.call(t,o):e(o)}}},{key:"traverse",value:function(e,t){for(var n=!!t,r=0;r<this._children.length;r++){var o=this._children[r];n?e.call(t,o):e(o),"group"===o.type&&o.traverse(e,t)}}},{key:"addChildrenToStorage",value:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToMap(n),"group"===n.type&&n.addChildrenToStorage(e)}}},{key:"delChildrenFromStorage",value:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromMap(n.id),"group"===n.type&&n.delChildrenFromStorage(e)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&oo(n.prototype,r),o&&oo(n,o),Object.defineProperty(n,"prototype",{writable:!1}),a}();function fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ho=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var t,n,r;return t=e,r=[{key:"shapeCompareFunc",value:function(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}}],(n=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(e,t){if(!t){t={hover:!1,normal:"down",update:!1}}if(t.hover)for(var n=0,r=this._hoverElements.length;n<r;n++){var o=this._hoverElements[n];if(o.updateTransform(),e(o))return this}switch(t.update&&this.updateShapeList(),t.normal){case"down":for(var i=this._shapeList.length;i--;)if(e(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(e(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(t){for(var n=[],r=this._hoverElements.length,o=0;o<r;o++){n.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,l=(i=i instanceof Array?i:[i]).length;s<l;s++)(a=i[s].id?i[s]:this.get(i[s]))&&n.push(a)}if(n.sort(e.shapeCompareFunc),t)for(var u=0,c=n.length;u<c;u++)n[u].updateTransform();return n}},{key:"getShapeList",value:function(e){return e&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var t=this._roots.length,n=0;n<t;n++){var r=this._roots[n];this._updateAndAddShape(r)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(e.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&(e.clipShape.parent=e,e.clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var n=0;n<e._children.length;n++){var r=e._children[n];r.__dirty=e.__dirty||r.__dirty,this._updateAndAddShape(r,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e}},{key:"mod",value:function(e,t){var n=this._elements[e];if(n&&(n.modSelf(),t))if(t.parent||t._storage||t.__startClip){var r={};for(var o in t)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&t.hasOwnProperty(o)&&(r[o]=t[o]);(new Pr).merge(n,r,!0)}else(new Pr).merge(n,t,!0);return this}},{key:"drift",value:function(e,t,n){var r=this._elements[e];return r&&(r.needTransform=!0,"horizontal"===r.draggable?n=0:"vertical"===r.draggable&&(t=0),(!r.ondrift||r.ondrift&&!r.ondrift(t,n))&&r.drift(t,n)),this}},{key:"addHover",value:function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(e){e instanceof co&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)}},{key:"delRoot",value:function(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var n=this._roots[t];n instanceof co&&n.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(e instanceof Array)for(var r=e.length,o=0;o<r;o++)this.delRoot(e[o]);else{var i;i="string"==typeof e?this._elements[e]:e;var a=(new Pr).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof co&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(e){return e instanceof co&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this}},{key:"get",value:function(e){return this._elements[e]}},{key:"delFromMap",value:function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof co&&(t._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&fo(t.prototype,n),r&&fo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function po(e){"@babel/helpers - typeof";return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vo(e,t){return(vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function go(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=mo(e);if(t){var o=mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===po(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function mo(e){return(mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var bo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vo(e,t)}(i,l);var t,n,r,o=go(i);function i(e,t,n,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,n,r)).x=e,a.y=t,a.width=n,a.height=r,a.CLASS_NAME="SuperMap.Geometry.Rectangle",a.geometryType="Rectangle",a}return t=i,(n=[{key:"calculateBounds",value:function(){this.bounds=new Oe(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&yo(t.prototype,n),r&&yo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t||"",this.name=n||"token",this.CLASS_NAME="SuperMap.Credential"}var t,n,r;return t=e,(n=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&wo(t.prototype,n),r&&wo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();_o.CREDENTIAL=null;
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xo={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString()};var e=function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n};return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1,2)+"-"+e(t.getUTCDate(),2)+"T"+e(t.getUTCHours(),2)+":"+e(t.getUTCMinutes(),2)+":"+e(t.getUTCSeconds(),2)+"."+e(t.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,n=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(n&&(n[1]||n[7])){var r=parseInt(n[1],10)||0,o=parseInt(n[2],10)-1||0,i=parseInt(n[3],10)||1;t=new Date(Date.UTC(r,o,i));var a=n[7];if(a){var s=parseInt(n[4],10),l=parseInt(n[5],10),u=parseFloat(n[6]),c=0|u,f=Math.round(1e3*(u-c));if(t.setUTCHours(s,l,c,f),"Z"!==a){var h=-1e3*(60*parseInt(a,10)*60+60*(parseInt(n[8],10)||0));t=new Date(t.getTime()+h)}}}else t=new Date("invalid");return t}},So={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var n=So.element(e);n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=t.toUpperCase());)n=n.parentNode;return n},observe:function(e,t,n,r){var o=w.getElement(e);if(r=r||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=w.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:t,observer:n,useCapture:r}),o.addEventListener?"mousewheel"===t?o.addEventListener(t,n,{useCapture:r,passive:!1}):o.addEventListener(t,n,r):o.attachEvent&&o.attachEvent("on"+t,n)},stopObservingElement:function(e){var t=w.getElement(e)._eventCacheID;this._removeElementObservers(So.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var n=e[t],r=new Array(n.element,n.name,n.observer,n.useCapture);So.stopObserving.apply(this,r)}},stopObserving:function(e,t,n,r){r=r||!1;var o=w.getElement(e),i=o._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(t="keydown");var a=!1,s=So.observers[i];if(s)for(var l=0;!a&&l<s.length;){var u=s[l];if(u.name===t&&u.observer===n&&u.useCapture===r){s.splice(l,1),0==s.length&&delete So.observers[i],a=!0;break}l++}return a&&(o.removeEventListener?o.removeEventListener(t,n,r):o&&o.detachEvent&&o.detachEvent("on"+t,n)),a},unloadCache:function(){if(So&&So.observers){for(var e in So.observers){var t=So.observers[e];So._removeElementObservers.apply(this,[t])}So.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Oo(e){"@babel/helpers - typeof";return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}So.observe(window,"resize",So.unloadCache,!1);
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var To=function(){function e(t,n,r,o,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,w.extend(this,i),null!=r)for(var a=0,s=r.length;a<s;a++)this.addEventType(r[a]);null!=n&&this.attachToElement(n),this.CLASS_NAME="SuperMap.Events"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(So.stopObservingElement(this.element),this.element.hasScrollEvent&&So.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?So.stopObservingElement(this.element):(this.eventHandler=i.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=i.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,n=this.BROWSER_EVENTS.length;t<n;t++){var r=this.BROWSER_EVENTS[t];this.addEventType(r),So.observe(e,r,this.eventHandler)}So.observe(e,"dragstart",So.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,n,r,o){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=r&&-1!==w.indexOf(this.eventTypes,t)){null==n&&(n=this.object);var i=this.listeners[t];i||(i=[],this.listeners[t]=i,this.extensionCount[t]=0);var a={obj:n,func:r};o?(i.splice(this.extensionCount[t],0,a),"object"===Oo(o)&&o.extension&&this.extensionCount[t]++):i.push(a)}}},{key:"registerPriority",value:function(e,t,n){this.register(e,t,n,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,n){null==t&&(t=this.object);var r=this.listeners[e];if(null!=r)for(var o=0,i=r.length;o<i;o++)if(r[o].obj===t&&r[o].func===n){r.splice(o,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var n=this.listeners[e];if(n&&0!=n.length){var r;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var o=0,i=(n=n.slice()).length;o<i;o++){var a=n[o];if(void 0!=(r=a.func.apply(a.obj,[t]))&&!1===r)break}return this.fallThrough||So.stop(t,!0),r}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,n=this.listeners[t];if(n&&0!=n.length){var r=e.touches;if(r&&r[0]){for(var o,i=0,a=0,s=r.length,l=0;l<s;++l)i+=(o=r[l]).clientX,a+=o.clientY;e.clientX=i/s,e.clientY=a/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(So.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=w.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=w.pagePosition(this.element)),new we(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&Po(t.prototype,n),r&&Po(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}To.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Co=function(e,t,n){return t&&ko(e.prototype,t),n&&ko(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Symbol"});function Eo(e){"@babel/helpers - typeof";return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mo(){return(Mo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Ro(e,t){return(Ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Io(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=jo(e);if(t){var o=jo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Eo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Lo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ro(e,t)}(i,Co);var t,n,r,o=Io(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this);var n=null!==e&&void 0!==e?e:{},r=n.color,a=n.opacity;return t.color=null!==r&&void 0!==r?r:A.color,t.opacity=null!==a&&void 0!==a?a:A.opacity,t.type="Point",t.CLASS_NAME="SuperMap.Symbol.Point",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.size=null,this.color=null,this.opacity=null,Mo(jo(i.prototype),"destroy",this).call(this)}}])&&Ao(t.prototype,n),r&&Ao(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Do(e){"@babel/helpers - typeof";return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function No(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bo(){return(Bo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Fo(e,t){return(Fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Go(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=zo(e);if(t){var o=zo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Do(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zo(e){return(zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fo(e,t)}(i,Lo);var t,n,r,o=Go(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.shape,a=n.size,s=n.strokeColor,l=n.strokeWidth,u=n.strokeOpacity,c=n.translate,f=n.blur,h=n.raisingHeight,p=n.heightfixed;return t.shape=null!==r&&void 0!==r?r:R.shape,t.size=null!==a&&void 0!==a?a:R.size,t.strokeColor=null!==s&&void 0!==s?s:R.strokeColor,t.strokeWidth=null!==l&&void 0!==l?l:R.strokeWidth,t.strokeOpacity=null!==u&&void 0!==u?u:R.strokeOpacity,t.translate=null!==c&&void 0!==c?c:R.translate,t.blur=null!==f&&void 0!==f?f:R.blur,t.raisingHeight=null!==h&&void 0!==h?h:R.raisingHeight,t.heightfixed=null!==p&&void 0!==p?p:R.heightfixed,t.type="SimplePoint",t.CLASS_NAME="SuperMap.Symbol.SimplePoint",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.shape=null,this.size=null,this.strokeColor=null,this.strokeWidth=null,this.strokeOpacity=null,this.translate=null,this.blur=null,this.raisingHeight=null,this.heightfixed=null,Bo(zo(i.prototype),"destroy",this).call(this)}}])&&No(t.prototype,n),r&&No(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ho(e){"@babel/helpers - typeof";return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uo(){return(Uo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Jo(e,t){return(Jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Yo(e);if(t){var o=Yo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ho(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Yo(e){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Xo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jo(e,t)}(i,Lo);var t,n,r,o=qo(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.image,a=n.size,s=n.color,l=n.rotate,u=n.translate,c=n.raisingHeight,f=n.heightfixed;return t.image=r,t.size=null!==a&&void 0!==a?a:M.size,t.color=s,t.rotate=null!==l&&void 0!==l?l:M.rotate,t.translate=null!==u&&void 0!==u?u:M.translate,t.raisingHeight=null!==c&&void 0!==c?c:M.raisingHeight,t.heightfixed=null!==f&&void 0!==f?f:M.heightfixed,t.type="ImagePoint",t.CLASS_NAME="SuperMap.Symbol.ImagePoint",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i({image:this.image})),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.image=null,this.size=null,this.color=null,this.rotate=null,this.translate=null,this.raisingHeight=null,this.heightfixed=null,Uo(Yo(i.prototype),"destroy",this).call(this)}}])&&Wo(t.prototype,n),r&&Wo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zo(e){"@babel/helpers - typeof";return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ko(){return(Ko="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ti(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function $o(e,t){return($o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ei(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ti(e);if(t){var o=ti(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$o(e,t)}(i,Co);var t,n,r,o=ei(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this);var n=null!==e&&void 0!==e?e:{},r=n.width,a=n.opacity;return t.width=null!==r&&void 0!==r?r:I.width,t.opacity=null!==a&&void 0!==a?a:I.opacity,t.type="Line",t.CLASS_NAME="SuperMap.Symbol.Line",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.width=null,this.opacity=null,Ko(ti(i.prototype),"destroy",this).call(this)}}])&&Qo(t.prototype,n),r&&Qo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ri(e){"@babel/helpers - typeof";return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ii(){return(ii="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=li(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ai(e,t){return(ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=li(e);if(t){var o=li(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ri(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function li(e){return(li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ui=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ai(e,t)}(i,ni);var t,n,r,o=si(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this);var n=(null!==e&&void 0!==e?e:{}).pattern;return t.pattern=n,t.type="BaseLine",t.CLASS_NAME="SuperMap.Symbol.BaseLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.pattern=null,ii(li(i.prototype),"destroy",this).call(this)}}])&&oi(t.prototype,n),r&&oi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ci(e){"@babel/helpers - typeof";return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hi(){return(hi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function pi(e,t){return(pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=yi(e);if(t){var o=yi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ci(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pi(e,t)}(i,ui);var t,n,r,o=di(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.blur,a=n.heightFixed,s=n.rasingHeight,l=n.borderColor,u=n.borderWidth,c=n.cap,f=n.join,h=n.arrowWidth,p=n.arrowHeight,d=n.tailWidth,y=n.offset;return t.blur=r,t.heightFixed=null!==a&&void 0!==a?a:I.heightFixed,t.rasingHeight=null!==s&&void 0!==s?s:I.rasingHeight,t.borderColor=null!==l&&void 0!==l?l:I.borderColor,t.borderWidth=null!==u&&void 0!==u?u:I.borderWidth,t.cap=null!==c&&void 0!==c?c:I.cap,t.join=null!==f&&void 0!==f?f:I.join,t.arrowWidth=null!==h&&void 0!==h?h:I.arrowWidth,t.arrowHeight=null!==p&&void 0!==p?p:I.arrowHeight,t.tailWidth=null!==d&&void 0!==d?d:I.tailWidth,t.offset=null!==y&&void 0!==y?y:I.offset,t.type="SimpleLine",t.CLASS_NAME="SuperMap.Symbol.SimpleLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.blur=null,this.heightFixed=null,this.rasingHeight=null,this.borderColor=null,this.borderWidth=null,this.cap=null,this.join=null,this.arrowWidth=null,this.arrowHeight=null,this.tailWidth=null,this.offset=null,hi(yi(i.prototype),"destroy",this).call(this)}}])&&fi(t.prototype,n),r&&fi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function gi(e){"@babel/helpers - typeof";return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bi(){return(bi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function wi(e,t){return(wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=xi(e);if(t){var o=xi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xi(e){return(xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Si=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wi(e,t)}(i,ui);var t,n,r,o=_i(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=(null!==e&&void 0!==e?e:{}).segmentNumber;return t.segmentNumber=null!==n&&void 0!==n?n:I.segmentNumber,t.type="GreatCircleLine",t.CLASS_NAME="SuperMap.Symbol.GreatCircleLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.segmentNumber=null,bi(xi(i.prototype),"destroy",this).call(this)}}])&&mi(t.prototype,n),r&&mi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Oi(e){"@babel/helpers - typeof";return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ti(){return(Ti="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ei(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ki(e,t){return(ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ci(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ei(e);if(t){var o=Ei(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Oi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ei(e){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ai=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ki(e,t)}(i,ui);var t,n,r,o=Ci(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.segmentNumber,a=n.thetaOffset;return t.segmentNumber=null!==r&&void 0!==r?r:I.segmentNumber,t.thetaOffset=null!==a&&void 0!==a?a:I.segmentNumber,t.type="ArcLine",t.CLASS_NAME="SuperMap.Symbol.ArcLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.segmentNumber=null,this.thetaOffset=null,Ti(Ei(i.prototype),"destroy",this).call(this)}}])&&Pi(t.prototype,n),r&&Pi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Mi(e){"@babel/helpers - typeof";return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ii(){return(Ii="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Di(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ji(e,t){return(ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Li(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Di(e);if(t){var o=Di(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Di(e){return(Di=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ji(e,t)}(i,ni);var t,n,r,o=Li(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.image,a=n.imageBlend,s=n.iconStep,l=n.color;return t.image=r,t.imageBlend=null!==a&&void 0!==a?a:I.textureBlend,t.iconStep=null!==s&&void 0!==s?s:I.iconStep,t.color=null!==l&&void 0!==l?l:I.color,t.type="ImageLine",t.CLASS_NAME="SuperMap.Symbol.ImageLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i({image:this.image})),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.image=null,this.imageBlend=null,this.iconStep=null,this.color=null,Ii(Di(i.prototype),"destroy",this).call(this)}}])&&Ri(t.prototype,n),r&&Ri(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bi(e){"@babel/helpers - typeof";return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gi(){return(Gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function zi(e,t){return(zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Hi(e);if(t){var o=Hi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Hi(e){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Wi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zi(e,t)}(i,Ni);var t,n,r,o=Vi(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.blur,a=n.heightFixed,s=n.rasingHeight,l=n.borderColor,u=n.borderWidth,c=n.cap,f=n.join,h=n.arrowWidth,p=n.arrowHeight,d=n.tailWidth,y=n.offset;return t.blur=r,t.heightFixed=null!==a&&void 0!==a?a:I.heightFixed,t.rasingHeight=null!==s&&void 0!==s?s:I.rasingHeight,t.borderColor=null!==l&&void 0!==l?l:I.borderColor,t.borderWidth=null!==u&&void 0!==u?u:I.borderWidth,t.cap=null!==c&&void 0!==c?c:I.cap,t.join=null!==f&&void 0!==f?f:I.join,t.arrowWidth=null!==h&&void 0!==h?h:I.arrowWidth,t.arrowHeight=null!==p&&void 0!==p?p:I.arrowHeight,t.tailWidth=null!==d&&void 0!==d?d:I.tailWidth,t.offset=null!==y&&void 0!==y?y:I.offset,t.type="SimpleImageLine",t.CLASS_NAME="SuperMap.Symbol.SimpleImageLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.blur=null,this.heightFixed=null,this.rasingHeight=null,this.borderColor=null,this.borderWidth=null,this.cap=null,this.join=null,this.arrowWidth=null,this.arrowHeight=null,this.tailWidth=null,this.offset=null,Gi(Hi(i.prototype),"destroy",this).call(this)}}])&&Fi(t.prototype,n),r&&Fi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ui(e){"@babel/helpers - typeof";return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qi(){return(qi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Yi(e,t){return(Yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Zi(e);if(t){var o=Zi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Zi(e){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Qi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yi(e,t)}(i,Ni);var t,n,r,o=Xi(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.segmentNumber,a=n.thetaOffset;return t.segmentNumber=null!==r&&void 0!==r?r:I.segmentNumber,t.thetaOffset=null!==a&&void 0!==a?a:I.segmentNumber,t.type="ArcImageLine",t.CLASS_NAME="SuperMap.Symbol.ArcImageLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.segmentNumber=null,this.thetaOffset=null,qi(Zi(i.prototype),"destroy",this).call(this)}}])&&Ji(t.prototype,n),r&&Ji(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ki(e){"@babel/helpers - typeof";return(Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ea(){return(ea="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ra(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ta(e,t){return(ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ra(e);if(t){var o=ra(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ki(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ta(e,t)}(i,ui);var t,n,r,o=na(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=(null!==e&&void 0!==e?e:{}).segmentNumber;return t.segmentNumber=null!==n&&void 0!==n?n:I.segmentNumber,t.type="GreatCircleImageLine",t.CLASS_NAME="SuperMap.Symbol.GreatCircleImageLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.segmentNumber=null,ea(ra(i.prototype),"destroy",this).call(this)}}])&&$i(t.prototype,n),r&&$i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ia(e){"@babel/helpers - typeof";return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sa(){return(sa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ca(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function la(e,t){return(la=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ua(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ca(e);if(t){var o=ca(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ia(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ca(e){return(ca=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&la(e,t)}(i,ni);var t,n,r,o=ua(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.interval,a=n.trailLength,s=n.duration,l=n.texture,u=n.textureBlend,c=n.iconStep,f=n.color;return t.interval=r,t.trailLength=a,t.duration=s,t.texture=l,t.imageBlend=u,t.iconStep=c,t.color=f,t.type="AnimateLine",t.CLASS_NAME="SuperMap.Symbol.AnimateLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.interval=null,this.trailLength=null,this.duration=null,this.texture=null,this.textureBlend=null,this.iconStep=null,this.color=null,sa(ca(i.prototype),"destroy",this).call(this)}}])&&aa(t.prototype,n),r&&aa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ha(e){"@babel/helpers - typeof";return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function da(){return(da="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ga(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ya(e,t){return(ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ga(e);if(t){var o=ga(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ga(e){return(ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ma=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ya(e,t)}(i,fa);var t,n,r,o=va(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.blur,a=n.heightFixed,s=n.rasingHeight,l=n.borderColor,u=n.borderWidth,c=n.cap,f=n.join,h=n.arrowWidth,p=n.arrowHeight,d=n.tailWidth,y=n.offset;return t.blur=r,t.heightFixed=null!==a&&void 0!==a?a:I.heightFixed,t.rasingHeight=null!==s&&void 0!==s?s:I.rasingHeight,t.borderColor=null!==l&&void 0!==l?l:I.borderColor,t.borderWidth=null!==u&&void 0!==u?u:I.borderWidth,t.cap=null!==c&&void 0!==c?c:I.cap,t.join=null!==f&&void 0!==f?f:I.join,t.arrowWidth=null!==h&&void 0!==h?h:I.arrowWidth,t.arrowHeight=null!==p&&void 0!==p?p:I.arrowHeight,t.tailWidth=null!==d&&void 0!==d?d:I.tailWidth,t.offset=null!==y&&void 0!==y?y:I.offset,t.type="SimpleAnimateLine",t.CLASS_NAME="SuperMap.Symbol.SimpleAnimateLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.blur=null,this.heightFixed=null,this.rasingHeight=null,this.borderColor=null,this.borderWidth=null,this.cap=null,this.join=null,this.arrowWidth=null,this.arrowHeight=null,this.tailWidth=null,this.offset=null,da(ga(i.prototype),"destroy",this).call(this)}}])&&pa(t.prototype,n),r&&pa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ba(e){"@babel/helpers - typeof";return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _a(){return(_a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oa(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function xa(e,t){return(xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Oa(e);if(t){var o=Oa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ba(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Oa(e){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Pa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xa(e,t)}(i,fa);var t,n,r,o=Sa(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.segmentNumber,a=n.thetaOffset;return t.segmentNumber=null!==r&&void 0!==r?r:I.segmentNumber,t.thetaOffset=null!==a&&void 0!==a?a:I.segmentNumber,t.type="ArcAnimateLine",t.CLASS_NAME="SuperMap.Symbol.ArcAnimateLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.segmentNumber=null,this.thetaOffset=null,_a(Oa(i.prototype),"destroy",this).call(this)}}])&&wa(t.prototype,n),r&&wa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ta(e){"@babel/helpers - typeof";return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ka(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ca(){return(Ca="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ma(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Ea(e,t){return(Ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ma(e);if(t){var o=Ma(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ta(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ma(e){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ra=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ea(e,t)}(i,fa);var t,n,r,o=Aa(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=(null!==e&&void 0!==e?e:{}).segmentNumber;return t.segmentNumber=null!==n&&void 0!==n?n:I.segmentNumber,t.type="GreatCircleAnimateLine",t.CLASS_NAME="SuperMap.Symbol.GreatCircleAnimateLine",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.segmentNumber=null,Ca(Ma(i.prototype),"destroy",this).call(this)}}])&&ka(t.prototype,n),r&&ka(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ia(e){"@babel/helpers - typeof";return(Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function La(){return(La="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ba(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Da(e,t){return(Da=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ba(e);if(t){var o=Ba(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ia(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ba(e){return(Ba=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Fa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Da(e,t)}(i,ni);var t,n,r,o=Na(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.interval,a=n.trailLength,s=n.duration,l=n.texture,u=n.textureBlend,c=n.iconStep,f=n.color;return t.interval=r,t.trailLength=a,t.duration=s,t.texture=l,t.imageBlend=u,t.iconStep=c,t.color=f,t.type="AnimateLine3D",t.CLASS_NAME="SuperMap.Symbol.AnimateLine3D",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.interval=null,this.trailLength=null,this.duration=null,this.texture=null,this.textureBlend=null,this.iconStep=null,this.color=null,La(Ba(i.prototype),"destroy",this).call(this)}}])&&ja(t.prototype,n),r&&ja(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ga(e){"@babel/helpers - typeof";return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function za(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Va(){return(Va="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ua(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Ha(e,t){return(Ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ua(e);if(t){var o=Ua(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ga(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ua(e){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ja=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ha(e,t)}(i,Fa);var t,n,r,o=Wa(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=(null!==e&&void 0!==e?e:{}).segmentNumber;return t.segmentNumber=null!==n&&void 0!==n?n:I.segmentNumber,t.type="ArcAnimateLine3D",t.CLASS_NAME="SuperMap.Symbol.ArcAnimateLine3D",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.segmentNumber=null,Va(Ua(i.prototype),"destroy",this).call(this)}}])&&za(t.prototype,n),r&&za(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function qa(e){"@babel/helpers - typeof";return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xa(){return(Xa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ka(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Za(e,t){return(Za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ka(e);if(t){var o=Ka(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ka(e){return(Ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Za(e,t)}(i,Fa);var t,n,r,o=Qa(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=(null!==e&&void 0!==e?e:{}).iconStepCount;return t.iconStepCount=null!==n&&void 0!==n?n:I.iconStepCount,t.type="WallAnimateLine3D",t.CLASS_NAME="SuperMap.Symbol.WallAnimateLine3D",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.iconStepCount=null,Xa(Ka(i.prototype),"destroy",this).call(this)}}])&&Ya(t.prototype,n),r&&Ya(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function es(e){"@babel/helpers - typeof";return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ns(){return(ns="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=is(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function rs(e,t){return(rs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function os(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=is(e);if(t){var o=is(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===es(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var as=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rs(e,t)}(i,ni);var t,n,r,o=os(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).type="Line3D",t.CLASS_NAME="SuperMap.Symbol.Line3D",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.pattern=null,ns(is(i.prototype),"destroy",this).call(this)}}])&&ts(t.prototype,n),r&&ts(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ss(e){"@babel/helpers - typeof";return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ls(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function us(){return(us="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function cs(e,t){return(cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=hs(e);if(t){var o=hs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ss(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hs(e){return(hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ps=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cs(e,t)}(i,as);var t,n,r,o=fs(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this);var n=null!==e&&void 0!==e?e:{},r=n.pattern,a=n.iconStepCount;return t.pattern=r,t.iconStepCount=null!==a&&void 0!==a?a:I.iconStepCount,t.type="WallLine3D",t.CLASS_NAME="SuperMap.Symbol.WallLine3D",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.pattern=null,this.iconStepCount=null,us(hs(i.prototype),"destroy",this).call(this)}}])&&ls(t.prototype,n),r&&ls(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ds(e){"@babel/helpers - typeof";return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vs(){return(vs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gs(e,t){return(gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ms(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=bs(e);if(t){var o=bs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ds(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bs(e){return(bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ws=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gs(e,t)}(i,Co);var t,n,r,o=ms(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this);var n=(null!==e&&void 0!==e?e:{}).opacity;return t.opacity=null!==n&&void 0!==n?n:j.opacity,t.type="Polygon",t.CLASS_NAME="SuperMap.Symbol.Polygon",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.opacity=null,vs(bs(i.prototype),"destroy",this).call(this)}}])&&ys(t.prototype,n),r&&ys(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _s(e){"@babel/helpers - typeof";return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ss(){return(Ss="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ts(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Os(e,t){return(Os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ps(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ts(e);if(t){var o=Ts(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ts(e){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ks=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Os(e,t)}(i,ws);var t,n,r,o=Ps(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=null!==e&&void 0!==e?e:{},r=n.image,a=n.color;return t.image=r,t.color=a,t.type="ImagePolygon",t.CLASS_NAME="SuperMap.Symbol.ImagePolygon",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i({image:this.image})),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.image=null,this.color=null,Ss(Ts(i.prototype),"destroy",this).call(this)}}])&&xs(t.prototype,n),r&&xs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Cs(e){"@babel/helpers - typeof";return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function As(){return(As="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Is(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Ms(e,t){return(Ms=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Rs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Is(e);if(t){var o=Is(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Is(e){return(Is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var js=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ms(e,t)}(i,Co);var t,n,r,o=Rs(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this);var n=null!==e&&void 0!==e?e:{},r=n.field,a=n.size,s=n.color,l=n.opacity,u=n.translate,c=n.fontFamily,f=n.haloWidth,h=n.anchor,p=n.spacing,d=n.allowOverlap,y=n.padding,v=n.strokeColor,g=n.strokeWidth,m=n.fontPath,b=n.heightfixed,w=n.raisingHeight,_=n.gamma,x=n.fontWeight,S=n.blur;return t.field=r,t.size=null!==a&&void 0!==a?a:L.size,t.color=null!==s&&void 0!==s?s:L.color,t.opacity=null!==l&&void 0!==l?l:L.opacity,t.translate=null!==u&&void 0!==u?u:L.translate,t.fontFamily=null!==c&&void 0!==c?c:L.fontFamily,t.haloWidth=null!==f&&void 0!==f?f:L.haloWidth,t.anchor=null!==h&&void 0!==h?h:L.anchor,t.spacing=null!==p&&void 0!==p?p:L.spacing,t.allowOverlap=null!==d&&void 0!==d?d:L.allowOverlap,t.padding=null!==y&&void 0!==y?y:L.padding,t.strokeColor=null!==v&&void 0!==v?v:L.strokeColor,t.strokeWidth=null!==g&&void 0!==g?g:L.strokeWidth,t.fontPath=null!==m&&void 0!==m?m:L.fontPath,t.heightfixed=null!==b&&void 0!==b?b:L.heightfixed,t.raisingHeight=null!==w&&void 0!==w?w:L.raisingHeight,t.gamma=null!==_&&void 0!==_?_:L.gamma,t.fontWeight=null!==x&&void 0!==x?x:L.fontWeight,t.blur=null!==S&&void 0!==S?S:L.blur,t.type="Text",t.CLASS_NAME="SuperMap.Symbol.Text",t}return t=i,(n=[{key:"clone",value:function(e){return null==e&&(e=new i),w.applyDefaults(e,this),e}},{key:"destroy",value:function(){this.field=null,this.size=null,this.color=null,this.opacity=null,this.translate=null,this.fontFamily=null,this.haloWidth=null,this.anchor=null,this.spacing=null,this.allowOverlap=null,this.padding=null,this.strokeColor=null,this.strokeWidth=null,this.fontPath=null,this.heightfixed=null,this.raisingHeight=null,this.gamma=null,this.fontWeight=null,this.halo=null,this.blur=null,As(Is(i.prototype),"destroy",this).call(this)}}])&&Es(t.prototype,n),r&&Es(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ls(e){"@babel/helpers - typeof";return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ds(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ns(){return(Ns="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Bs(e,t){return(Bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=zs(e);if(t){var o=zs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ls(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gs(e)}(this,n)}}function Gs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zs(e){return(zs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Vs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bs(e,t)}(a,t(kr,no));var n,r,o,i=Fs(a);function a(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),e=e||{},t.id=null,t.style={},t.highlightStyle=null,t.parent=null,t.__dirty=!0,t.__clipShapes=[],t.invisible=!1,t.ignore=!1,t.zlevel=0,t.draggable=!1,t.clickable=!1,t.hoverable=!0,t.z=0,t.refOriginalPosition=[0,0],t.refDataID=null,t.isHoverByRefDataID=!1,t.refDataHoverGroup=null,t.dataInfo=null,w.extend(Gs(t),e),t.id=t.id||w.createUniqueID("smShape_"),t.CLASS_NAME="SuperMap.LevelRenderer.Shape",t.getTansform=(n=[],function(e,t){var r=[e,t];return this.needTransform&&this.transform&&(eo.Util_matrix.invert(n,this.transform),eo.Util_matrix.mulVector(r,n,[e,t,1]),e==r[0]&&t==r[1]&&this.updateNeedTransform()),r}),t}return n=a,o=[{key:"_fillText",value:function(e,t,n,r,o,i,s){o&&(e.font=o),e.textAlign=i,e.textBaseline=s;var l=a._getTextRect(t,n,r,o,i,s);t=(t+"").split("\n");var u=eo.Util_area.getTextHeight("ZH",o);switch(s){case"top":r=l.y;break;case"bottom":r=l.y+u;break;default:r=l.y+u/2}for(var c=0,f=t.length;c<f;c++)e.fillText(t[c],n,r),r+=u}},{key:"_getTextRect",value:function(e,t,n,r,o,i){var a=eo.Util_area.getTextWidth(e,r),s=eo.Util_area.getTextHeight("ZH",r);switch(e=(e+"").split("\n"),o){case"end":case"right":t-=a;break;case"center":t-=a/2}switch(i){case"top":break;case"bottom":n-=s*e.length;break;default:n-=s*e.length/2}return{x:t,y:n,width:a,height:s*e.length}}}],(r=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,Ns(zs(a.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){var n=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,n),n.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",n),e.fill(),n.lineWidth>0&&(this.setCtxGlobalAlpha(e,"stroke",n),e.stroke()),this.setCtxGlobalAlpha(e,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",n),n.lineWidth>0&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",n);break;default:this.setCtxGlobalAlpha(e,"fill",n),e.fill(),this.setCtxGlobalAlpha(e,"reset",n)}this.drawText(e,n,this.style),this.afterBrush(e)}},{key:"beforeBrush",value:function(e,t){var n=this.style;return this.brushTypeOnly&&(n.brushType=this.brushTypeOnly),t&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(n.strokeColor=n.strokeColor||n.color),e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n}},{key:"afterBrush",value:function(e){e.restore()}},{key:"setContext",value:function(e,t){for(var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],r=0,o=n.length;r<o;r++){var i=t[n[r][0]],a=n[r][1];void 0!==i&&(e[a]=i)}}},{key:"doClip",value:function(e){var t=eo.Util_matrix.create();if(this.__clipShapes)for(var n=0;n<this.__clipShapes.length;n++){var r=this.__clipShapes[n];if(r.needTransform){var o=r.transform;eo.Util_matrix.invert(t,o),e.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(e.beginPath(),r.buildPath(e,r.style),e.clip(),r.needTransform){var i=t;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(e,t,n){var r={};for(var o in e)r[o]=e[o];var i=eo.Util_color.getHighlightColor();for(var a in"stroke"!=e.brushType?(r.strokeColor=i,r.lineWidth=e.lineWidth||1,r.brushType="both"):"stroke"!=n?(r.strokeColor=i,r.lineWidth=e.lineWidth||1):r.strokeColor=t.strokeColor||eo.Util_color.mix(e.strokeColor,eo.Util_color.toRGB(i)),t)void 0!==t[a]&&(r[a]=t[a]);return r}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(e,t){this.position[0]+=e,this.position[1]+=t}},{key:"buildPath",value:function(e,t){eo.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(e){eo.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(e,t){var n=this.getTansform(e,t);e=n[0],t=n[1];var r=this.style.__rect;return r||(r=this.style.__rect=this.getRect(this.style)),e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height&&eo.Util_area.isInside(this,this.style,e,t)}},{key:"drawText",value:function(e,t,n){if(void 0!==t.text&&!1!==t.text){var r=t.textColor||t.color||t.strokeColor;e.fillStyle=r;var o,i,s,l,u=10,c=t.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(n||t).__rect||this.getRect(n||t);switch(c){case"inside":s=h.x+h.width/2,l=h.y+h.height/2,o="center",i="middle","stroke"!=t.brushType&&r==t.color&&(e.fillStyle="#fff");break;case"left":s=h.x-u,l=h.y+h.height/2,o="end",i="middle";break;case"right":s=h.x+h.width+u,l=h.y+h.height/2,o="start",i="middle";break;case"top":s=h.x+h.width/2,l=h.y-u,o="center",i="bottom";break;case"bottom":s=h.x+h.width/2,l=h.y+h.height+u,o="center",i="top"}}break;case"start":case"end":var p=0,d=0,y=0,v=0;if(void 0!==t.pointList){var g=t.pointList;if(g.length<2)return;var m=g.length;switch(c){case"start":p=g[0][0]+f[0],d=g[1][0]+f[0],y=g[0][1]+f[1],v=g[1][1]+f[1];break;case"end":p=g[m-2][0]+f[0],d=g[m-1][0]+f[0],y=g[m-2][1]+f[1],v=g[m-1][1]+f[1]}}else p=t.xStart+f[0]||0,d=t.xEnd+f[0]||0,y=t.yStart+f[1]||0,v=t.yEnd+f[1]||0;switch(c){case"start":o=p<d?"end":"start",i=y<v?"bottom":"top",s=p,l=y;break;case"end":o=p<d?"start":"end",i=y<v?"top":"bottom",s=d,l=v}u-=4,p&&d&&p!=d?s-="end"==o?u:-u:o="center",y!=v?l-="bottom"==i?u:-u:i="middle";break;case"specific":s=t.textX||0,l=t.textY||0,o="start",i="middle"}t.labelXOffset&&!isNaN(t.labelXOffset)&&(s+=t.labelXOffset),t.labelYOffset&&!isNaN(t.labelYOffset)&&(l+=t.labelYOffset),null!=s&&null!=l&&a._fillText(e,t.text,s,l,t.textFont,t.textAlign||o,t.textBaseline||i)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(e,t,n){e.globalAlpha="fill"===t?void 0===n.fillOpacity?void 0===n.opacity?1:n.opacity:n.fillOpacity:"stroke"===t?void 0===n.strokeOpacity?void 0===n.opacity?1:n.opacity:n.strokeOpacity:void 0===n.opacity?1:n.opacity}}])&&Ds(n.prototype,r),o&&Ds(n,o),Object.defineProperty(n,"prototype",{writable:!1}),a}();function Hs(e){"@babel/helpers - typeof";return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Us(){return(Us="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ys(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Js(e,t){return(Js=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ys(e);if(t){var o=Ys(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ys(e){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Xs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Js(e,t)}(i,Vs);var t,n,r,o=qs(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicimage",t._imageCache={},t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",t}return t=i,(n=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,Us(Ys(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,o=this.style||{};t&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var a=o.image,s=this;if("string"==typeof a){var l=a;this._imageCache[l]?a=this._imageCache[l]:((a=new Image).onload=function(){a.onload=null,clearTimeout(i._refreshTimeout),i._needsRefresh.push(s),i._refreshTimeout=setTimeout(function(){n&&n(i._needsRefresh),i._needsRefresh=[]},10)},a.src=l,this._imageCache[l]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var u=o.width||a.width,c=o.height||a.height,f=o.x+r[0],h=o.y+r[1];if(!a.width||!a.height)return;if(e.save(),this.doClip(e),this.setContext(e,o),this.setTransform(e),o.sWidth&&o.sHeight){var p=o.sx+r[0]||0,d=o.sy+r[1]||0;e.drawImage(a,p,d,o.sWidth,o.sHeight,f,h,u,c)}else if(o.sx&&o.sy){var y=o.sx+r[0],v=o.sy+r[1],g=u-y,m=c-v;e.drawImage(a,y,v,g,m,f,h,u,c)}else e.drawImage(a,f,h,u,c);o.width||(o.width=u),o.height||(o.height=c),this.style.width||(this.style.width=u),this.style.height||(this.style.height=c),this.drawText(e,o,this.style),e.restore()}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&Ws(t.prototype,n),r&&Ws(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zs(e){"@babel/helpers - typeof";return(Zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qs(e,t){return(Qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ks(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=$s(e);if(t){var o=$s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $s(e){return($s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function el(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nl(e,t,n){return t&&tl(e.prototype,t),n&&tl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/Xs._needsRefresh=[],Xs._refreshTimeout=null;var rl=function(){function e(t,n){el(this,e),this.root=t,this.storage=n,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,e.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var r=document.createElement("div");this._domRoot=r,r.style.position="relative",r.style.overflow="hidden",r.style.width=this._width+"px",r.style.height=this._height+"px",this.root.appendChild(r),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=e.createDom(w.createUniqueID("SuperMap.Theme_background_"),"div",this),r.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new ol(w.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,r.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(e,t){i.refreshShapes(e,t)}}return nl(e,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(e){return this.refresh(e,!0),this}},{key:"refresh",value:function(e,t){var n=this.storage.getShapeList(!0);return this._paintList(n,t),"function"==typeof e&&e(),this}},{key:"_paintList",value:function(e,t){var n,r,o;for(var i in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,l=e.length;s<l;s++){var u=e[s];if(r!==u.zlevel&&(n&&n.needTransform&&o.restore(),o=(n=this.getLayer(u.zlevel)).ctx,r=u.zlevel,n.unusedCount=0,(n.dirty||t)&&n.clear(),n.needTransform&&(o.save(),n.setTransform(o))),o&&u.__startClip){var c=u.__startClip;if(o.save(),c.needTransform){var f=c.transform;eo.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var h=a;o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}}if((n&&n.dirty||t)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(o,!1)))if(Jr.catchBrushException)try{u.brush(o,!1,this.updatePainter)}catch(e){eo.Util_log(e,"brush error of "+u.type,u)}else u.brush(o,!1,this.updatePainter);o&&u.__stopClip&&o.restore(),u.__dirty=!1}for(var p in o&&n&&n.needTransform&&o.restore(),this._layers)if("hover"!==p){var d=this._layers[p];d.dirty=!1,1==d.unusedCount&&d.clear()}}},{key:"getLayer",value:function(e){var t=this._layers[e];if(!t){var n=this._zlevelList.length,r=null,o=-1;if(n>0&&e>this._zlevelList[0]){for(o=0;o<n-1&&!(this._zlevelList[o]<e&&this._zlevelList[o+1]>e);o++);r=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,e),t=new ol(w.createUniqueID("_levelLayer_"+e),this);var i=r?r.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(t.dom,i.nextSibling):i.parentNode.appendChild(t.dom),t.initContext(),this._layers[e]=t,this._layerConfig[e]&&(new Pr).merge(t,this._layerConfig[e],!0),t.updateTransform()}return t}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(e){var t=this._layers,n={};for(var r in t)"hover"!==r&&(n[r]=t[r].elCount,t[r].elCount=0);for(var o=0;o<e.length;o++){var i=e[o],a=t[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in t)"hover"!==s&&n[s]!==t[s].elCount&&(t[s].dirty=!0)}},{key:"refreshShapes",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];this.storage.mod(o.id)}return this.refresh(t),this}},{key:"clear",value:function(){for(var e in this._layers)"hover"!=e&&this._layers[e].clear();return this}},{key:"modLayer",value:function(e,t){if(t){this._layerConfig[e]?(new Pr).merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var n=this._layers[e];n&&(new Pr).merge(n,this._layerConfig[e],!0)}}},{key:"delLayer",value:function(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice((new Pr).indexOf(this._zlevelList,e),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,n=e.length;t<n;t++)this._brushHover(e[t]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var e=this._layers.hover;return e&&e.clear(),this}},{key:"resize",value:function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),n=this._getHeight();if(e.style.display="",this._width!=t||n!=this._height){for(var r in this._width=t,this._height=n,e.style.width=t+"px",e.style.height=n+"px",this._layers)this._layers[r].resize(t,n);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(e){var t=this._layers[e];t&&t.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(t,n,r){var o=e.createDom(w.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=e.devicePixelRatio&&i.scale(e.devicePixelRatio,e.devicePixelRatio),i.fillStyle=n||"#fff",i.rect(0,0,this._width*e.devicePixelRatio,this._height*e.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(i,!1)))if(Jr.catchBrushException)try{e.brush(i,!1,a.updatePainter)}catch(t){eo.Util_log(t,"brush error of "+e.type,e)}else e.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(t,r);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var n=this.getLayer(e.zlevel);if(n.needTransform&&(t.save(),n.setTransform(t)),Jr.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(t){eo.Util_log(t,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);n.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(e,t,n,r,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=n+"px",i.style.height=r+"px",i.setAttribute("width",n*s),i.setAttribute("height",r*s),a.clearRect(0,0,n*s,r*s);var l={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(a,!1);var u=new Xs({id:e,style:{x:0,y:0,image:i}});return null!=l.position&&(u.position=t.position=l.position),null!=l.rotation&&(u.rotation=t.rotation=l.rotation),null!=l.scale&&(u.scale=t.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var t=this;return function(n,r,o,i){return t._shapeToImage(n,r,o,i,e.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++)this.storage.addHover(e[t]),this._brushHover(e[t])}}],[{key:"createDom",value:function(t,n,r){var o=document.createElement(n),i=r._width,a=r._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*e.devicePixelRatio),o.setAttribute("height",a*e.devicePixelRatio),o.setAttribute("id",t),o}}]),e}(),ol=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qs(e,t)}(n,no);var t=Ks(n);function n(e,r){var o;return el(this,n),(o=t.call(this,e,r)).dom=null,o.domBack=null,o.ctxBack=null,o.painter=r,o.unusedCount=0,o.config=null,o.dirty=!0,o.elCount=0,o.clearColor=0,o.motionBlur=!1,o.lastFrameAlpha=.7,o.zoomable=!1,o.panable=!1,o.maxZoom=1/0,o.minZoom=0,o.ctx=null,o.dom=rl.createDom(w.createUniqueID("SuperMap.Theme"+e),"canvas",r),o.dom.onselectstart=function(){return!1},o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none",o.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",o}return nl(n,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,no.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=rl.devicePixelRatio&&this.ctx.scale(rl.devicePixelRatio,rl.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=rl.createDom(w.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=rl.devicePixelRatio&&this.ctxBack.scale(rl.devicePixelRatio,rl.devicePixelRatio)}},{key:"resize",value:function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*rl.devicePixelRatio),this.dom.setAttribute("height",t*rl.devicePixelRatio),1!=rl.devicePixelRatio&&this.ctx.scale(rl.devicePixelRatio,rl.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*rl.devicePixelRatio),this.domBack.setAttribute("height",t*rl.devicePixelRatio),1!=rl.devicePixelRatio&&this.ctxBack.scale(rl.devicePixelRatio,rl.devicePixelRatio))}},{key:"clear",value:function(){var e=this.dom,t=this.ctx,n=e.width,r=e.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,n/rl.devicePixelRatio,r/rl.devicePixelRatio)),o?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,n/rl.devicePixelRatio,r/rl.devicePixelRatio),t.restore()):t.clearRect(0,0,n/rl.devicePixelRatio,r/rl.devicePixelRatio),i){var s=this.domBack;t.save(),t.globalAlpha=a,t.drawImage(s,0,0,n/rl.devicePixelRatio,r/rl.devicePixelRatio),t.restore()}}}]),n}();function il(e){"@babel/helpers - typeof";return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function al(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sl(e,t){return(sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ll(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=cl(e);if(t){var o=cl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===il(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ul(e)}(this,n)}}function ul(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cl(e){return(cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sl(e,t)}(i,kr);var t,n,r,o=ll(i);function i(e,t,n){var r,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n)).root=e,r.storage=t,r.painter=n,r._lastX=0,r._lastY=0,r._mouseX=0,r._mouseY=0,r._findHover=null,r._domHover=null,r._findHover=(a=function(e,t,n){var r=this;if(r._draggingTarget&&r._draggingTarget.id==e.id||e.isSilent())return!1;var o=r._event;if(e.isCover(t,n)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var i=e.refDataID,a=null;e.refDataHoverGroup&&(a=e.refDataHoverGroup);for(var s=r.storage._shapeList,l=0,u=s.length;l<u;l++){var c=s[l];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&r.storage.addHover(c):r.storage.addHover(c))}}}else r.storage.addHover(e);for(var f=e.parent;f;){if(f.clipShape&&!f.clipShape.isCover(r._mouseX,r._mouseY))return!1;f=f.parent}return r._lastHover!=e&&(r._processOutShape(o),r._processDragLeave(o),r._lastHover=e,r._processDragEnter(o)),r._processOverShape(o),r._processDragOver(o),r._hasfound=1,!0}return!1},s=ul(r),function(e,t,n){return a.call(s,e,t,n)}),r._domHover=n.getDomHover(),r.CLASS_NAME="SuperMap.LevelRenderer.Handler";var l={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(Jr.EVENT.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,Jr.EVENT.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,Jr.EVENT.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){var t=((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)>0?1.1:1/1.1,n=this.painter.getLayers(),r=!1;for(var o in n)if("hover"!==o){var i=n[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=t,t=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(t-1),a[1]-=(this._mouseY-a[1])*(t-1),i.scale[0]*=t,i.scale[1]*=t,i.dirty=!0,r=!0}}r&&this.painter.refresh(),this._dispatchAgency(this._lastHover,Jr.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=eo.Util_event.getX(e),this._mouseY=eo.Util_event.getY(e);var t=this._mouseX-this._lastX,n=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var r="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,n),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(r="move",s.position[0]+=t,s.position[1]+=n,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?r="move":this._hasfound&&this._lastHover.clickable&&(r="pointer"),this.root.style.cursor=r,this._dispatchAgency(this._lastHover,Jr.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(Jr.EVENT.GLOBALOUT,e)},mousedown:function(e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=e.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,Jr.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,Jr.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&eo.Util_event.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<Jr.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<Jr.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&eo.Util_event.stop(e)),this._lastClickMoment=t),this.painter.clearHover()}};function u(e,t){return function(n){return e.call(t,n)}}return function(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],n=t.length;for(;n--;){var r=t[n];e["_"+r+"Handler"]=u(l[r],e)}}(ul(r)),window.addEventListener?(window.addEventListener("resize",r._resizeHandler),eo.Util_env.os.tablet||eo.Util_env.os.phone?(e.addEventListener("touchstart",r._touchstartHandler),e.addEventListener("touchmove",r._touchmoveHandler),e.addEventListener("touchend",r._touchendHandler)):(e.addEventListener("click",r._clickHandler),e.addEventListener("dblclick",r._dblclickHandler),e.addEventListener("mousewheel",r._mousewheelHandler),e.addEventListener("mousemove",r._mousemoveHandler),e.addEventListener("mousedown",r._mousedownHandler),e.addEventListener("mouseup",r._mouseupHandler)),e.addEventListener("DOMMouseScroll",r._mousewheelHandler),e.addEventListener("mouseout",r._mouseoutHandler)):(window.attachEvent("onresize",r._resizeHandler),e.attachEvent("onclick",r._clickHandler),e.ondblclick=r._dblclickHandler,e.attachEvent("onmousewheel",r._mousewheelHandler),e.attachEvent("onmousemove",r._mousemoveHandler),e.attachEvent("onmouseout",r._mouseoutHandler),e.attachEvent("onmousedown",r._mousedownHandler),e.attachEvent("onmouseup",r._mouseupHandler)),r}return t=i,(n=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,kr.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(e,t){return this.bind(e,t),this}},{key:"un",value:function(e,t){return this.unbind(e,t),this}},{key:"trigger",value:function(e,t){var n=Jr.EVENT;switch(e){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+e+"Handler"](t)}}},{key:"dispose",value:function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),eo.Util_env.os.tablet||eo.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var n=t;this._draggingTarget=n,this._isDragging=1,n.invisible=!0,this.storage.mod(n.id),this._dispatchAgency(n,Jr.EVENT.DRAGSTART,e),this.painter.refresh()}}},{key:"_processDragEnter",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,Jr.EVENT.DRAGENTER,e,this._draggingTarget)}},{key:"_processDragOver",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,Jr.EVENT.DRAGOVER,e,this._draggingTarget)}},{key:"_processDragLeave",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,Jr.EVENT.DRAGLEAVE,e,this._draggingTarget)}},{key:"_processDrop",value:function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,Jr.EVENT.DROP,e,this._draggingTarget))}},{key:"_processDragEnd",value:function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,Jr.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(e){this._dispatchAgency(this._lastHover,Jr.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function(e){this._dispatchAgency(this._lastHover,Jr.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function(e,t,n,r){var o="on"+t,i={type:t,event:n,target:e,cancelBubble:!1},a=e;for(r&&(i.dragged=r);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(t,i),a=a.parent,!i.cancelBubble););e?i.cancelBubble||this.dispatch(t,i):r||this.dispatch(t,{type:t,event:n})}},{key:"_iterateAndFindHover",value:function(){for(var e,t=eo.Util_matrix.create(),n=this.storage.getShapeList(),r=[0,0],o=n.length-1;o>=0;o--){var i=n[o];if(void 0!==i.zlevel&&(e=this.painter.getLayer(i.zlevel,e),r[0]=this._mouseX,r[1]=this._mouseY,e.needTransform&&(eo.Util_matrix.invert(t,e.transform),eo.Util_vector.applyTransform(r,r,t))),this._findHover(i,r[0],r[1]))break}}},{key:"_mobildFindFixed",value:function(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<t.length;n++){var r=t[n];r.x&&(this._mouseX+=r.x),r.y&&(this._mouseX+=r.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(e,t){if(e.zrenderFixed)return e;if(t){var n="touchend"!=e.type?e.targetTouches[0]:e.changedTouches[0];if(n){var r=this.root.getBoundingClientRect();e.zrenderX=n.clientX-r.left,e.zrenderY=n.clientY-r.top}}else{var o=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target;o&&o!=this._domHover&&(e.zrenderX=(void 0!==e.offsetX?e.offsetX:e.layerX)+o.offsetLeft,e.zrenderY=(void 0!==e.offsetY?e.offsetY:e.layerY)+o.offsetTop)}return e.zrenderFixed=1,e}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&al(t.prototype,n),r&&al(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"Linear",value:function(e){return e}},{key:"QuadraticIn",value:function(e){return e*e}},{key:"QuadraticOut",value:function(e){return e*(2-e)}},{key:"QuadraticInOut",value:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function(e){return e*e*e}},{key:"CubicOut",value:function(e){return--e*e*e+1}},{key:"CubicInOut",value:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function(e){return e*e*e*e}},{key:"QuarticOut",value:function(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function(e){return e*e*e*e*e}},{key:"QuinticOut",value:function(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function(e){return 0===e?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},{key:"CircularIn",value:function(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(e){var t=1.70158;return e*e*((t+1)*e-t)}},{key:"BackOut",value:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}},{key:"BackInOut",value:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},{key:"BounceIn",value:function(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},{key:"BounceInOut",value:function(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5}}])&&hl(t.prototype,n),r&&hl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetPool=t.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"step",value:function(e){var t=new pl,n=(e-this._startTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r="string"==typeof this.easing?t[this.easing]:this.easing,o="function"==typeof r?r(n):n;return this.fire("frame",o),1==n?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var e=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}},{key:"fire",value:function(e,t){for(var n=0,r=this._targetPool.length;n<r;n++)this["on"+e]&&this["on"+e](this._targetPool[n],t)}}])&&dl(t.prototype,n),r&&dl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vl(e){"@babel/helpers - typeof";return(vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ml(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bl(e,t,n){return t&&ml(e.prototype,t),n&&ml(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wl(e,t){return(wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Sl(e);if(t){var o=Sl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xl(e)}(this,n)}}function xl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sl(e){return(Sl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ol=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wl(e,t)}(n,kr);var t=_l(n);function n(e){var r;return gl(this,n),r=t.call(this,e),e=e||{},r.stage={},r.onframe=function(){},r._clips=[],r._running=!1,r._time=0,w.extend(xl(r),e),r.CLASS_NAME="SuperMap.LevelRenderer.Animation",r}return bl(n,[{key:"add",value:function(e){this._clips.push(e)}},{key:"remove",value:function(e){var t=(new Pr).indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)}},{key:"_update",value:function(){for(var e=(new Date).getTime(),t=e-this._time,n=this._clips,r=n.length,o=[],i=[],a=0;a<r;a++){var s=n[a],l=s.step(e);l&&(o.push(l),i.push(s))}this.stage.update&&this.stage.update();for(var u=0;u<r;)n[u]._needsRemove?(n[u]=n[r-1],n.pop(),r--):u++;r=o.length;for(var c=0;c<r;c++)i[c].fire(o[c]);this._time=e,this.onframe(t),this.dispatch("frame",t)}},{key:"start",value:function(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},t=this;this._running=!0,this._time=(new Date).getTime(),e(function n(){t._running&&(t._update(),e(n))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(e,t){var n=new Pl(e,(t=t||{}).loop,t.getter,t.setter);return n.animation=this,n}}],[{key:"_interpolateNumber",value:function(e,t,n){return(t-e)*n+e}},{key:"_interpolateArray",value:function(e,t,r,o,i){var a=e.length;if(1==i)for(var s=0;s<a;s++)o[s]=n._interpolateNumber(e[s],t[s],r);else for(var l=e[0].length,u=0;u<a;u++)for(var c=0;c<l;c++)o[u][c]=n._interpolateNumber(e[u][c],t[u][c],r)}},{key:"_isArrayLike",value:function(e){switch(vl(e)){case"undefined":case"string":return!1}return void 0!==e.length}},{key:"_catmullRomInterpolateArray",value:function(e,t,r,o,i,a,s,l,u){var c=e.length;if(1==u)for(var f=0;f<c;f++)l[f]=n._catmullRomInterpolate(e[f],t[f],r[f],o[f],i,a,s);else for(var h=e[0].length,p=0;p<c;p++)for(var d=0;d<h;d++)l[p][d]=n._catmullRomInterpolate(e[p][d],t[p][d],r[p][d],o[p][d],i,a,s)}},{key:"_catmullRomInterpolate",value:function(e,t,n,r,o,i,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*i+s*o+t}},{key:"_cloneValue",value:function(e){var t=Array.prototype.slice;if(n._isArrayLike(e)){var r=e.length;if(n._isArrayLike(e[0])){for(var o=[],i=0;i<r;i++)o.push(t.call(e[i]));return o}return t.call(e)}return e}},{key:"rgba2String",value:function(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}}]),n}(),Pl=function(){function e(t,n,r,o){gl(this,e),this._tracks={},this._target=t,this._loop=n||!1,this._getter=r||function(e,t){return e[t]},this._setter=o||function(e,t,n){e[t]=n},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return bl(e,[{key:"when",value:function(e,t){for(var n in t)this._tracks[n]||(this._tracks[n]=[],0!==e&&this._tracks[n].push({time:0,value:Ol._cloneValue(this._getter(this._target,n))})),this._tracks[n].push({time:parseInt(e,10),value:t[n]});return this}},{key:"during",value:function(e){return this._onframeList.push(e),this}},{key:"start",value:function(e){var t=this,n=this._setter,r=this._getter,o=t._onframeList.length,i="spline"===e,a=function(){if(t._clipCount--,0===t._clipCount){t._tracks={};for(var e=t._doneList.length,n=0;n<e;n++)t._doneList[n].call(t)}},s=function(s,l){var u=s.length;if(u){var c=s[0].value,f=Ol._isArrayLike(c),h=!1,p=f&&Ol._isArrayLike(c[0])?2:1;s.sort(function(e,t){return e.time-t.time});for(var d=s[u-1].time,y=[],v=[],g=0;g<u;g++){y.push(s[g].time/d);var m=s[g].value;"string"==typeof m&&(0===(m=eo.Util_color.toArray(m)).length&&(m[0]=m[1]=m[2]=0,m[3]=1),h=!0),v.push(m)}var b,w,_,x,S,O,P,T=0,k=0;if(h)var C=[0,0,0,0];var E=new yl({target:t._target,life:d,loop:t._loop,delay:t._delay,onframe:function(e,a){if(a<k){for(b=Math.min(T+1,u-1),w=b;w>=0&&!(y[w]<=a);w--);w=Math.min(w,u-2)}else{for(w=T;w<u&&!(y[w]>a);w++);w=Math.min(w-1,u-2)}T=w,k=a;var s=y[w+1]-y[w];if(0!==s){var c,d;for(_=(a-y[w])/s,i?(S=v[w],x=v[0===w?w:w-1],O=v[w>u-2?u-1:w+1],P=v[w>u-3?u-1:w+2],f?Ol._catmullRomInterpolateArray(x,S,O,P,_,_*_,_*_*_,r(e,l),p):(c=h?Ol.rgba2String(C):Ol._catmullRomInterpolate(x,S,O,P,_,_*_,_*_*_),n(e,l,c))):f?Ol._interpolateArray(v[w],v[w+1],_,r(e,l),p):(h?(Ol._interpolateArray(v[w],v[w+1],_,C,1),d=Ol.rgba2String(C)):d=Ol._interpolateNumber(v[w],v[w+1],_),n(e,l,d)),w=0;w<o;w++)t._onframeList[w](e,a)}},ondestroy:a});e&&"spline"!==e&&(E.easing=e),t._clipList.push(E),t._clipCount++,t.animation.add(E)}};for(var l in this._tracks)s(this._tracks[l],l);return this}},{key:"stop",value:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]}},{key:"delay",value:function(e){return this._delay=e,this}},{key:"done",value:function(e){return e&&this._doneList.push(e),this}}]),e}();function Tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kl=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.storage=new ho,this.painter=new rl(n,this.storage),this.handler=new fl(n,this.storage,this.painter),this.animatingElements=[],this.animation=new Ol({stage:{update:e.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var t,n,r;return t=e,r=[{key:"getFrameCallback",value:function(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var n=0,r=t.length;n<r;n++)e.storage.mod(t[n].id);(t.length||e._needsRefreshNextFrame)&&e.refresh()}}}}],(n=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(e){return this.storage.addRoot(e),this}},{key:"addGroup",value:function(e){return this.storage.addRoot(e),this}},{key:"delShape",value:function(e){return this.storage.delRoot(e),this}},{key:"delGroup",value:function(e){return this.storage.delRoot(e),this}},{key:"modShape",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modGroup",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modLayer",value:function(e,t){return this.painter.modLayer(e,t),this}},{key:"addHoverShape",value:function(e){return this.storage.addHover(e),this}},{key:"render",value:function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(e){return this.painter.refreshHover(e),this}},{key:"refreshShapes",value:function(e,t){return this.painter.refreshShapes(e,t),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(e,t,n){if("string"==typeof e&&(e=this.storage.get(e)),e){var r;if(t){for(var o=t.split("."),i=e,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(r=i)}else r=e;if(!r)return void eo.Util_log('Property "'+t+'" is not existed in element '+e.id);var l=this.animatingElements;return void 0===e.__aniCount&&(e.__aniCount=0),0===e.__aniCount&&l.push(e),e.__aniCount++,this.animation.animate(r,{loop:n}).done(function(){if(e.__aniCount--,0===e.__aniCount){var t=(new Pr).indexOf(l,e);l.splice(t,1)}})}eo.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(e,t,n){return this.painter.toDataURL(e,t,n)}},{key:"shapeToImage",value:function(e,t,n){var r=w.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(r,e,t,n)}},{key:"on",value:function(e,t){return this.handler.on(e,t),this}},{key:"un",value:function(e,t){return this.handler.un(e,t),this}},{key:"trigger",value:function(e,t){return this.handler.trigger(e,t),this.handler.dispatch(e,t),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(e){return this.painter.updateHoverLayer(e),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&Tl(t.prototype,n),r&&Tl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var El=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e._instances={},e.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(t){var n=new kl(w.createUniqueID("LRenderer_"),t);return e._instances[n.id]=n,n}},{key:"dispose",value:function(t){if(t)t.dispose(),this.delInstance(t.id);else{for(var n in e._instances)e._instances[n].dispose();e._instances={}}return this}},{key:"getInstance",value:function(t){return e._instances[t]}},{key:"delInstance",value:function(t){return delete e._instances[t],this}}])&&Cl(t.prototype,n),r&&Cl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Al(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ml=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldNames=null,this.fieldValues=null,this.geometry=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ServerFeature"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){var n=null;if(t)return(n=t.geometry)&&(n=tr.fromJson(n)),new e({fieldNames:t.fieldNames,fieldValues:t.fieldValues,geometry:n})}}],(n=[{key:"destroy",value:function(){var e=this;e.fieldNames=null,e.fieldValues=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}},{key:"toFeature",value:function(){var e,t,n,r,o={},i=this;for(var a in e=i.fieldNames,t=i.fieldValues,e)o[e[a]]=t[a];return i.geometry&&(n=i.geometry.toGeometry()),r=new Et(n,o),i.geometry&&i.geometry.id&&(r.fid=i.geometry.id),r}}])&&Al(t.prototype,n),r&&Al(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Il=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{};this.name=t,this.id=r.id?r.id:w.createUniqueID("themeLayer_"),this.opacity=r.opacity?r.opacity:1,this.visibility=!0,this.loadWhileAnimating=void 0===r.loadWhileAnimating||r.loadWhileAnimating,this.map=r.map?r.map:null,this.features=[],this.TFEvents=[],this.map&&this.map.addLayer(this)}var t,n,r;return t=e,(n=[{key:"onAdd",value:function(e){this.map=e,this._createCanvasContainer(),this.addTFEvents(),this.map.on("resize",this.resizeEvent.bind(this)),this.map.on("zoomstart",this.zoomStartEvent.bind(this)),this.map.on("zoomend",this.zoomEndEvent.bind(this)),this.map.on("rotatestart",this.rotateStartEvent.bind(this)),this.map.on("rotate",this.rotateEvent.bind(this)),this.map.on("rotateend",this.rotateEndEvent.bind(this)),this.map.on("dragend",this.dragEndEvent.bind(this)),this.map.on("movestart",this.moveStartEvent.bind(this)),this.map.on("move",this.moveEvent.bind(this)),this.map.on("moveend",this.moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.map&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"_createCanvasContainer",value:function(){this.movingOffset=[0,0],this.mapContainer=this.map.getCanvasContainer(),this.div=document.createElement("div"),this.div.id=this.id,this.div.style.position="absolute";var e=this.map.getCanvasContainer(),t=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.div.style.width=t.style.width,this.div.style.height=t.style.height,this.div.className="themeLayer",this.div.width=parseInt(t.width),this.div.height=parseInt(t.height),e.appendChild(this.div),this.setOpacity(this.opacity),this.levelRenderer=new El,this.renderer=this.levelRenderer.init(this.div),this.renderer.clear()}},{key:"destroyFeatures",value:function(e){if(void 0===e&&(e=this.features),e){this.removeFeatures(e),Array.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--)e[t].destroy()}}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,this.display(e),this.redrawThematicFeatures(this.map.getBounds()))}},{key:"display",value:function(e){this.div.style.display=e?"block":"none"}},{key:"setOpacity",value:function(e){if(e!==this.opacity){this.opacity=e;var t=this.div;w.modifyDOMElement(t,null,null,null,null,null,null,e),null!==this.map&&O().Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}}},{key:"addFeatures",value:function(e){}},{key:"removeFeatures",value:function(e){var t=this;if(e){if(e===t.features)return t.removeAllFeatures();w.isArray(e)||"function"==typeof e||(e=[e]);for(var n=[],r=0;r<t.features.length;r++){var o=t.features[r];if(e&&"function"==typeof e)e(o)&&t.features.splice(r--,1);else-1===w.indexOf(e,o)?n.push(o):t.features.splice(r--,1)}for(var i=[],a=0,s=this.features.length;a<s;a++)o=this.features[a],i.push(o);this.features=[],this.addFeatures(i),this.renderer&&this.redrawThematicFeatures(this.map.getBounds());var l=0==n.length;O().Evented.prototype.fire("featuresremoved",{features:n,succeed:l})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],O().Evented.prototype.fire("featuresremoved",{features:[],succeed:!0})}},{key:"getFeatures",value:function(e){for(var t=this.features.length,n=[],r=0;r<t;++r)(!e||e&&"function"==typeof e&&e(this.features[r]))&&n.push(this.features[r]);return n}},{key:"getFeatureBy",value:function(e,t){var n=null;for(var r in this.features)if(this.features[r][e]===t){n=this.features[r];break}return n}},{key:"getFeatureById",value:function(e){return this.getFeatureBy("id",e)}},{key:"getFeaturesByAttribute",value:function(e,t){var n,r=[];for(var o in this.features)(n=this.features[o])&&n.attributes&&n.attributes[e]===t&&r.push(n);return r}},{key:"redrawThematicFeatures",value:function(e){}},{key:"on",value:function(e,t,n){return this.renderer?this.renderer.on(e,t):this.map.on(e,t),this}},{key:"off",value:function(e,t,n){return this.renderer?this.renderer.un(e,t):this.map.off(e,t),this}},{key:"addTFEvents",value:function(){for(var e=this.TFEvents,t=e.length,n=0;n<t;n++)this.renderer.on(e[n][0],e[n][1])}},{key:"getLocalXY",value:function(e){var t,n=this.map;if(e instanceof Me||e instanceof mr){var r=n.project(new(O().LngLat)(e.x,e.y));t=[r.x,r.y]}if(e instanceof xe){var o=n.project(new(O().LngLat)(e.lon,e.lat));t=[o.x,o.y]}return t}},{key:"toiClientFeature",value:function(e){w.isArray(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++)if(e[n]instanceof xr)t.push(e[n].toFeature());else if(e[n]instanceof Et)t.push(e[n]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[n].type)){var r=new lr;t=t.concat(r.read(e[n]))}else{if(!e[n].geometry||!e[n].geometry.parts)throw new Error("features's type is not be supported.");t.push(Ml.fromJson(e[n]).toFeature())}return t}},{key:"toFeature",value:function(e){return this.toiClientFeature(e)}},{key:"moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.div.style.transform="",this.redrawThematicFeatures(this.map.getBounds()),this._show())}},{key:"moveStartEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new(O().LngLat)(0,0));this.startMoveX=e.x,this.startMoveY=e.y}}},{key:"moveEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){if(!this.rotating&&!this.zooming){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing,n=this.map.project(new(O().LngLat)(0,0)),r=n.x-this.startMoveX,o=n.y-this.startMoveY;this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg) translate3d("+r+"px, "+o+"px, 0px)"}}else this.redrawThematicFeatures(this.map.getBounds())}},{key:"zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"rotateEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}}},{key:"rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.div.style.width=e.style.width,this.div.style.height=e.style.height,this.div.width=parseInt(e.width),this.div.height=parseInt(e.height),this.renderer.resize()}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.div),this.removeAllFeatures()}},{key:"moveTo",value:function(e,t){var n=document.getElementById(this.div.id);if(t=void 0===t||t){var r=document.getElementById(e);n&&r&&r.parentNode.insertBefore(n,r)}else{var o=document.getElementById(e);if(n){if(o.nextSibling)return void o.parentNode.insertBefore(n,o.nextSibling);o.parentNode.appendChild(n)}}}},{key:"_hide",value:function(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function(){this.renderer.painter.root.style.display="block"}}])&&Rl(t.prototype,n),r&&Rl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jl(e){"@babel/helpers - typeof";return(jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ll(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dl(){return(Dl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Nl(e,t){return(Nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fl(e);if(t){var o=Fl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fl(e){return(Fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Gl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nl(e,t)}(i,Il);var t,n,r,o=Bl(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,n)).chartsSetting=n.chartsSetting||{},r.themeFields=n.themeFields||null,r.overlayWeightField=n.overlayWeightField||null,r.isOverLay=void 0===n.isOverLay||n.isOverLay,r.charts=n.charts||[],r.cache=n.cache||{},r.chartsType=t,r}return t=i,(n=[{key:"setChartsType",value:function(e){this.chartsType=e,this.redraw()}},{key:"addFeatures",value:function(e){!1!==O().Evented.prototype.fire("beforefeaturesadded",{features:e})&&(this.features=this.toiClientFeature(e),this.renderer&&this.redrawThematicFeatures(this.map.getBounds()))}},{key:"redrawThematicFeatures",value:function(){this.clearCache(),this.renderer.clearAll();for(var e=this.features,t=0,n=e.length;t<n;t++){var r=e[t],o=this.cache,i=r.id;if(!o[i]){o[i]=i;var a=this.createThematicFeature(r);a&&this.overlayWeightField&&r.attributes[this.overlayWeightField]&&!isNaN(r.attributes[this.overlayWeightField])&&(a.__overlayWeight=r.attributes[this.overlayWeightField]),a&&this.charts.push(a)}}this.drawCharts()}},{key:"createThematicFeature",value:function(e){var t;return wr[this.chartsType]&&this.themeFields&&this.chartsSetting&&(t=new wr[this.chartsType](e,this,this.themeFields,this.chartsSetting)),!!t&&(t.assembleShapes(),t)}},{key:"drawCharts",value:function(){if(this.renderer){var e=this.charts;if(this.overlayWeightField&&e.sort(function(e,t){return void 0===e.__overlayWeight&&void 0===t.__overlayWeight?0:void 0!==e.__overlayWeight&&void 0===t.__overlayWeight?-1:void 0===e.__overlayWeight&&void 0!==t.__overlayWeight?1:void 0!==e.__overlayWeight&&void 0!==t.__overlayWeight?parseFloat(e.__overlayWeight)<parseFloat(t.__overlayWeight)?1:-1:0}),this.isOverLay)for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n],i=o.resetLocation(),a=o.chartBounds,s=[{x:a.left,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom},{x:a.right,y:a.top},{x:a.left,y:a.top}],l=!1;if(0!==n)for(var u=0;u<t.length;u++)if(this.isQuadrilateralOverLap(s,t[u])){l=!0;break}if(!l){t.push(s);for(var c=o.shapes,f=0,h=c.length;f<h;f++)c[f].refOriginalPosition=i,this.renderer.addShape(c[f])}}else for(var p=0,d=e.length;p<d;p++)for(var y=e[p],v=y.resetLocation(),g=y.shapes,m=0,b=g.length;m<b;m++)g[m].refOriginalPosition=v,this.renderer.addShape(g[m]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(e){var t=[],n=this.renderer.getAllShapes();if(!e)return n;for(var r=0,o=n.length;r<o;r++){var i=n[r];i.refDataID&&e===i.refDataID&&t.push(i)}return t}},{key:"isQuadrilateralOverLap",value:function(e,t){var n=e.length,r=t.length;if(5!==n||5!==r)return null;for(var o=!1,i=0;i<n;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<r;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<n-1&&!o;s++)for(var l=0;l<r-1;l++){if("SuperMap.Geometry.Point"===w.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var n=!1,r=-1,o=t.length,i=o-1;++r<o;i=r)(t[r].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[r].y)&&e.x<(t[i].x-t[r].x)*(e.y-t[r].y)/(t[i].y-t[r].y)+t[r].x&&(n=!n);return n}},{key:"isChartInMap",value:function(e,t){for(var n=e,r=!1,o=0,i=t.length;o<i;o++){var a=t[o];if(a.x>=n.left&&a.x<=n.right&&a.y>=n.top&&a.y<=n.bottom){r=!0;break}}return r}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(e){this.clearCache(),Dl(Fl(i.prototype),"removeFeatures",this).call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Dl(Fl(i.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getBounds()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}}])&&Ll(t.prototype,n),r&&Ll(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function zl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Vl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&zl(t.prototype,n),r&&zl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hl(e){"@babel/helpers - typeof";return(Hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ul(){return(Ul="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Jl(e,t){return(Jl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ql(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Yl(e);if(t){var o=Yl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Yl(e){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Xl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jl(e,t)}(i,Vl);var t,n,r,o=ql(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).x=isNaN(e)?0:e,n.y=isNaN(t)?0:t,n.r=6,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",n}return t=i,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Ul(Yl(i.prototype),"destroy",this).call(this)}}])&&Wl(t.prototype,n),r&&Wl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zl(e){"@babel/helpers - typeof";return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kl(){return(Kl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function $l(e,t){return($l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=tu(e);if(t){var o=tu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function tu(e){return(tu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var nu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$l(e,t)}(i,Vl);var t,n,r,o=eu(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).pointList=e,t.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",t}return t=i,(n=[{key:"destroy",value:function(){this.pointList=null,Kl(tu(i.prototype),"destroy",this).call(this)}}])&&Ql(t.prototype,n),r&&Ql(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ru(e){"@babel/helpers - typeof";return(ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ou(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iu(){return(iu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function au(e,t){return(au=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function su(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=lu(e);if(t){var o=lu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ru(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function lu(e){return(lu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var uu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&au(e,t)}(i,Vl);var t,n,r,o=su(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).pointList=e,t.holePolygonPointLists=null,t.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",t}return t=i,(n=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,iu(lu(i.prototype),"destroy",this).call(this)}}])&&ou(t.prototype,n),r&&ou(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function cu(e){"@babel/helpers - typeof";return(cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hu(){return(hu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function pu(e,t){return(pu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function du(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=yu(e);if(t){var o=yu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===cu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function yu(e){return(yu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var vu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pu(e,t)}(i,Vl);var t,n,r,o=du(i);function i(e,t,n,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,n,r)).x=isNaN(e)?0:e,a.y=isNaN(e)?0:t,a.width=isNaN(n)?0:n,a.height=isNaN(r)?0:r,a.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",a}return t=i,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,hu(yu(i.prototype),"destroy",this).call(this)}}])&&fu(t.prototype,n),r&&fu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function gu(e){"@babel/helpers - typeof";return(gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bu(){return(bu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function wu(e,t){return(wu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=xu(e);if(t){var o=xu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xu(e){return(xu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Su=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wu(e,t)}(i,Vl);var t,n,r,o=_u(i);function i(e,t,n,r,a,s,l){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,e,t,n,r,a,s,l)).x=isNaN(e)?0:e,u.y=isNaN(t)?0:t,u.r=isNaN(n)?0:n,u.startAngle=isNaN(r)?0:r,u.endAngle=isNaN(a)?0:a,u.r0=isNaN(s)?0:s,u.clockWise=l,u.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",u}return t=i,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,bu(xu(i.prototype),"destroy",this).call(this)}}])&&mu(t.prototype,n),r&&mu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ou(e){"@babel/helpers - typeof";return(Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tu(){return(Tu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Eu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ku(e,t){return(ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Cu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Eu(e);if(t){var o=Eu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ou(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Eu(e){return(Eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Au=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ku(e,t)}(i,Vl);var t,n,r,o=Cu(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n)).x=e,r.y=t,r.text=n,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",r}return t=i,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,Tu(Eu(i.prototype),"destroy",this).call(this)}}])&&Pu(t.prototype,n),r&&Pu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Mu(e){"@babel/helpers - typeof";return(Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iu(){return(Iu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Du(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ju(e,t){return(ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Lu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Du(e);if(t){var o=Du(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Mu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Du(e){return(Du=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Nu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ju(e,t)}(i,Vl);var t,n,r,o=Lu(i);function i(e,t,n,r,a,s,l,u,c){var f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(f=o.call(this,e,t,n,r,a,s,l,u,c)).x=e,f.y=t,f.image=n,f.width=r,f.height=a,f.sx=s,f.sy=l,f.sWidth=u,f.sHeight=c,f.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",f}return t=i,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,Iu(Du(i.prototype),"destroy",this).call(this)}}])&&Ru(t.prototype,n),r&&Ru(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bu(e){"@babel/helpers - typeof";return(Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gu(){return(Gu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function zu(e,t){return(zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Hu(e);if(t){var o=Hu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Hu(e){return(Hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Wu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zu(e,t)}(i,Vl);var t,n,r,o=Vu(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n)).x=isNaN(e)?0:e,r.y=isNaN(t)?0:t,r.r=isNaN(n)?0:n,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",r}return t=i,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Gu(Hu(i.prototype),"destroy",this).call(this)}}])&&Fu(t.prototype,n),r&&Fu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Uu(e){"@babel/helpers - typeof";return(Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ju(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qu(){return(qu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Yu(e,t){return(Yu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Zu(e);if(t){var o=Zu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Uu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Zu(e){return(Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Qu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yu(e,t)}(i,Vs);var t,n,r,o=Xu(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicpoint",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",t}return t=i,(n=[{key:"destroy",value:function(){this.type=null,qu(Zu(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;e.arc(t.x+n[0],t.y+n[1],t.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+n[0]-e.r-t/2),y:Math.round(e.y+n[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect)}}])&&Ju(t.prototype,n),r&&Ju(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ku(e){"@babel/helpers - typeof";return(Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ec(){return(ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function tc(e,t){return(tc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=rc(e);if(t){var o=rc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ku(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rc(e){return(rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tc(e,t)}(i,Vs);var t,n,r,o=nc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smictext",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",t}return t=i,(n=[{key:"destroy",value:function(){this.type=null,ec(rc(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=this.style;if(t&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),void 0!==r.text&&!1!==r.text){e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r.textFont&&(e.font=r.textFont),e.textAlign=r.textAlign||"start",e.textBaseline=r.textBaseline||"middle";var o,i=(r.text+"").split("\n"),a=eo.Util_area.getTextHeight("ZH",r.textFont),s=this.getRectNoRotation(r),l=r.x+n[0];o="top"==r.textBaseline?s.y:"bottom"==r.textBaseline?s.y+a:s.y+a/2;for(var u=r.x+n[0],c=r.y+n[1],f=0,h=i.length;f<h;f++){switch(r.labelRect&&(e.fillRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=r.strokeColor,e.strokeRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=r.textColor),r.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),r.textRotation&&0!==r.textRotation?(e.save(),e.translate(u,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?e.strokeText(i[f],0,a*f,r.maxWidth):e.strokeText(i[f],0,a*f):"bottom"==r.textBaseline?r.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height,r.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height):r.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):r.maxWidth?e.strokeText(i[f],l,o,r.maxWidth):e.strokeText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",r);break;case"both":r.textRotation&&0!==r.textRotation?(e.save(),e.translate(u,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(i[f],0,a*f,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(i[f],0,a*f,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",r)):"bottom"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(i[f],0,a*(f+1)-s.height,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(i[f],0,a*(f+1)-s.height,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",r)):r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",r)),e.restore()):r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(i[f],l,o,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(i[f],l,o,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",r));break;default:this.setCtxGlobalAlpha(e,"fill",r),r.textRotation&&0!==r.textRotation?(e.save(),e.translate(u,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?e.fillText(i[f],0,a*f,r.maxWidth):e.fillText(i[f],0,a*f):"bottom"==r.textBaseline?r.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height,r.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height):r.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):r.maxWidth?e.fillText(i[f],l,o,r.maxWidth):e.fillText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",r)}o+=a}e.restore()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;for(var t,n,r,o,i=this.getTextBackground(e,!0),a=0,s=i.length;a<s;a++){var l=i[a];0==a?(t=l[0],r=l[0],n=l[1],o=l[1]):(l[0]<t&&(t=l[0]),l[0]>r&&(r=l[0]),l[1]<n&&(n=l[1]),l[1]>o&&(o=l[1]))}return e.__rect={x:t,y:n,width:r-t,height:o-n},e.__rect}},{key:"getRectNoRotation",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition,r=eo.Util_area.getTextHeight("ZH",e.textFont),o=eo.Util_area.getTextWidth(e.text,e.textFont),i=eo.Util_area.getTextHeight(e.text,e.textFont),a=e.x+n[0];"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2),t="top"==e.textBaseline?e.y+n[1]:"bottom"==e.textBaseline?e.y+n[1]-i:e.y+n[1]-i/2;var s,l=!1;if(e.maxWidth){var u=parseInt(e.maxWidth);u<o&&(s=o,l=!0,o=u),a=e.x+n[0],"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2)}e.textFont&&(e.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===l?r/3*(o/s):r/3));return{x:a,y:t,width:o,height:i}}},{key:"getTextBackground",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;if(!t&&e.__textBackground)return e.__textBackground;var r=this.getRectNoRotation(e),o=e.x+n[0],i=e.y+n[1],a=[];if(e.textRotation&&0!==e.textRotation){var s=e.textRotation,l=this.getRotatedLocation(r.x,r.y,o,i,s),u=this.getRotatedLocation(r.x+r.width,r.y,o,i,s),c=this.getRotatedLocation(r.x+r.width,r.y+r.height,o,i,s),f=this.getRotatedLocation(r.x,r.y+r.height,o,i,s);a.push(l),a.push(u),a.push(c),a.push(f)}else{var h=[r.x,r.y],p=[r.x+r.width,r.y],d=[r.x+r.width,r.y+r.height],y=[r.x,r.y+r.height];a.push(h),a.push(p),a.push(d),a.push(y)}return e.__textBackground=a,e.__textBackground}},{key:"getRotatedLocation",value:function(e,t,n,r,o){var i,a,s=new Array;return t=-t,r=-r,o=-o,i=(e-n)*Math.cos(o/180*Math.PI)-(t-r)*Math.sin(o/180*Math.PI)+n,a=(e-n)*Math.sin(o/180*Math.PI)+(t-r)*Math.cos(o/180*Math.PI)+r,s[0]=i,s[1]=-a,s}}])&&$u(t.prototype,n),r&&$u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ic(e){"@babel/helpers - typeof";return(ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sc(){return(sc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function lc(e,t){return(lc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=cc(e);if(t){var o=cc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ic(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cc(e){return(cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lc(e,t)}(i,Vs);var t,n,r,o=uc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smiccircle",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",t}return t=i,(n=[{key:"destroy",value:function(){this.type=null,sc(cc(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.x+n[0],o=t.y+n[1];return e.moveTo(r+t.r,o),e.arc(r,o,t.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition,r=e.x+n[0],o=e.y+n[1],i=e.r;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(r-i-t/2),y:Math.round(o-i-t/2),width:2*i+t,height:2*i+t},e.__rect}}])&&ac(t.prototype,n),r&&ac(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hc(e){"@babel/helpers - typeof";return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dc(){return(dc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function yc(e,t){return(yc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=gc(e);if(t){var o=gc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===hc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function gc(e){return(gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var mc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yc(e,t)}(i,Vs);var t,n,r,o=vc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicpolygon",t.holePolygonPointLists=null,t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",t}return t=i,(n=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,dc(gc(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.style;t&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),e.save(),this.setContext(e,n),this.setTransform(e);var r=!1;"fill"!=n.brushType&&"both"!=n.brushType&&void 0!==n.brushType||(e.beginPath(),"dashed"==n.lineType||"dotted"==n.lineType||"dot"==n.lineType||"dash"==n.lineType||"dashdot"==n.lineType||"longdash"==n.lineType||"longdashdot"==n.lineType?this.buildPath(e,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList}):(this.buildPath(e,n),r=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",n),e.fill(),this.setCtxGlobalAlpha(e,"reset",n)),n.lineWidth>0&&("stroke"==n.brushType||"both"==n.brushType)&&(r||(e.beginPath(),this.buildPath(e,n)),this.setCtxGlobalAlpha(e,"stroke",n),e.stroke(),this.setCtxGlobalAlpha(e,"reset",n)),this.drawText(e,n,this.style);var o=w.cloneObject(n);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var l=i[s];o.pointList=l,e.globalCompositeOperation="destination-out",r=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(e.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(e,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(e,o),r=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",o),e.fill(),this.setCtxGlobalAlpha(e,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(r||(e.beginPath(),this.buildPath(e,o)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",o),e.stroke(),this.setCtxGlobalAlpha(e,"reset",o)):e.globalCompositeOperation="source-over"}e.restore()}},{key:"buildPath",value:function(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.pointList;if(!(r.length<2))if(t.smooth&&"spline"!==t.smooth){var o,i,a,s=eo.SUtil_smoothBezier(r,t.smooth,!0,t.smoothConstraint,n);e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var l=r.length,u=0;u<l;u++)o=s[2*u],i=s[2*u+1],a=[r[(u+1)%l][0]+n[0],r[(u+1)%l][1]+n[1]],e.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===t.smooth&&(r=eo.SUtil_smoothSpline(r,!0,null,n)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=c;var f=t.lineWidth||1,h=f,p=f;"dashed"===t.lineType&&(h*=5,p*=5,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f),"dot"===t.lineType&&(p*=4,t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f)),"dash"===t.lineType&&(h*=4,p*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),"longdash"===t.lineType&&(h*=8,p*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var d=1;d<r.length;d++)eo.SUtil_dashedLineTo(e,r[d-1][0]+n[0],r[d-1][1]+n[1],r[d][0]+n[0],r[d][1]+n[1],f,[h,p]);eo.SUtil_dashedLineTo(e,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],f,[h,p])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var y=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=y;var v=t.lineWidth||1,g=v,m=v,b=v,w=v;"dashdot"===t.lineType&&(g*=4,m*=4,w*=4,t.lineCap&&"butt"!==t.lineCap&&(g-=v,m+=v,b=1,w+=v)),"longdashdot"===t.lineType&&(g*=8,m*=4,w*=4,t.lineCap&&"butt"!==t.lineCap&&(g-=v,m+=v,b=1,w+=v)),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var _=1;_<r.length;_++)eo.SUtil_dashedLineTo(e,r[_-1][0]+n[0],r[_-1][1]+n[1],r[_][0]+n[0],r[_][1]+n[1],v,[g,m,b,w]);eo.SUtil_dashedLineTo(e,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],v,[g,m,b,w])}}else{e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var x=1;x<r.length;x++)e.lineTo(r[x][0]+n[0],r[x][1]+n[1]);e.lineTo(r[0][0]+n[0],r[0][1]+n[1])}}},{key:"getRect",value:function(e,t){var n;if(t?n=t:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),n=this.refOriginalPosition),e.__rect)return e.__rect;for(var r,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=e.pointList,u=0,c=l.length;u<c;u++)l[u][0]+n[0]<o&&(o=l[u][0]+n[0]),l[u][0]+n[0]>i&&(i=l[u][0]+n[0]),l[u][1]+n[1]<a&&(a=l[u][1]+n[1]),l[u][1]+n[1]>s&&(s=l[u][1]+n[1]);return r="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(o-r/2),y:Math.round(a-r/2),width:i-o+r,height:s-a+r},e.__rect}}])&&pc(t.prototype,n),r&&pc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bc(e){"@babel/helpers - typeof";return(bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _c(){return(_c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function xc(e,t){return(xc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Sc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Oc(e);if(t){var o=Oc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===bc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Oc(e){return(Oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Pc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xc(e,t)}(i,Vs);var t,n,r,o=Sc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).brushTypeOnly="stroke",t.textPosition="end",t.type="smicbroken-line",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",t}return t=i,(n=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,_c(Oc(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.pointList;if(!(r.length<2)){var o=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var i,a,s,l=eo.SUtil_smoothBezier(r,t.smooth,!1,t.smoothConstraint,n);e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var u=0;u<o-1;u++)i=l[2*u],a=l[2*u+1],s=[r[u+1][0]+n[0],r[u+1][1]+n[1]],e.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===t.smooth&&(o=(r=eo.SUtil_smoothSpline(r,null,null,n)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t.lineWidth||1,f=c,h=c;"dashed"===t.lineType&&(f*=5,h*=5,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c),"dot"===t.lineType&&(h*=4,t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c)),"dash"===t.lineType&&(f*=4,h*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),"longdash"===t.lineType&&(f*=8,h*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var p=1;p<o;p++)eo.SUtil_dashedLineTo(e,r[p-1][0]+n[0],r[p-1][1]+n[1],r[p][0]+n[0],r[p][1]+n[1],c,[f,h])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var d=t.lineWidth||1,y=d,v=d,g=d,m=d;"dashdot"===t.lineType&&(y*=4,v*=4,m*=4,t.lineCap&&"butt"!==t.lineCap&&(y-=d,v+=d,g=1,m+=d)),"longdashdot"===t.lineType&&(y*=8,v*=4,m*=4,t.lineCap&&"butt"!==t.lineCap&&(y-=d,v+=d,g=1,m+=d)),d=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var b=1;b<o;b++)eo.SUtil_dashedLineTo(e,r[b-1][0]+n[0],r[b-1][1]+n[1],r[b][0]+n[0],r[b][1]+n[1],d,[y,v,g,m])}}else{e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var w=1;w<o;w++)e.lineTo(r[w][0]+n[0],r[w][1]+n[1])}}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return mc.prototype.getRect.apply(this,[e,t])}}])&&wc(t.prototype,n),r&&wc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Tc(e){"@babel/helpers - typeof";return(Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cc(){return(Cc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Ec(e,t){return(Ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ac(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Mc(e);if(t){var o=Mc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Tc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Mc(e){return(Mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Rc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ec(e,t)}(i,Vs);var t,n,r,o=Ac(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicrectangle",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",t}return t=i,(n=[{key:"destroy",value:function(){this.type=null,Cc(Mc(i.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n,r,o,i,a,s=this.refOriginalPosition,l=t.x+s[0],u=t.y+s[1],c=t.width,f=t.height,h=t.radius;"number"==typeof h?n=r=o=i=h:h instanceof Array?1===h.length?n=r=o=i=h[0]:2===h.length?(n=o=h[0],r=i=h[1]):3===h.length?(n=h[0],r=i=h[1],o=h[2]):(n=h[0],r=h[1],o=h[2],i=h[3]):n=r=o=i=0,n+r>c&&(n*=c/(a=n+r),r*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),r+o>f&&(r*=f/(a=r+o),o*=f/a),n+i>f&&(n*=f/(a=n+i),i*=f/a),e.moveTo(l+n,u),e.lineTo(l+c-r,u),0!==r&&e.quadraticCurveTo(l+c,u,l+c,u+r),e.lineTo(l+c,u+f-o),0!==o&&e.quadraticCurveTo(l+c,u+f,l+c-o,u+f),e.lineTo(l+i,u+f),0!==i&&e.quadraticCurveTo(l,u+f,l,u+f-i),e.lineTo(l,u+n),0!==n&&e.quadraticCurveTo(l,u,l+n,u)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+n[0],t.y+n[1]),e.lineTo(t.x+n[0]+t.width,t.y+n[1]),e.lineTo(t.x+n[0]+t.width,t.y+n[1]+t.height),e.lineTo(t.x+n[0],t.y+n[1]+t.height),e.lineTo(t.x+n[0],t.y+n[1])),e.closePath()}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+n[0]-t/2),y:Math.round(e.y+n[1]-t/2),width:e.width+t,height:e.height+t},e.__rect)}}])&&kc(t.prototype,n),r&&kc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ic(e){"@babel/helpers - typeof";return(Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lc(){return(Lc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Dc(e,t){return(Dc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Bc(e);if(t){var o=Bc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ic(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Bc(e){return(Bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Fc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dc(e,t)}(i,Vs);var t,n,r,o=Nc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicsector",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",t}return t=i,(n=[{key:"destroy",value:function(){this.type=null,Lc(Bc(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.x+n[0],o=t.y+n[1],i=t.r0||0,a=t.r,s=t.startAngle,l=t.endAngle,u=t.clockWise||!1;s=eo.Util_math.degreeToRadian(s),l=eo.Util_math.degreeToRadian(l),u||(s=-s,l=-l);var c=eo.Util_math.cos(s),f=eo.Util_math.sin(s);e.moveTo(c*i+r,f*i+o),e.lineTo(c*a+r,f*a+o),e.arc(r,o,a,s,l,!u),e.lineTo(eo.Util_math.cos(l)*i+r,eo.Util_math.sin(l)*i+o),0!==i&&e.arc(r,o,i,l,s,u),e.closePath()}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition,n=eo.Util_vector.create(),r=eo.Util_vector.create(),o=eo.Util_vector.create(),i=eo.Util_vector.create(),a=e.x+t[0],s=e.y+t[1],l=e.r0||0,u=e.r,c=eo.Util_math.degreeToRadian(e.startAngle),f=eo.Util_math.degreeToRadian(e.endAngle),h=e.clockWise;return h||(c=-c,f=-f),l>1?eo.Util_computeBoundingBox.arc(a,s,l,c,f,!h,n,o):(n[0]=o[0]=a,n[1]=o[1]=s),eo.Util_computeBoundingBox.arc(a,s,u,c,f,!h,r,i),eo.Util_vector.min(n,n,r),eo.Util_vector.max(o,o,i),e.__rect={x:n[0],y:n[1],width:o[0]-n[0],height:o[1]-n[1]},e.__rect}}])&&jc(t.prototype,n),r&&jc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapeParameters=t,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var t,n,r;return t=e,r=[{key:"transformStyle",value:function(e){var t={},n=["normal","normal","normal","12","arial,sans-serif"],r=[!0,!1];for(var o in e)switch(o){case"fill":r[0]=e[o];break;case"fillColor":t.color=e[o];break;case"stroke":r[1]=e[o];break;case"strokeWidth":t.lineWidth=e[o];break;case"strokeLinecap":t.lineCap=e[o];break;case"strokeLineJoin":t.lineJoin=e[o];break;case"strokeDashstyle":t.lineType=e[o];break;case"pointRadius":t.r=e[o];break;case"label":t.text=e[o];break;case"labelRect":t.labelRect=e[o];break;case"fontColor":t.textColor=e[o];break;case"fontStyle":n[0]=e[o];break;case"fontVariant":n[1]=e[o];break;case"fontWeight":n[2]=e[o];break;case"fontSize":var i="";e[o]&&e[o].toString().indexOf("px")<0&&(i="px"),n[3]=e[o]+i;break;case"fontFamily":n[4]=e[o];break;case"fontOpacity":t.opacity=e[o];break;case"labelPosition":t.textPosition=e[o];break;case"labelAlign":t.textAlign=e[o];break;case"labelBaseline":t.textBaseline=e[o];break;case"labelRotation":t.textRotation=e[o];break;default:t[o]=e[o]}return t.textFont=n.join(" "),!0===r[0]&&!1===r[1]?t.brushType="fill":!1===r[0]&&!0===r[1]?t.brushType="stroke":!0===r[0]&&!0===r[1]?t.brushType="both":t.brushType="fill",null==t.lineWidth&&(t.lineWidth=1),t}},{key:"Background",value:function(e,t,n){var r=n||{},o=new vu(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return o.style={fillColor:"#f3f3f3"},r.backgroundStyle&&w.copyAttributesWithClip(o.style,r.backgroundStyle),r.backgroundRadius&&(o.style.radius=r.backgroundRadius),o.clickable=!1,o.hoverable=!1,e.createShape(o)}},{key:"GraphAxis",value:function(e,t,n,r){var o=t,i=n||{},a=[],s=[],l=!!i.useXReferenceLine&&i.useXReferenceLine,u=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==u){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var h=parseInt(i.axis3DParameter),p=[o[0]-h,o[1]+h];i.axisUseArrow?(c.push([p[0]+1.5,p[1]-7.5]),c.push([p[0]-1,p[1]+1]),c.push([p[0]+7.5,p[1]-1.5]),f.push([p[0],p[1]])):f.push([p[0],p[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var d=Math.abs(o[1]-o[3])/u,y=o[3];f.push([o[0],y-5]);for(var v=0;v<u;v++){if(f.push([o[0],y]),f.push([o[0]-5,y]),f.push([o[0],y]),l){var g=new nu([[o[0],y],[o[2],y]]);g.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},g.clickable=!1,g.hoverable=!1,i.xReferenceLineStyle&&w.copyAttributesWithClip(g.style,i.xReferenceLineStyle),a.push(e.createShape(g))}y+=d}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var m=parseInt(i.axis3DParameter),b=[o[0]-m,o[1]+m];i.axisUseArrow?(c.push([b[0]+1.5,b[1]-7.5]),c.push([b[0]-1,b[1]+1]),c.push([b[0]+7.5,b[1]-1.5]),f.push([b[0],b[1]])):f.push([b[0],b[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var _=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],x=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],S=new uu(_);S.style={fillColor:"#008acd"},w.copyAttributesWithClip(S.style,i.axisStyle),s.push(e.createShape(S));var O=new uu(x);if(O.style={fillColor:"#008acd"},w.copyAttributesWithClip(O.style,i.axisStyle),s.push(e.createShape(O)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var P=new uu(c);P.style={fillColor:"#008acd"},w.copyAttributesWithClip(P.style,i.axisStyle),s.push(e.createShape(P))}}var T=new nu(f);T.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&w.copyAttributesWithClip(T.style,i.axisStyle),T.clickable=!1,T.hoverable=!1;var k=[e.createShape(T)],C=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var E=i.axisYLabels,A=E.length,M=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(M=i.axisYLabelsOffset),1==A){var R=new Au(o[0]-5+M[0],o[3]+M[1],E[0]);R.style={labelAlign:"right"},i.axisYLabelsStyle&&w.copyAttributesWithClip(R.style,i.axisYLabelsStyle),R.clickable=!1,R.hoverable=!1,C.push(e.createShape(R))}else for(var I=o[3],j=Math.abs(o[1]-o[3])/(A-1),L=0;L<A;L++){var D=new Au(o[0]-5+M[0],I+M[1],E[L]);D.style={labelAlign:"right"},i.axisYLabelsStyle&&w.copyAttributesWithClip(D.style,i.axisYLabelsStyle),D.clickable=!1,D.hoverable=!1,C.push(e.createShape(D)),I+=j}}var N=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var B=i.axisXLabels,F=B.length,G=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(G=i.axisXLabelsOffset),r&&r.xPositions&&r.xPositions.length&&r.xPositions.length==F)for(var z=r.xPositions,V=0;V<F;V++){var H=new Au(z[V]+G[0],o[1]+G[1],B[V]);H.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&w.copyAttributesWithClip(H.style,i.axisXLabelsStyle),H.clickable=!1,H.hoverable=!1,N.push(e.createShape(H))}else if(1==F){var W=new Au(o[0]-5+G[0],o[1]+G[0],B[0]);W.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&w.copyAttributesWithClip(W.style,i.axisXLabelsStyle),W.clickable=!1,W.hoverable=!1,N.push(e.createShape(W))}else for(var U=o[0],J=Math.abs(o[2]-o[0])/(F-1),q=0;q<F;q++){var Y=new Au(U+G[0],o[1]+G[1],B[q]);Y.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&w.copyAttributesWithClip(Y.style,i.axisXLabelsStyle),Y.clickable=!1,Y.hoverable=!1,N.push(e.createShape(Y)),U+=J}}return a.concat(k).concat(C).concat(N).concat(s)}},{key:"ShapeStyleTool",value:function(e,t,n,r,o,i){var a=e||{};if(t&&w.copyAttributesWithClip(a,t),n&&n.length&&void 0!==o&&!isNaN(o)&&o>=0&&n[o]&&w.copyAttributesWithClip(a,n[o]),r&&r.length&&void 0!==i)for(var s=r,l=s.length,u=parseFloat(i),c=0;c<l;c++)if(s[c].start<=u&&u<s[c].end){w.copyAttributesWithClip(a,s[c].style);break}return a}}],(n=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(t){if(t&&(this.shapeParameters=t),!this.shapeParameters)return null;var n=this.shapeParameters;if(n instanceof Xl){var r=new Object;r.x=n.x,r.y=n.y,r.r=n.r,r=w.copyAttributesWithClip(r,n.style,["x","y"]);var o=new Qu;return o.style=e.transformStyle(r),o.highlightStyle=e.transformStyle(n.highlightStyle),w.copyAttributesWithClip(o,n,["x","y","style","highlightStyle"]),o}if(n instanceof nu){if(!n.pointList)return null;var i=new Object;i.pointList=n.pointList,i=w.copyAttributesWithClip(i,n.style,["pointList"]);var a=new Pc;return a.style=e.transformStyle(i),a.highlightStyle=e.transformStyle(n.highlightStyle),w.copyAttributesWithClip(a,n,["pointList","style","highlightStyle"]),a}if(n instanceof uu){if(!n.pointList)return null;var s=new Object;s.pointList=n.pointList,s=w.copyAttributesWithClip(s,n.style,["pointList"]);var l=new mc;return l.style=e.transformStyle(s),l.highlightStyle=e.transformStyle(n.highlightStyle),w.copyAttributesWithClip(l,n,["pointList","style","highlightStyle"]),l}if(n instanceof vu){if(!n.x&&!n.y&!n.width&!n.height)return null;var u=new Object;u.x=n.x,u.y=n.y,u.width=n.width,u.height=n.height,u=w.copyAttributesWithClip(u,n.style,["x","y","width","height"]);var c=new Rc;return c.style=e.transformStyle(u),c.highlightStyle=e.transformStyle(n.highlightStyle),w.copyAttributesWithClip(c,n,["x","y","width","height","style","highlightStyle"]),c}if(n instanceof Su){var f=new Object;f.x=n.x,f.y=n.y,f.r=n.r,f.startAngle=n.startAngle,f.endAngle=n.endAngle,n.r0&&(f.r0=n.r0),n.clockWise&&(f.clockWise=n.clockWise),f=w.copyAttributesWithClip(f,n.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var h=new Fc;return h.style=e.transformStyle(f),h.highlightStyle=e.transformStyle(n.highlightStyle),w.copyAttributesWithClip(h,n,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),h}if(n instanceof Au){var p=new Object;p.x=n.x,p.y=n.y,p.text=n.text,p=w.copyAttributesWithClip(p,n.style,["x","y","text"]);var d=new oc;return d.style=e.transformStyle(p),d.highlightStyle=e.transformStyle(n.highlightStyle),w.copyAttributesWithClip(d,n,["x","y","text","style","highlightStyle"]),d}if(n instanceof Nu){var y=new Object;y.x=n.x,y.y=n.y,n.image&&(y.image=n.image),n.width&&(y.width=n.width),n.height&&(y.height=n.height),n.sx&&(y.sx=n.sx),n.sy&&(y.sy=n.sy),n.sWidth&&(y.sWidth=n.sWidth),n.sHeight&&(y.sHeight=n.sHeight),y=w.copyAttributesWithClip(y,n.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var v=new Xs;return v.style=e.transformStyle(y),v.highlightStyle=e.transformStyle(n.highlightStyle),w.copyAttributesWithClip(v,n,["x","y","image","width","height","style","highlightStyle"]),v}if(n instanceof Wu){var g=new Object;g.x=n.x,g.r=n.r,g.y=n.y,g=w.copyAttributesWithClip(g,n.style,["x","y","r"]);var m=new fc;return m.style=e.transformStyle(g),m.highlightStyle=e.transformStyle(n.highlightStyle),w.copyAttributesWithClip(m,n,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),m}return null}}])&&Gc(t.prototype,n),r&&Gc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vc(e){"@babel/helpers - typeof";return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wc(){return(Wc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Uc(e,t){return(Uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Xc(e);if(t){var o=Xc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qc(this,n)}}function qc(e,t){if(t&&("object"===Vc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yc(e)}function Yc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xc(e){return(Xc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Zc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uc(e,t)}(i,wr);var t,n,r,o=Jc(i);function i(e,t,n,r,a){var s;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s=o.call(this,e,t),!e.geometry)return qc(s);if(!(e.geometry instanceof l))return qc(s);s.dataBounds=e.geometry.getBounds(),s.nodesClipPixel=2,s.isHoverAble=!0,s.isMultiHover=!0,s.isClickAble=!0,s.highlightStyle=null,s.shapeOptions={},s.style=n||{},s.CLASS_NAME="SuperMap.Feature.Theme.Vector",s.style=n||{},r&&w.copyAttributesWithClip(Yc(s),r,["shapeOptions","dataBounds"]),a&&w.copyAttributesWithClip(s.shapeOptions,a);var u=e.geometry;return s.lonlat=s.dataBounds.getCenterLonLat(),s.location=s.getLocalXY(s.lonlat),u instanceof ct?s.lineToTF(u):u instanceof rt?s.lineToTF(u):u instanceof Ze||(u instanceof We?s.multiPointToTF(u):u instanceof Ht?s.multiLineStringToTF(u):u instanceof Xt?s.multiPolygonToTF(u):u instanceof vt?s.polygonToTF(u):u instanceof Be||(u instanceof Me?s.pointToTF(u):u instanceof bo?s.rectangleToTF(u):u instanceof mr&&s.geoTextToTF(u))),s}return t=i,(n=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,Wc(Xc(i.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(e){for(var t=e.components,n=[],r=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(r=[],n=this.getLocalXY(l),r[0]=n[0]-o[0],r[1]=n[1]-o[1],i.length>0){var u=i[i.length-1];if(Math.abs(u[0]-r[0])<=a&&Math.abs(u[1]-r[1])<=a)continue}i.push(r)}if(i.length<2)return null;var c=new Object;(c=w.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new Pc({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&w.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(e){for(var t=e.components,n=[],r=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(r=[],n=this.getLocalXY(l),r[0]=n[0]-o[0],r[1]=n[1]-o[1],i.length>0){var u=i[i.length-1];if(Math.abs(u[0]-r[0])<=a&&Math.abs(u[1]-r[1])<=a)continue}i.push(r);var c=new Object;c.r=6,(c=w.copyAttributesWithClip(c,this.style)).x=r[0],c.y=r[1];var f=new Qu({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&w.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(e){for(var t=e.components,n=0;n<t.length;n++){var r=t[n];this.lineToTF(r)}}},{key:"multiPolygonToTF",value:function(e){for(var t=e.components,n=0;n<t.length;n++){var r=t[n];this.polygonToTF(r)}}},{key:"pointToTF",value:function(e){var t=this.location,n=this.getLocalXY(e),r=new Object;r.r=6,(r=w.copyAttributesWithClip(r,this.style)).x=n[0]-t[0],r.y=n[1]-t[1];var o=new Qu({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&w.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(e){for(var t=e.components,n=[],r=[],o=this.location,i=[],a=[],s=[],l=this.nodesClipPixel,u=0;u<t.length;u++){var c=t[u].components;if(0===u){i=[];for(var f=0;f<c.length;f++){if(r=[],n=this.getLocalXY(c[f]),r[0]=n[0]-o[0],r[1]=n[1]-o[1],i.length>0){var h=i[i.length-1];if(Math.abs(h[0]-r[0])<=l&&Math.abs(h[1]-r[1])<=l)continue}i.push(r)}}else{a=[];for(var p=0;p<c.length;p++){if(r=[],n=this.getLocalXY(c[p]),r[0]=n[0]-o[0],r[1]=n[1]-o[1],a.length>0){var d=a[a.length-1];if(Math.abs(d[0]-r[0])<=l&&Math.abs(d[1]-r[1])<=l)continue}a.push(r)}}a.length<2||s.push(a)}if(!(i.length<2)){var y={};(y=w.copyAttributesWithClip(y,this.style,["pointList"])).pointList=i;var v=new mc({style:y,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(v.highlightStyle=this.highlightStyle),v.refOriginalPosition=this.location,v.refDataID=this.data.id,v.isHoverByRefDataID=this.isMultiHover,s.length>0&&(v.holePolygonPointLists=s),this.shapeOptions&&w.copyAttributesWithClip(v,this.shapeOptions),this.shapes.push(v)}}},{key:"rectangleToTF",value:function(e){var t=this.location,n=new xe(e.x,e.y),r=this.layer.map.getResolution(),o=this.getLocalXY(n),i=new Object;i.r=6,(i=w.copyAttributesWithClip(i,this.style)).x=o[0]-t[0],i.y=o[1]-t[1]-2*e.width/r,i.width=e.width/r,i.height=e.height/r;var a=new Rc({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=t,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&w.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(e){var t=this.location,n=this.getLocalXY(e),r=new Object;r.r=6,(r=w.copyAttributesWithClip(r,this.style,["x","y","text"])).x=n[0]-t[0],r.y=n[1]-t[1],r.text=e.text;var o=new oc({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&w.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,n=0,r=this.shapes.length;n<r;n++){var o=this.shapes[n];o.refOriginalPosition=e,t.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&Hc(t.prototype,n),r&&Hc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Qc(e){"@babel/helpers - typeof";return(Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $c(e,t){return($c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ef(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=nf(e);if(t){var o=nf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Qc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tf(e)}(this,n)}}function tf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nf(e){return(nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var rf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$c(e,t)}(i,Il);var t,n,r,o=ef(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).name=null,n.style=null,n.highlightStyle=null,n.nodesClipPixel=2,n.isHoverAble=!1,n.isMultiHover=!1,n.isClickAble=!0,n.isAllowFeatureStyle=!1,w.extend(tf(n),t),n.cache=t.cache||{},n.cacheFields=t.cacheFields||[],n.maxCacheCount=t.maxCacheCount||0,n.isCustomSetMaxCacheCount=void 0!==t.isCustomSetMaxCacheCount&&t.isCustomSetMaxCacheCount,n}return t=i,(n=[{key:"addFeatures",value:function(e){O().Evented.prototype.fire("beforefeaturesadded",{features:e}),this.features=this.toiClientFeature(e),this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"removeFeatures",value:function(e){this.clearCache(),Il.prototype.removeFeatures.call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Il.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(e){this.clearCache();var t=this.renderer.getHoverOne(),n=null;t&&t.refDataID&&(n=t.refDataID),this.renderer.clearAll();for(var r=this.features,o=this.cache,i=this.cacheFields,a=this.map.getZoom(),s=this.maxCacheCount,l=0,u=r.length;l<u;l++){var c,f=r[l].id+"_zoom_"+a.toString();if(o[f])o[f].updateAndAddShapes();else{if((c=this.createThematicFeature(r[l])).getShapesCount()<1)continue;if(o[f]=c,i.push(f),i.length>s){var h=i[0];i.splice(0,1),delete o[h]}}}if(this.renderer.render(),n&&this.isHoverAble&&this.isMultiHover){var p=this.getShapesByFeatureID(n);this.renderer.updateHoverShapes(p)}}},{key:"createThematicFeature",value:function(e){var t=w.copyAttributesWithClip(this.style);e.style&&!0===this.isAllowFeatureStyle&&(t=w.copyAttributesWithClip(e.style));var n={};n.nodesClipPixel=this.nodesClipPixel,n.isHoverAble=this.isHoverAble,n.isMultiHover=this.isMultiHover,n.isClickAble=this.isClickAble,n.highlightStyle=zc.transformStyle(this.highlightStyle);for(var r=new Zc(e,this,zc.transformStyle(t),n),o=0;o<r.shapes.length;o++)this.renderer.addShape(r.shapes[o]);return r}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(e){isNaN(e)||(this.maxCacheCount=e,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(e){var t=[],n=this.renderer.getAllShapes();if(!e)return n;for(var r=0,o=n.length;r<o;r++){var i=n[r];i.refDataID&&e===i.refDataID&&t.push(i)}return t}}])&&Kc(t.prototype,n),r&&Kc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function of(e){"@babel/helpers - typeof";return(of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function af(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sf(){return(sf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ff(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function lf(e,t){return(lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ff(e);if(t){var o=ff(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===of(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cf(e)}(this,n)}}function cf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ff(e){return(ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var hf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lf(e,t)}(i,rf);var t,n,r,o=uf(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).isOverLay=!0,n.isAvoid=!0,n.themeField=null,n.styleGroups=null,w.extend(cf(n),t),n.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},n.getPxBoundsMode=0,n.labelFeatures=[],n}return t=i,(n=[{key:"redrawThematicFeatures",value:function(e){if(this.features.length>0&&0==this.labelFeatures.length)for(var t=this.setLabelsStyle(this.features),n=0,r=t.length;n<r;n++)this.labelFeatures.push(t[n]);this.features=this.getDrawnLabels(this.labelFeatures),sf(ff(i.prototype),"redrawThematicFeatures",this).call(this,e)}},{key:"removeFeatures",value:function(e){this.labelFeatures=[],sf(ff(i.prototype),"removeFeatures",this).call(this,e)}},{key:"removeAllFeatures",value:function(){this.labelFeatures=[],sf(ff(i.prototype),"removeAllFeatures",this).call(this,arguments)}},{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),n={};n.nodesClipPixel=this.nodesClipPixel,n.isHoverAble=this.isHoverAble,n.isMultiHover=this.isMultiHover,n.isClickAble=this.isClickAble,n.highlightStyle=zc.transformStyle(this.highlightStyle);for(var r=new Zc(e,this,zc.transformStyle(t),n),o=0;o<r.shapes.length;o++)this.renderer.addShape(r.shapes[o]);return r}},{key:"getDrawnLabels",value:function(e){for(var t,n,r,o,i=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},l=this.map,u=l.getZoom(),c=l.getCanvas(),f={x:parseFloat(c.style.width),y:parseFloat(c.style.height)},h=0,p=e.length;h<p;h++){((n=e[h]).isStyleChange||void 0===n.isStyleChange)&&(n=this.setStyle(n));var d=this.getLabelPxLocation(n);if(d.x>=0&&d.x<=f.x&&d.y>=0&&d.y<=f.y){if(n.style.minZoomLevel>-1&&u<=n.style.minZoomLevel)continue;if(n.style.maxZoomLevel>-1&&u>n.style.maxZoomLevel)continue;var y=null;n.isStyleChange?(n.isStyleChange=null,y=this.calculateLabelBounds(n,d)):y=n.geometry.bsInfo.w&&n.geometry.bsInfo.h?this.calculateLabelBounds2(n,d):this.calculateLabelBounds(n,d);var v=new Oe(0,f.y,f.x,0),g=y.length;if(this.isAvoid){var m=this.getAvoidInfo(v,y);if(m){if("left"===m.aspectW){n.style.labelXOffset+=m.offsetX;for(var b=0;b<g;b++)y[b].x+=m.offsetX}else if("right"===m.aspectW){n.style.labelXOffset+=-m.offsetX;for(var _=0;_<g;_++)y[_].x+=-m.offsetX}if("top"===m.aspectH){n.style.labelYOffset+=m.offsetY;for(var x=0;x<g;x++)y[x].y+=m.offsetY}else if("bottom"===m.aspectH){n.style.labelYOffset+=-m.offsetY;for(var S=0;S<g;S++)y[S].y+=-m.offsetY}n.isStyleChange=!0}}if(this.isOverLay){var O=!1;if(0!=h)for(var P=0;P<a.length;P++)if(this.isQuadrilateralOverLap(y,a[P])){O=!0;break}if(O)continue;a.push(y)}for(var T=[],k=0;k<g-1;k++)T.push(l.unproject(y[k]));var C=T[3],E=T[1],A=new Oe(C.lng,C.lat,E.lng,E.lat).getCenterLonLat(),M=new mr(A.lon,A.lat,n.attributes[this.themeField]);M.calculateBounds(),r=w.cloneObject(n.style),o=w.cloneObject(w.copyAttributes(r,s)),(t=new Et(M,n.attributes,o)).id=n.id,t.fid=n.fid,i.push(t)}}return i}},{key:"getStyleByData",value:function(e){var t=e;if(t.style=w.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=w.copyAttributes(t.style,this.style),this.themeField&&this.styleGroups&&t.attributes){var n=this.themeField,r=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in r)if(n===s){i=!0,a=r[s];break}if(i)for(var l=0,u=o.length;l<u;l++)if(a>=o[l].start&&a<o[l].end){var c=o[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=w.copyAttributes(t.style,c)}t.style.label=t.attributes[this.themeField]}return t.style}},{key:"setLabelsStyle",value:function(e){for(var t,n=[],r=0,o=e.length;r<o;r++){var i=e[r];if("SuperMap.Geometry.GeoText"!==i.geometry.CLASS_NAME)return e;(i.geometry.bsInfo.w||i.geometry.bsInfo.h)&&(i.geometry.bsInfo.w=null,i.geometry.bsInfo.h=null,i.geometry.labelWTmp=null),(t=this.setStyle(i)).layer=this.layer,n.push(t)}return n}},{key:"setStyle",value:function(e){var t=e;if(t.style=w.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=w.copyAttributes(t.style,this.style),this.groupField&&this.styleGroups&&t.attributes){var n=this.groupField,r=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in r)if(n===s){i=!0,a=r[s];break}if(i)for(var l=0,u=o.length;l<u;l++)if(a>=o[l].start&&a<o[l].end){var c=o[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=w.copyAttributes(t.style,c)}}return t.style.label=t.geometry.text,t}},{key:"getLabelPxLocation",value:function(e){var t=e.geometry,n=e.style,r=t.getCentroid(),o=this.map.project(new(O().LngLat)(r.x,r.y)),i=new(O().Point)(o.x,o.y);if(n.labelXOffset||n.labelYOffset){var a=isNaN(n.labelXOffset)?0:n.labelXOffset,s=isNaN(n.labelYOffset)?0:n.labelYOffset,l=i.add(new(O().Point)(a,-s));return new(O().Point)(l.x,l.y)}return new(O().Point)(i.x,i.y)}},{key:"calculateLabelBounds",value:function(e,t){var n=e.geometry,r=null,o=null;if(0==this.getPxBoundsMode)r=n.getLabelPxBoundsByText(t,e.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(e.geometry.getCentroid(),e.style),r=n.getLabelPxBoundsByLabel(t,o.w,o.h,e.style)}var i=[];return i=e.style.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,t,e.style.labelRotation),n.bounds=new Oe(i[1].x,i[3].y,i[2].x,i[4].y),i}},{key:"calculateLabelBounds2",value:function(e,t){var n,r,o,i,a,s=e.geometry.bsInfo,l=e.style,u=w.cloneObject(t);if(l.labelAlign&&"cm"!==l.labelAlign)switch(l.labelAlign){case"lt":u.x+=s.w/2,u.y+=s.h/2;break;case"lm":u.x+=s.w/2;break;case"lb":u.x+=s.w/2,u.y-=s.h/2;break;case"ct":u.y+=s.h/2;break;case"cb":u.y-=s.h/2;break;case"rt":u.x-=s.w/2,u.y+=s.h/2;break;case"rm":u.x-=s.w/2;break;case"rb":u.x-=s.w/2,u.y-=s.h/2}r=u.x-s.w/2,o=u.y+s.h/2,a=l.fontStyle&&"italic"===l.fontStyle?u.x+s.w/2+parseInt(parseFloat(l.fontSize)/2):u.x+s.w/2,i=u.y-s.h/2,n=new Oe(r,o,a,i);var c=[];return c=l.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,t,l.labelRotation),e.geometry.bounds=new Oe(c[1].x,c[3].y,c[2].x,c[4].y),c}},{key:"getLabelInfo",value:function(e,t){var n={l:"left",r:"right",t:"top",b:"bottom"},r={l:0,r:-1,t:0,b:-1};t=w.extend({fontColor:"#000000",labelAlign:"cm"},t);var o=this.getLocalXY(e),i=0;if(t.labelXOffset||t.labelYOffset){var a=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset;o[0]+=a,o[1]-=s}var l=document.createElement("canvas");l.globalAlpha=0,l.lineWidth=1;var u=l.getContext("2d");u.fillStyle=t.fontColor,u.globalAlpha=t.fontOpacity||1;var c,f,h,p=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),d=t.label.split("\n"),y=d.length;if(u.fillText){u.font=p,u.textAlign=n[t.labelAlign[0]]||"center",u.textBaseline=n[t.labelAlign[1]]||"middle",null==(c=r[t.labelAlign[1]])&&(c=-.5),f=u.measureText("Mg").height||u.measureText("xx").width,o[1]+=f*c*(y-1);for(var v=0;v<y;v++)i<(h=u.measureText(d[v]).width)&&(i=h)}else if(u.mozDrawText){u.mozTextStyle=p,null==(c=r[t.labelAlign[1]])&&(c=-.5),f=u.mozMeasureText("xx"),o[1]+=f*(1+c*y);for(var g=0;g<y;g++)i<(h=u.measureText(d[g]).width)&&(i=h)}var m={};return i?(m.w=i,m.h=t.fontSize,m.rows=d.length,m):null}},{key:"rotationBounds",value:function(e,t,n){var r=new(O().Point)(e.left,e.top),o=new(O().Point)(e.right,e.top),i=new(O().Point)(e.right,e.bottom),a=new(O().Point)(e.left,e.bottom),s=[];s.push(this.getRotatedLocation(r.x,r.y,t.x,t.y,n)),s.push(this.getRotatedLocation(o.x,o.y,t.x,t.y,n)),s.push(this.getRotatedLocation(i.x,i.y,t.x,t.y,n)),s.push(this.getRotatedLocation(a.x,a.y,t.x,t.y,n));for(var l=[],u=0;u<s.length;u++)l.push({x:s[u].x,y:s[u].y});return l.push({x:s[0].x,y:s[0].y}),l}},{key:"getRotatedLocation",value:function(e,t,n,r,o){var i,a,s={};return t=-t,r=-r,o=-o,i=(e-n)*Math.cos(o/180*Math.PI)-(t-r)*Math.sin(o/180*Math.PI)+n,a=(e-n)*Math.sin(o/180*Math.PI)+(t-r)*Math.cos(o/180*Math.PI)+r,s.x=i,s.y=-a,s}},{key:"getAvoidInfo",value:function(e,t){if(5!==t.length)return null;for(var n=[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom},{x:e.left,y:e.top}],r=!1,o=n.length,i=t.length,a=0,s=0,l="",u="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++){"SuperMap.Geometry.Point"===w.lineIntersection(n[c],n[c+1],t[f],t[f+1]).CLASS_NAME&&(h(t[f]),h(t[f+1]),r=!0)}return r?{aspectW:u,aspectH:l,offsetX:a,offsetY:s}:null;function h(t){if(!e.contains(t.x,t.y)){if(t.y<e.top){var n=Math.abs(e.top-t.y);n>s&&(s=n,l="top")}if(t.y>e.bottom){var r=Math.abs(t.y-e.bottom);r>s&&(s=r,l="bottom")}if(t.x<e.left){var o=Math.abs(e.left-t.x);o>a&&(a=o,u="left")}if(t.x>e.right){var i=Math.abs(t.x-e.right);i>a&&(a=i,u="right")}}}}},{key:"isQuadrilateralOverLap",value:function(e,t){var n=e.length,r=t.length;if(5!==n||5!==r)return null;for(var o=!1,i=0;i<n;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<r;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<n-1&&!o;s++)for(var l=0;l<r-1;l++){if("SuperMap.Geometry.Point"===w.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var n=!1,r=-1,o=t.length,i=o-1;++r<o;i=r)(t[r].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[r].y)&&e.x<(t[i].x-t[r].x)*(e.y-t[r].y)/(t[i].y-t[r].y)+t[r].x&&(n=!n);return n}}])&&af(t.prototype,n),r&&af(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(),pf=function(){try{return mapv}catch(e){return{}}}(),df=function(e){var t;if(e===_n.METER)t=1;else if(e===_n.DEGREE)t=2*Math.PI*6378137/360;else if(e===_n.KILOMETER)t=.001;else if(e===_n.INCH)t=1/.025399999918;else{if(e!==_n.FOOT)return t;t=.3048}return t};function yf(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-180,180],o=r[1],i=r[0],a=o-i;return e===o&&t?e:e===i&&n?e:0===((e-i)%a+a)%a&&t?o:((e-i)%a+a)%a+i}function vf(e){var t=parseInt(e),n=parseInt(60*(e-t)),r=parseInt(60*(60*(e-t)-n));return n=0===parseInt(n/10)?"0".concat(n):n,r=0===parseInt(r/10)?"0".concat(r):r,"".concat(t,"Â°").concat(n,"'").concat(r)}function gf(e){"@babel/helpers - typeof";return(gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bf(){return(bf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Of(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function wf(e,t){return(wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Of(e);if(t){var o=Of(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xf(this,n)}}function xf(e,t){if(t&&("object"===gf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sf(e)}function Sf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Of(e){return(Of=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Pf=pf.baiduMapLayer?pf.baiduMapLayer.__proto__:Function,Tf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wf(e,t)}(i,Pf);var t,n,r,o=_f(i);function i(e,t,n,r){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a=o.call(this,e,n,r),!Pf)return xf(a);a.map=e;var s=Sf(a);return r=r||{},s.init(r),s.argCheck(r),a.canvasLayer=t,a.stopAniamation=!1,a.animation=r.animation,a.clickEvent=a.clickEvent.bind(Sf(a)),a.mousemoveEvent=a.mousemoveEvent.bind(Sf(a)),a.bindMapEvent(),a.bindEvent(),a._expectShow=!0,a}return t=i,(n=[{key:"clickEvent",value:function(e){var t=e.point;bf(Of(i.prototype),"clickEvent",this).call(this,t,e)}},{key:"mousemoveEvent",value:function(e){var t=e.point;bf(Of(i.prototype),"mousemoveEvent",this).call(this,t,e)}},{key:"bindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"addData",value:function(e,t){var n=e;e&&e.get&&(n=e.get()),this.dataSet.add(n),this.update({options:t})}},{key:"update",value:function(e){var t=e||{},n=t.data;n&&n.get&&(n=n.get()),void 0!=n&&this.dataSet.set(n),bf(Of(i.prototype),"update",this).call(this,{options:t.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"updateData",value:function(e,t){e&&e.get&&this.dataSet.set(e.get()),this.update({options:t})}},{key:"_canvasUpdate",value:function(e){var t=this.map;if(this.canvasLayer&&!this.stopAniamation){var n=this,r=n.options.animation,o=this.getContext();if(n.isEnabledTime()){if(void 0===e)return void this.clear(o);"2d"===this.context&&(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else this.clear(o);if("2d"===this.context)for(var i in n.options)o[i]=n.options[i];else o.clear(o.COLOR_BUFFER_BIT);if(!(n.options.minZoom&&t.getZoom()<n.options.minZoom||n.options.maxZoom&&t.getZoom()>n.options.maxZoom)){var a=t.getBounds(),s=a.getEast()-a.getWest(),l=a.getNorth()-a.getSouth(),u=s/this.canvasLayer.canvas.width,c=l/this.canvasLayer.canvas.height,f=df("DEGREE")*u,h=t.getCenter(),p=t.project(h),d={transferCoordinate:function(e){if(t.transform.rotationMatrix||"2d"===n.context){var r=t.project(new(O().LngLat)(e[0],e[1]));return[r.x,r.y]}var o=[(e[0]-h.lng)/u,(h.lat-e[1])/c];return[o[0]+p.x,o[1]+p.y]}};void 0!==e&&(d.filter=function(t){var n=r.trails||10;return e&&t.time>e-n&&t.time<e});var y=n.dataSet.get(d);this.processData(y),"m"===n.options.unit?(n.options.size&&(n.options._size=n.options.size/f),n.options.width&&(n.options._width=n.options.width/f),n.options.height&&(n.options._height=n.options.height/f)):(n.options._size=n.options.size,n.options._height=n.options.height,n.options._width=n.options.width);var v=t.project(new(O().LngLat)(0,0));this.drawContext(o,y,n.options,v),n.options.updateCallback&&n.options.updateCallback(e)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"bindMapEvent",value:function(){this.mapEvent={resizeEvent:this.resizeEvent.bind(this),zoomStartEvent:this.zoomStartEvent.bind(this),zoomEndEvent:this.zoomEndEvent.bind(this),rotateStartEvent:this.rotateStartEvent.bind(this),rotateEvent:this.rotateEvent.bind(this),moveStartEvent:this.moveStartEvent.bind(this),rotateEndEvent:this.rotateEndEvent.bind(this),moveEvent:this.moveEvent.bind(this),moveEndEvent:this.moveEndEvent.bind(this),removeEvent:this.removeEvent.bind(this)},this.map.on("resize",this.mapEvent.resizeEvent),this.map.on("zoomstart",this.mapEvent.zoomStartEvent),this.map.on("zoomend",this.mapEvent.zoomEndEvent),this.map.on("rotatestart",this.mapEvent.rotateStartEvent),this.map.on("rotate",this.mapEvent.rotateEvent),this.map.on("rotateend",this.mapEvent.rotateEndEvent),this.map.on("movestart",this.mapEvent.moveStartEvent),this.map.on("move",this.mapEvent.moveEvent),this.map.on("moveend",this.mapEvent.moveEndEvent),this.map.on("remove",this.mapEvent.removeEvent)}},{key:"unbindMapEvent",value:function(){this.map.off("resize",this.mapEvent.resizeEvent),this.map.off("zoomstart",this.mapEvent.zoomStartEvent),this.map.off("zoomend",this.mapEvent.zoomEndEvent),this.map.off("rotatestart",this.mapEvent.rotateStartEvent),this.map.off("rotate",this.mapEvent.rotateEvent),this.map.off("rotateend",this.mapEvent.rotateEndEvent),this.map.off("movestart",this.mapEvent.moveStartEvent),this.map.off("move",this.mapEvent.moveEvent),this.map.off("moveend",this.mapEvent.moveEndEvent),this.map.off("remove",this.mapEvent.removeEvent)}},{key:"destroy",value:function(){this.unbindMapEvent(),this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"addAnimatorEvent",value:function(){}},{key:"removeEvent",value:function(){this.canvasLayer.mapContainer.removeChild(this.canvasLayer.canvas)}},{key:"resizeEvent",value:function(){this.canvasLayer.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.canvasLayer.canvas;e.style.position="absolute",e.style.top="0px",e.style.left="0px";var t="undefined"==typeof window?{}:window,n=this.canvasLayer.devicePixelRatio=t.devicePixelRatio||1;e.width=parseInt(this.map.getCanvas().style.width)*n,e.height=parseInt(this.map.getCanvas().style.height)*n,this.canvasLayer.mapVOptions.context&&"2d"!=this.canvasLayer.mapVOptions.context||e.getContext("2d").scale(n,n),e.style.width=this.map.getCanvas().style.width,e.style.height=this.map.getCanvas().style.height}},{key:"moveEndEvent",value:function(){this.stopAniamation=!1,this.getContext().canvas.style.transform="",this._canvasUpdate(),!0===this._expectShow&&this._show()}},{key:"moveStartEvent",value:function(){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new(O().LngLat)(0,0));this.startMoveX=e.x,this.startMoveY=e.y,this.animation&&(this.stopAniamation=!0),this.rotating||this.zooming||(this._expectShow="none"!==this.canvasLayer.canvas.style.display,0!==this.map.getPitch()&&this._hide())}},{key:"moveEvent",value:function(){this.canvasLayer.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing,n=this.map.project(new(O().LngLat)(0,0)),r=n.x-this.startMoveX,o=n.y-this.startMoveY;this.getContext().canvas.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg) translate3d("+r+"px, "+o+"px, 0px)"}},{key:"zoomStartEvent",value:function(){this.zooming=!0,this._hide()}},{key:"zoomEndEvent",value:function(){this.zooming=!1}},{key:"rotateStartEvent",value:function(){this.rotating=!0,0!==this.map.getPitch()&&this._hide()}},{key:"rotateEvent",value:function(){this.canvasLayer.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.getContext().canvas.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}},{key:"rotateEndEvent",value:function(){this.rotating=!1}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,parseInt(this.map.getCanvas().style.width),parseInt(this.map.getCanvas().style.height))}},{key:"draw",value:function(){this._canvasUpdate()}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}}])&&mf(t.prototype,n),r&&mf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Cf=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.id=r.layerID?r.layerID:w.createUniqueID("mapvLayer_"),delete r.layerID,this.mapVOptions=r,this.dataSet=n,this.visibility=!0,this.map&&this.map.addLayer(this)}var t,n,r;return t=e,(n=[{key:"onAdd",value:function(e){this.map=e,this.renderer=new Tf(this.map,this,this.dataSet,this.mapVOptions),this.canvas=this._createCanvas(),this.renderer._canvasUpdate(),this.mapContainer=e.getCanvasContainer(),this.mapContainer.appendChild(this.canvas),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px"}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.canvas),this.renderer.destroy()}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,e?this.show():this.hide())}},{key:"moveTo",value:function(e,t){var n=document.getElementById(this.canvas.id);if(t=void 0===t||t){var r=document.getElementById(e);n&&r&&r.parentNode.insertBefore(n,r)}else{var o=document.getElementById(e);if(n){if(o.nextSibling)return void o.parentNode.insertBefore(n,o.nextSibling);o.parentNode.appendChild(n)}}}},{key:"getTopLeft",value:function(){var e,t=this.map;t&&(e=t.getBounds().getNorthWest());return e}},{key:"addData",value:function(e,t){this.renderer.addData(e,t)}},{key:"update",value:function(e){this.renderer.update(e)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.renderer&&this.renderer.removeData(e)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"show",value:function(){return this.renderer&&this.renderer._show(),this}},{key:"hide",value:function(){return this.renderer&&this.renderer._hide(),this}},{key:"_createCanvas",value:function(){var e=document.createElement("canvas");e.id=this.id,e.style.position="absolute",e.style.top="0px",e.style.left="0px";var t="undefined"==typeof window?{}:window,n=this.devicePixelRatio=t.devicePixelRatio||1;return e.width=parseInt(this.map.getCanvas().style.width)*n,e.height=parseInt(this.map.getCanvas().style.height)*n,this.mapVOptions.context&&"2d"!=this.mapVOptions.context||e.getContext("2d").scale(n,n),e.style.width=this.map.getCanvas().style.width,e.style.height=this.map.getCanvas().style.height,e}},{key:"setZIndex",value:function(e){this.canvas.style.zIndex=e}}])&&kf(t.prototype,n),r&&kf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ef(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Af=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.map=null,this.opacity=1,this.parseNumber=!1,this.enableHighlight=!1,this.highlight={color:"#ADA91E"},this.baseHeightField=null,this.height=null,this.heightField="height",this.themeField=this.heightField,this.showLegend=!0,this.legendTitle=null,this.legendTheme="light",this.legendOrientation="horizontal",this.legendPosition="bottom-right",this._highlightLayerId="".concat(this.id,"-highlightLayer"),this._extend(this,n)}var t,n,r;return t=e,(n=[{key:"setLayerOptions",value:function(e){return this._extend(this,e),this}},{key:"setHighlightStyleOptions",value:function(e){return this._extend(this.highlight,e),this}},{key:"setData",value:function(e,t){var n=this;return n.data=e,null!=t&&(n.parseNumber=t),n.parseNumber&&n.data&&n.data.features&&n.data.features.map(function(e){return n.baseHeightField&&e.properties[n.baseHeightField]&&(e.properties[n.baseHeightField]=parseFloat(e.properties[n.baseHeightField])),n.heightField&&e.properties[n.heightField]&&(e.properties[n.heightField]=parseFloat(e.properties[n.heightField])),e}),this}},{key:"getData",value:function(){return this.data}},{key:"addTo",value:function(e){return this.map=e,this.map?(this.show(),this):this}},{key:"show",value:function(e){return this._extend(this,e),this._addLayer(),this.enableHighlight&&this._addHighLightLayer(),this.showLegend&&(this.legend||(this.legend=this._createLegendControl()),this.map.addControl(this.legend,this.legendPosition)),this}},{key:"remove",value:function(){if(!this.map)return this;var e=this.id?this.id:"theme3DLayer";return this.map.getLayer(e)&&(this.map.off("mousemove",e,this._onMouseMove.bind(this)),this.map.on("mouseout",e,this._onMouseMove.bind(this)),this.map.removeLayer(e)),this.map.getLayer(this._highlightLayerId)&&(this._selectFeatureId=null,this.map.removeLayer(this._highlightLayerId)),this.legend&&this.map.removeControl(this.legend),this}},{key:"getLayerStyleOptions",value:function(){}},{key:"getHighlightStyleOptions",value:function(){}},{key:"_createLegendControl",value:function(e){var t=this;function n(){}return n.prototype.onAdd=function(n){this._map=n,this._container=document.createElement("div");var r="legend-light";"dark"===t.legendTheme&&(r="legend-dark");var o=" legend-horizontal";if("vertical"===t.legendOrientation&&(o=" legend-vertical"),this._container.className="mapboxgl-ctrl legend "+r+o,e)this._container.innerHTML=e;else{var i=" <div class='legend-title'>"+(t.legendTitle||"")+"</div>",a="<div class='legend-content'>"+(t._createLegendElement.call(t)||"")+"</div>";this._container.innerHTML=i+a}return t._appendLegendCSSStyle(),this._container},n.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},new n}},{key:"_createLegendElement",value:function(){}},{key:"_addLayer",value:function(){var e=this.getLayerStyleOptions(),t=this.id?this.id:"theme3DLayer",n=this.sourceId=t+"Source";this.map.getSource(n)?(this.map.removeSource(n),this.map.addSource(n,{type:"geojson",data:this.data})):this.map.addSource(n,{type:"geojson",data:this.data}),this.map.addLayer({id:t,type:"fill-extrusion",source:n,paint:e}),this.map.moveLayer(t)}},{key:"_addHighLightLayer",value:function(){if(this.map){var e=this.map;e.addLayer({id:this._highlightLayerId,type:"fill-extrusion",source:this.sourceId,paint:this.getHighlightStyleOptions(),filter:["in","$id",""]}),this._selectFeatureId=null,e.on("mousemove",this.id,this._onMouseMove.bind(this)),e.on("mouseout",this.id,this._onMouseMove.bind(this))}}},{key:"_onMouseMove",value:function(e){var t=this,n=this.map,r=n.queryRenderedFeatures(e.point,{layers:[t.id]});if(t.highlight&&t.highlight.callback&&t.highlight.callback(r,e),!r||r.length<1)return t._clearHighlight.call(t),void(t._selectFeatureId=null);var o=r[0].id;t._selectFeatureId!==o&&(t._selectFeatureId=o,n.setFilter(t._highlightLayerId,["==","$id",t._selectFeatureId]))}},{key:"_clearHighlight",value:function(){this.map&&this.map.setFilter(this._highlightLayerId,["in","$id",""])}},{key:"_appendLegendCSSStyle",value:function(){var e=document.createElement("style");e.type="text/css";e.innerHTML="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        "+this._legendCSSStyle(),document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_legendCSSStyle",value:function(){return"\n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var n=Object.getOwnPropertyNames(arguments)[t];if("caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n){var r=arguments[n];if(r)for(var o=0;o<Object.getOwnPropertyNames(r).length;o++){var i=Object.getOwnPropertyNames(r)[o];"caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n&&(e[i]=r[i])}}}return e}}])&&Ef(t.prototype,n),r&&Ef(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Mf(e){"@babel/helpers - typeof";return(Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function If(e,t){return(If=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Df(e);if(t){var o=Df(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Mf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lf(e)}(this,n)}}function Lf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Df(e){return(Df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Nf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&If(e,t)}(i,Af);var t,n,r,o=jf(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).heightStops=null,n.colorStops=null,n.base=null,n.legendRatio=1,n._extend(Lf(n),t),n}return t=i,(n=[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var t=/^[0-9]+.?[0-9]*$/,n={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:t.test(this.base)?this.base:1},"fill-extrusion-opacity":e};return this.heightStops?n["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:t.test(this.base)?this.base:1}:this.height?n["fill-extrusion-height"]=this.height:n["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"},this.baseHeightField&&(n["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),n}},{key:"getHighlightStyleOptions",value:function(){return{"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function(){var e,t=this.colorStops&&this.colorStops.length||0,n="<ul>";for(e=0;e<t;e++){var r=this.colorStops[e][0],o=this._getWrapperText(r);if(e===t-1)o="> "+o;else o=o+"-"+this._getWrapperText(this.colorStops[e+1][0]);n+="<li><span style='background-color:"+this.colorStops[e][1]+";'></span><span>"+o+"</span></li>"}return n+="</ul>"}},{key:"_getWrapperText",value:function(e){var t=e*(null==this.legendRatio?1:parseFloat(this.legendRatio)),n=parseFloat(t);return n%1e6<=1e6?n.toString():parseInt(n/1e3)+"k"}}])&&Rf(t.prototype,n),r&&Rf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bf(e){"@babel/helpers - typeof";return(Bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ff(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gf(e,t){return(Gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Vf(e);if(t){var o=Vf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Vf(e){return(Vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Hf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gf(e,t)}(i,rf);var t,n,r,o=zf(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).style=t.style,n.isHoverAble=t.isHoverAble,n.highlightStyle=t.highlightStyle,n.themeField=t.themeField,n.styleGroups=t.styleGroups,n}return t=i,(n=[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),n={};n.nodesClipPixel=this.nodesClipPixel,n.isHoverAble=this.isHoverAble,n.isMultiHover=this.isMultiHover,n.isClickAble=this.isClickAble,n.highlightStyle=zc.transformStyle(this.highlightStyle);for(var r=new Zc(e,this,zc.transformStyle(t),n),o=0;o<r.shapes.length;o++)this.renderer.addShape(r.shapes[o]);return r}},{key:"getStyleByData",value:function(e){var t={},n=e;if(t=w.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&n.attributes){var r=this.themeField,o=n.attributes,i=this.styleGroups,a=!1,s=null;for(var l in o)if(r===l){a=!0,s=o[l];break}if(a)for(var u=0,c=i.length;u<c;u++)if(s>=i[u].start&&s<i[u].end){var f=i[u].style;t=w.copyAttributesWithClip(t,f)}}return n.style&&!0===this.isAllowFeatureStyle&&(t=w.copyAttributesWithClip(n.style)),t}}])&&Ff(t.prototype,n),r&&Ff(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Wf(e){"@babel/helpers - typeof";return(Wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jf(e,t){return(Jf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Yf(e);if(t){var o=Yf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Yf(e){return(Yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Xf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jf(e,t)}(i,Gl);var t,n,r,o=qf(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n)).symbolType=t,r.symbolSetting=n.symbolSetting,r.themeField=n.themeField,r}return t=i,(n=[{key:"setSymbolType",value:function(e){this.symbolType=e,this.redraw()}},{key:"createThematicFeature",value:function(e){var t;return wr[this.symbolType]&&this.themeField&&this.symbolSetting&&(t=new wr[this.symbolType](e,this,[this.themeField],this.symbolSetting)),!!t&&(t.assembleShapes(),t)}}])&&Uf(t.prototype,n),r&&Uf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zf(e){"@babel/helpers - typeof";return(Zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kf(e,t){return(Kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=th(e);if(t){var o=th(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return eh(e)}(this,n)}}function eh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function th(e){return(th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var nh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kf(e,t)}(i,Af);var t,n,r,o=$f(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).colorStops=null,n._extend(eh(n),t),n}return t=i,(n=[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var t={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":e};return null!=this.height?t["fill-extrusion-height"]=this.height:t["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical"},this.baseHeightField&&(t["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),t}},{key:"getHighlightStyleOptions",value:function(){var e={"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};return null!=this.height&&(e["fill-extrusion-height"]=this.height||0),e}},{key:"_createLegendElement",value:function(){for(var e="<ul>",t=this.colorStops&&this.colorStops.length||0,n=0;n<t;n++){var r=this.colorStops[n][0];e+="<li><span style='background-color:"+this.colorStops[n][1]+";'></span><span>"+r+"</span></li>"}return e+="</ul>"}}])&&Qf(t.prototype,n),r&&Qf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function rh(e){"@babel/helpers - typeof";return(rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ih(e,t){return(ih=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ah(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=sh(e);if(t){var o=sh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sh(e){return(sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var lh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ih(e,t)}(i,rf);var t,n,r,o=ah(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).themeField=t.themeField,n.style=t.style,n.styleGroups=t.styleGroups,n.isHoverAble=t.isHoverAble,n.highlightStyle=t.highlightStyle,n}return t=i,(n=[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),n={};n.nodesClipPixel=this.nodesClipPixel,n.isHoverAble=this.isHoverAble,n.isMultiHover=this.isMultiHover,n.isClickAble=this.isClickAble,n.highlightStyle=zc.transformStyle(this.highlightStyle);for(var r=new Zc(e,this,zc.transformStyle(t),n),o=0;o<r.shapes.length;o++)this.renderer.addShape(r.shapes[o]);return r}},{key:"getStyleByData",value:function(e){var t={},n=e;if(t=w.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&n.attributes){var r=this.themeField,o=n.attributes,i=this.styleGroups,a=!1,s=null;for(var l in o)if(r===l){a=!0,s=o[l];break}if(a)for(var u=0,c=i.length;u<c;u++)if(s.toString()===i[u].value.toString()){var f=i[u].style;t=w.copyAttributesWithClip(t,f)}}return n.style&&!0===this.isAllowFeatureStyle&&(t=w.copyAttributesWithClip(n.style)),t}}])&&oh(t.prototype,n),r&&oh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function uh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ch={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},fh=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=fr.extend(this,ch,n);this.id=t||w.createUniqueID("graphicLayer_"),this.graphics=[].concat(r.graphics),this.visibility=!0}var t,n,r;return t=e,(n=[{key:"addTo",value:function(e){this.onAdd(e)}},{key:"onAdd",value:function(e){if(this.map=e,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas),this;this._initContainer(),e.getCRS&&e.getCRS()!==O().CRS.EPSG3857&&(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0);var t=this.getState(),n=t.data,r=t.color,o=t.radius,i=t.opacity,a=t.highlightColor,s=t.radiusScale,l=t.radiusMinPixels,u=t.radiusMaxPixels,c=t.strokeWidth,f=t.outline,h=this,p={id:"scatter-plot",data:n,pickable:Boolean(this.onClick)||Boolean(this.onHover),autoHighlight:!0,color:r,opacity:i,radius:o,radiusScale:s,highlightColor:a,radiusMinPixels:l,radiusMaxPixels:u,strokeWidth:c,outline:f,isGeographicCoordinateSystem:this.isGeographicCoordinateSystem,coordinateSystem:this.coordinateSystem,getPosition:function(e){if(!e)return[0,0,0];var t=e.getLngLat();return t&&[t.lng,t.lat,0]},getColor:function(e){var t=e&&e.getStyle();return t&&t.color||h.color},getRadius:function(e){var t=e&&e.getStyle();return t&&t.radius||h.radius},updateTriggers:{getColor:[r],getRadius:[o]}};this.onClick&&(p.onClick=this.onClick),this.onHover&&(p.onHover=this.onHover),this.layer=new window.DeckGL.ScatterplotLayer(p);var d={};for(var y in t)d[y]=t[y];return d.layers=[this.layer],d.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(d),this.map.on("render",this._moveEvent.bind(this)),this.map.on("resize",this._resizeEvent.bind(this)),this.draw(),this}},{key:"setStyle",value:function(e){var t={color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline};fr.extend(this,t,e),this.update()}},{key:"setGraphics",value:function(e){this.graphics=this.graphics||[],this.graphics.length=0;var t=fr.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var n=0;n<t.length;n++)this.layer.props.data.push(t[n]);this.update()}},{key:"addGraphics",value:function(e){this.graphics=this.graphics||[];var t=fr.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var n=0;n<t.length;n++)this.layer.props.data.push(t[n]);this.update()}},{key:"getGraphicBy",value:function(e,t){var n=null;for(var r in this.graphics)if(this.graphics[r][e]===t){n=this.graphics[r];break}return n}},{key:"getGraphicById",value:function(e){return this.getGraphicBy("id",e)}},{key:"getGraphicsByAttribute",value:function(e,t){var n,r=[];for(var o in this.graphics)(n=this.graphics[o])&&n.attributes&&n.attributes[e]===t&&r.push(n);return r}},{key:"removeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||0===e.length||e===this.graphics)return this.graphics.length=0,this.layer.props.data&&(this.layer.props.data.length=0),void this.update();w.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--){var n=e[t],r=w.indexOf(this.graphics,n);-1!==r&&this.graphics.splice(r,1)}this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0});var e=this.getState();this.layer.setState(e)}}},{key:"clear",value:function(){this.removeGraphics(),this.deckGL.finalize()}},{key:"remove",value:function(){this.map.off("render",this._moveEvent.bind(this)),this.map.off("resize",this._resizeEvent.bind(this)),this.map.getCanvasContainer().removeChild(this.canvas)}},{key:"removeFromMap",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(e,t){var n=document.getElementById(this.id);if(t=void 0===t||t){var r=document.getElementById(e);n&&r&&r.parentNode.insertBefore(n,r)}else{var o=document.getElementById(e);if(n){if(o.nextSibling)return void o.parentNode.insertBefore(n,o.nextSibling);o.parentNode.appendChild(n)}}}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"getState",value:function(){var e=this.map,t=parseInt(this.canvas.style.width),n=parseInt(this.canvas.style.height),r=e.getCenter(),o={longitude:r.lng,latitude:r.lat,zoom:e.getZoom(),maxZoom:e.getMaxZoom(),pitch:e.getPitch(),bearing:e.getBearing()},i={};for(var a in o)i[a]=o[a];return i.width=t,i.height=n,i.data=this.graphics,i.color=this.color,i.radius=this.radius,i.opacity=this.opacity,i.highlightColor=this.highlightColor,i.radiusScale=this.radiusScale,i.radiusMinPixels=this.radiusMinPixels,i.radiusMaxPixels=this.radiusMaxPixels,i.strokeWidth=this.strokeWidth,i.outline=this.outline,e.getCRS&&e.getCRS()!==O().CRS.EPSG3857&&(i.coordinateSystem=this.coordinateSystem,i.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem),i}},{key:"draw",value:function(){var e=this.getState(),t={};for(var n in e)t[n]=e[n];t.layers=[this.layer],t.canvas=this.canvas,this.deckGL.setProps(t)}},{key:"_moveEvent",value:function(){this.draw()}},{key:"_resizeEvent",value:function(){var e=this.canvas,t=this.map;e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,this.draw()}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(),this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas)}},{key:"_createCanvas",value:function(){var e=document.createElement("canvas");this.id&&(e.id=this.id),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.cursor="";var t=this.map;return e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,e}}])&&uh(t.prototype,n),r&&uh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),hh=function(){try{return THREE}catch(e){return{}}}();
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function ph(e,t,n){if(e===n||e===t)return e;var r=n-t;return((e-t)%r+r)%r+t}function dh(e){return e*Math.PI/180}var yh={matrix:[1,-1,0,0],projection:{R:6378137,minZoom:0,maxZoom:22,nativeMaxZoom:19,RAD:Math.PI/180,METERS_PER_DEGREE:6378137*Math.PI/180,MAX_LATITUDE:85.0511287798,project:function(e){var t=this.RAD,n=this.METERS_PER_DEGREE,r=this.MAX_LATITUDE,o=e instanceof Array?{lng:e[0],lat:e[1]}:{lng:e.lng,lat:e.lat},i=o.lng,a=Math.max(Math.min(r,o.lat),-r);return{x:i*n,y:(0===a?0:Math.log(Math.tan((90+a)*t/2))/t)*n}},unproject:function(e){var t,n=e.x,r=e.y,o=this.RAD,i=this.METERS_PER_DEGREE;return 0===r?t=0:(t=r/i,t=(2*Math.atan(Math.exp(t*o))-Math.PI/2)/o),{lng:ph(n/i,-180,180),lat:ph(t,-this.MAX_LATITUDE,this.MAX_LATITUDE)}},locate:function(e,t,n){if(!e)return null;if(t=t||0,n=n||0,!t&&!n)return e;var r=e.lng;if(0!==t){var o=Math.abs(t),i=dh(e.lng);r=ph(180*(i+=2*Math.sqrt(Math.pow(Math.sin(o/(2*this.R)),2)/Math.pow(Math.cos(i),2))*(o>0?1:-1))/Math.PI,-180,180)}var a=e.lat;if(0!==n){var s=Math.abs(n),l=dh(e.lat);a=ph(180*(l+=2*Math.sin(s/(2*this.R))*(s>0?1:-1))/Math.PI,-90,90)}return{lng:r,lat:a}},getResolution:function(e){if(!this.resolutions){for(var t=[],n=12756274*Math.PI,r=0;r<=this.maxZoom;r++)t[r]=n/(256*Math.pow(2,r));this.resolutions=t}var o=0|e,i=this.resolutions.length;o=o<0?0:o>i-1?i-1:o;var a=this.resolutions[o];return(0|e)!==e&&o!==i-1?a+(this.resolutions[o+1]-a)*(e-o):a}},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},lngLatToPoint:function(e,t){var n=this.project(e);return this.transform(n,this.projection.getResolution(t))},locate:function(e,t,n){return this.projection.locate(e,t,n)},transform:function(e,t){return{x:this.matrix[0]*(e.x-this.matrix[2])/t,y:this.matrix[1]*(e.y-this.matrix[3])/t}}};function vh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gh=yh.projection,mh=hh.Color,bh=hh.Scene,wh=hh.WebGLRenderer,_h=hh.CanvasRenderer,xh=hh.PerspectiveCamera,Sh=Math.PI/180,Oh=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Ph=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,Th=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._layer=t,this.renderer=n||"gl",this.options=r}var t,n,r;return t=e,(n=[{key:"setMap",value:function(e){this.map=e}},{key:"render",value:function(){this._layer&&(this.prepare(),this._layer.fire("initialized"),this._layer&&this._layer.draw(this.context,this.scene,this.camera),this._layer.fire("draw"),this.renderScene())}},{key:"update",value:function(){this.remove(),this.render()}},{key:"renderScene",value:function(){this.locationCamera(),this.animationFrame=this.renderFrame(function(){this.animationFrame=null,this.context&&this.context.render(this.scene,this.camera)}.bind(this))}},{key:"renderFrame",value:function(e){return Oh(function(){e&&"function"==typeof e&&e()})}},{key:"resize",value:function(){this._resetElementSize(this.container),this._resetElementSize(this.canvas);var e=this.canvas.width,t=this.canvas.height,n=this.getMapSize();this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.context.setSize(n.width,n.height),this.renderScene()}},{key:"prepare",value:function(){if(!this.map)return new Error("map object is necessary");this.canvas?this.clear(this.context):(this._initContainer(),this._initThreeRenderer(),this._layer.fire("rendererinitialized"))}},{key:"getMapSize",value:function(){var e=this.map.getContainer();return{width:e.clientWidth,height:e.clientHeight}}},{key:"cancelFrame",value:function(){null!=this.animationFrame&&Ph(this.animationFrame)}},{key:"remove",value:function(){null!=this.animationFrame&&Ph(this.animationFrame),this.container.removeChild(this.canvas),this.container.parentNode.removeChild(this.container),this.context=null,this.canvas=null,this.container=null}},{key:"clear",value:function(e){e&&e.clear&&e.clear(),e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"getScale",value:function(e){var t=this.map,n=null==e?t.getZoom():e,r=gh.getResolution(gh.nativeMaxZoom);return gh.getResolution(n)/r}},{key:"getCanvasContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"locationCamera",value:function(){var e=this.map,t=this.getMapSize(),n=e.transform.zoomScale(gh.nativeMaxZoom-e.getZoom()-1),r=Math.tan(e.transform.fov/2*Sh),o=this.camera,i=e.getPitch()*Sh,a=-n*t.height/2/r;o.position.z=a*Math.cos(i);var s=yh.lngLatToPoint(e.getCenter(),gh.nativeMaxZoom),l=Math.sin(i)*a,u=e.getBearing()*Sh;o.position.x=s.x+l*Math.sin(u),o.position.y=s.y-l*Math.cos(u),o.up.set(Math.sin(u),-Math.cos(u),0),o.lookAt(new hh.Vector3(s.x,s.y,0)),o.updateProjectionMatrix()}},{key:"_initContainer",value:function(){var e=this._createCanvas(),t=this.container=document.createElement("div");this._layer._layerId&&(t.id=this._layer._layerId),t.className="threejs-wrapper",t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.overflow="hidden",this._resetElementSize(t),t.appendChild(e),this.map.getCanvasContainer().appendChild(t)}},{key:"_createCanvas",value:function(){if(!this.canvas){var e=this.canvas=document.createElement("canvas");return e.className="threejs-overlay",e.style.outline="none",this._resetElementSize(e),e}}},{key:"_resetElementSize",value:function(e){if(e){var t=this.getMapSize(),n=window.devicePixelRatio?window.devicePixelRatio:1,r=n*t.width,o=n*t.height;e.width=r,e.height=o,e.style.width=t.width+"px",e.style.height=t.height+"px"}}},{key:"_initThreeRenderer",value:function(){var e,t=this.map,n=this.getMapSize();"gl"===(this.renderer||"gl")?((e=new wh({canvas:this.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0},this.options)).autoClear=!0,e.clear()):e=new _h(w.extend({canvas:this.canvas,alpha:!0},this.options)),e.setClearColor(new mh(1,1,1),0),e.canvas=this.canvas,this.context=e;var r=t.transform.fov,o=Math.tan(r/2*Sh),i=this.getScale(gh.minZoom)/this.getScale(gh.nativeMaxZoom)*n.height/2/o;this.camera=new xh(r,n.width/n.height,1,i),this.scene=new bh,this.scene.add(this.camera)}}])&&vh(t.prototype,n),r&&vh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kh(e){"@babel/helpers - typeof";return(kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ch(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eh(e,t){return(Eh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ah(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Rh(e);if(t){var o=Rh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mh(e)}(this,n)}}function Mh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rh(e){return(Rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ih=hh.Vector3,jh=hh.Shape,Lh=hh.Mesh,Dh=hh.ExtrudeGeometry,Nh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eh(e,t)}(i,O().Evented);var t,n,r,o=Ah(i);function i(e,t,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._layerId=e,r.options=n;var a=n&&n.threeOptions;return r.renderer=new Th(Mh(r),t,a),r}return t=i,(n=[{key:"toThreeShape",value:function(e){var t=this;if(!e)return null;var n=this.getCoordinatesCenter(e),r=this.lngLatToPosition(n),o=e.map(function(e){return t.lngLatToPosition({lng:e[0],lat:e[1]}).sub(r)});return new jh(o)}},{key:"toThreeMesh",value:function(e,t,n,r){if(!e)return null;var o=e;r&&(o=this.removeDuplicatedCoordinates(e));var i=this.distanceToThreeVector3(t,t).x,a=this.toThreeShape(o),s=new Dh(a,{amount:i,bevelEnabled:!0}),l=new Lh(s,n),u=this.lngLatToPosition(this.getCoordinatesCenter(o));return l.position.set(u.x,u.y,-i),l}},{key:"addObject",value:function(e,t){t&&e&&this.setPosition(e,t),this.renderer&&this.renderer.scene.add(e)}},{key:"getScene",value:function(){return this.renderer.scene}},{key:"getCamera",value:function(){return this.renderer.camera}},{key:"getThreeRenderer",value:function(){return this.renderer.context}},{key:"clearMesh",value:function(){var e=this.renderer.scene;if(!e)return this;for(var t=e.children.length-1;t>=0;t--)e.children[t]instanceof hh.Mesh&&e.remove(e.children[t]);return this}},{key:"clearAll",value:function(e){var t=this.renderer.scene;if(!t)return this;for(var n=t.children.length-1;n>=0;n--)!e&&t.children[n]instanceof hh.Camera||t.remove(t.children[n]);return this}},{key:"setPosition",value:function(e,t){if(!e||!t)return this;var n=this.lngLatToPosition(t);return e.position.set(n.x,n.y,n.z),this}},{key:"lngLatToPosition",value:function(e){var t=yh.projection.nativeMaxZoom,n=yh.lngLatToPoint(e,t);return new Ih(n.x,n.y,-0)}},{key:"distanceToThreeVector3",value:function(e,t,n){var r=this._map,o=n||r.getCenter(),i=yh.projection.nativeMaxZoom,a=yh.locate(o,e,t),s=yh.lngLatToPoint(o,i),l=yh.lngLatToPoint(a,i),u=Math.abs(l.x-s.x)*Math.sign(e),c=Math.abs(l.y-s.y)*Math.sign(t);return new Ih(u,c,0)}},{key:"removeDuplicatedCoordinates",value:function(e){function t(e,t){return e[0]===t[0]&&e[1]===t[1]}for(var n=[].concat(e),r=n.length-1;r>=1;r--)t(n[r],n[r-1])&&n.splice(r,1);return t(n[0],n[n.length-1])&&n.splice(n.length-1,1),n}},{key:"getCoordinatesCenter",value:function(e){for(var t=0,n=0,r=0,o=0,i=e.length;o<i;o++)e[o]&&(t+=e[o][0],n+=e[o][1],r++);return{lng:t/r,lat:n/r}}},{key:"addTo",value:function(e){var t=this;return t._map=e,t.renderer.setMap(e),t.renderer.render(),t._map.on("render",this._update.bind(t)),t._map.on("resize",this._resize.bind(t)),t.on("render",function(){this.context&&this.context.render(this.scene,this.camera)}.bind(t.renderer)),this}},{key:"getCanvasContainer",value:function(){return this.renderer.getCanvasContainer()}},{key:"getCanvas",value:function(){return this.renderer.getCanvas()}},{key:"remove",value:function(){var e=this._map,t=this;e.off("render",t._update.bind(t)),e.off("resize",t._resize.bind(t)),t.renderer.remove(),t._map=null}},{key:"draw",value:function(){return this}},{key:"renderScene",value:function(){return this.renderer.renderScene(),this.fire("renderscene"),this}},{key:"_resize",value:function(){this.renderer.resize()}},{key:"_update",value:function(){return this.renderScene(),this.fire("render"),this}}])&&Ch(t.prototype,n),r&&Ch(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bh(e){"@babel/helpers - typeof";return(Bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gh(e,t){return(Gh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Vh(e);if(t){var o=Vh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Vh(e){return(Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Hh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gh(e,t)}(i,O().Evented);var t,n,r,o=zh(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this);var r=t||{};return n.name=e,n.id=r.id?r.id:w.createUniqueID("HeatMapLayer_"),n.map=r.map?r.map:null,n.loadWhileAnimating=void 0===r.loadWhileAnimating||r.loadWhileAnimating,n.visibility=!0,n.opacity=r.opacity?r.opacity:1,n.colors=r.colors?r.colors:["blue","cyan","lime","yellow","red"],n.useGeoUnit=!!r.useGeoUnit&&r.useGeoUnit,n.radius=r.radius?r.radius:50,n.featureWeight=r.featureWeight?r.featureWeight:null,n.features=[],n.maxWeight=null,n.minWeight=null,n.EVENT_TYPES=["featuresadded","featuresremoved","featuresdrawcompleted"],n.supported=!1,n.rootCanvas=null,n.canvasContext=null,n.maxWidth=null,n.maxHeight=null,n}return t=i,(n=[{key:"onAdd",value:function(e){this.map=e,0!==this.features.length&&(this._createCanvasContainer(),this.map.on("resize",this._resizeEvent.bind(this)),this.map.on("zoomstart",this._zoomStartEvent.bind(this)),this.map.on("zoomend",this._zoomEndEvent.bind(this)),this.map.on("rotatestart",this._rotateStartEvent.bind(this)),this.map.on("rotate",this._rotateEvent.bind(this)),this.map.on("rotateend",this._rotateEndEvent.bind(this)),this.map.on("dragend",this._dragEndEvent.bind(this)),this.map.on("movestart",this._moveStartEvent.bind(this)),this.map.on("move",this._moveEvent.bind(this)),this.map.on("moveend",this._moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh())}},{key:"removeFromMap",value:function(){this.removeAllFeatures(),this.map.getCanvasContainer().removeChild(this.rootCanvas)}},{key:"_createCanvasContainer",value:function(){this.supported=!0,this.mapContainer=this.map.getCanvasContainer(),this.rootCanvas=document.createElement("canvas"),this.rootCanvas.id=this.id;var e=this.map.getCanvas();this.rootCanvas.width=this.maxWidth=parseInt(e.style.width),this.rootCanvas.height=this.maxHeight=parseInt(e.style.height),this.canvasContext=this.rootCanvas.getContext("2d");var t=window.devicePixelRatio||1;1!==t&&this.canvasContext&&this.canvasContext.scale(t,t),w.modifyDOMElement(this.rootCanvas,null,{x:0,y:0},{w:this.maxWidth,h:this.maxHeight},"absolute",null,null,this.opacity),this.mapContainer.appendChild(this.rootCanvas)}},{key:"addFeatures",value:function(e){this.features=this.toiClientFeature(e),this.fire(this.EVENT_TYPES[0],{features:e,succeed:!0}),this.refresh()}},{key:"refresh",value:function(){if(0!==this.features.length&&this.map){var e=this.map.getBounds();this.updateHeatPoints(e)}}},{key:"setOpacity",value:function(e){e!==this.opacity&&(this.opacity=e,w.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,e),null!==this.map&&this.fire("changelayer",{layer:this,property:"opacity"}))}},{key:"updateHeatPoints",value:function(e){this.features&&this.features.length>0?this.convertFastToPixelPoints(e):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)}},{key:"convertFastToPixelPoints",value:function(e){var t,n,r,o,i,a,s,l=[],u=e.getEast()-e.getWest(),c=e.getNorth()-e.getSouth(),f=this.map.getCanvas();o=u/f.width>c/f.height?u/f.width:c/f.height,this.useRadius=this.useGeoUnit?parseInt(this.radius/o):this.radius;for(var h=0;h<this.features.length;h++){var p=this.features[h],d=p.geometry,y=this.getPixelXY(new xe(d.x,d.y));this.featureWeight?(y.weight=p.attributes[this.featureWeight],this.maxWeight||(i=i||y.weight,a=a||y.weight,i=Math.max(i,y.weight),a=Math.min(a,y.weight))):y.weight=1,t=Math.floor(y.x),n=Math.floor(y.y),r=y.weight,l.push([t,n,r])}this.maxWeight?this.draw(l,this.maxWeight):(s=i&&a?(i+a)/2:1,this.draw(l,s))}},{key:"draw",value:function(e,t){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var n=this.canvasContext;n.setTransform(1,0,0,1,0,0),this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var r=0;r<e.length;r++){var o=e[r];this.canvasContext.globalAlpha=Math.max(o[2]/t,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=n.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),n.putImageData(i,0,0)}},{key:"colorize",value:function(e,t){for(var n,r=0;r<e.length;r+=4)(n=4*e[r+3])&&(e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2])}},{key:"drawCircle",value:function(e){var t=e/2,n=this.circle=document.createElement("canvas"),r=n.getContext("2d");n.height=2*e,n.width=2*e,r.shadowOffsetX=r.shadowOffsetY=2*e,r.shadowBlur=t,r.shadowColor="#000000",r.beginPath(),r.arc(-e,-e,e/2,0,2*Math.PI,!0),r.closePath(),r.fill()}},{key:"createGradient",value:function(){var e=this.colors,t=document.createElement("canvas"),n=t.getContext("2d"),r=n.createLinearGradient(0,0,0,256);t.height=256,t.width=1;for(var o=1,i=0,a=e.length;i<a;i++)r.addColorStop(o/a,e[i]),o++;n.fillStyle=r,n.fillRect(0,0,1,256),this.grad=n.getImageData(0,0,1,256).data}},{key:"getPixelXY",value:function(e){var t,n=this.map;if(e instanceof Me||e instanceof mr){var r=n.project(new(O().LngLat)(e.x,e.y));t={x:parseInt(r.x),y:parseInt(r.y)}}if(e instanceof xe){var o=n.project(new(O().LngLat)(e.lon,e.lat));t={x:parseInt(o.x),y:parseInt(o.y)}}return t}},{key:"toiClientFeature",value:function(e){w.isArray(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++)if(e[n]instanceof Et)t.push(e[n]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[n].type)){var r=new lr;t=t.concat(r.read(e[n]))}else{if(!e[n].geometry||!e[n].geometry.parts)throw new Error("Features[".concat(n,"]'s type does not match, please check."));t.push(Ml.fromJson(e[n]).toFeature())}return t}},{key:"removeFeatures",value:function(e){if(e&&0!==e.length&&this.features&&0!==this.features.length){if(e===this.features)return this.removeAllFeatures();w.isArray(e)||(e=[e]);for(var t,n,r=[],o=0,i=e.length;o<i;o++)t=e[o],-1!==(n=w.indexOf(this.features,t))?this.features.splice(n,1):r.push(t);var a=0==r.length;this.fire(this.EVENT_TYPES[1],{features:r,succeed:a}),this.refresh()}}},{key:"removeAllFeatures",value:function(){this.features=[],this.refresh()}},{key:"moveTo",value:function(e,t){var n=document.getElementById(this.rootCanvas.id);if(t=void 0===t||t){var r=document.getElementById(e);n&&r&&r.parentNode.insertBefore(n,r)}else{var o=document.getElementById(e);if(n){if(o.nextSibling)return void o.parentNode.insertBefore(n,o.nextSibling);o.parentNode.appendChild(n)}}}},{key:"setVisibility",value:function(e){this.rootCanvas&&e!==this.visibility&&(this.visibility=e,this.rootCanvas.style.display=e?"block":"none")}},{key:"_resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.rootCanvas.style.width=e.style.width,this.rootCanvas.style.height=e.style.height,this.rootCanvas.width=this.maxWidth=parseInt(e.style.width),this.rootCanvas.height=this.maxHeight=parseInt(e.style.height);var t=window.devicePixelRatio||1;1!==t&&this.canvasContext&&this.canvasContext.scale(t,t),this.refresh()}},{key:"_zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"_zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"_rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"_rotateEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.rootCanvas.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}}},{key:"_rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"_dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"_moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rootCanvas.style.transform="",this.refresh(),this._show())}},{key:"_moveStartEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new(O().LngLat)(0,0));this.startMoveX=e.x,this.startMoveY=e.y}}},{key:"_moveEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){if(!this.rotating&&!this.zooming){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing,n=this.map.project(new(O().LngLat)(0,0)),r=n.x-this.startMoveX,o=n.y-this.startMoveY;this.rootCanvas.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg) translate3d("+r+"px, "+o+"px, 0px)"}}else this.refresh()}},{key:"_hide",value:function(){this.rootCanvas.style.display="none"}},{key:"_show",value:function(){this.rootCanvas.style.display="block"}}])&&Fh(t.prototype,n),r&&Fh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Uh=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerTypeID=t,this.data=[].concat(n.data),this.props=n.props?n.props:{},this.callback=n.callback?n.callback:{},this.id=n.layerId?n.layerId:w.createUniqueID("graphicLayer_"+this.layerTypeID+"_"),this.visibility=!0}var t,n,r;return t=e,(n=[{key:"onAdd",value:function(e){if(this.map=e,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas),this;e.getCRS&&e.getCRS()!==O().CRS.EPSG3857?(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0):(this.coordinateSystem=1,this.isGeographicCoordinateSystem=!1),this._initContainer(),this._createLayerByLayerTypeID();var t=this._getState(),n={};for(var r in t)n[r]=t[r];return n.layers=[this.layer],n.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(n),this.map.on("render",this._moveEvent.bind(this)),this.map.on("resize",this._resizeEvent.bind(this)),this._draw(),this}},{key:"remove",value:function(){this.map.off("render",this._moveEvent.bind(this)),this.map.off("resize",this._resizeEvent.bind(this)),this.map.getCanvasContainer().removeChild(this.canvas)}},{key:"removeFromMap",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(e,t){var n=document.getElementById(this.id);if(t=void 0===t||t){var r=document.getElementById(e);n&&r&&r.parentNode.insertBefore(n,r)}else{var o=document.getElementById(e);if(n){if(o.nextSibling)return void o.parentNode.insertBefore(n,o.nextSibling);o.parentNode.appendChild(n)}}}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"setStyle",value:function(e){fr.extend(this.props,e),this._createLayerByLayerTypeID(),this.update()}},{key:"setData",value:function(e){this.data=this.data||[],this.data.length=0;var t=fr.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var n=0;n<t.length;n++)this.layer.props.data.push(t[n]);this.data=this.layer.props.data,this.update()}},{key:"addData",value:function(e){this.data=this.data||[];var t=fr.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var n=0;n<t.length;n++)this.layer.props.data.push(t[n]);this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0})}this._draw()}},{key:"clear",value:function(){this.removeData(),this.deckGL.finalize()}},{key:"removeData",value:function(){this.data.length=0,this.layer.props.data&&(this.layer.props.data.length=0),this.update()}},{key:"_draw",value:function(){var e=this._getState();e.layers=[this.layer],e.canvas=this.canvas,this.deckGL.setProps(e)}},{key:"_getState",value:function(){var e=this.map,t=parseInt(this.canvas.style.width),n=parseInt(this.canvas.style.height),r=e.getCenter(),o={width:t,height:n,longitude:r.lng,latitude:r.lat,zoom:e.getZoom(),maxZoom:e.getMaxZoom(),pitch:e.getPitch(),bearing:e.getBearing()},i={};for(var a in o)i[a]=o[a];for(var s in this.props)i[s]=this.props[s];return e.getCRS&&e.getCRS()!==O().CRS.EPSG3857?(i.coordinateSystem=this.coordinateSystem,i.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem):(i.coordinateSystem=1,i.isGeographicCoordinateSystem=!1),i.data=this.data,i}},{key:"_createLayerByLayerTypeID",value:function(){if(this.props.data=this.data,this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem,this.props.coordinateSystem=this.coordinateSystem,this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover),"scatter-plot"===this.layerTypeID)this.props.id="scatter-plot",this._createScatterPlotLayer();else if("path-layer"===this.layerTypeID)this.props.id="path-layer",this._createPathLayer();else if("polygon-layer"===this.layerTypeID)this.props.id="polygon-layer",this._createPolygonLayer();else if("arc-layer"===this.layerTypeID)this.props.id="arc-layer",this._createArcLineLayer();else{if("hexagon-layer"!==this.layerTypeID)throw new Error(this.layerTypeID+" does not support");this.props.id="hexagon-layer",this._createHexagonLayer()}}},{key:"_createScatterPlotLayer",value:function(){var e=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){if(!e)return[0,0,0];var t=e.getLngLat();return t&&[t.lng,t.lat,0]},this.callback.getColor&&(this.props.getColor=this.callback.getColor?this.callback.getColor:function(t){var n=t&&t.getStyle();return n&&n.color||e.props.color}),this.callback.getRadius&&(this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(t){var n=t&&t.getStyle();return n&&n.radius||e.props.radius}),(this.props.color||this.props.radius)&&(this.props.updateTriggers={},this.props.radius&&(this.props.updateTriggers.getRadius=[this.props.radius]),this.props.color&&(this.props.updateTriggers.getColor=[this.props.color])),this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(e){return e.geometry.coordinates},this.callback.getColor&&(this.props.getColor=this.callback.getColor),this.callback.getWidth&&(this.props.getWidth=this.callback.getWidth),this.callback.getDashArray&&(this.props.getDashArray=this.callback.getDashArray),this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(e){return e.geometry.coordinates},this.callback.getElevation&&(this.props.getElevation=this.callback.getElevation),this.callback.getFillColor&&(this.props.getFillColor=this.callback.getFillColor),this.callback.getLineColor&&(this.props.getLineColor=this.callback.getLineColor),this.callback.getLineWidth&&(this.props.getLineWidth=this.callback.getLineWidth),this.props.updateTriggers={},this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128],this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(e){return e?e.geometry.coordinates[0]:[0,0,0]},this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(e){return e?e.geometry.coordinates[1]:[0,0,0]},this.callback.getStrokeWidth&&(this.props.getStrokeWidth=this.callback.getStrokeWidth),this.callback.getSourceColor&&(this.props.getSourceColor=this.callback.getSourceColor),this.callback.getTargetColor&&(this.props.getTargetColor=this.callback.getTargetColor),this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){return e?e.geometry.coordinates:[0,0,0]},this.callback.getColorValue&&(this.props.getColorValue=this.callback.getColorValue),this.callback.getElevationValue&&(this.props.getElevationValue=this.callback.getElevationValue),this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(),this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas)}},{key:"_createCanvas",value:function(){var e=document.createElement("canvas");e.id=this.id,e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.cursor="";var t=this.map;return e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,e}},{key:"_moveEvent",value:function(){this._draw()}},{key:"_resizeEvent",value:function(){var e=this.canvas,t=this.map;e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,this._draw()}}])&&Wh(t.prototype,n),r&&Wh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Jh(e){return function(e){if(Array.isArray(e))return qh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return qh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qh(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xh,Zh,Qh,Kh={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},$h={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},ep={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:$h,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:Kh,latLabelStyle:Kh},tp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t&&t.layerID?t.layerID:w.createUniqueID("graticuleLayer_"),this.sourceId=this.id+"_line",this.canvasId=this.id,this.options=t,this.resetEvent=this._reset.bind(this),this.styleDataEevent=this._setLayerTop.bind(this),this.resizeEvent=this._resizeCallback.bind(this),this.zoomendEvent=this.setVisibility.bind(this)}var t,n,r;return t=e,(n=[{key:"onAdd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.map;this.map=e,this._initialize(),this._createCanvas(),this._bindEvent(),this._drawCanvas(),this._addGraticuleLayer(),this.setVisibility()}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.canvas),this.canvas=null,this._unbindEvent()}},{key:"setVisibility",value:function(e){var t=this.map&&this.map.getZoom();this.options.visible="boolean"==typeof e?e:this.options.visible,this.visible="boolean"==typeof e?e:this.options.visible&&t>=this.options.minZoom&&t<=this.options.maxZoom,this.map.getLayer(this.sourceId)&&this.map.setLayoutProperty(this.sourceId,"visibility",this.visible?"visible":"none"),this._drawLabel()}},{key:"setMinZoom",value:function(e){this.options.minZoom=e,this.setVisibility()}},{key:"setMaxZoom",value:function(e){this.options.maxZoom=e,this.setVisibility()}},{key:"setShowLabel",value:function(e){this.options.showLabel=e,this._drawLabel()}},{key:"setExtent",value:function(e){this.options.extent=this._getDefaultExtent(e,this.map),this.features=this._getGraticuleFeatures(),this._updateGraticuleLayer(),this._drawLabel()}},{key:"setStrokeStyle",value:function(e){if(this.map&&this.map.getLayer(this.sourceId)){this.options.strokeStyle=e;var t=this._transformStrokeStyle(e),n=t.layout,r=t.paint;for(var o in n)this.map.setLayoutProperty(this.sourceId,o,n[o]);for(var i in r)this.map.setPaintProperty(this.sourceId,i,r[i])}}},{key:"setLngLabelStyle",value:function(e){this.options.lngLabelStyle=e,this._drawLabel()}},{key:"setLatLabelStyle",value:function(e){this.options.latLabelStyle=e,this._drawLabel()}},{key:"setIntervals",value:function(e){this.options.interval=e,this._calcInterval(),this.features=this._getGraticuleFeatures(),this._updateGraticuleLayer(),this._drawLabel()}},{key:"_bindEvent",value:function(){this.map.on("move",this.resetEvent),this.map.on("moveend",this.resetEvent),this.map.on("styledata",this.styleDataEevent),this.map.on("resize",this.resizeEvent),this.map.on("zoomend",this.zoomendEvent)}},{key:"_unbindEvent",value:function(){this.map.off("move",this.resetEvent),this.map.off("moveend",this.resetEvent),this.map.off("styledata",this.styleDataEevent),this.map.off("resize",this.resizeEvent),this.map.off("zoomend",this.zoomendEvent)}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.map,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options;(t=t||{}).strokeStyle=Object.assign({},$h,t.strokeStyle||{}),t.lngLabelStyle=Object.assign({},Kh,t.lngLabelStyle||{}),t.latLabelStyle=Object.assign({},Kh,t.latLabelStyle||{}),this.options=Object.assign({},ep,t,{extent:this._getDefaultExtent(t.extent,e),wrapX:"boolean"==typeof t.wrapX?t.wrapX:e.getRenderWorldCopies()}),this.oldExtent=this.options.extent,this._calcInterval(),this.isRotate=!1,this.visible=!0,this.features=this._getGraticuleFeatures()}},{key:"_createCanvas",value:function(){if(!this.canvas){this.canvas=document.createElement("canvas"),this.canvas.id=this.canvasId,this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px";var e=("undefined"==typeof window?{}:window).devicePixelRatio||1;this.canvas.width=parseInt(this.map.getCanvas().style.width)*e,this.canvas.height=parseInt(this.map.getCanvas().style.height)*e,this.canvas.style.width=this.map.getCanvas().style.width,this.canvas.style.height=this.map.getCanvas().style.height,this.canvas.globalAlpha=this.options.opacity,this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas)}}},{key:"_drawCanvas",value:function(){this.canvas||this._createCanvas(),this.setVisibility(),this._reset()}},{key:"_resizeCallback",value:function(){this.mapContainer&&this.mapContainer.removeChild(this.canvas),this.canvas=null,this._drawCanvas()}},{key:"_reset",value:function(){this._updateRotate(),this._updateExtent(),this._calcInterval(),this._drawLabel()}},{key:"_setLayerTop",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.map;if(t){var n=t.getStyle&&t.getStyle().layers;n&&n.length&&n.findIndex(function(t){return t.id===e.sourceId})!==n.length-1&&t.getLayer(this.sourceId)&&(t.removeLayer(this.sourceId),this._addGraticuleLayer())}}},{key:"_getDefaultExtent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,n=(t.getCRS&&t.getCRS()||{}).extent;if(n||(n=[-180,-85.05119,180,85.05119]),!e||0===e.length)return n;var r=O().LngLatBounds.convert(e),o=r._sw,i=r._ne;return e=[o.lng,o.lat,i.lng,i.lat],e=[Math.max(n[0],e[0]),Math.max(n[1],e[1]),Math.min(n[2],e[2]),Math.min(n[3],e[3])]}},{key:"_updateRotate",value:function(){var e=this.map.getBearing();this.isRotate=e>-180&&e<=-90||e>=90&&e<180}},{key:"_updateExtent",value:function(){if(this.options.wrapX&&!this.oldExtent){var e=this.map.getBounds(),t=e._ne,n=e._sw;this.options.extent=[n.lng,n.lat,t.lng,t.lat]}}},{key:"_calcInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.interval;"function"==typeof e?(e=e(this.map),this._currLngInterval=e,this._currLatInterval=e):(this._currLngInterval=e,this._currLatInterval=e)}},{key:"_formatLat",value:function(e){return this.options.latFormatTickLabel?this.options.latLabelFormatter(e):e<0?vf(-1*e)+"S":e>0?vf(e)+"N":""+vf(e)}},{key:"_formatLng",value:function(e){return this.options.lngLabelFormatter?this.options.lngLabelFormatter(e):(e=yf(e))>0&&e<=180?vf(e)+"E":e<0&&e>=-180?vf(-1*e)+"W":""+vf(e)}},{key:"_parsePxToInt",value:function(e){e.length>2&&"p"===e.charAt(e.length-2)&&(e=e.substr(0,e.length-2));try{return parseInt(e,10)}catch(e){console.log(e)}return 0}},{key:"_drawLabel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.visible,n=this.canvas,r=n.getContext("2d");if(t&&this.options.showLabel){if(this.map){this._currLngInterval&&this._currLatInterval||this._calcInterval(),r.clearRect(0,0,n.width,n.height);var o=this.options,i=o.lngLabelStyle,a=o.latLabelStyle,s=this._getGridiculePoints(),l=s.lngPoints,u=s.latPonits;l.forEach(function(t){e._drawLng(r,t[0],t[1],t[2],i)}),u.forEach(function(t){e._drawLat(r,t[0],t[1],t[2],a)})}}else r.clearRect(0,0,n.width,n.height)}},{key:"_drawLat",value:function(e,t,n,r,o){e=this._setLabelStyle(e,o);var i=this.canvas.width,a=12;try{var s=e.font.split(" ")[0];a=this._parsePxToInt(s)}catch(e){console.log(e)}if(!r){var l=t;t=n,n=this.map.project([l,t])}var u=this._formatLat(t),c=e.measureText(u).width;e.strokeText(u,(r?i:n.x)-c,(r?n:n.y)+a/2),e.fillText(u,(r?i:n.x)-c,(r?n:n.y)+a/2)}},{key:"_drawLng",value:function(e,t,n,r,o){e=this._setLabelStyle(e,o);var i=this.canvas.height;if(!r){var a=n;n=this.map.project([t,a])}var s=this._formatLng(t),l=e.measureText(s).width;e.strokeText(s,(r?n:n.x)-l/2,r?i:n.y),e.fillText(s,(r?n:n.x)-l/2,r?i:n.y)}},{key:"_getLatPoints",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-180,180],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){if(this.options.wrapX&&-180===t[0]&&180===t[1])return[];var i=[];return o.forEach(function(o){var a=o.geometry.coordinates[0][1];if(o.geometry.coordinates[1][1]===a){var s="number"==typeof r?r:t[1];e.isRotate&&(s="number"==typeof n?n:t[0]),e.options.wrapX&&(i=i.concat(e._getWrapPoints(s,a,[s,s]))),i.push([s,a])}}),i}}},{key:"_getLngPoints",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-90,90],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){var i="number"==typeof n?n:t[0];this.isRotate&&(i="number"==typeof r?r:t[1]);var a=[];return o.forEach(function(t){var n=t.geometry.coordinates[0][0];t.geometry.coordinates[1][0]===n&&(a.push([n,i]),e.options.wrapX&&(a=a.concat(e._getWrapPoints(n,i))))}),a}}},{key:"_getWrapPoints",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.oldExtent,r=[],o=this.map.getBounds(),i=o._ne,a=o._sw,s=n.length>2?n[2]:n[1];e>=a.lng;){var l=yf(e,180===s,-180===n[0]);(!n||l>=n[0]&&l<=s)&&r.push([e,t]),e-=360}for(;e<=i.lng;){var u=yf(e,180===s,-180===n[0]);(!n||u>=n[0]&&u<=s)&&r.push([e,t]),e+=360}return r}},{key:"_getGridiculePoints",value:function(){var e=this._getEdgeLat(),t=this._getEdgeLng(),n=this._getRange(),r=n.latRange,o=n.lngRange,i=n.firstLat,a=n.firstLng,s=n.lastLat,l=n.lastLng;return{latPonits:this._getUniquePoint(this._getLatPoints(o,a,l),e,1),lngPoints:this._getUniquePoint(this._getLngPoints(r,i,s),t,0)}}},{key:"_getEdgeLat",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLatInterval,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,r=[],o=[],i=this.canvas.width,a=this.canvas.height,s=this._getRange().extent,l=this.map.getBounds()._ne;if(this.options.wrapX&&yf(l.lng)>s[2])return[];for(var u=this._countDecimals(t),c=0;c<=a;c++){var f=n.unproject([i,c]),h=yf(f.lng);(this.options.wrapX?h>=s[0]&&h<=s[2]:f.lng>=s[0]&&f.lng<=s[2])&&f.lat>=s[1]&&f.lat<=s[3]&&(r.push([f.lat,c]),o.push(f.lat),void 0===e&&f.lat.toFixed(u)%t==0&&(e=Number(f.lat.toFixed(u))))}var p=this._getIntersectRange(e,o,r,t),d=p.first,y=p.last,v=p.coordinates,g=p.points;e=Math.min(Math.max(d,-90),90);var m=Math.max(Math.min(Math.round(y),90),-90);return-90!==e||-90!==m?this._getClosestCoordinate(e,m,v,g,t):[]}},{key:"_getEdgeLng",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLngInterval,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,r=[],o=[],i=this.canvas.width,a=this.canvas.height,s=this.options.extent,l=this._countDecimals(t),u=this.map.getBounds()._sw;if(this.options.wrapX&&yf(u.lat)>s[3])return[];for(var c=0;c<=i;c++){var f=n.unproject([c,a]),h=yf(f.lng);(this.options.wrapX?h>=s[0]&&h<=s[2]:f.lng>=s[0]&&f.lng<=s[2])&&f.lat>=s[1]&&f.lat<=s[3]&&(r.push([f.lng,c]),o.push(f.lng),void 0===e&&f.lng.toFixed(l)%t==0&&(e=Number(f.lng.toFixed(l))))}var p=this._getIntersectRange(e,o,r,t),d=p.first,y=p.last,v=p.coordinates,g=p.points;return e=d,this._getClosestCoordinate(e,y,v,g,t)}},{key:"_getIntersectRange",value:function(e,t,n,r){var o=t[t.length-1];if(e>o){o=e,t.reverse(),n.reverse();for(var i=this._countDecimals(r),a=0;a<=t.length;a++){var s=t[a];if(s.toFixed(i)%r==0){e=Number(s.toFixed(i));break}}}return{first:e,last:o,coordinates:t,points:n}}},{key:"_getClosestCoordinate",value:function(e,t,n,r,o){for(var i=[],a=e;a<=t;){var s=this._getClosestNumberIndex(a,n),l=r[s];i.push([Math.round(l[0]),l[1],!0]),a+=o,n=n.slice(s),r=r.slice(s)}return i}},{key:"_getClosestNumberIndex",value:function(e,t){for(var n=0,r=Number.MAX_VALUE,o=0;o<t.length;o++){var i=Math.abs(t[o]-e);if(i<=r){if(i===r&&t[o]<t[n])continue;n=o,r=i}}return n}},{key:"_getUniquePoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.options.wrapX)return e.concat(t);if(!t||0===t.length)return e;var r=t,o=this.canvas.width,i=this.canvas.height;for(var a in e){var s=this.map.project(e[a]),l=r.findIndex(function(t){return t[0]===e[a][n]});l<=-1?r.push(e[a]):s&&s.x>=0&&s.x<=o&&s.y>=0&&s.y<=i&&(r[l]=e[a])}return r}},{key:"_countDecimals",value:function(e){return Math.floor(e)!==e&&e.toString().split(".")[1].length||0}},{key:"_addGraticuleLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.features;if(!this.map.getSource(this.sourceId)){var t={type:"geojson",data:{type:"FeatureCollection",features:e}};this.map.addSource(this.sourceId,t)}if(!this.map.getLayer(this.sourceId)){var n=Object.assign({id:this.sourceId,type:"line",source:this.sourceId},this._transformStrokeStyle());this.map.addLayer(n)}}},{key:"_updateGraticuleLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.features;if(this.map.getSource(this.sourceId)){var t={type:"FeatureCollection",features:e};this.map.getSource(this.sourceId).setData(t)}this._addGraticuleLayer()}},{key:"_getGraticuleFeatures",value:function(){var e=this._currLngInterval||10,t=this._currLatInterval||10,n=[],r=this._getRange(),o=r.latRange,i=r.lngRange,a=r.firstLat,s=r.firstLng,l=r.lastLat,u=r.lastLng;this.options.wrapX&&!this.oldExtent&&(o=[-90,90],i=[-180,180],a=s=l=u=null),"number"==typeof s&&n.unshift(this._makeLineFeature(this._makeLineCoords(s,o,a,l))),"number"==typeof u&&n.unshift(this._makeLineFeature(this._makeLineCoords(u,o,a,l)));for(var c=i[0];c<=i[1];c+=e)n.unshift(this._makeLineFeature(this._makeLineCoords(c,o,a,l)));"number"==typeof a&&n.unshift(this._makeLineFeature(this._makeLineCoords(a,i,s,u,"lat"))),"number"==typeof l&&n.unshift(this._makeLineFeature(this._makeLineCoords(l,i,s,u,"lat")));for(var f=o[0];f<=o[1];f+=t)n.unshift(this._makeLineFeature(this._makeLineCoords(f,i,s,u,"lat")));return n}},{key:"_getRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.extent&&Jh(this.options.extent);e&&0!==e.length||(e=this._getDefaultExtent());var t={};if((e=e.map(function(e){return Number(e.toFixed(6))}))[1]%this._currLatInterval!=0){t.firstLat=e[1];var n=Math.ceil(e[1]/this._currLatInterval);e[1]=n*this._currLatInterval}if(e[3]%this._currLatInterval!=0){t.lastLat=e[3];var r=Math.floor(e[3]/this._currLatInterval);e[3]=r*this._currLatInterval}if(e[0]%this._currLngInterval!=0){t.firstLng=e[0];var o=Math.ceil(e[0]/this._currLngInterval);e[0]=o*this._currLngInterval}if(e[2]%this._currLngInterval!=0){t.lastLng=e[2];var i=Math.floor(e[2]/this._currLngInterval);e[2]=i*this._currLngInterval}return Object.assign({latRange:[e[1],e[3]],lngRange:[e[0],e[2]],extent:e},t)}},{key:"_makeLineCoords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-90,90],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"lng";e="lng"===o?this._lngFix(e):e,n="number"==typeof n?n:t[0],r="number"==typeof r?r:t[1];for(var i=Math.abs(n-r),a=[],s=n;s<=r;s+=i)"lng"===o?a.push([e,s]):a.push([s,e]);return a}},{key:"_makeLineFeature",value:function(e){return{type:"Feature",geometry:{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LineString",coordinates:e}}}},{key:"_lngFix",value:function(e){return e>=180?180:e<=-180?-180:e}},{key:"_transformStrokeStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.strokeStyle;if(!e||"string"==typeof e)return{paint:{"line-color":e||"rgba(0,0,0,0.2)"}};var t={visibility:this.visible?"visible":"none","line-join":e.lineJoin||"round","line-cap":e.lineCap||"round"},n={"line-color":e.lineColor||"rgba(0,0,0,0.2)","line-width":e.lineWidth||1,"line-offset":e.lineDashOffset||0,"line-translate-anchor":"viewport"};return e.lineWidth&&("function"==typeof e.lineWidth?n["line-width"]=e.lineWidth(this.map):n["line-width"]=e.lineWidth),e.lindDasharray&&("function"==typeof e.lindDasharray?n["line-dasharray"]=e.lindDasharray(this.map):n["line-dasharray"]=e.lindDasharray),{layout:t,paint:n}}},{key:"_setLabelStyle",value:function(e,t){return t.textColor&&(e.fillStyle=t.textColor),t.textSize&&(e.font=t.textSize+" "+(t.textFont||["Calibri","sans-serif"]).join(",")),t.textHaloColor&&(e.strokeStyle=t.textHaloColor,e.lineWidth=t.textHaloWidth||1),t.textAnchor&&(e.textBaseline=this._getTxetBaseline(t.textAnchor),e.textAligin=this._getTxetAlign(t.textAligin)),e}},{key:"_getTxetBaseline",value:function(e){if(!e)return"bottom";var t=e.split("-");return t.includes("bottom")?"bottom":t.includes("top")?"top":t.includes("center")?"middle":void 0}},{key:"_getTxetAlign",value:function(e){if(!e)return"center";var t=e.split("-");return t.includes("left")?"left":t.includes("right")?"right":t.includes("center")?"center":void 0}}])&&Yh(t.prototype,n),r&&Yh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),np=n(861),rp=n.n(np),op=(n(957),n(937),n(238)),ip=n.n(op),ap=window.fetch,sp={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=w.toJSON(e[t]));var n=encodeURIComponent(e[t]);this.queryValues.push(n)}},issue:function(e){for(var t=this,n=t.getUid(),r=e.url,o=[],i=new Promise(function(e){t.supermap_callbacks[n]=function(r){delete t.supermap_callbacks[n],e(r)}}),a=r,s=0,l=t.queryKeys?t.queryKeys.length:0,u=0;u<l;u++)if(a.length+t.queryKeys[u].length+2>=t.limitLength){if(0==s)return!1;o.push(a),a=r,s=0,u--}else if(a.length+t.queryKeys[u].length+2+t.queryValues[u].length>t.limitLength)for(var c=t.queryValues[u];c.length>0;){var f=t.limitLength-a.length-t.queryKeys[u].length-2;a.indexOf("?")>-1?a+="&":a+="?";var h=c.substring(0,f);"%"===h.substring(f-1,f)?(f-=1,h=c.substring(0,f)):"%"===h.substring(f-2,f-1)&&(f-=2,h=c.substring(0,f)),a+=t.queryKeys[u]+"="+h,c=c.substring(f),h.length>0&&(o.push(a),a=r,s=0)}else s++,a.indexOf("?")>-1?a+="&":a+="?",a+=t.queryKeys[u]+"="+t.queryValues[u];return o.push(a),t.send(o,"RequestJSONPPromise.supermap_callbacks["+n+"]",e&&e.proxy),i},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t,n){var r=e.length;if(r>0)for(var o=(new Date).getTime(),i=0;i<r;i++){var a=e[i];a.indexOf("?")>-1?a+="&":a+="?",a+="sectionCount="+r,a+="&sectionIndex="+i,a+="&jsonpUserID="+o,n&&(a=decodeURIComponent(a),a=n+encodeURIComponent(a)),ip()(a,{jsonpCallbackFunction:t,timeout:3e4})}},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}},lp=function(){return void 0!=Xh?Xh:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},up=function(){return Zh||45e3},cp={commit:function(e,t,n,r){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,n,r);case"POST":return this.post(t,n,r);case"PUT":return this.put(t,n,r);case"DELETE":return this.delete(t,n,r);default:return this.get(t,n,r)}},supportDirectRequest:function(e,t){return!!w.isInTheSameDomain(e)||(void 0!=t.crossOrigin?t.crossOrigin:lp()||t.proxy)},get:function(e,t,n){n=n||{};if(e=w.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){var r={url:e=e.replace(".json",".jsonp"),data:t};return sp.GET(r)}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")),t,n):this._fetch(e,t,n,"GET")},delete:function(e,t,n){n=n||{};if(e=w.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var r={url:e+="&_method=DELETE",data:t};return sp.DELETE(r)}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")),t,n):this._fetch(e,t,n,"DELETE")},post:function(e,t,n){if(n=n||{},!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var r={url:e+="&_method=POST",data:t};return sp.POST(r)}return this._fetch(this._processUrl(e,n),t,n,"POST")},put:function(e,t,n){if(n=n||{},e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var r={url:e+="&_method=PUT",data:t};return sp.PUT(r)}return this._fetch(e,t,n,"PUT")},urlIsLong:function(e){for(var t=0,n=null,r=0,o=e.length;r<o;r++)(n=e.charCodeAt(r))<127?t++:128<=n&&n<=2047?t+=2:2048<=n&&n<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,n,r){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof n&&(n=JSON.stringify(n)),this.post(t,n,r)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var n=e.split("?");2===n.length&&(e=n[0]+".json?"+n[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,n,r){return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]||FormData.prototype.isPrototypeOf(t)||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this._timeout(n.timeout,ap(e,{method:r,headers:n.headers,body:"PUT"===r||"POST"===r?t:void 0,credentials:this._getWithCredentials(n),mode:"cors",timeout:up()}).then(function(e){return e})):ap(e,{method:r,body:"PUT"===r||"POST"===r?t:void 0,headers:n.headers,credentials:this._getWithCredentials(n),mode:"cors",timeout:up()}).then(function(e){return e})},_getWithCredentials:function(e){return!0===e.withCredentials?"include":!1===e.withCredentials?"omit":"same-origin"},_fetchJsonp:function(e,t){return t=t||{},ip()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(n,r){setTimeout(function(){r(new Error("timeout"))},e),t.then(n,r)})},_getParameterString:function(e){var t=[];for(var n in e){var r,o=e[n];if(null!=o&&"function"!=typeof o)r=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(n)+"="+r)}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}};!function(e){e[e.Unknown=0]="Unknown",e[e.Point=1]="Point",e[e.LineString=2]="LineString",e[e.Polygon=3]="Polygon",e[e.MultiPoint=4]="MultiPoint",e[e.MultiLineString=5]="MultiLineString",e[e.MultiPolygon=6]="MultiPolygon",e[e.GeometryCollection=7]="GeometryCollection",e[e.CircularString=8]="CircularString",e[e.CompoundCurve=9]="CompoundCurve",e[e.CurvePolygon=10]="CurvePolygon",e[e.MultiCurve=11]="MultiCurve",e[e.MultiSurface=12]="MultiSurface",e[e.Curve=13]="Curve",e[e.Surface=14]="Surface",e[e.PolyhedralSurface=15]="PolyhedralSurface",e[e.TIN=16]="TIN",e[e.Triangle=17]="Triangle"}(Qh||(Qh={}));var fp=n(828);function hp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pp,dp=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,n,r;return t=e,r=[{key:"getRootAsGeometry",value:function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsGeometry",value:function(t,n){return t.setPosition(t.position()+fp.XU),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startGeometry",value:function(e){e.startObject(8)}},{key:"addEnds",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"createEndsVector",value:function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addInt32(t[n]);return e.endVector()}},{key:"startEndsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"addXy",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createXyVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}},{key:"startXyVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addZ",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"createZVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}},{key:"startZVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addM",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"createMVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}},{key:"startMVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addT",value:function(e,t){e.addFieldOffset(4,t,0)}},{key:"createTVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}},{key:"startTVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addTm",value:function(e,t){e.addFieldOffset(5,t,0)}},{key:"createTmVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;n>=0;n--)e.addInt64(t[n]);return e.endVector()}},{key:"startTmVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addType",value:function(e,t){e.addFieldInt8(6,t,Qh.Unknown)}},{key:"addParts",value:function(e,t){e.addFieldOffset(7,t,0)}},{key:"createPartsVector",value:function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}},{key:"startPartsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"endGeometry",value:function(e){return e.endObject()}},{key:"createGeometry",value:function(t,n,r,o,i,a,s,l,u){return e.startGeometry(t),e.addEnds(t,n),e.addXy(t,r),e.addZ(t,o),e.addM(t,i),e.addT(t,a),e.addTm(t,s),e.addType(t,l),e.addParts(t,u),e.endGeometry(t)}}],(n=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"ends",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}},{key:"endsLength",value:function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"endsArray",value:function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"xy",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"xyLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"xyArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"z",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"zLength",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"zArray",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"m",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"mLength",value:function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"mArray",value:function(){var e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"t",value:function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"tLength",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"tArray",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"tm",value:function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}},{key:"tmLength",value:function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):Qh.Unknown}},{key:"parts",value:function(t,n){var r=this.bb.__offset(this.bb_pos,18);return r?(n||new e).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"partsLength",value:function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}}])&&hp(t.prototype,n),r&&hp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yp(e,t){for(var n=[],r=0;r<e.length;r+=2){var o=[e[r],e[r+1]];t&&o.push(t[r>>1]),n.push(o)}return n}function vp(e,t,n){if(!n||0===n.length)return[yp(e,t)];var r,o=0,i=Array.from(n).map(function(t){return e.slice(o,o=t<<1)});return t&&(o=0,r=Array.from(n).map(function(e){return t.slice(o,o=e)})),i.map(function(e,t){return yp(e,r?r[t]:void 0)})}function gp(e,t){var n=t;if(n===Qh.Unknown&&(n=e.type()),n===Qh.GeometryCollection){for(var r=[],o=0;o<e.partsLength();o++){var i=e.parts(o),a=i.type();r.push(gp(i,a))}return{type:Qh[n],geometries:r}}if(n===Qh.MultiPolygon){for(var s=[],l=0;l<e.partsLength();l++)s.push(gp(e.parts(l),Qh.Polygon));return{type:Qh[n],coordinates:s.map(function(e){return e.coordinates})}}var u=function(e,t){var n=e.xyArray(),r=e.zArray();switch(t){case Qh.Point:var o=Array.from(n);return r&&o.push(r[0]),o;case Qh.MultiPoint:case Qh.LineString:return yp(n,r);case Qh.MultiLineString:case Qh.Polygon:return vp(n,r,e.endsArray())}}(e,n);return{type:Qh[n],coordinates:u}}function mp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.Byte=0]="Byte",e[e.UByte=1]="UByte",e[e.Bool=2]="Bool",e[e.Short=3]="Short",e[e.UShort=4]="UShort",e[e.Int=5]="Int",e[e.UInt=6]="UInt",e[e.Long=7]="Long",e[e.ULong=8]="ULong",e[e.Float=9]="Float",e[e.Double=10]="Double",e[e.String=11]="String",e[e.Json=12]="Json",e[e.DateTime=13]="DateTime",e[e.Binary=14]="Binary"}(pp||(pp={}));var bp=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,n,r;return t=e,r=[{key:"getRootAsColumn",value:function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsColumn",value:function(t,n){return t.setPosition(t.position()+fp.XU),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startColumn",value:function(e){e.startObject(11)}},{key:"addName",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addType",value:function(e,t){e.addFieldInt8(1,t,pp.Byte)}},{key:"addTitle",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"addWidth",value:function(e,t){e.addFieldInt32(4,t,-1)}},{key:"addPrecision",value:function(e,t){e.addFieldInt32(5,t,-1)}},{key:"addScale",value:function(e,t){e.addFieldInt32(6,t,-1)}},{key:"addNullable",value:function(e,t){e.addFieldInt8(7,+t,1)}},{key:"addUnique",value:function(e,t){e.addFieldInt8(8,+t,0)}},{key:"addPrimaryKey",value:function(e,t){e.addFieldInt8(9,+t,0)}},{key:"addMetadata",value:function(e,t){e.addFieldOffset(10,t,0)}},{key:"endColumn",value:function(e){var t=e.endObject();return e.requiredField(t,4),t}},{key:"createColumn",value:function(t,n,r,o,i,a,s,l,u,c,f,h){return e.startColumn(t),e.addName(t,n),e.addType(t,r),e.addTitle(t,o),e.addDescription(t,i),e.addWidth(t,a),e.addPrecision(t,s),e.addScale(t,l),e.addNullable(t,u),e.addUnique(t,c),e.addPrimaryKey(t,f),e.addMetadata(t,h),e.endColumn(t)}}],(n=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):pp.Byte}},{key:"title",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"width",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"precision",value:function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"scale",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"nullable",value:function(){var e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}},{key:"unique",value:function(){var e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"primaryKey",value:function(){var e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"metadata",value:function(e){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&mp(t.prototype,n),r&&mp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,n,r;return t=e,r=[{key:"getRootAsFeature",value:function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsFeature",value:function(t,n){return t.setPosition(t.position()+fp.XU),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startFeature",value:function(e){e.startObject(3)}},{key:"addGeometry",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addProperties",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createPropertiesVector",value:function(e,t){e.startVector(1,t.length,1);for(var n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()}},{key:"startPropertiesVector",value:function(e,t){e.startVector(1,t,1)}},{key:"addColumns",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"createColumnsVector",value:function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}},{key:"startColumnsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"endFeature",value:function(e){return e.endObject()}},{key:"finishFeatureBuffer",value:function(e,t){e.finish(t)}},{key:"finishSizePrefixedFeatureBuffer",value:function(e,t){e.finish(t,void 0,!0)}},{key:"createFeature",value:function(t,n,r,o){return e.startFeature(t),e.addGeometry(t,n),e.addProperties(t,r),e.addColumns(t,o),e.endFeature(t)}}],(n=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"geometry",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?(e||new dp).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}},{key:"properties",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}},{key:"propertiesLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"propertiesArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"columns",value:function(e,t){var n=this.bb.__offset(this.bb_pos,8);return n?(t||new bp).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}},{key:"columnsLength",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}}])&&wp(t.prototype,n),r&&wp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),xp=(new TextEncoder,new TextDecoder);function Sp(e,t){var n={};if(!t||0===t.length)return n;var r=e.propertiesArray();if(!r)return n;for(var o=new DataView(r.buffer,r.byteOffset),i=e.propertiesLength(),a=0;a<i;){var s=o.getUint16(a,!0);a+=2;var l=t[s],u=l.name;switch(l.type){case pp.Bool:n[u]=!!o.getUint8(a),a+=1;break;case pp.Byte:n[u]=o.getInt8(a),a+=1;break;case pp.UByte:n[u]=o.getUint8(a),a+=1;break;case pp.Short:n[u]=o.getInt16(a,!0),a+=2;break;case pp.UShort:n[u]=o.getUint16(a,!0),a+=2;break;case pp.Int:n[u]=o.getInt32(a,!0),a+=4;break;case pp.UInt:n[u]=o.getUint32(a,!0),a+=4;break;case pp.Long:n[u]=Number(o.getBigInt64(a,!0)),a+=8;break;case pp.ULong:n[u]=Number(o.getBigUint64(a,!0)),a+=8;break;case pp.Float:n[u]=o.getFloat32(a,!0),a+=4;break;case pp.Double:n[u]=o.getFloat64(a,!0),a+=8;break;case pp.DateTime:case pp.String:var c=o.getUint32(a,!0);a+=4,n[u]=xp.decode(r.subarray(a,a+c)),a+=c;break;case pp.Json:var f=o.getUint32(a,!0);a+=4;var h=xp.decode(r.subarray(a,a+f));n[u]=JSON.parse(h),a+=f;break;default:throw new Error("Unknown type "+l.type)}}return n}function Op(e,t){var n=t.columns;return{type:"Feature",geometry:gp(e.geometry(),t.geometryType),properties:Sp(e,n)}}var Pp=n(425);function Tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var kp=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,n,r;return t=e,r=[{key:"getRootAsCrs",value:function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsCrs",value:function(t,n){return t.setPosition(t.position()+fp.XU),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startCrs",value:function(e){e.startObject(6)}},{key:"addOrg",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addCode",value:function(e,t){e.addFieldInt32(1,t,0)}},{key:"addName",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"addWkt",value:function(e,t){e.addFieldOffset(4,t,0)}},{key:"addCodeString",value:function(e,t){e.addFieldOffset(5,t,0)}},{key:"endCrs",value:function(e){return e.endObject()}},{key:"createCrs",value:function(t,n,r,o,i,a,s){return e.startCrs(t),e.addOrg(t,n),e.addCode(t,r),e.addName(t,o),e.addDescription(t,i),e.addWkt(t,a),e.addCodeString(t,s),e.endCrs(t)}}],(n=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"org",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"code",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"wkt",value:function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"codeString",value:function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&Tp(t.prototype,n),r&&Tp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Cp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ep=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,n,r;return t=e,r=[{key:"getRootAsHeader",value:function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsHeader",value:function(t,n){return t.setPosition(t.position()+fp.XU),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startHeader",value:function(e){e.startObject(14)}},{key:"addName",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addEnvelope",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createEnvelopeVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;n>=0;n--)e.addFloat64(t[n]);return e.endVector()}},{key:"startEnvelopeVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addGeometryType",value:function(e,t){e.addFieldInt8(2,t,Qh.Unknown)}},{key:"addHasZ",value:function(e,t){e.addFieldInt8(3,+t,0)}},{key:"addHasM",value:function(e,t){e.addFieldInt8(4,+t,0)}},{key:"addHasT",value:function(e,t){e.addFieldInt8(5,+t,0)}},{key:"addHasTm",value:function(e,t){e.addFieldInt8(6,+t,0)}},{key:"addColumns",value:function(e,t){e.addFieldOffset(7,t,0)}},{key:"createColumnsVector",value:function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}},{key:"startColumnsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"addFeaturesCount",value:function(e,t){e.addFieldInt64(8,t,BigInt("0"))}},{key:"addIndexNodeSize",value:function(e,t){e.addFieldInt16(9,t,16)}},{key:"addCrs",value:function(e,t){e.addFieldOffset(10,t,0)}},{key:"addTitle",value:function(e,t){e.addFieldOffset(11,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(12,t,0)}},{key:"addMetadata",value:function(e,t){e.addFieldOffset(13,t,0)}},{key:"endHeader",value:function(e){return e.endObject()}},{key:"finishHeaderBuffer",value:function(e,t){e.finish(t)}},{key:"finishSizePrefixedHeaderBuffer",value:function(e,t){e.finish(t,void 0,!0)}}],(n=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"envelope",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"envelopeLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"envelopeArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"geometryType",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Qh.Unknown}},{key:"hasZ",value:function(){var e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasM",value:function(){var e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasT",value:function(){var e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasTm",value:function(){var e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"columns",value:function(e,t){var n=this.bb.__offset(this.bb_pos,18);return n?(t||new bp).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}},{key:"columnsLength",value:function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"featuresCount",value:function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}},{key:"indexNodeSize",value:function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}},{key:"crs",value:function(e){var t=this.bb.__offset(this.bb_pos,24);return t?(e||new kp).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}},{key:"title",value:function(e){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"metadata",value:function(e){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&Cp(t.prototype,n),r&&Cp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ap(e){for(var t=Ep.getRootAsHeader(e),n=t.featuresCount(),r=t.indexNodeSize(),o=[],i=0;i<t.columnsLength();i++){var a=t.columns(i);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}var s=t.crs(),l=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:t.geometryType(),columns:o,envelope:null,featuresCount:Number(n),indexNodeSize:r,crs:l,title:t.title(),description:t.description(),metadata:t.metadata()}}var Mp=n(351);function Rp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ip,jp=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._extraRequestThreshold=262144}var t,n,r;return t=e,(n=[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(e){if(e<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}}])&&Rp(t.prototype,n),r&&Rp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Lp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}jp.global=new jp,function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(Ip||(Ip={}));var Dp=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Ip.Debug].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Ip.Info].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Ip.Warn].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Ip.Error].concat(t))}},{key:"log",value:function(e){if(!(this.logLevel>e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];switch(e){case Ip.Debug:var o;(o=console).debug.apply(o,n);break;case Ip.Info:var i;(i=console).info.apply(i,n);break;case Ip.Warn:var a;(a=console).warn.apply(a,n);break;case Ip.Error:var s;(s=console).error.apply(s,n)}}}}],(n=null)&&Lp(t.prototype,n),r&&Lp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Np(e){"@babel/helpers - typeof";return(Np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bp(){Bp=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&n.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var r;this._invoke=function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,s){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==Np(f)&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,a,s)},function(e){r("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,s)})}s(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function Fp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hp(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,s=a instanceof Wp;Promise.resolve(s?a.v:a).then(function(n){if(s){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}o(i.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function Wp(e,t){this.v=e,this.k=t}Dp.logLevel=Ip.Warn,Hp.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Hp.prototype.next=function(e){return this._invoke("next",e)},Hp.prototype.throw=function(e){return this._invoke("throw",e)},Hp.prototype.return=function(e){return this._invoke("return",e)};var Up=40;function Jp(e,t){t=Math.min(Math.max(+t,2),65535);var n=e,r=n;do{r+=n=Math.ceil(n/t)}while(1!==n);return r*Up}function qp(e,t){if(t<2)throw new Error("Node size must be at least 2");if(0===e)throw new Error("Number of items must be greater than 0");var n=e,r=n,o=[n];do{r+=n=Math.ceil(n/t),o.push(n)}while(1!==n);var i=[];n=r;for(var a=0,s=o;a<s.length;a++){var l=s[a];i.push(n-l),n-=l}for(var u=[],c=0;c<o.length;c++)u.push([i[c],i[c]+o[c]]);return u}function Yp(e,t,n,r){return Xp.apply(this,arguments)}function Xp(){var e;return e=Bp().mark(function e(t,n,r,o){var i,a,s,l,u,c,f,h,p,d;return Bp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=function(){function e(t,n){zp(this,e),this._level=n,this.nodes=t}var t,n,r;return t=e,(n=[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(e){console.assert(e>this.nodes[1]),this.nodes[1]=e}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}])&&Vp(t.prototype,n),r&&Vp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),a=r.minX,s=r.minY,l=r.maxX,u=r.maxY,Dp.info("tree items: ".concat(t,", nodeSize: ").concat(n)),c=qp(t,n),f=c[0][0],void 0,y=c.length-1,h=new i([0,1],y),p=[h],Dp.debug("starting stream search with queue: ".concat(p,", numItems: ").concat(t,", nodeSize: ").concat(n,", levelBounds: ").concat(c)),d=Bp().mark(function e(){var r,h,d,y,v,g,m,b,w,_,x,S;return Bp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.shift(),Dp.debug("popped node: ".concat(r,", queueLength: ").concat(p.length)),h=r.startNode(),d=h>=f,y=Fp(c[r.level()],2),v=y[1],g=Math.min(r.endNode()+n,v),m=g-h,e.next=9,new Wp(o(h*Up,m*Up),0);case 9:b=e.sent,w=new Float64Array(b),_=new Uint32Array(b),x=Bp().mark(function e(n){var o,c,y,v,g,m,b,x;return Bp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l<w[(o=5*(n-h))+0])){e.next=3;break}return e.abrupt("return","continue");case 3:if(!(u<w[o+1])){e.next=5;break}return e.abrupt("return","continue");case 5:if(!(a>w[o+2])){e.next=7;break}return e.abrupt("return","continue");case 7:if(!(s>w[o+3])){e.next=9;break}return e.abrupt("return","continue");case 9:if(c=_[8+(o<<1)],y=_[9+(o<<1)],v=Zp(y,c),!d){e.next=17;break}return g=function(){if(n<t-1){var e=5*(n-h+1),r=_[8+(e<<1)];return Zp(_[9+(e<<1)],r)-v}return null}(),e.next=16,[v,n-f,g];case 16:return e.abrupt("return","continue");case 17:if(m=jp.global.extraRequestThreshold()/Up,!(void 0!==(b=p[p.length-1])&&b.level()==r.level()-1&&v<b.endNode()+m)){e.next=23;break}return Dp.debug('Merging "nodeRange" request into existing range: '.concat(b,", newOffset: ").concat(b.endNode()," -> ").concat(v)),b.extendEndNodeToNewOffset(v),e.abrupt("return","continue");case 23:void 0,S=r.level()-1,x=new i([v,v+1],S),void 0!==b&&b.level()==x.level()?Dp.info("Same level, but too far away. Pushing new request at offset: ".concat(v," rather than merging with distant ").concat(b)):Dp.info("Pushing new level for ".concat(x," onto queue with nearestNodeRange: ").concat(b," since there's not already a range for this level.")),p.push(x);case 26:case"end":return e.stop()}var S},e)}),S=h;case 14:if(!(S<g)){e.next=22;break}return e.delegateYield(x(S),"t0",16);case 16:if("continue"!==e.t0){e.next=19;break}return e.abrupt("continue",19);case 19:S++,e.next=14;break;case 22:case"end":return e.stop()}},e)});case 9:if(0==p.length){e.next=13;break}return e.delegateYield(d(),"t0",11);case 11:e.next=9;break;case 13:case"end":return e.stop()}var y},e)}),(Xp=function(){return new Hp(e.apply(this,arguments))}).apply(this,arguments)}function Zp(e,t){if(0!=(4293918720&e))throw Error("integer is too large to be safely represented");return t+e*Math.pow(2,32)}var Qp=new Uint8Array([102,103,98,3,102,103,98,0]),Kp=4;function $p(e){"@babel/helpers - typeof";return($p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ed(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=nd(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function td(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||nd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nd(e,t){if(e){if("string"==typeof e)return rd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rd(e,t):void 0}}function rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function od(){od=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&n.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var r;this._invoke=function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,s){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==$p(f)&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,a,s)},function(e){r("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,s)})}s(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function id(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function ad(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){id(i,r,o,a,s,"next",e)}function s(e){id(i,r,o,a,s,"throw",e)}a(void 0)})}}function sd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ud(e,t,n){return t&&ld(e.prototype,t),n&&ld(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cd(e){return function(){return new fd(e.apply(this,arguments))}}function fd(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,s=a instanceof dd;Promise.resolve(s?a.v:a).then(function(n){if(s){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}o(i.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function hd(e){return new dd(e,0)}function pd(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new dd(r=new Promise(function(n){n(e[t](r))}),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function dd(e,t){this.v=e,this.k=t}function yd(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new vd(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function vd(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(vd=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new vd(e)}fd.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},fd.prototype.next=function(e){return this._invoke("next",e)},fd.prototype.throw=function(e){return this._invoke("throw",e)},fd.prototype.return=function(e){return this._invoke("return",e)};var gd=function(){function e(t,n,r,o){sd(this,e),this.headerClient=t,this.header=n,this.headerLength=r,this.indexLength=o}return ud(e,[{key:"selectBbox",value:function(e){var t=this;return cd(od().mark(function n(){var r,o,i,a,s,l,u,c,f,h,p,d,y,v,g,m,b,w,_;return od().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=t.lengthBeforeTree(),o=t.headerClient,i=function(){var e=ad(od().mark(function e(t,n){var i;return od().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=0,e.abrupt("return",o.getRange(r+t,n,i,"index"));case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),a=[],s=[],l=!1,u=!1,n.prev=7,f=yd(Yp(t.header.featuresCount,t.header.indexNodeSize,e,i));case 9:return n.next=11,hd(f.next());case 11:if(!(l=!(h=n.sent).done)){n.next=26;break}if(p=h.value,d=td(p,2),y=d[0],v=td(p,3),(g=v[2])||(Dp.info("final feature"),m=jp.global.extraRequestThreshold(),g=m),0!=s.length){n.next=19;break}return s.push([y,g]),n.abrupt("continue",23);case 19:b=s[s.length-1],(w=y-(b[0]+b[1]))>jp.global.extraRequestThreshold()&&(Dp.info("Pushing new feature batch, since gap ".concat(w," was too large")),a.push(s),s=[]),s.push([y,g]);case 23:l=!1,n.next=9;break;case 26:n.next=32;break;case 28:n.prev=28,n.t0=n.catch(7),u=!0,c=n.t0;case 32:if(n.prev=32,n.prev=33,!l||null==f.return){n.next=37;break}return n.next=37,hd(f.return());case 37:if(n.prev=37,!u){n.next=40;break}throw c;case 40:return n.finish(37);case 41:return n.finish(32);case 42:return t.headerClient.logUsage("header+index"),s.length>0&&a.push(s),_=a.flatMap(function(e){return t.readFeatureBatch(e)}),n.delegateYield(pd(yd(Mp.ZN.merge(_))),"t1",46);case 46:case"end":return n.stop()}},n,null,[[7,28,32,42],[33,,37,41]])}))()}},{key:"lengthBeforeTree",value:function(){return Qp.length+Kp+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(){return new md(this.headerClient.httpClient)}},{key:"readFeatureBatch",value:function(e){var t=this;return cd(od().mark(function n(){var r,o,i,a,s,l,u,c,f,h,p;return od().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=td(e[0],1),o=r[0],i=td(e[e.length-1],2),a=i[0],s=i[1],l=a+s-o,u=t.buildFeatureClient(),c=ed(e),n.prev=7,c.s();case 9:if((f=c.n()).done){n.next=17;break}return h=td(f.value,1),p=h[0],n.next=13,hd(t.readFeature(u,p,l));case 13:return n.next=15,n.sent;case 15:n.next=9;break;case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(7),c.e(n.t0);case 22:return n.prev=22,c.f(),n.finish(22);case 25:u.logUsage("feature");case 26:case"end":return n.stop()}},n,null,[[7,19,22,25]])}))()}},{key:"readFeature",value:function(){var e=ad(od().mark(function e(t,n,r){var o,i,a,s,l,u,c;return od().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n+this.lengthBeforeFeatures(),e.next=3,t.getRange(o,4,r,"feature length");case 3:return a=e.sent,i=new DataView(a).getUint32(0,!0),e.next=7,t.getRange(o+4,i,r,"feature data");case 7:return s=e.sent,l=new Uint8Array(s),(u=new Uint8Array(i+Kp)).set(l,Kp),(c=new fp.cZ(u)).setPosition(Kp),e.abrupt("return",_p.getRootAsFeature(c));case 14:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()}],[{key:"open",value:function(){var t=ad(od().mark(function t(n){var r,o,i,a,s,l,u,c,f,h,p;return od().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=2024,o=new md(n),i=function(){var e,t=0;for(e=0;e<3;e++){t+=Math.pow(16,e)*Up}return t}(),a=r+i,Dp.debug("fetching header. minReqLength: ".concat(a," (assumedHeaderLength: ").concat(r,", assumedIndexLength: ").concat(i,")")),t.t0=Uint8Array,t.next=8,o.getRange(0,8,a,"header");case 8:if(t.t1=t.sent,(s=new t.t0(t.t1)).subarray(0,3).every(function(e,t){return Qp[t]===e})){t.next=13;break}throw Dp.error("bytes: ".concat(s," != ").concat(Qp)),new Error("Not a FlatGeobuf file");case 13:return Dp.debug("magic bytes look good"),t.next=16,o.getRange(8,4,a,"header");case 16:if(u=t.sent,!((l=new DataView(u).getUint32(0,!0))>10485760||l<8)){t.next=21;break}throw new Error("Invalid header size");case 21:return Dp.debug("headerLength: ".concat(l)),t.next=24,o.getRange(12,l,a,"header");case 24:return c=t.sent,f=new fp.cZ(new Uint8Array(c)),h=Ap(f),p=Jp(h.featuresCount,h.indexNodeSize),Dp.debug("completed: opening http reader"),t.abrupt("return",new e(o,h,l,p));case 30:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}]),e}(),md=function(){function e(t){sd(this,e),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof t?new bd(t):t}return ud(e,[{key:"getRange",value:function(){var e=ad(od().mark(function e(t,n,r,o){var i,a,s;return od().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.bytesEverUsed+=n,i=t-this.head,a=i+n,!(i>=0&&a<=this.buffer.byteLength)){e.next=5;break}return e.abrupt("return",this.buffer.slice(i,a));case 5:return s=Math.max(n,r),this.bytesEverFetched+=s,Dp.debug("requesting for new Range: ".concat(t,"-").concat(t+n-1)),e.next=10,this.httpClient.getRange(t,s,o);case 10:return this.buffer=e.sent,this.head=t,e.abrupt("return",this.buffer.slice(0,n));case 13:case"end":return e.stop()}},e,this)}));return function(t,n,r,o){return e.apply(this,arguments)}}()},{key:"logUsage",value:function(e){var t=e.split(" ")[0],n=this.bytesEverUsed,r=this.bytesEverFetched,o=(100*n/r).toFixed(2);Dp.info("".concat(t," bytes used/requested: ").concat(n," / ").concat(r," = ").concat(o,"%"))}}]),e}(),bd=function(){function e(t){sd(this,e),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=t}return ud(e,[{key:"getRange",value:function(){var e=ad(od().mark(function e(t,n,r){var o,i;return od().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=n,o="bytes=".concat(t,"-").concat(t+n-1),Dp.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(r,"), bytes: (this_request: ").concat(n,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(o)),e.next=6,fetch(this.url,{headers:{Range:o}});case 6:return i=e.sent,e.abrupt("return",i.arrayBuffer());case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}();function wd(e){"@babel/helpers - typeof";return(wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _d(){_d=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&n.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var r;this._invoke=function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,s){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==wd(f)&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,a,s)},function(e){r("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,s)})}s(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function xd(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function Sd(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){xd(i,r,o,a,s,"next",e)}function s(e){xd(i,r,o,a,s,"throw",e)}a(void 0)})}}function Od(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Pd(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Pd(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Pd=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Pd(e)}function Td(e){return new Ed(e,0)}function kd(e){return function(){return new Cd(e.apply(this,arguments))}}function Cd(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,s=a instanceof Ed;Promise.resolve(s?a.v:a).then(function(n){if(s){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}o(i.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function Ed(e,t){this.v=e,this.k=t}function Ad(){return(Ad=kd(_d().mark(function e(t,n,r){var o,i,a,s,l,u,c,f,h,p;return _d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Pp(t),i=function(){var e=Sd(_d().mark(function e(t){return _d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.slice(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.t0=Uint8Array,e.next=5,Td(i(8,"magic bytes"));case 5:if(e.t1=e.sent,(a=new e.t0(e.t1)).subarray(0,3).every(function(e,t){return Qp[t]===e})){e.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return e.t2=Uint8Array,e.next=12,Td(i(4,"header length"));case 12:return e.t3=e.sent,a=new e.t2(e.t3),s=new fp.cZ(a),l=s.readUint32(0),e.t4=Uint8Array,e.next=19,Td(i(l,"header data"));case 19:if(e.t5=e.sent,a=new e.t4(e.t5),s=new fp.cZ(a),u=Ap(s),r&&r(u),c=u.indexNodeSize,f=u.featuresCount,!(c>0)){e.next=29;break}return h=Jp(f,c),e.next=29,Td(i(h,"entire index, w/o rect"));case 29:return e.next=31,Td(Rd(i,u,n));case 31:if(!(p=e.sent)){e.next=36;break}return e.next=34,p;case 34:e.next=29;break;case 36:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Md(){return(Md=kd(_d().mark(function e(t,n,r,o){var i,a,s,l,u,c,f;return _d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Td(gd.open(t));case 2:i=e.sent,Dp.debug("opened reader"),o&&o(i.header),a=!1,s=!1,e.prev=7,u=Od(i.selectBbox(n));case 9:return e.next=11,Td(u.next());case 11:if(!(a=!(c=e.sent).done)){e.next=18;break}return f=c.value,e.next=15,r(f,i.header);case 15:a=!1,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),s=!0,l=e.t0;case 24:if(e.prev=24,e.prev=25,!a||null==u.return){e.next=29;break}return e.next=29,Td(u.return());case 29:if(e.prev=29,!s){e.next=32;break}throw l;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}},e,null,[[7,20,24,34],[25,,29,33]])}))).apply(this,arguments)}function Rd(e,t,n){return Id.apply(this,arguments)}function Id(){return(Id=Sd(_d().mark(function e(t,n,r){var o,i,a,s,l;return _d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,t(4,"feature length");case 3:if(e.t1=e.sent,0!==(o=new e.t0(e.t1)).byteLength){e.next=7;break}return e.abrupt("return");case 7:return i=new fp.cZ(o),a=i.readUint32(0),e.t2=Uint8Array,e.next=12,t(a,"feature data");case 12:return e.t3=e.sent,o=new e.t2(e.t3),(s=new Uint8Array(a+4)).set(o,4),(i=new fp.cZ(s)).setPosition(Kp),l=_p.getRootAsFeature(i),e.abrupt("return",r(l,n));case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jd(e,t){return{type:"FeatureCollection",features:function(e,t,n){if(!e.subarray(0,3).every(function(e,t){return Qp[t]===e}))throw new Error("Not a FlatGeobuf file");var r=new fp.cZ(e),o=r.readUint32(Qp.length);r.setPosition(Qp.length+Kp);var i=Ap(r);n&&n(i);var a=Qp.length+Kp+o,s=i.indexNodeSize,l=i.featuresCount;s>0&&(a+=Jp(l,s));for(var u=[];a<r.capacity();){var c=r.readUint32(a);r.setPosition(a+Kp);var f=_p.getRootAsFeature(r);u.push(t(f,i)),a+=Kp+c}return u}(e,Op,t)}}function Ld(e,t){return function(e,t,n){return Ad.apply(this,arguments)}(e,Op,t)}function Dd(e,t,n){return function(e,t,n,r){return Md.apply(this,arguments)}(e,t,Op,n)}function Nd(e,t,n){return e instanceof Uint8Array?jd(e,n):e instanceof ReadableStream?Ld(e,n):Dd(e,t,n)}function Bd(e){"@babel/helpers - typeof";return(Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fd(){Fd=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&n.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var r;this._invoke=function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,s){var l=u(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==Bd(f)&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,a,s)},function(e){r("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,s)})}s(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function Gd(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function zd(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Gd(i,r,o,a,s,"next",e)}function s(e){Gd(i,r,o,a,s,"throw",e)}a(void 0)})}}function Vd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hd(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Wd(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Wd(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Wd=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Wd(e)
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/}Cd.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Cd.prototype.next=function(e){return this._invoke("next",e)},Cd.prototype.throw=function(e){return this._invoke("throw",e)},Cd.prototype.return=function(e){return this._invoke("return",e)};var Ud={1:"circle",2:"line",3:"fill",5:"line",4:"circle",6:"fill",MultiPolygon:"fill",Point:"circle",MultiLineString:"line",MultiPoint:"circle",LineString:"line",Polygon:"fill"},Jd={circle:{"circle-radius":6,"circle-color":"#3fb1e3","circle-opacity":1,"circle-blur":0,"circle-translate":[0,0],"circle-stroke-width":0,"circle-stroke-color":"#000","circle-stroke-opacity":1},line:{"line-opacity":1,"line-color":"#3fb1e3","line-width":3,"line-blur":1},fill:{"fill-opacity":.8,"fill-color":"#3fb1e3","fill-translate":[0,0],"fill-antialias":!0,"fill-outline-color":"#3fb1e3"}},qd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t&&t.layerID?t.layerID:w.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=t||{},this.strategy=t.strategy||"bbox",this.url=t.url,this.loadedExtentsRtree_=new(rp()),this.layerType="",this.extent=this.options.extent,this._updateFeaturesFn=this._updateFeatures.bind(this)}var t,n,r;return t=e,(n=[{key:"onAdd",value:function(e){this.map=e;var t,n,r,o=[];if("bbox"===this.strategy){this.map.on("moveend",this._updateFeaturesFn);var i=this.map.getBounds().toArray();o=[i[0][0],i[0][1],i[1][0],i[1][1]]}if(this.extent){var a=(t=this.extent,r=[],function(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}(t,n=o)&&(t[0]>n[0]?r[0]=t[0]:r[0]=n[0],t[1]>n[1]?r[1]=t[1]:r[1]=n[1],t[2]<n[2]?r[2]=t[2]:r[2]=n[2],t[3]<n[3]?r[3]=t[3]:r[3]=n[3]),r);o=a&&a.length?a:this.extent}this._handleFeatures(o)}},{key:"moveLayer",value:function(e,t){this.map.removeLayer(this.layerId,t)}},{key:"removeLayer",value:function(){this.map.removeLayer(this.layerId)}},{key:"setVisibility",value:function(e){var t=e?"visible":"none";this.map.setLayoutProperty(this.layerId,"visibility",t)}},{key:"_handleFeatures",value:function(){var e=zd(Fd().mark(function e(t){var n,r,o;return Fd().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadData(t);case 2:return n=e.sent,e.next=5,this.iterateFeatures(n);case 5:r=e.sent,this.map.getSource(this.sourceId)?this.map.getSource(this.sourceId).setData(r):this.map.addSource(this.sourceId,{type:"geojson",data:r}),this.map.getLayer(this.layerId)||(o=Object.assign({id:this.layerId,type:this.layerType,source:this.sourceId,paint:Object.assign(Jd[this.layerType],this.options.paint)||{},layout:this.options.layout||{}}),this.map.addLayer(o));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_updateFeatures",value:function(){var e=zd(Fd().mark(function e(){var t,n,r,o,i=this;return Fd().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.map.getBounds().toArray(),n=[t[0][0],t[0][1],t[1][0],t[1][1]],this._forEachInExtent(n,function(e){return i._containsExtent(e.extent,n)})){e.next=11;break}return e.next=6,this._loadData(n);case 6:return r=e.sent,e.next=9,this.iterateFeatures(r);case 9:o=e.sent,this.map.getSource(this.sourceId).setData(o);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"iterateFeatures",value:function(){var e=zd(Fd().mark(function e(t){var n,r,o,i,a,s,l;return Fd().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={type:"FeatureCollection",features:[]},r=!1,o=!1,e.prev=3,a=Hd(t);case 5:return e.next=7,a.next();case 7:if(!(r=!(s=e.sent).done)){e.next=15;break}l=s.value,this.options.featureLoader&&"function"==typeof this.options.featureLoader&&(l=this.options.featureLoader(l)),this.layerType||(this.layerType=Ud[l.geometry.type]),n.features.push(l);case 12:r=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),o=!0,i=e.t0;case 21:if(e.prev=21,e.prev=22,!r||null==a.return){e.next=26;break}return e.next=26,a.return();case 26:if(e.prev=26,!o){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}},e,this,[[3,17,21,31],[22,,26,30]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_loadData",value:function(){var e=zd(Fd().mark(function e(t){var n,r,o=this;return Fd().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},t.length){e.next=7;break}return e.next=4,this._getStream(this.url);case 4:n=e.sent,e.next=9;break;case 7:r.value={extent:t.slice()},this.loadedExtentsRtree_.insert(r);case 9:return e.next=11,Nd(n&&n.body||this.url,r,function(e){o.layerType=Ud[e.geometryType]});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_getStream",value:function(){var e=zd(Fd().mark(function e(t){return Fd().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cp.get(t,{},{withoutFormatSuffix:!0}).then(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"_containsExtent",value:function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}},{key:"_getInExtent",value:function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.loadedExtentsRtree_.search(t).map(function(e){return e.value})}},{key:"_forEachInExtent",value:function(e,t){return this._forEach(this._getInExtent(e),t)}},{key:"_forEach",value:function(e,t){for(var n,r=0,o=e.length;r<o;r++)if(n=t(e[r]))return n;return n}}])&&Vd(t.prototype,n),r&&Vd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xd=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lngLat=fr.isArray(t)?{lng:t[0],lat:t[1]}:t,this.style=fr.extend({},n),this.attributes=r}var t,n,r;return t=e,(n=[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){this.id=e}},{key:"getLngLat",value:function(){return this.lngLat}},{key:"setLngLat",value:function(e){this.lngLat=fr.isArray(e)?{lng:e[0],lat:e[1]}:e}},{key:"setStyle",value:function(e){this.style=fr.extend(this.style,e)}},{key:"getStyle",value:function(){return this.style}},{key:"setAttributes",value:function(e){this.attributes=fr.extend({},this.attributes,e)}},{key:"getAttributes",value:function(){return this.attributes}}])&&Yd(t.prototype,n),r&&Yd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Zd={getPoint:function(e){if(e&&e instanceof Array)return new pf.DataSet([{geometry:{type:"Point",coordinates:e}}])},getPoints:function(e){if(e&&e instanceof Array){var t=[];return e.forEach(function(e){t.push({geometry:{type:"Point",coordinates:e.geometry.coordinates}})}),new pf.DataSet(t)}},getCurveLines:function(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var n=[];return t.forEach(function(t){var r=t.geometry&&t.geometry.coordinates,o={lng:r[0],lat:r[1]},i={lng:e[0],lat:e[1]},a=pf.utilCurve.getPoints([i,o]);n.push({geometry:{type:"LineString",coordinates:a}})}),new pf.DataSet(n)}},getCurveDynamicPoints:function(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var n=[];return t.forEach(function(t){for(var r=t.geometry&&t.geometry.coordinates,o={lng:r[0],lat:r[1]},i={lng:e[0],lat:e[1]},a=pf.utilCurve.getPoints([i,o]),s=0;s<a.length;s++)n.push({geometry:{type:"Point",coordinates:a[s]},time:s})}),new pf.DataSet(n)}}};function Qd(e,t,n,r,o){return{id:e,type:t,source:n||"vector-tiles","source-layer":r||e,paint:o}}function Kd(e){"@babel/helpers - typeof";return(Kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ey(e,t){return(ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ty(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ry(e);if(t){var o=ry(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Kd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ny(e)}(this,n)}}function ny(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ry(e){return(ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ey(e,t)}(i,O().Evented);var t,n,r,o=ty(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this)).options=t||{},n.url=e,n.fire("initialized",ny(n)),n}return t=i,n&&$d(t.prototype,n),r&&$d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}();function iy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ay=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"generateToken",value:function(e,t){var n=this.servers[e];if(n)return cp.post(n.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},w.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];this.servers[n.server]=n}}},{key:"registerToken",value:function(e,t){if(this.tokens=this.tokens||{},e&&t){var n=this._getTokenStorageKey(e);this.tokens[n]=t}}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=w.isArray(e)?e:[e];for(var n=0;n<e.length;n++){var r=this._getUrlRestString(e[0])||e[0];this.keys[r]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}},{key:"getKey",value:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}},{key:"loginiServer",value:function(e,t,n,r){e=w.urlPathAppend(e,"services/security/login");var o={username:t&&t.toString(),password:n&&n.toString(),rememberme:r};o=JSON.stringify(o);return cp.post(e,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){e=w.urlPathAppend(e,"services/security/logout");return cp.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(t,n){var r=e.SSO+"/login?service="+t;this._open(r,n)}},{key:"loginiPortal",value:function(e,t,n){e=w.urlPathAppend(e,"web/login");var r={username:t&&t.toString(),password:n&&n.toString()};r=JSON.stringify(r);return cp.post(e,r,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){e=w.urlPathAppend(e,"services/security/logout");return cp.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(e,t,n){if(w.isInTheSameDomain(e)){var r=w.urlPathAppend(e,"icloud/security/tokens"),o=t||{},i={username:o.userName&&o.userName.toString(),password:o.password&&o.password.toString()};i=JSON.stringify(i);var a=this;return cp.post(r,i,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return a.imanagerToken=e,e})})}var s=!n||n.isNewTab;this._open(e,s)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}},{key:"destroyKey",value:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}},{key:"appendCredential",value:function(e){var t=e,n=this.getToken(e),r=n?new _o(n,"token"):null;return r||(r=(n=this.getKey(e))?new _o(n,"key"):null),r&&(t=w.urlAppend(t,r.getUrlParameters())),t}},{key:"_open",value:function(e,t){t=null==t||t;var n=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,r=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+r+", left="+n+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",o)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){if(!e)return e;var t=e.match(/(http|https):\/\/(.*\/rest)/i);return t?t[0]:e}}],(n=null)&&iy(t.prototype,n),r&&iy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sy(e){"@babel/helpers - typeof";return(sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ly(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ay.INNER_WINDOW_WIDTH=600,ay.INNER_WINDOW_HEIGHT=600,ay.SSO="https://sso.supermap.com",ay.ONLINE="https://www.supermapol.com";
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uy=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,w.isArray(t)?(r.urls=t,r.length=t.length,r.totalTimes=r.length,1===r.length?r.url=t[0]:(r.index=parseInt(Math.random()*r.length),r.url=t[r.index])):(r.totalTimes=1,r.url=t),w.isArray(t)&&!r.isServiceSupportPolling()&&(r.url=t[0],r.totalTimes=1),n=n||{},this.crossOrigin=n.crossOrigin,this.headers=n.headers,w.extend(this,n),r.isInTheSameDomain=w.isInTheSameDomain(r.url),r.events=new To(r,null,r.EVENT_TYPES,!0),r.eventListeners instanceof Object&&r.events.on(r.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;w.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=e.scope.format;if(t&&!this.supportDataFormat(t))throw new Error("".concat(this.CLASS_NAME," is not surport ").concat(t," format!"));var n=this;e.url=e.url||n.url,this._returnContent(e)&&!e.url.includes("returnContent=true")&&(e.url=w.urlAppend(e.url,"returnContent=true")),e.proxy=e.proxy||n.proxy,e.withCredentials=void 0!=e.withCredentials?e.withCredentials:n.withCredentials,e.crossOrigin=void 0!=e.crossOrigin?e.crossOrigin:n.crossOrigin,e.headers=e.headers||n.headers,e.isInTheSameDomain=n.isInTheSameDomain,e.withoutFormatSuffix=e.scope.withoutFormatSuffix||!1,e.url=ay.appendCredential(e.url),n.calculatePollingTimes(),n._processSuccess=e.success,n._processFailed=e.failure,e.scope=n,e.success=n.getUrlCompleted,e.failure=n.getUrlFailed,n.options=e,n._commit(n.options)}},{key:"getUrlCompleted",value:function(e){this._processSuccess(e)}},{key:"getUrlFailed",value:function(e){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(e)}},{key:"ajaxPolling",value:function(){var e=this,t=e.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(n,n.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=w.isInTheSameDomain(t),e._commit(e.options)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e){e=w.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function(e){var t=(e=w.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t})}},{key:"_returnContent",value:function(e){return e.scope.format!==yn.FGB&&!!e.scope.returnContent}},{key:"supportDataFormat",value:function(e){return this.dataFormat().includes(e)}},{key:"dataFormat",value:function(){return[yn.GEOJSON,yn.ISERVER]}},{key:"_commit",value:function(e){if("POST"===e.method||"PUT"===e.method||"PATCH"===e.method)if(e.params&&(e.url=w.urlAppend(e.url,w.getParameterString(e.params||{}))),"object"===sy(e.data))try{e.params=w.toJSON(e.data)}catch(e){console.log("ä¸æ¯jsonå¯¹è±¡")}else e.params=e.data;cp.commit(e.method,e.url,e.params,{headers:e.headers,withoutFormatSuffix:e.withoutFormatSuffix,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(t){var n=t;return"string"==typeof t&&(n=(new Nt).read(t)),(!n||n.error||n.code>=300&&304!==n.code)&&(n=n&&n.error?{error:n.error}:{error:n}),n&&e.scope.format===yn.FGB&&(n.newResourceLocation=n.newResourceLocation.replace(".json","")+".fgb"),n}).catch(function(e){return{error:e}}).then(function(t){t.error?(e.scope?i.bind(e.failure,e.scope):e.failure)(t):(t.succeed=void 0==t.succeed||t.succeed,(e.scope?i.bind(e.success,e.scope):e.success)(t))})}}])&&ly(t.prototype,n),r&&ly(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&"string"==typeof t.filters&&(t.filters=t.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&cy(t.prototype,n),r&&cy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var py=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&(t.filters=t.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&hy(t.prototype,n),r&&hy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dy(e){"@babel/helpers - typeof";return(dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vy(){return(vy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=by(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gy(e,t){return(gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function my(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=by(e);if(t){var o=by(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function by(e){return(by=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gy(e,t)}(i,uy);var t,n,r,o=my(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).options=t||{},n.CLASS_NAME="SuperMap.AddressMatchService",n}return t=i,(n=[{key:"destroy",value:function(){vy(by(i.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t){t instanceof fy&&this.processAsync(e,t)}},{key:"decode",value:function(e,t){t instanceof py&&this.processAsync(e,t)}},{key:"processAsync",value:function(e,t){this.request({method:"GET",url:e,params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){e.succeed&&delete e.succeed,vy(by(i.prototype),"serviceProcessCompleted",this).call(this,e)}},{key:"serviceProcessFailed",value:function(e){vy(by(i.prototype),"serviceProcessFailed",this).call(this,e)}}])&&yy(t.prototype,n),r&&yy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _y(e){"@babel/helpers - typeof";return(_y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sy(e,t){return(Sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Oy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Py(e);if(t){var o=Py(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Py(e){return(Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ty=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sy(e,t)}(i,oy);var t,n,r,o=Oy(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"code",value:function(e,t){var n=this;new wy(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).code(w.urlPathAppend(n.url,"geocoding"),e)}},{key:"decode",value:function(e,t){var n=this;new wy(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).decode(w.urlPathAppend(n.url,"geodecoding"),e)}}])&&xy(t.prototype,n),r&&xy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ky(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Cy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=gn.LINE,this.queryOption=mn.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.QueryParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,n=e.queryParams,r=n.length;t<r;t++)n[t].destroy();e.queryParams=null}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null}}])&&ky(t.prototype,n),r&&ky(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ey(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ay=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,w.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isQueryPoint=null,e.isQueryLine=null,e.isQueryRegion=null,e.attributeFilter=null,e.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var e="";return e+='"isQueryPoint":'+this.isQueryPoint+",",e+='"isQueryLine":'+this.isQueryLine+",",e+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter+'",'),e="{"+(e+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Ey(t.prototype,n),r&&Ey(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function My(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ry=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,w.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.queryMode=null,e.bounds=null,e.chartLayerNames=null,e.chartQueryFilterParameters=null,e.returnContent=!0,e.startRecord=0,e.expectCount=null}},{key:"getVariablesJson",value:function(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],n=this.chartLayerNames.length,r=0;r<n;r++)t.push('"'+this.chartLayerNames[r]+'"');e+='"chartLayerNames":'+("["+t.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof Ay&&o.push(s.toJson())}var l="["+o.join(",")+"]";l='"chartQueryParams":'+l+",",l+='"startRecord":'+this.startRecord+",",e+='"chartQueryParameters":'+(l="{"+(l+='"expectCount":'+this.expectCount)+"}")}return e="{"+e+"}"}}])&&My(t.prototype,n),r&&My(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Iy(e){"@babel/helpers - typeof";return(Iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ly(e,t){return(Ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fy(e);if(t){var o=Fy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ny(this,n)}}function Ny(e,t){if(t&&("object"===Iy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return By(e)}function By(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fy(e){return(Fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Gy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ly(e,t)}(i,uy);var t,n,r,o=Dy(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),t=t||{},n.returnContent=null,n.format=yn.GEOJSON,w.extend(By(n),t);var r=By(n);return t.format&&(r.format=t.format.toUpperCase()),r.url?(r.url=w.urlPathAppend(r.url,"queryResults"),n.CLASS_NAME="SuperMap.ChartQueryService",n):Ny(n)}return t=i,(n=[{key:"destroy",value:function(){uy.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof Ry){var t,n=this;n.returnContent=e.returnContent,t=e.getVariablesJson(),n.returnContent&&(n.url=w.urlAppend(n.url,"returnContent=true")),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if((e=w.transformResult(e))&&e.recordsets&&this.format===yn.GEOJSON)for(var t=0,n=e.recordsets,r=n.length;t<r;t++)if(n[t].features){var o=new lr;n[t].features=o.toGeoJSON(n[t].features)}this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new Cy({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent})}}])&&jy(t.prototype,n),r&&jy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function zy(e){"@babel/helpers - typeof";return(zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hy(){return(Hy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jy(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Wy(e,t){return(Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Uy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Jy(e);if(t){var o=Jy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Jy(e){return(Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wy(e,t)}(i,uy);var t,n,r,o=Uy(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",n}return t=i,(n=[{key:"destroy",value:function(){Hy(Jy(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"processAsync",value:function(){var e=this;e.isTempLayers||w.urlPathAppend(e.url,"chartFeatureInfoSpecs"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&Vy(t.prototype,n),r&&Vy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Yy(e){"@babel/helpers - typeof";return(Yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zy(e,t){return(Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Ky(e);if(t){var o=Ky(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Yy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ky(e){return(Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zy(e,t)}(i,oy);var t,n,r,o=Qy(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"queryChart",value:function(e,t,n){var r=this,o=r._processParams(e),i=r._processFormat(n);new Gy(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).processAsync(o)}},{key:"getChartFeatureInfo",value:function(e){var t=this,n=t.url.concat();n=w.urlPathAppend(n,"chartFeatureInfoSpecs"),new qy(n,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}},{key:"_processParams",value:function(e){if(!e)return{};e.returnContent=null==e.returnContent||e.returnContent,e.filter&&(e.chartQueryFilterParameters=fr.isArray(e.filter)?e.filter:[e.filter]),e.bounds&&(e.bounds instanceof Array&&(e.bounds=new Oe(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3])),e.bounds instanceof O().LngLatBounds&&(e.bounds=new Oe(e.bounds.getSouthWest().lng,e.bounds.getSouthWest().lat,e.bounds.getNorthEast().lng,e.bounds.getNorthEast().lat)))}},{key:"_processFormat",value:function(e){return e||yn.GEOJSON}}])&&Xy(t.prototype,n),r&&Xy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ev(e){"@babel/helpers - typeof";return(ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nv(e,t){return(nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=iv(e);if(t){var o=iv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ev(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ov(e)}(this,n)}}function ov(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iv(e){return(iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var av=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nv(e,t)}(i,uy);var t,n,r,o=rv(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],(n=o.call(this,e,t)).geometry=null,n.prjCoordSys=null,n.excludeField=null,w.extend(ov(n),t),n.CLASS_NAME="SuperMap.DataFlowService",n}return t=i,(n=[{key:"initBroadcast",value:function(){var e=this;return this.broadcastWebSocket=this._connect(w.urlPathAppend(e.url,"broadcast")),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket&&(e.broadcastWebSocket.isOpen=!1),t.eventType="broadcastSocketClosed",e.events.triggerEvent("broadcastSocketClosed",t)},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t)},this}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var e=this;return this.subscribeWebSocket=this._connect(w.urlPathAppend(e.url,"subscribe")),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t)},this.subscribeWebSocket.onclose=function(t){t.eventType="subscribeWebSocketClosed",e.events.triggerEvent("subscribeWebSocketClosed",t)},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t)},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t)},this}},{key:"setExcludeField",value:function(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){uy.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return w.toJSON(e)}},{key:"_onMessage",value:function(e){if(e.data&&e.data.indexOf("filterParam")>=0){var t=JSON.parse(e.data);return e.filterParam=t,e.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",e)}var n=JSON.parse(e.data);e.featureResult=n,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e)}},{key:"_connect",value:function(e){return e=ay.appendCredential(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new(0,window.MozWebSocket)(e):(console.log("no WebSocket"),null)}}])&&tv(t.prototype,n),r&&tv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sv(e){"@babel/helpers - typeof";return(sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uv(e,t){return(uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=hv(e);if(t){var o=hv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===sv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fv(e)}(this,n)}}function fv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hv(e){return(hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uv(e,t)}(i,oy);var t,n,r,o=cv(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).projection&&(t.prjCoordSys=t.projection),(n=o.call(this,e,t)).dataFlow=new av(e,t),n.dataFlow.events.on({broadcastSocketConnected:n._defaultEvent,broadcastSocketError:n._defaultEvent,broadcastFailed:n._defaultEvent,broadcastSucceeded:n._defaultEvent,subscribeSocketConnected:n._defaultEvent,subscribeSocketError:n._defaultEvent,messageSucceeded:n._defaultEvent,setFilterParamSucceeded:n._defaultEvent,scope:fv(n)});var r=fv(n);return r.on("subscribeSocketConnected",function(e){r.fire("subscribesucceeded",e)}),n}return t=i,(n=[{key:"initBroadcast",value:function(){return this.dataFlow.initBroadcast(),this}},{key:"broadcast",value:function(e){this.dataFlow.broadcast(e)}},{key:"initSubscribe",value:function(){return this.dataFlow.initSubscribe(),this}},{key:"setExcludeField",value:function(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this}},{key:"setGeometry",value:function(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this}},{key:"unSubscribe",value:function(){this.dataFlow.unSubscribe()}},{key:"unBroadcast",value:function(){this.dataFlow.unBroadcast()}},{key:"_defaultEvent",value:function(e){this.fire(e.eventType||e.type,e)}}])&&lv(t.prototype,n),r&&lv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dv(e){"@babel/helpers - typeof";return(dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vv(){return(vv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gv(e,t){return(gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=_v(e);if(t){var o=_v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bv(this,n)}}function bv(e,t){if(t&&("object"===dv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wv(e)}function wv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _v(e){return(_v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var xv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gv(e,t)}(i,uy);var t,n,r,o=mv(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),t?(n.datasource=null,n.dataset=null,t&&w.extend(wv(n),t),n.CLASS_NAME="SuperMap.DatasetService",n):bv(n)}return t=i,(n=[{key:"destroy",value:function(){vv(_v(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"getDatasetsService",value:function(e){var t=this;t.url=w.urlPathAppend(t.url,"datasources/name/".concat(e,"/datasets")),t.request({method:"GET",data:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"getDatasetService",value:function(e,t){var n=this;n.url=w.urlPathAppend(n.url,"datasources/name/".concat(e,"/datasets/name/").concat(t)),n.request({method:"GET",data:null,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}},{key:"setDatasetService",value:function(e){if(e){var t=w.toJSON(e);this.request({method:"PUT",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"deleteDatasetService",value:function(){this.request({method:"DELETE",data:null,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}])&&yv(t.prototype,n),r&&yv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Sv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ov=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.CreateDatasetParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.datasetType=null}}])&&Sv(t.prototype,n),r&&Sv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Pv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Tv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.datasourceName=null,e.datasetName=null,e.isFileCache=null,e.prjCoordSys=null,e.charset=null,e.palette=null,e.noValue=null}}])&&Pv(t.prototype,n),r&&Pv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kv(e){"@babel/helpers - typeof";return(kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ev(e,t){return(Ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Av(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Mv(e);if(t){var o=Mv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Mv(e){return(Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Rv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ev(e,t)}(i,oy);var t,n,r,o=Av(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getDatasets",value:function(e,t){if(e){var n=this;new xv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).getDatasetsService(e)}}},{key:"getDataset",value:function(e,t,n){if(e&&t){var r=this;new xv(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,eventListeners:{scope:r,processCompleted:n,processFailed:n}}).getDatasetService(e,t)}}},{key:"setDataset",value:function(e,t){if(e instanceof Ov||e instanceof Tv){if(e instanceof Ov)var n={datasetType:e.datasetType,datasetName:e.datasetName};else e instanceof Tv&&(n={datasetName:e.datasetName,isFileCache:e.isFileCache,description:e.description,prjCoordSys:e.prjCoordSys,charset:e.charset});var r=this,o=w.urlPathAppend(r.url,"datasources/name/".concat(e.datasourceName,"/datasets/name/").concat(e.datasetName));new xv(o,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).setDatasetService(n)}}},{key:"deleteDataset",value:function(e,t,n){var r=this,o=w.urlPathAppend(r.url,"datasources/name/".concat(e,"/datasets/name/").concat(t));new xv(o,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:n,processFailed:n}}).deleteDatasetService()}}])&&Cv(t.prototype,n),r&&Cv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Iv(e){"@babel/helpers - typeof";return(Iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lv(){return(Lv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fv(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Dv(e,t){return(Dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Fv(e);if(t){var o=Fv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Iv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bv(e)}(this,n)}}function Bv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fv(e){return(Fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Gv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dv(e,t)}(i,uy);var t,n,r,o=Nv(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),t&&w.extend(Bv(n),t),n.CLASS_NAME="SuperMap.DatasourceService",n}return t=i,(n=[{key:"destroy",value:function(){Lv(Fv(i.prototype),"destroy",this).call(this)}},{key:"getDatasourceService",value:function(e){var t=this;t.url=w.urlPathAppend(t.url,"datasources/name/".concat(e)),t.request({method:"GET",data:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"getDatasourcesService",value:function(){var e=this;e.url=w.urlPathAppend(e.url,"datasources"),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"setDatasourceService",value:function(e){if(e){var t=w.toJSON(e);this.request({method:"PUT",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&jv(t.prototype,n),r&&jv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function zv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Vv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.SetDatasourceParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null}}])&&zv(t.prototype,n),r&&zv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hv(e){"@babel/helpers - typeof";return(Hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uv(e,t){return(Uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=qv(e);if(t){var o=qv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qv(e){return(qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Yv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uv(e,t)}(i,oy);var t,n,r,o=Jv(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getDatasources",value:function(e){var t=this;new Gv(t.url,{proxy:t.proxy,withCredentials:t.withCredentials,crossOrigin:t.crossOrigin,headers:t.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getDatasourcesService()}},{key:"getDatasource",value:function(e,t){if(e){var n=this;new Gv(n.url,{proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,headers:n.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).getDatasourceService(e)}}},{key:"setDatasource",value:function(e,t){if(e instanceof Vv){var n={description:e.description,coordUnit:e.coordUnit,distanceUnit:e.distanceUnit},r=this,o=w.urlPathAppend(r.url,"datasources/name/".concat(e.datasourceName));new Gv(o,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).setDatasourceService(n)}}}])&&Wv(t.prototype,n),r&&Wv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Xv(e){"@babel/helpers - typeof";return(Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qv(){return(Qv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Kv(e,t){return(Kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=tg(e);if(t){var o=tg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return eg(e)}(this,n)}}function eg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tg(e){return(tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ng=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kv(e,t)}(i,uy);var t,n,r,o=$v(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),t=t||{},n.returnContent=!0,n.fromIndex=0,n.toIndex=19,n.hasGeometry=!0,n.maxFeatures=null,n.format=yn.GEOJSON,w.extend(eg(n),t),n.url=w.urlPathAppend(n.url,"featureResults"),n.CLASS_NAME="SuperMap.GetFeaturesServiceBase",n}return t=i,(n=[{key:"destroy",value:function(){Qv(tg(i.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.format=null,e.hasGeometry=null}},{key:"processAsync",value:function(e){if(e){var t,n=this,r=!0;n.returnContent=e.returnContent,n.fromIndex=e.fromIndex,n.toIndex=e.toIndex,n.maxFeatures=e.maxFeatures,n.hasGeometry=e.hasGeometry,n.returnContent&&(r=!1),null!=n.fromIndex&&null!=n.toIndex&&!isNaN(n.fromIndex)&&!isNaN(n.toIndex)&&n.fromIndex>=0&&n.toIndex>=0&&!r&&(n.url=w.urlAppend(n.url,"fromIndex=".concat(n.fromIndex,"&toIndex=").concat(n.toIndex))),e.returnCountOnly&&(n.url=w.urlAppend(n.url,"&returnCountOnly="+e.returnContent)),t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if(e=w.transformResult(e),this.format===yn.GEOJSON&&e.features){var t=new lr;e.features=t.toGeoJSON(e.features)}this.events.triggerEvent("processCompleted",{result:e})}},{key:"dataFormat",value:function(){return[yn.GEOJSON,yn.ISERVER,yn.FGB]}}])&&Zv(t.prototype,n),r&&Zv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function rg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var og=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.FilterParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var t=0,n=e.joinItems,r=n.length;t<r;t++)n[t].destroy();e.joinItems=null}if(e.linkItems){for(var o=0,i=e.linkItems,a=i.length;o<a;o++)i[o].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}])&&rg(t.prototype,n),r&&rg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ig(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ag=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,w.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.hasGeometry=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null)}}])&&ig(t.prototype,n),r&&ig(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sg(e){"@babel/helpers - typeof";return(sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ug(){return(ug="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function cg(e,t){return(cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=pg(e);if(t){var o=pg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===sg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hg(e)}(this,n)}}function hg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pg(e){return(pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var dg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cg(e,t)}(i,ag);var t,n,r,o=fg(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode="ID",t.IDs=null,t.fields=null,w.extend(hg(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",t}return t=i,r=[{key:"toJsonParameters",value:function(e){var t,n;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&((n=new og).name=e.datasetNames,n.fields=e.fields,t.queryParameter=n),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),"boolean"==typeof e.hasGeometry&&(t.hasGeometry=e.hasGeometry),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),w.toJSON(t)}}],(n=[{key:"destroy",value:function(){ug(pg(i.prototype),"destroy",this).call(this);var e=this;if(e.IDs=null,e.getFeatureMode=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}}}])&&lg(t.prototype,n),r&&lg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yg(e){"@babel/helpers - typeof";return(yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gg(){return(gg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function mg(e,t){return(mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=wg(e);if(t){var o=wg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function wg(e){return(wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mg(e,t)}(i,ng);var t,n,r,o=bg(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByIDsService",n}return t=i,(n=[{key:"destroy",value:function(){gg(wg(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return dg.toJsonParameters(e)}}])&&vg(t.prototype,n),r&&vg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function xg(e){"@babel/helpers - typeof";return(xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Og(){return(Og="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Pg(e,t){return(Pg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Cg(e);if(t){var o=Cg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===xg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kg(e)}(this,n)}}function kg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cg(e){return(Cg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Eg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pg(e,t)}(i,ag);var t,n,r,o=Tg(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode="SQL",t.queryParameter=null,w.extend(kg(t),e),t.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",t}return t=i,r=[{key:"toJsonParameters",value:function(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(t.hasGeometry=e.hasGeometry),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),w.toJSON(t)}}],(n=[{key:"destroy",value:function(){Og(Cg(i.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&Sg(t.prototype,n),r&&Sg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ag(e){"@babel/helpers - typeof";return(Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rg(){return(Rg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Ig(e,t){return(Ig=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Lg(e);if(t){var o=Lg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ag(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lg(e){return(Lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Dg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ig(e,t)}(i,ng);var t,n,r,o=jg(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesBySQLService",n}return t=i,(n=[{key:"destroy",value:function(){Rg(Lg(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Eg.toJsonParameters(e)}}])&&Mg(t.prototype,n),r&&Mg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ng(e){"@babel/helpers - typeof";return(Ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fg(){return(Fg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Gg(e,t){return(Gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Hg(e);if(t){var o=Hg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ng(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vg(e)}(this,n)}}function Vg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hg(e){return(Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Wg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gg(e,t)}(i,ag);var t,n,r,o=zg(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode=i.getFeatureMode.BOUNDS,t.bounds=null,t.fields=null,t.attributeFilter=null,t.spatialQueryMode=bn.CONTAIN,w.extend(Vg(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",t}return t=i,r=[{key:"toJsonParameters",value:function(e){var t,n,r;return n={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},r={datasetNames:e.datasetNames,getFeatureMode:i.getFeatureMode.BOUNDS,bounds:n,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new og).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode=i.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(r.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),e.aggregations&&(r.aggregations=e.aggregations),w.toJSON(r)}}],(n=[{key:"destroy",value:function(){Fg(Hg(i.prototype),"destroy",this).call(this);var e=this;if(e.bounds&&(e.bounds.destroy(),e.bounds=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&Bg(t.prototype,n),r&&Bg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ug(e){"@babel/helpers - typeof";return(Ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qg(){return(qg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Yg(e,t){return(Yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Zg(e);if(t){var o=Zg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ug(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Zg(e){return(Zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/Wg.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};var Qg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yg(e,t)}(i,ng);var t,n,r,o=Xg(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",n}return t=i,(n=[{key:"destroy",value:function(){qg(Zg(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Wg.toJsonParameters(e)}}])&&Jg(t.prototype,n),r&&Jg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Kg(e){"@babel/helpers - typeof";return(Kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function em(){return(em="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=om(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function tm(e,t){return(tm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=om(e);if(t){var o=om(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Kg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rm(e)}(this,n)}}function rm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function om(e){return(om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var im=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tm(e,t)}(i,ag);var t,n,r,o=nm(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).bufferDistance=null,t.attributeFilter=null,t.geometry=null,t.fields=null,w.extend(rm(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",t}return t=i,r=[{key:"toJsonParameters",value:function(e){var t,n,r;return r=tr.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:r},e.fields&&((t=new og).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(n.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),w.toJSON(n)}}],(n=[{key:"destroy",value:function(){em(om(i.prototype),"destroy",this).call(this);var e=this;if(e.bufferDistance=null,e.attributeFilter=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&$g(t.prototype,n),r&&$g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function am(e){"@babel/helpers - typeof";return(am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lm(){return(lm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fm(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function um(e,t){return(um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=fm(e);if(t){var o=fm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===am(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fm(e){return(fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var hm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&um(e,t)}(i,ng);var t,n,r,o=cm(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByBufferService",n}return t=i,(n=[{key:"destroy",value:function(){lm(fm(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof im)return im.toJsonParameters(e)}}])&&sm(t.prototype,n),r&&sm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function pm(e){"@babel/helpers - typeof";return(pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ym(){return(ym="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bm(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function vm(e,t){return(vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=bm(e);if(t){var o=bm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mm(e)}(this,n)}}function mm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bm(e){return(bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vm(e,t)}(i,ag);var t,n,r,o=gm(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode="SPATIAL",t.geometry=null,t.fields=null,t.attributeFilter=null,t.spatialQueryMode=bn.CONTAIN,w.extend(mm(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",t}return t=i,r=[{key:"toJsonParameters",value:function(e){var t,n,r;return n=tr.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:n,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new og).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(r.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),e.aggregations&&(r.aggregations=e.aggregations),w.toJSON(r)}}],(n=[{key:"destroy",value:function(){ym(bm(i.prototype),"destroy",this).call(this);var e=this;if(e.geometry&&(e.geometry.destroy(),e.geometry=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&dm(t.prototype,n),r&&dm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _m(e){"@babel/helpers - typeof";return(_m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sm(){return(Sm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tm(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Om(e,t){return(Om=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Tm(e);if(t){var o=Tm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Tm(e){return(Tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var km=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Om(e,t)}(i,ng);var t,n,r,o=Pm(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",n}return t=i,(n=[{key:"destroy",value:function(){Sm(Tm(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return wm.toJsonParameters(e)}}])&&xm(t.prototype,n),r&&xm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Em=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=Fn.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var t,n,r;return t=e,r=[{key:"toJsonParameters",value:function(e){var t,n,r;if(e.editType===Fn.DELETE){if(null===e.IDs)return;r={ids:e.IDs}}else if(r=[],e.features){n=e.features.length;for(var o=0;o<n;o++)(t=e.features[o]).geometry=tr.fromGeometry(t.geometry),r.push(t)}return w.toJSON(r)}}],(n=[{key:"destroy",value:function(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.features=null,e.editType=null,e.IDs=null,e.returnContent=null}}])&&Cm(t.prototype,n),r&&Cm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Am(e){"@babel/helpers - typeof";return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rm(){return(Rm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dm(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Im(e,t){return(Im=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Dm(e);if(t){var o=Dm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Am(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lm(e)}(this,n)}}function Lm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dm(e){return(Dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Nm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Im(e,t)}(i,uy);var t,n,r,o=jm(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).returnContent=!1,n.isUseBatch=!1,t&&w.extend(Lm(n),t),n.url=w.urlPathAppend(n.url,"features"),n.CLASS_NAME="SuperMap.EditFeaturesService",n}return t=i,(n=[{key:"destroy",value:function(){Rm(Dm(i.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(e){if(e instanceof Em){var t=this,n="POST",r="",o=e.editType,i=null;if(t.returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,i=Em.toJsonParameters(e),o===Fn.DELETE){i=r=w.toJSON(e.IDs);var a=w.urlAppend(t.url,w.getParameterString({ids:r}));cp.urlIsLong(a)?(t.url=w.urlAppend(t.url,w.getParameterString({_method:"DELETE"})),n="POST"):(t.url=a,n="DELETE")}else o===Fn.UPDATE?n="PUT":(t.isUseBatch&&(t.url=w.urlAppend(t.url,"isUseBatch=".concat(t.isUseBatch)),t.returnContent=!1),t.returnContent&&(t.url=w.urlAppend(t.url,"returnContent=true"),n="POST"));t.request({method:n,data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&Mm(t.prototype,n),r&&Mm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bm(e){"@babel/helpers - typeof";return(Bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gm(e,t){return(Gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Vm(e);if(t){var o=Vm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Vm(e){return(Vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Hm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gm(e,t)}(i,oy);var t,n,r,o=zm(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getFeaturesByIDs",value:function(e,t,n){var r=this;new _g(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"getFeaturesByBounds",value:function(e,t,n){var r=this;new Qg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"getFeaturesByBuffer",value:function(e,t,n){var r=this;new hm(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"getFeaturesBySQL",value:function(e,t,n){var r=this;new Dg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"getFeaturesByGeometry",value:function(e,t,n){var r=this;new km(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"editFeatures",value:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var n=this,r=n.url,o=e.dataSourceName,i=e.dataSetName;r=w.urlPathAppend(r,"datasources/"+o+"/datasets/"+i),new Nm(r,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))}}},{key:"_processParams",value:function(e){if(!e)return{};var t=this;if(e.returnContent=null==e.returnContent||e.returnContent,e.fromIndex=e.fromIndex?e.fromIndex:0,e.toIndex=0===e.toIndex?0:e.toIndex?e.toIndex:-1,e.bounds&&(e.bounds=fr.toSuperMapBounds(e.bounds)),e.editType&&(e.editType=e.editType.toLowerCase()),e.geometry&&(e.geometry instanceof O().LngLatBounds?(e.geometry=fr.toSuperMapPolygon(e.geometry),e.geometry.SRID=4326):e.geometry instanceof O().Point?e.geometry=new Me(e.geometry.x,e.geometry.y):e.geometry instanceof O().LngLat?(e.geometry=new Me(e.geometry.lng,e.geometry.lat),e.geometry.SRID=4326):e.geometry instanceof l||(e.geometry=fr.toSuperMapGeometry(e.geometry))),e.features){var n=[];fr.isArray(e.features)?e.features.map(function(e){return n.push(t._createServerFeature(e)),n}):n.push(t._createServerFeature(e.features)),e.features=n}return e}},{key:"_createServerFeature",value:function(e){var t={},n=[],r=[],o=e.properties;for(var i in o)n.push(i),r.push(o[i]);return t.fieldNames=n,t.fieldValues=r,e.id&&(t.id=e.id),t.geometry=fr.toSuperMapGeometry(e),t}},{key:"_processFormat",value:function(e){return e||yn.GEOJSON}}])&&Fm(t.prototype,n),r&&Fm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Wm(e){"@babel/helpers - typeof";return(Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Um(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jm(){return(Jm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zm(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function qm(e,t){return(qm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ym(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Zm(e);if(t){var o=Zm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xm(e)}(this,n)}}function Xm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zm(e){return(Zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Qm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qm(e,t)}(i,uy);var t,n,r,o=Ym(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).datasource=null,n.dataset=null,t&&w.extend(Xm(n),t),n.CLASS_NAME="SuperMap.GetFieldsService",n}return t=i,(n=[{key:"destroy",value:function(){Jm(Zm(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(){var e=this;e.url=w.urlPathAppend(e.url,"datasources/".concat(e.datasource,"/datasets/").concat(e.dataset,"/fields")),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&Um(t.prototype,n),r&&Um(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasource=null,this.dataset=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.FieldParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&Km(t.prototype,n),r&&Km(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function eb(e){"@babel/helpers - typeof";return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nb(e,t){return(nb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ib(e);if(t){var o=ib(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===eb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ob(e)}(this,n)}}function ob(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ib(e){return(ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ab=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nb(e,t)}(i,$m);var t,n,r,o=rb(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).fieldName=null,t.statisticMode=null,e&&w.extend(ob(t),e),t.CLASS_NAME="SuperMap.FieldStatisticsParameters",t}return t=i,(n=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&tb(t.prototype,n),r&&tb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sb(e){"@babel/helpers - typeof";return(sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ub(){return(ub="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pb(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function cb(e,t){return(cb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=pb(e);if(t){var o=pb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===sb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hb(e)}(this,n)}}function hb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pb(e){return(pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var db=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cb(e,t)}(i,uy);var t,n,r,o=fb(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).datasource=null,n.dataset=null,n.field=null,n.statisticMode=null,t&&w.extend(hb(n),t),n.CLASS_NAME="SuperMap.FieldStatisticService",n}return t=i,(n=[{key:"destroy",value:function(){ub(pb(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(){var e=this,t="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;e.url=w.urlPathAppend(e.url,t),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&lb(t.prototype,n),r&&lb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yb(e){"@babel/helpers - typeof";return(yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gb(e,t){return(gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=bb(e);if(t){var o=bb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bb(e){return(bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gb(e,t)}(i,oy);var t,n,r,o=mb(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getFields",value:function(e,t){var n=this;new Qm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},datasource:e.datasource,dataset:e.dataset}).processAsync()}},{key:"getFieldStatisticsInfo",value:function(e,t){var n=this,r=e.fieldName,o=e.statisticMode;o&&!fr.isArray(o)&&(o=[o]),n.currentStatisticResult={fieldName:r},n._statisticsCallback=t,o.forEach(function(t){n.currentStatisticResult[t]=null,n._fieldStatisticRequest(e.datasource,e.dataset,r,t)})}},{key:"_fieldStatisticRequest",value:function(e,t,n,r){var o=this;new db(o.url,{eventListeners:{scope:o,processCompleted:o._processCompleted,processFailed:o._statisticsCallback},datasource:e,dataset:t,field:n,statisticMode:r,crossOrigin:o.options.crossOrigin,headers:o.options.headers}).processAsync()}},{key:"_processCompleted",value:function(e){var t=this,n=!0,r=e.result;for(var o in this.currentStatisticResult&&null==t.currentStatisticResult[r.mode]&&(this.currentStatisticResult[r.mode]=r.result),t.currentStatisticResult)if(null==t.currentStatisticResult[o]){n=!1;break}n&&t._statisticsCallback({result:t.currentStatisticResult})}}])&&vb(t.prototype,n),r&&vb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,w.extend(this,t),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&_b(t.prototype,n),r&&_b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Sb(e){"@babel/helpers - typeof";return(Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ob(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pb(){return(Pb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Eb(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Tb(e,t){return(Tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Eb(e);if(t){var o=Eb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Sb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cb(e)}(this,n)}}function Cb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eb(e){return(Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ab=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tb(e,t)}(i,uy);var t,n,r,o=kb(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).datasetName=null,n.dataSourceName=null,n.datasetType=null,n.X=null,n.Y=null,t&&w.extend(Cb(n),t),n.CLASS_NAME="SuperMap.GetGridCellInfosService",n}return t=i,(n=[{key:"destroy",value:function(){Pb(Eb(i.prototype),"destroy",this).call(this);var e=this;e.X=null,e.Y=null,e.datasetName=null,e.dataSourceName=null,e.datasetType=null}},{key:"processAsync",value:function(e){if(e instanceof xb){w.extend(this,e);var t=this;t.url=w.urlPathAppend(t.url,"datasources/".concat(t.dataSourceName,"/datasets/").concat(t.datasetName)),t.queryRequest(t.getDatasetInfoCompleted,t.getDatasetInfoFailed)}}},{key:"queryRequest",value:function(e,t){this.request({method:"GET",data:null,scope:this,success:e,failure:t})}},{key:"getDatasetInfoCompleted",value:function(e){e=w.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos()}},{key:"queryGridInfos",value:function(){var e=this;e.url=w.urlPathAppend(e.url,"GRID"==e.datasetType?"gridValue":"imageValue"),null!=e.X&&null!=e.Y&&(e.url=w.urlAppend(e.url,"x=".concat(e.X,"&y=").concat(e.Y))),e.queryRequest(e.serviceProcessCompleted,e.serviceProcessFailed)}},{key:"getDatasetInfoFailed",value:function(e){this.serviceProcessFailed(e)}}])&&Ob(t.prototype,n),r&&Ob(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Mb(e){"@babel/helpers - typeof";return(Mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ib(e,t){return(Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Lb(e);if(t){var o=Lb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Mb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lb(e){return(Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Db=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ib(e,t)}(i,oy);var t,n,r,o=jb(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getGridCellInfos",value:function(e,t){if(!e)return null;var n=this;new Ab(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&Rb(t.prototype,n),r&&Rb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Nb(e){"@babel/helpers - typeof";return(Nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fb(e,t){return(Fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=zb(e);if(t){var o=zb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Nb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zb(e){return(zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fb(e,t)}(i,uy);var t,n,r,o=Gb(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(n=o.call(this,e,t)).CLASS_NAME="SuperMap.GeoprocessingService",n.headers={},n.crossOrigin=!0,n}return t=i,(n=[{key:"getTools",value:function(){this._get("".concat(this.url,"/list"))}},{key:"getTool",value:function(e){this._get("".concat(this.url,"/").concat(e))}},{key:"execute",value:function(e,t,n){var r={parameter:t=t||null,environment:n=n||null};this._get("".concat(this.url,"/").concat(e,"/execute"),r)}},{key:"submitJob",value:function(e,t,n){var r={parameter:t=t||null,environments:n=n||null};this.request({url:"".concat(this.url,"/").concat(e,"/jobs"),headers:{"Content-type":"application/json"},method:"POST",data:JSON.stringify(r),scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"waitForJobCompletion",value:function(e,t,n){var r=this,o=setInterval(function(){r._get("".concat(r.url,"/").concat(t,"/jobs/").concat(e),null,function(e){var t=e.state.runState;switch(n.statusCallback&&n.statusCallback(t),t){case"FINISHED":clearInterval(o),r.events.triggerEvent("processCompleted",{result:e});break;case"FAILED":case"CANCELED":clearInterval(o),r.events.triggerEvent("processFailed",{result:e})}})},n.interval)}},{key:"getJobInfo",value:function(e,t){this._get("".concat(this.url,"/").concat(e,"/jobs/").concat(t))}},{key:"cancelJob",value:function(e,t){this._get("".concat(this.url,"/").concat(e,"/jobs/").concat(t,"/cancel"))}},{key:"getJobs",value:function(e){var t="".concat(this.url,"/jobs");e&&(t="".concat(this.url,"/").concat(e,"/jobs")),this._get(t)}},{key:"getResults",value:function(e,t,n){var r="".concat(this.url,"/").concat(e,"/jobs/").concat(t,"/results");n&&(r="".concat(r,"/").concat(n)),this._get(r)}},{key:"_get",value:function(e,t,n,r){this.request({url:e,method:"GET",params:t,headers:{"Content-type":"application/json"},scope:this,success:n||this.serviceProcessCompleted,failure:r||this.serviceProcessFailed})}}])&&Bb(t.prototype,n),r&&Bb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Hb(e){"@babel/helpers - typeof";return(Hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ub(e,t){return(Ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=qb(e);if(t){var o=qb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qb(e){return(qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ub(e,t)}(i,oy);var t,n,r,o=Jb(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).headers={},n.crossOrigin=!0,n.withCredentials=!0,n.proxy=!0,n}return t=i,(n=[{key:"getTools",value:function(e){new Vb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).getTools()}},{key:"getTool",value:function(e,t){new Vb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).getTool(e)}},{key:"execute",value:function(e,t,n,r){new Vb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:r,processFailed:r}}).execute(e,t,n)}},{key:"submitJob",value:function(e,t,n,r){new Vb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:r,processFailed:r}}).submitJob(e,t,n)}},{key:"waitForJobCompletion",value:function(e,t,n,r){new Vb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:r,processFailed:r}}).waitForJobCompletion(e,t,n)}},{key:"getJobInfo",value:function(e,t,n){new Vb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:n,processFailed:n}}).getJobInfo(e,t)}},{key:"cancelJob",value:function(e,t,n){new Vb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:n,processFailed:n}}).cancelJob(e,t)}},{key:"getJobs",value:function(e,t){new Vb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).getJobs(e)}},{key:"getResults",value:function(e,t,n,r){new Vb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:r,processFailed:r}}).getResults(e,t,n)}}])&&Wb(t.prototype,n),r&&Wb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Xb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Zb=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.memoryData=null,this.type=t,n&&w.extend(this,n),this.CLASS_NAME="SuperMap.Theme"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&Xb(t.prototype,n),r&&Xb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Qb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.align=En.BASELINECENTER,this.backColor=new Qt(255,255,255),this.foreColor=new Qt(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ServerTextStyle"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e(t);return w.copy(n,t),n.backColor=Qt.fromJson(t.backColor),n.foreColor=Qt.fromJson(t.foreColor),n}}],(n=[{key:"destroy",value:function(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null}}])&&Qb(t.prototype,n),r&&Qb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ew=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new Kb,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&$b(t.prototype,n),r&&$b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.style=new $t,this.unique=null,this.visible=!0,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return w.copy(n,t),n.style=$t.fromJson(t.style),n}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=w.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&tw(t.prototype,n),r&&tw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ow=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeOffset"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&rw(t.prototype,n),r&&rw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function iw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var aw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new Kb,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e,r=t.styles;if(w.copy(n,t),n.defaultStyle=new Kb(t.defaultStyle),r){n.styles=[];for(var o=0,i=r.length;o<i;o++)n.styles.push(new Kb(r[o]))}return n}}}],(n=[{key:"destroy",value:function(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,n=e.styles,r=n.length;t<r;t++)n[t].destroy();e.styles=null}}}])&&iw(t.prototype,n),r&&iw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new Kb,this.uniformMixedStyle=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelText"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n.uniformStyle=Kb.fromObj(t.uniformStyle),n.uniformMixedStyle=aw.fromObj(t.uniformMixedStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null)}}])&&sw(t.prototype,n),r&&sw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function uw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAlongLine=!0,this.alongLineDirection=An.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.isAlongLine=null,e.alongLineDirection=null,e.angleFixed=null,e.repeatedLabelAvoided=null,e.repeatIntervalFixed=null,e.labelRepeatInterval=null}}])&&uw(t.prototype,n),r&&uw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labelBackShape=Mn.NONE,this.backStyle=new $t,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return n.labelBackShape=t.labelBackShape,n.backStyle=$t.fromJson(t.backStyle),n}}}],(n=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&fw(t.prototype,n),r&&fw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pw(e){"@babel/helpers - typeof";return(pw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yw(){return(yw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bw(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function vw(e,t){return(vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=bw(e);if(t){var o=bw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mw(e)}(this,n)}}function mw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bw(e){return(bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ww=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vw(e,t)}(i,Zb);var t,n,r,o=gw(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"LABEL",e)).alongLine=new cw,t.background=new hw,t.items=null,t.uniqueItems=null,t.labelExpression=null,t.labelOverLengthMode=Rn.NONE,t.matrixCells=null,t.maxLabelLength=256,t.numericPrecision=0,t.offset=new ow,t.overlapAvoided=!0,t.rangeExpression=null,t.uniqueExpression=null,t.smallGeometryLabeled=!1,t.text=new lw,t.textSpace=0,e&&w.extend(mw(t),e),t.CLASS_NAME="SuperMap.ThemeLabel",t}return t=i,r=[{key:"fromObj",value:function(e){if(e){var t=new i,n=e.items,r=e.uniqueItems,o=e.matrixCells;if(e.matrixCells=null,w.copy(t,e),t.alongLine=cw.fromObj(e),t.background=hw.fromObj(e),n){t.items=[];for(var a=0,s=n.length;a<s;a++)t.items.push(ew.fromObj(n[a]))}if(r){t.uniqueItems=[];for(var l=0,u=r.length;l<u;l++)t.uniqueItems.push(nw.fromObj(r[l]))}if(o){t.matrixCells=[];for(var c=0,f=o.length;c<f;c++);}return t.offset=ow.fromObj(e),t.text=lw.fromObj(e),t}}}],(n=[{key:"destroy",value:function(){yw(bw(i.prototype),"destroy",this).call(this);var e=this;if(e.alongLine=null,e.background&&(e.background.destroy(),e.background=null),e.items){for(var t=0,n=e.items,r=n.length;t<r;t++)n[t].destroy();e.items=null}if(e.uniqueItems){for(var o=0,a=e.uniqueItems,s=a.length;o<s;o++)a[o].destory();e.uniqueItems=null}e.labelExpression=null,e.labelOverLengthMode=null,e.matrixCells=null,e.maxLabelLength=null,e.numericPrecision=null,e.overlapAvoided=null,e.rangeExpression=null,e.uniqueExpression=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.smallGeometryLabeled=null,e.text&&(e.text.destroy(),e.text=null),e.textSpace=null}},{key:"toJSON",value:function(){return w.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e}}])&&dw(t.prototype,n),r&&dw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _w(e){"@babel/helpers - typeof";return(_w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sw(){return(Sw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kw(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Ow(e,t){return(Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=kw(e);if(t){var o=kw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tw(e)}(this,n)}}function Tw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kw(e){return(kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Cw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ow(e,t)}(i,Zb);var t,n,r,o=Pw(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"UNIQUE",e)).defaultStyle=new $t,t.items=null,t.uniqueExpression=null,t.colorGradientType=Cn.YELLOW_RED,e&&w.extend(Tw(t),e),t.CLASS_NAME="SuperMap.ThemeUnique",t}return t=i,r=[{key:"fromObj",value:function(e){var t=new i,n=e.items,r=n?n.length:0;w.extend(t,e),t.items=[],t.defaultStyle=$t.fromJson(e.defaultStyle);for(var o=0;o<r;o++)t.items.push(nw.fromObj(n[o]));return t}}],(n=[{key:"destroy",value:function(){Sw(kw(i.prototype),"destroy",this).call(this);var e=this;if(e.uniqueExpression=null,e.colorGradientType=null,e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=w.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],n=e.items.length,r=0;r<n;r++)t.push(e.items[r].toServerJSONObject());e.items=t}return e}}])&&xw(t.prototype,n),r&&xw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ew(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Aw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.axesColor=new Qt(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new Kb,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n.axesColor=Qt.fromJson(t.axesColor),n.axesTextStyle=Kb.fromObj(t.axesTextStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.axesColor&&(e.axesColor.destroy(),e.axesColor=null),e.axesDisplayed=null,e.axesGridDisplayed=null,e.axesTextDisplayed=null,e.axesTextStyle&&(e.axesTextStyle.destroy(),e.axesTextStyle=null)}}])&&Ew(t.prototype,n),r&&Ew(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Mw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Rw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxGraphSize=0,this.minGraphSize=0,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return w.copy(n,t),n}}],(n=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&Mw(t.prototype,n),r&&Mw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Iw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphTextDisplayed=!1,this.graphTextFormat=Sn.CAPTION,this.graphTextStyle=new Kb,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphText"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return w.copy(n,t),n.graphTextStyle=Kb.fromObj(t.graphTextStyle),n}}],(n=[{key:"destroy",value:function(){var e=this;e.graphTextDisplayed=null,e.graphTextFormat=null,e.graphTextStyle&&(e.graphTextStyle.destroy(),e.graphTextStyle=null)}}])&&Iw(t.prototype,n),r&&Iw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Lw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Dw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new $t,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n.uniformStyle=$t.fromJson(t.uniformStyle),n}}}],(n=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&Lw(t.prototype,n),r&&Lw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Nw(e){"@babel/helpers - typeof";return(Nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fw(){return(Fw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hw(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Gw(e,t){return(Gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Hw(e);if(t){var o=Hw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Nw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vw(e)}(this,n)}}function Vw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hw(e){return(Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ww=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gw(e,t)}(i,Zb);var t,n,r,o=zw(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRAPH",e)).barWidth=0,t.graduatedMode=Tn.CONSTANT,t.graphAxes=new Aw,t.graphSize=new Rw,t.graphSizeFixed=!1,t.graphText=new jw,t.graphType=On.AREA,t.graphAxesTextDisplayMode=Pn.NONE,t.items=null,t.memoryKeys=null,t.negativeDisplayed=!1,t.offset=new ow,t.overlapAvoided=!0,t.roseAngle=0,t.startAngle=0,e&&w.extend(Vw(t),e),t.CLASS_NAME="SuperMap.ThemeGraph",t}return t=i,r=[{key:"fromObj",value:function(e){var t=new i,n=e.items,r=n?n.length:0;w.copy(t,e),t.items=[],t.graphAxes=Aw.fromObj(e),t.graphSize=Rw.fromObj(e),t.graphText=jw.fromObj(e),t.offset=ow.fromObj(e);for(var o=0;o<r;o++)t.items.push(Dw.fromObj(n[o]));return t}}],(n=[{key:"destroy",value:function(){Fw(Hw(i.prototype),"destroy",this).call(this);var e=this;if(e.barWidth=null,e.graduatedMode=null,e.graphAxes&&(e.graphAxes.destroy(),e.graphAxes=null),e.graphSize&&(e.graphSize.destroy(),e.graphSize=null),e.graphSizeFixed=null,e.graphText&&(e.graphText.destroy(),e.graphText=null),e.graphType=null,e.items){for(var t=0,n=e.items,r=n.length;t<r;t++)n[t].destroy();e.items=null}e.memoryKeys=null,e.negativeDisplayed=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.roseAngle=null,e.startAngle=null,e.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return w.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e}}])&&Bw(t.prototype,n),r&&Bw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Uw(e){"@babel/helpers - typeof";return(Uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qw(e,t){return(qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Zw(e);if(t){var o=Zw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Uw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xw(e)}(this,n)}}function Xw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zw(e){return(Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Qw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qw(e,t)}(i,Zb);var t,n,r,o=Yw(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"DOTDENSITY",e)).dotExpression=null,t.style=new $t,t.value=null,e&&w.extend(Xw(t),e),t.CLASS_NAME="SuperMap.ThemeDotDensity",t}return t=i,r=[{key:"fromObj",value:function(e){if(e){var t=new i;return w.copy(t,e),t.style=$t.fromJson(e.style),t}}}],(n=[{key:"destroy",value:function(){var e=this;e.dotExpression=null,e.value=null,e.style&&(e.style.destroy(),e.style=null)}},{key:"toServerJSONObject",value:function(){var e={};return(e=w.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&Jw(t.prototype,n),r&&Jw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Kw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.negativeDisplayed=!1,this.negativeStyle=new $t,this.positiveStyle=new $t,this.zeroDisplayed=!1,this.zeroStyle=new $t,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n.negativeStyle=$t.fromJson(t.negativeStyle),n.positiveStyle=$t.fromJson(t.positiveStyle),n.zeroStyle=$t.fromJson(t.zeroStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.negativeDisplayed=null,e.negativeStyle=null,e.positiveStyle=null,e.zeroDisplayed=null,e.zeroStyle=null}}])&&Kw(t.prototype,n),r&&Kw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function e_(e){"@babel/helpers - typeof";return(e_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n_(){return(n_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function r_(e,t){return(r_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=a_(e);if(t){var o=a_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===e_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i_(e)}(this,n)}}function i_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a_(e){return(a_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var s_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r_(e,t)}(i,Zb);var t,n,r,o=o_(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRADUATEDSYMBOL",e)).baseValue=0,t.expression=null,t.graduatedMode=Tn.CONSTAN,t.offset=new ow,t.style=new $w,e&&w.extend(i_(t),e),t.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",t}return t=i,r=[{key:"fromObj",value:function(e){if(e){var t=new i;return w.copy(t,e),t.offset=ow.fromObj(e),t.style=$w.fromObj(e),t}}}],(n=[{key:"destroy",value:function(){n_(a_(i.prototype),"destroy",this).call(this);var e=this;e.expression=null,e.graduatedMode=Tn.CONSTANT,e.offset&&(e.offset.destroy(),e.offset=null),e.style&&(e.style.destroy(),e.style=null)}},{key:"toJSON",value:function(){return w.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e}}])&&t_(t.prototype,n),r&&t_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function l_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var u_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.style=new $t,this.visible=!0,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n.style=$t.fromJson(t.style),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=w.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&l_(t.prototype,n),r&&l_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c_(e){"@babel/helpers - typeof";return(c_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h_(){return(h_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function p_(e,t){return(p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v_(e);if(t){var o=v_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y_(e)}(this,n)}}function y_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v_(e){return(v_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var g_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p_(e,t)}(i,Zb);var t,n,r,o=d_(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"RANGE",e)).precision="1.0E-12",t.items=null,t.rangeExpression=null,t.rangeMode=kn.EQUALINTERVAL,t.rangeParameter=0,t.colorGradientType=Cn.YELLOW_RED,e&&w.extend(y_(t),e),t.CLASS_NAME="SuperMap.ThemeRange",t}return t=i,r=[{key:"fromObj",value:function(e){if(e){var t=new i;w.copy(t,e);var n=e.items,r=n?n.length:0;t.items=[];for(var o=0;o<r;o++)t.items.push(u_.fromObj(n[o]));return t}}}],(n=[{key:"destroy",value:function(){h_(v_(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.rangeExpression=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&f_(t.prototype,n),r&&f_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function m_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var b_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,w.extend(this,t),this.CLASS_NAME="SuperMap.UGCLayer"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){w.reset(this)}},{key:"fromJson",value:function(e){e=e||{},w.extend(this,e);var t=this.bounds;t&&(this.bounds=new Oe(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y))}},{key:"toServerJSONObject",value:function(){var e={};return(e=w.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&m_(t.prototype,n),r&&m_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w_(e){"@babel/helpers - typeof";return(w_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function __(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x_(){return(x_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function S_(e,t){return(S_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=P_(e);if(t){var o=P_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===w_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function P_(e){return(P_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var T_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S_(e,t)}(i,b_);var t,n,r,o=O_(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).completeLineSymbolDisplayed=null,t.maxScale=null,t.minScale=null,t.minVisibleGeometrySize=null,t.opaqueRate=null,t.symbolScalable=null,t.symbolScale=null,t.overlapDisplayed=null,t.overlapDisplayedOptions=null,t.CLASS_NAME="SuperMap.UGCMapLayer",t}return t=i,(n=[{key:"destroy",value:function(){x_(P_(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"fromJson",value:function(e){x_(P_(i.prototype),"fromJson",this).call(this,e)}},{key:"toServerJSONObject",value:function(){return x_(P_(i.prototype),"toServerJSONObject",this).call(this)}}])&&__(t.prototype,n),r&&__(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function k_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var C_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.JoinItem"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var e={};return e=w.copyAttributes(e,this)}}])&&k_(t.prototype,n),r&&k_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var A_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,w.extend(this,t);var n=this.bounds;n&&(this.bounds=new Oe(n.leftBottom.x,n.leftBottom.y,n.rightTop.x,n.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){w.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return(e=w.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&E_(t.prototype,n),r&&E_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M_(e){"@babel/helpers - typeof";return(M_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I_(){return(I_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function j_(e,t){return(j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function L_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=D_(e);if(t){var o=D_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===M_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function D_(e){return(D_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var N_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j_(e,t)}(i,T_);var t,n,r,o=L_(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).datasetInfo=null,t.displayFilter=null,t.joinItems=null,t.representationField=null,t.ugcLayerType=null,t.CLASS_NAME="SuperMap.UGCSubLayer",t}return t=i,(n=[{key:"fromJson",value:function(e){if(I_(D_(i.prototype),"fromJson",this).call(this,e),this.datasetInfo&&(this.datasetInfo=new A_(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var t=[],n=0;n<this.joinItems.length;n++)t[n]=new C_(this.joinItems[n]);this.joinItems=t}}},{key:"destroy",value:function(){I_(D_(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"toServerJSONObject",value:function(){var e=I_(D_(i.prototype),"toServerJSONObject",this).call(this);if(e.joinItems){for(var t=[],n=0;n<e.joinItems.length;n++)e.joinItems[n].toServerJSONObject&&(t[n]=e.joinItems[n].toServerJSONObject());e.joinItems=t}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e}}])&&R_(t.prototype,n),r&&R_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function B_(e){"@babel/helpers - typeof";return(B_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G_(){return(G_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function z_(e,t){return(z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=H_(e);if(t){var o=H_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===B_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function H_(e){return(H_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var W_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z_(e,t)}(i,N_);var t,n,r,o=V_(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).theme=null,t.themeElementPosition=null,t.CLASS_NAME="SuperMap.ServerTheme",t}return t=i,(n=[{key:"destroy",value:function(){G_(H_(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"fromJson",value:function(e){G_(H_(i.prototype),"fromJson",this).call(this,e);var t=this.theme;switch(t&&t.type){case"LABEL":this.theme=ww.fromObj(t);break;case"UNIQUE":this.theme=Cw.fromObj(t);break;case"GRAPH":this.theme=Ww.fromObj(t);break;case"DOTDENSITY":this.theme=Qw.fromObj(t);break;case"GRADUATEDSYMBOL":this.theme=s_.fromObj(t);break;case"RANGE":this.theme=g_.fromObj(t)}this.themeElementPosition&&(this.themeElementPosition=new xe(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var e=G_(H_(i.prototype),"toServerJSONObject",this).call(this);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e}}])&&F_(t.prototype,n),r&&F_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function U_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var J_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.elevation=null,this.color=null,w.extend(this,t);var n=this.color;n&&(this.color=new Qt(n.red,n.green,n.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){w.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return e=w.copyAttributes(e,this)}}])&&U_(t.prototype,n),r&&U_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q_(e){"@babel/helpers - typeof";return(q_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X_(){return(X_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Z_(e,t){return(Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=K_(e);if(t){var o=K_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===q_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function K_(e){return(K_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z_(e,t)}(i,N_);var t,n,r,o=Q_(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).colorDictionarys=null,t.brightness=null,t.colorGradientType=null,t.colors=null,t.contrast=null,t.dashStyle=null,t.gridType=null,t.horizontalSpacing=null,t.sizeFixed=null,t.solidStyle=null,t.specialColor=null,t.specialValue=null,t.specialValueTransparent=null,t.verticalSpacing=null,t.CLASS_NAME="SuperMap.Grid",t}return t=i,(n=[{key:"destroy",value:function(){X_(K_(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"fromJson",value:function(e){if(X_(K_(i.prototype),"fromJson",this).call(this,e),this.specialColor&&(this.specialColor=new Qt(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var t,n=[];for(var r in this.colors)t=this.colors[r],n.push(new Qt(t.red,t.green,t.blue));this.colors=n}if(this.dashStyle&&(this.dashStyle=new $t(this.dashStyle)),this.solidStyle&&(this.solidStyle=new $t(this.solidStyle)),this.colorDictionary){var o,a=[];for(var s in this.colorDictionary)o=this.colorDictionary[s],a.push(new J_({elevation:s,color:o}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var e=X_(K_(i.prototype),"toServerJSONObject",this).call(this);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e}}])&&Y_(t.prototype,n),r&&Y_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ex(e){"@babel/helpers - typeof";return(ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nx(){return(nx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ix(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function rx(e,t){return(rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ox(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ix(e);if(t){var o=ix(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ex(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ix(e){return(ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ax=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rx(e,t)}(i,N_);var t,n,r,o=ox(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).brightness=null,t.colorSpaceType=null,t.contrast=null,t.displayBandIndexes=null,t.transparent=null,t.transparentColor=null,t.transparentColorTolerance=null,t.CLASS_NAME="SuperMap.Image",t}return t=i,(n=[{key:"destroy",value:function(){nx(ix(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"fromJson",value:function(e){nx(ix(i.prototype),"fromJson",this).call(this,e),this.transparentColor&&(this.transparentColor=new Qt(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return nx(ix(i.prototype),"toServerJSONObject",this).call(this)}}])&&tx(t.prototype,n),r&&tx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sx(e){"@babel/helpers - typeof";return(sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ux(){return(ux="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hx(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function cx(e,t){return(cx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=hx(e);if(t){var o=hx(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===sx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hx(e){return(hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var px=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cx(e,t)}(i,N_);var t,n,r,o=fx(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).style=null,t.CLASS_NAME="SuperMap.Vector",t}return t=i,(n=[{key:"destroy",value:function(){ux(hx(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"fromJson",value:function(e){ux(hx(i.prototype),"fromJson",this).call(this,e);var t=this.style;t&&(this.style=new $t(t))}},{key:"toServerJSONObject",value:function(){var e=ux(hx(i.prototype),"toServerJSONObject",this).call(this);return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&lx(t.prototype,n),r&&lx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dx(e){"@babel/helpers - typeof";return(dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vx(){return(vx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wx(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gx(e,t){return(gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=wx(e);if(t){var o=wx(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bx(e)}(this,n)}}function bx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wx(e){return(wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gx(e,t)}(i,uy);var t,n,r,o=mx(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).isTempLayers=!1,t&&w.extend(bx(n),t),n.CLASS_NAME="SuperMap.GetLayersInfoService",n}return t=i,(n=[{key:"destroy",value:function(){vx(wx(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"processAsync",value:function(){var e=this;e.isTempLayers||(e.url=w.urlPathAppend(e.url,"layers")),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t,n;n=(t=!!(e=w.transformResult(e))&&e.length>0?e[0].subLayers.layers:null)?t.length:0,this.handleLayers(n,t),this.events.triggerEvent("processCompleted",{result:e[0]})}},{key:"handleLayers",value:function(e,t){var n;if(e)for(var r=0;r<e;r++){if(t[r].subLayers&&t[r].subLayers.layers&&t[r].subLayers.layers.length>0)this.handleLayers(t[r].subLayers.layers.length,t[r].subLayers.layers);else switch(t[r].ugcLayerType){case"THEME":(n=new W_).fromJson(t[r]),t[r]=n;break;case"GRID":(n=new $_).fromJson(t[r]),t[r]=n;break;case"IMAGE":(n=new ax).fromJson(t[r]),t[r]=n;break;case"VECTOR":(n=new px).fromJson(t[r]),t[r]=n}}}}])&&yx(t.prototype,n),r&&yx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function xx(e){"@babel/helpers - typeof";return(xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ox(){return(Ox="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cx(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Px(e,t){return(Px=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Cx(e);if(t){var o=Cx(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===xx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kx(e)}(this,n)}}function kx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cx(e){return(Cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ex=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Px(e,t)}(i,uy);var t,n,r,o=Tx(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),t&&w.extend(kx(n),t),n.CLASS_NAME="SuperMap.SetLayerInfoService",n}return t=i,(n=[{key:"destroy",value:function(){Ox(Cx(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"processAsync",value:function(e){if(e){var t=w.toJSON(e);this.request({method:"PUT",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&Sx(t.prototype,n),r&&Sx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ax(e){"@babel/helpers - typeof";return(Ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rx(){return(Rx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dx(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Ix(e,t){return(Ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Dx(e);if(t){var o=Dx(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ax(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lx(e)}(this,n)}}function Lx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dx(e){return(Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Nx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ix(e,t)}(i,uy);var t,n,r,o=jx(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).resourceID=null,n.isTempLayers=!1,t&&w.extend(Lx(n),t),n.CLASS_NAME="SuperMap.SetLayersInfoService",n}return t=i,(n=[{key:"destroy",value:function(){Rx(Dx(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"processAsync",value:function(e){if(e){var t,n=[],r=this,o="";r.isTempLayers?(r.url=w.urlPathAppend(r.url,"tempLayersSet/"+r.resourceID),o="PUT"):(r.url=w.urlPathAppend(r.url,"tempLayersSet"),o="POST"),e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]);var i=e.subLayers.layers,a=i.length;for(var s in i){if("GRID"===i[s].ugcLayerType){var l={},u=i[s].colorDictionarys;for(var c in u){l[u[c].elevation]=u[c].color}}i[s].colorDictionary=l,delete i[s].colorDictionarys}for(var f=0;f<a;f++)i[f].toJsonObject?n.push(i[f].toJsonObject()):n.push(i[f]);(t=w.extend(t,e)).subLayers={layers:n},t.object=null;var h=w.toJSON([t]);r.request({method:o,data:h,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&Mx(t.prototype,n),r&&Mx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Fx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,t&&w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var e="{";e+='"layers":[';for(var t=[],n=0,r=this.layerStatusList.length;n<r;n++)t.push(this.layerStatusList[n].toJSON());return e+=t,e+="]",e+="}"}}])&&Bx(t.prototype,n),r&&Bx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Gx(e){"@babel/helpers - typeof";return(Gx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vx(){return(Vx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jx(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Hx(e,t){return(Hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Jx(e);if(t){var o=Jx(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Gx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ux(e)}(this,n)}}function Ux(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jx(e){return(Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hx(e,t)}(i,uy);var t,n,r,o=Wx(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).lastparams=null,n.mapUrl=e,t&&w.extend(Ux(n),t),n.CLASS_NAME="SuperMap.SetLayerStatusService",n}return t=i,(n=[{key:"destroy",value:function(){Vx(Jx(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof Fx){var t=this;if(t.url=t.mapUrl,null==e.resourceID)t.url=w.urlPathAppend(t.url,"tempLayersSet"),t.lastparams=e,t.request({method:"POST",scope:t,success:t.createTempLayerComplete,failure:t.serviceProcessFailed});else{t.url=w.urlPathAppend(t.url,"tempLayersSet/"+e.resourceID),t.url=w.urlAppend(t.url,"elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString());var n="[{";n+='"type":"UGC",',null!=e.layerStatusList&&e.layerStatusList.length>0&&(n+='"subLayers":'+e.toJSON()),n+=',"visible":true,',n+='"name":"'+this.getMapName(this.mapUrl)+'"',n+="}]",t.request({method:"PUT",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}},{key:"createTempLayerComplete",value:function(e){(e=w.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams)}},{key:"getMapName",value:function(e){var t=e;"/"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var n=t.lastIndexOf("/");return t.substring(n+1,t.length)}},{key:"serviceProcessCompleted",value:function(e){null!=(e=w.transformResult(e))&&null!=this.lastparams&&(e.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:e})}}])&&zx(t.prototype,n),r&&zx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Yx(e){"@babel/helpers - typeof";return(Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zx(e,t){return(Zx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Kx(e);if(t){var o=Kx(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Yx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Kx(e){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zx(e,t)}(i,oy);var t,n,r,o=Qx(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getLayersInfo",value:function(e){var t=this;new _x(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{processCompleted:e,processFailed:e}}).processAsync()}},{key:"setLayerInfo",value:function(e,t){if(e){var n=this,r=e.resourceID,o=e.tempLayerName,i=e.layerInfo;if(r&&o){var a=w.urlPathAppend(n.url,"tempLayersSet/"+r+"/"+o);new Ex(a,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(i)}}}},{key:"setLayersInfo",value:function(e,t){if(e){var n=this,r=e.resourceID,o=!!e.isTempLayers&&e.isTempLayers,i=e.layersInfo;if((!o||r)&&i)new Nx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},resourceID:r,isTempLayers:o}).processAsync(i)}}},{key:"setLayerStatus",value:function(e,t){if(e){var n=this;new qx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e)}}}])&&Xx(t.prototype,n),r&&Xx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function eS(e){"@babel/helpers - typeof";return(eS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nS(){return(nS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aS(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function rS(e,t){return(rS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=aS(e);if(t){var o=aS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===eS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iS(e)}(this,n)}}function iS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aS(e){return(aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var sS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rS(e,t)}(i,uy);var t,n,r,o=oS(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).projection=null,n.CLASS_NAME="SuperMap.MapService",t&&w.extend(iS(n),t);var r=iS(n);if(r.projection){var a=r.projection.split(":");a instanceof Array&&(2===a.length&&(r.url=w.urlAppend(r.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(a[1],'"}'))))),1===a.length&&(r.url=w.urlAppend(r.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(a[0],'"}'))))))}return n}return t=i,(n=[{key:"destroy",value:function(){nS(aS(i.prototype),"destroy",this).call(this);var e=this;e.events&&(e.events.un(e.eventListeners),e.events.listeners=null,e.events.destroy(),e.events=null,e.eventListeners=null)}},{key:"processAsync",value:function(){this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t=(e=w.transformResult(e)).code>=200&&e.code<300||0==e.code||304===e.code,n=e.code&&t;!e.code||n?this.events&&this.events.triggerEvent("processCompleted",{result:e}):this.events.triggerEvent("processFailed",{error:e})}}])&&tS(t.prototype,n),r&&tS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lS(e){"@babel/helpers - typeof";return(lS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cS(){return(cS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pS(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function fS(e,t){return(fS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=pS(e);if(t){var o=pS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===lS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pS(e){return(pS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var dS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fS(e,t)}(i,uy);var t,n,r,o=hS(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.TilesetsService",n}return t=i,(n=[{key:"destroy",value:function(){cS(pS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){if(this.url){var e=this;e.url=w.urlPathAppend(e.url,"tilesets"),e.request({method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}])&&uS(t.prototype,n),r&&uS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yS(e){"@babel/helpers - typeof";return(yS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gS(e,t){return(gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=bS(e);if(t){var o=bS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bS(e){return(bS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gS(e,t)}(i,oy);var t,n,r,o=mS(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getMapInfo",value:function(e){var t=this;new sS(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e},projection:t.options.projection}).processAsync()}},{key:"getTilesets",value:function(e){var t=this;new dS(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}}])&&vS(t.prototype,n),r&&vS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xS=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.geometry=t,this.unit=_n.METER,this.prjCoordSys=null,this.distanceMode=null,n&&w.extend(this,n),this.CLASS_NAME="SuperMap.MeasureParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&_S(t.prototype,n),r&&_S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SS(e){"@babel/helpers - typeof";return(SS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PS(){return(PS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ES(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function TS(e,t){return(TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ES(e);if(t){var o=ES(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===SS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return CS(e)}(this,n)}}function CS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ES(e){return(ES=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var AS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TS(e,t)}(i,uy);var t,n,r,o=kS(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).measureMode=wn.DISTANCE,t&&w.extend(CS(n),t),n.CLASS_NAME="SuperMap.MeasureService",n}return t=i,(n=[{key:"destroy",value:function(){PS(ES(i.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(e){if(e instanceof xS){var t,n,r=this,o=e.geometry;if(o){r.url=w.urlPathAppend(r.url,r.measureMode===wn.AREA?"area":"distance");var i,a,s,l=tr.fromGeometry(o);if(l)t=l.parts[0],n=l.points.splice(0,t),e.prjCoordSys?("object"===SS(e.prjCoordSys)?i='{"epsgCode"'+(a=e.prjCoordSys.projCode).substring(a.indexOf(":"),a.length)+"}":"string"==typeof e.prjCoordSys&&(i='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),s={point2Ds:w.toJSON(n),unit:e.unit,prjCoordSys:i,distanceMode:e.distanceMode||"Geodesic"}):s={point2Ds:w.toJSON(n),unit:e.unit,distanceMode:e.distanceMode||"Geodesic"},r.request({method:"GET",params:s,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}}])&&OS(t.prototype,n),r&&OS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function MS(e){"@babel/helpers - typeof";return(MS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IS(e,t){return(IS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=LS(e);if(t){var o=LS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===MS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function LS(e){return(LS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var DS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IS(e,t)}(i,oy);var t,n,r,o=jS(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"measureDistance",value:function(e,t){this.measure(e,"DISTANCE",t)}},{key:"measureArea",value:function(e,t){this.measure(e,"AREA",t)}},{key:"measure",value:function(e,t,n){var r=this;new AS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,measureMode:t,eventListeners:{scope:r,processCompleted:n,processFailed:n}}).processAsync(r._processParam(e))}},{key:"_processParam",value:function(e){return!e||e.geometry instanceof l||(e.geometry=fr.toSuperMapGeometry(e.geometry)),e}}])&&RS(t.prototype,n),r&&RS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function NS(e){"@babel/helpers - typeof";return(NS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FS(){return(FS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VS(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function GS(e,t){return(GS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=VS(e);if(t){var o=VS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===NS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function VS(e){return(VS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var HS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GS(e,t)}(i,uy);var t,n,r,o=zS(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).format=yn.GEOJSON,n.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",n}return t=i,(n=[{key:"destroy",value:function(){FS(VS(i.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t;(e=w.transformResult(e))&&this.format===yn.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(t=this.toGeoJSONResult(e)),t||(t=e),this.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){return null}}])&&BS(t.prototype,n),r&&BS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function WS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var US=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&WS(t.prototype,n),r&&WS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function JS(e){"@babel/helpers - typeof";return(JS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YS(){return(YS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QS(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function XS(e,t){return(XS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ZS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=QS(e);if(t){var o=QS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===JS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function QS(e){return(QS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var KS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XS(e,t)}(i,HS);var t,n,r,o=ZS(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.BurstPipelineAnalystService",n}return t=i,(n=[{key:"destroy",value:function(){YS(QS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(!(e instanceof US))return null;var t,n=this;if(n.url=w.urlPathAppend(n.url,"burstAnalyse"),t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&qS(t.prototype,n),r&&qS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function $S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var eO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.returnEdgeFeatures=null,e.returnEdgeGeometry=null,e.returnEdgeIDs=null,e.returnNodeFeatures=null,e.returnNodeGeometry=null,e.returnNodeIDs=null,e.returnPathGuides=null,e.returnRoutes=null}}])&&$S(t.prototype,n),r&&$S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new eO,w.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints)e.barrierPoints[t].destroy();e.barrierPoints=null}}])&&tO(t.prototype,n),r&&tO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var oO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new nO,w.extend(this,t),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&rO(t.prototype,n),r&&rO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function iO(e){"@babel/helpers - typeof";return(iO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sO(){return(sO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function lO(e,t){return(lO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=cO(e);if(t){var o=cO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===iO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cO(e){return(cO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lO(e,t)}(i,HS);var t,n,r,o=uO(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.ComputeWeightMatrixService",n}return t=i,(n=[{key:"destroy",value:function(){sO(cO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof oO){var t,n=this;n.url=w.urlPathAppend(n.url,"weightmatrix"),t={parameter:w.toJSON(e.parameter),nodes:n.getJson(e.isAnalyzeById,e.nodes)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+=t[i];return n+="]"}}])&&aO(t.prototype,n),r&&aO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,w.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.edgeID=null,e.nodeID=null,e.weightName=null,e.isUncertainDirectionValid=null,e.type=null}}])&&hO(t.prototype,n),r&&hO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dO(e){"@babel/helpers - typeof";return(dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vO(){return(vO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gO(e,t){return(gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=bO(e);if(t){var o=bO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bO(e){return(bO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gO(e,t)}(i,HS);var t,n,r,o=mO(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystStreamService",n}return t=i,(n=[{key:"destroy",value:function(){vO(bO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof pO){var t,n=this;if(0===e.queryType)n.url=w.urlPathAppend(n.url,"upstreamcirticalfaclilities");else{if(1!==e.queryType)return;n.url=w.urlPathAppend(n.url,"downstreamcirticalfaclilities")}t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID||(null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed}))}}}])&&yO(t.prototype,n),r&&yO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new nO,w.extend(this,t),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.event=null,e.expectFacilityCount=null,e.facilities=null,e.fromEvent=null,e.isAnalyzeById=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&_O(t.prototype,n),r&&_O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SO(e){"@babel/helpers - typeof";return(SO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PO(){return(PO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function TO(e,t){return(TO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=CO(e);if(t){var o=CO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===SO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function CO(e){return(CO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var EO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TO(e,t)}(i,HS);var t,n,r,o=kO(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FindClosestFacilitiesService",n}return t=i,(n=[{key:"destroy",value:function(){PO(CO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof xO){var t,n=this;n.url=w.urlPathAppend(n.url,"closestfacility"),t={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:w.toJSON(e.parameter),event:w.toJSON(e.event),facilities:n.getJson(e.isAnalyzeById,e.facilities)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+=t[i];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.facilityPathList)return e;var t=new lr;return e.facilityPathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&OO(t.prototype,n),r&&OO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function AO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var MO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,w.extend(this,t),this.CLASS_NAME="SuperMap.FindLocationParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.expectedSupplyCenterCount=null,e.isFromCenter=null,e.turnWeightField=null,e.weightName=null,e.supplyCenters){for(var t=0,n=e.supplyCenters,r=n.length;t<r;t++)n[t].destroy();e.supplyCenters=null}}}])&&AO(t.prototype,n),r&&AO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function RO(e){"@babel/helpers - typeof";return(RO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jO(){return(jO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function LO(e,t){return(LO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=NO(e);if(t){var o=NO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===RO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function NO(e){return(NO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var BO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LO(e,t)}(i,HS);var t,n,r,o=DO(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FindLocationService",n}return t=i,(n=[{key:"destroy",value:function(){jO(NO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof MO){var t,n=this;n.url=w.urlPathAppend(n.url,"location"),t={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:w.toJSON(e.mapParameter),supplyCenters:n.getCentersJson(e.supplyCenters)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getCentersJson",value:function(e){for(var t="[",n=e?e.length:0,r=0;r<n;r++)r>0&&(t+=","),t+=w.toJSON(e[r]);return t+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new lr;return e.demandResults&&(e.demandResults=t.toGeoJSON(e.demandResults)),e.supplyResults&&(e.supplyResults=t.toGeoJSON(e.supplyResults)),e}}])&&IO(t.prototype,n),r&&IO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function FO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var GO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new nO,w.extend(this,t),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.centers=null,e.hasLeastTotalCost=null,e.isAnalyzeById=null,e.nodes=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&FO(t.prototype,n),r&&FO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zO(e){"@babel/helpers - typeof";return(zO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HO(){return(HO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=JO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function WO(e,t){return(WO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=JO(e);if(t){var o=JO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function JO(e){return(JO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WO(e,t)}(i,HS);var t,n,r,o=UO(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FindMTSPPathsService",n}return t=i,(n=[{key:"destroy",value:function(){HO(JO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof GO){var t,n=this,r=n.getJson(e.isAnalyzeById,e.centers),o=n.getJson(e.isAnalyzeById,e.nodes);n.url=w.urlPathAppend(n.url,"mtsppath"),t={centers:r,nodes:o,parameter:w.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+=t[i];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList)return null;var t=new lr;return e.pathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&VO(t.prototype,n),r&&VO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function YO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var XO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new nO,w.extend(this,t),this.CLASS_NAME="SuperMap.FindPathParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.hasLeastEdgeCount=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&YO(t.prototype,n),r&&YO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ZO(e){"@babel/helpers - typeof";return(ZO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KO(){return(KO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function $O(e,t){return($O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=tP(e);if(t){var o=tP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ZO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function tP(e){return(tP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var nP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$O(e,t)}(i,HS);var t,n,r,o=eP(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FindPathService",n}return t=i,(n=[{key:"destroy",value:function(){KO(tP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof XO){var t,n=this;n.url=w.urlPathAppend(n.url,"path"),t={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:w.toJSON(e.parameter),nodes:n.getJson(e.isAnalyzeById,e.nodes)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+=t[i];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList||e.pathList.length<1)return null;var t=new lr;return e.pathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&QO(t.prototype,n),r&&QO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function rP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var oP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new nO,w.extend(this,t),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.isCenterMutuallyExclusive=null,e.centers=null,e.isFromCenter=null,e.weights=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&rP(t.prototype,n),r&&rP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function iP(e){"@babel/helpers - typeof";return(iP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sP(){return(sP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function lP(e,t){return(lP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=cP(e);if(t){var o=cP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===iP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cP(e){return(cP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lP(e,t)}(i,HS);var t,n,r,o=uP(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FindServiceAreasService",n}return t=i,(n=[{key:"destroy",value:function(){sP(cP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof oP){var t,n=this;n.url=w.urlPathAppend(n.url,"servicearea"),t={isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:w.toJSON(e.parameter),centers:n.getJson(e.isAnalyzeById,e.centers),weights:n.getJson(!0,e.weights)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+=t[i];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.serviceAreaList)return e;var t=new lr;return e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=t.toGeoJSON(e.serviceRegion)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e.routes&&(e.routes=t.toGeoJSON(e.routes)),e}),e}}])&&aP(t.prototype,n),r&&aP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new nO,w.extend(this,t),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.endNodeAssigned=null,e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&hP(t.prototype,n),r&&hP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dP(e){"@babel/helpers - typeof";return(dP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vP(){return(vP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gP(e,t){return(gP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=bP(e);if(t){var o=bP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bP(e){return(bP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gP(e,t)}(i,HS);var t,n,r,o=mP(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FindTSPPathsService",n}return t=i,(n=[{key:"destroy",value:function(){vP(bP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof pP){var t,n=this;n.url=w.urlPathAppend(n.url,"tsppath"),t={parameter:w.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:n.getNodesJson(e)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getNodesJson",value:function(e){var t,n,r,o,i="";if(!1===e.isAnalyzeById){for(t="[",n=0,r=(o=e.nodes).length;n<r;n++)n>0&&(t+=","),t+='{"x":'+o[n].x+',"y":'+o[n].y+"}";i+=t+="]"}else if(!0===e.isAnalyzeById){for(var a="[",s=e.nodes,l=s.length,u=0;u<l;u++)u>0&&(a+=","),a+=s[u];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.tspPathList)return null;var t=new lr;return e.tspPathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&yP(t.prototype,n),r&&yP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",w.extend(this,t),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&_P(t.prototype,n),r&&_P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SP(e){"@babel/helpers - typeof";return(SP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PP(){return(PP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function TP(e,t){return(TP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=CP(e);if(t){var o=CP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===SP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function CP(e){return(CP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var EP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TP(e,t)}(i,HS);var t,n,r,o=kP(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.UpdateEdgeWeightService",n}return t=i,(n=[{key:"destroy",value:function(){PP(CP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof xP){var t=this,n=t.parse(e);t.url=w.urlPathAppend(t.url,n);var r=e.edgeWeight?e.edgeWeight:null;t.request({method:"PUT",scope:t,data:r,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var n in e)if(""!==e[n]&&"edgeWeight"!==e[n])switch(n){case"edgeId":t+="/edgeweight/"+e[n];break;case"fromNodeId":t+="/fromnode/"+e[n];break;case"toNodeId":t+="/tonode/"+e[n];break;case"weightField":t+="/weightfield/"+e[n]}return t}}}])&&OP(t.prototype,n),r&&OP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function AP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var MP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",w.extend(this,t),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&AP(t.prototype,n),r&&AP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function RP(e){"@babel/helpers - typeof";return(RP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jP(){return(jP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function LP(e,t){return(LP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=NP(e);if(t){var o=NP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===RP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function NP(e){return(NP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var BP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LP(e,t)}(i,HS);var t,n,r,o=DP(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",n}return t=i,(n=[{key:"destroy",value:function(){jP(NP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof MP){var t=this,n=t.parse(e);t.url=w.urlPathAppend(t.url,n);var r=e.turnNodeWeight?e.turnNodeWeight:null;t.request({method:"PUT",scope:t,data:r,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var n in e)if(""!==e[n]&&"turnNodeWeight"!==e[n])switch(n){case"nodeId":t+="/turnnodeweight/"+e[n];break;case"fromEdgeId":t+="/fromedge/"+e[n];break;case"toEdgeId":t+="/toedge/"+e[n];break;case"weightField":t+="/weightfield/"+e[n]}return t}}}])&&IP(t.prototype,n),r&&IP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function FP(e){"@babel/helpers - typeof";return(FP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zP(e,t){return(zP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function VP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=HP(e);if(t){var o=HP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===FP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function HP(e){return(HP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var WP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zP(e,t)}(i,oy);var t,n,r,o=VP(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"burstPipelineAnalyst",value:function(e,t){var n=this;new KS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))}},{key:"computeWeightMatrix",value:function(e,t){var n=this;new fO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))}},{key:"findClosestFacilities",value:function(e,t,n){var r=this;new EO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"streamFacilityAnalyst",value:function(e,t,n){var r=this;new wO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"findLocation",value:function(e,t,n){var r=this;new BO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"findPath",value:function(e,t,n){var r=this;new nP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"findTSPPaths",value:function(e,t,n){var r=this;new wP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"findMTSPPaths",value:function(e,t,n){var r=this;new qO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"findServiceAreas",value:function(e,t,n){var r=this;new fP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"updateEdgeWeight",value:function(e,t){var n=this;new EP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"updateTurnNodeWeight",value:function(e,t){var n=this;new BP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"_processParams",value:function(e){if(!e)return{};var t=this;if(e.centers&&fr.isArray(e.centers)&&e.centers.map(function(n,r){return e.centers[r]=t._toPointObject(n),e.centers[r]}),e.nodes&&fr.isArray(e.nodes)&&e.nodes.map(function(n,r){return e.nodes[r]=t._toPointObject(n),e.nodes[r]}),e.event&&(e.event=t._toPointObject(e.event)),e.facilities&&fr.isArray(e.facilities)&&e.facilities.map(function(n,r){return e.facilities[r]=t._toPointObject(n),e.facilities[r]}),e.parameter&&e.parameter.barrierPoints){var n=e.parameter.barrierPoints;fr.isArray(n)?n.map(function(n,r){return e.parameter[r]=t._toPointObject(n),e.parameter.barrierPoints[r]}):e.parameter.barrierPoints=[n instanceof O().LngLat?{x:n.lng,y:n.lat}:n]}return e}},{key:"_toPointObject",value:function(e){return fr.isArray(e)?{x:e[0],y:e[1]}:e instanceof O().LngLat?{x:e.lng,y:e.lat}:e instanceof O().Point?{x:e.x,y:e.y}:e}},{key:"_processFormat",value:function(e){return e||yn.GEOJSON}}])&&GP(t.prototype,n),r&&GP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function UP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var JP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&UP(t.prototype,n),r&&UP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qP(e){"@babel/helpers - typeof";return(qP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XP(){return(XP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ZP(e,t){return(ZP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function QP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=KP(e);if(t){var o=KP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function KP(e){return(KP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZP(e,t)}(i,JP);var t,n,r,o=QP(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",t}return t=i,(n=[{key:"destroy",value:function(){XP(KP(i.prototype),"destroy",this).call(this)}}])&&YP(t.prototype,n),r&&YP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function eT(e){"@babel/helpers - typeof";return(eT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nT(e,t){return(nT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=oT(e);if(t){var o=oT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===eT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function oT(e){return(oT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var iT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nT(e,t)}(i,uy);var t,n,r,o=rT(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",n}return t=i,(n=[{key:"destroy",value:function(){uy.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(e){if(e instanceof $P){var t,n=this;n.url=w.urlPathAppend(n.url,"sinks"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&tT(t.prototype,n),r&&tT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function aT(e){"@babel/helpers - typeof";return(aT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lT(){return(lT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fT(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function uT(e,t){return(uT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=fT(e);if(t){var o=fT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===aT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fT(e){return(fT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var hT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uT(e,t)}(i,JP);var t,n,r,o=cT(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",t}return t=i,(n=[{key:"destroy",value:function(){lT(fT(i.prototype),"destroy",this).call(this)}}])&&sT(t.prototype,n),r&&sT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function pT(e){"@babel/helpers - typeof";return(pT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yT(){return(yT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mT(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function vT(e,t){return(vT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=mT(e);if(t){var o=mT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function mT(e){return(mT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var bT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vT(e,t)}(i,uy);var t,n,r,o=gT(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",n}return t=i,(n=[{key:"destroy",value:function(){yT(mT(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof hT){var t,n=this;n.url=w.urlPathAppend(n.url,"sources"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&dT(t.prototype,n),r&&dT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function wT(e){"@babel/helpers - typeof";return(wT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xT(){return(xT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PT(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ST(e,t){return(ST=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function OT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=PT(e);if(t){var o=PT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===wT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function PT(e){return(PT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var TT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ST(e,t)}(i,JP);var t,n,r,o=OT(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",t}return t=i,(n=[{key:"destroy",value:function(){xT(PT(i.prototype),"destroy",this).call(this)}}])&&_T(t.prototype,n),r&&_T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function kT(e){"@babel/helpers - typeof";return(kT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ET(){return(ET="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RT(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function AT(e,t){return(AT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function MT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=RT(e);if(t){var o=RT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function RT(e){return(RT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var IT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AT(e,t)}(i,uy);var t,n,r,o=MT(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",n}return t=i,(n=[{key:"destroy",value:function(){ET(RT(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof TT){var t,n=this;n.url=w.urlPathAppend(n.url,"traceupresult"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&CT(t.prototype,n),r&&CT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jT(e){"@babel/helpers - typeof";return(jT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DT(){return(DT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=FT(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function NT(e,t){return(NT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function BT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=FT(e);if(t){var o=FT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function FT(e){return(FT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var GT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NT(e,t)}(i,JP);var t,n,r,o=BT(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",t}return t=i,(n=[{key:"destroy",value:function(){DT(FT(i.prototype),"destroy",this).call(this)}}])&&LT(t.prototype,n),r&&LT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function zT(e){"@babel/helpers - typeof";return(zT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HT(){return(HT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=JT(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function WT(e,t){return(WT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=JT(e);if(t){var o=JT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function JT(e){return(JT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WT(e,t)}(i,uy);var t,n,r,o=UT(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",n}return t=i,(n=[{key:"destroy",value:function(){HT(JT(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof GT){var t,n=this;n.url=w.urlPathAppend(n.url,"tracedownresult"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&VT(t.prototype,n),r&&VT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function YT(e){"@babel/helpers - typeof";return(YT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZT(){return(ZT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ek(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function QT(e,t){return(QT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ek(e);if(t){var o=ek(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===YT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $T(e)}(this,n)}}function $T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ek(e){return(ek=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var tk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QT(e,t)}(i,JP);var t,n,r,o=KT(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e=e||{},t.sourceNodeIDs=null,w.extend($T(t),e),t.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",t}return t=i,(n=[{key:"destroy",value:function(){ZT(ek(i.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&XT(t.prototype,n),r&&XT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function nk(e){"@babel/helpers - typeof";return(nk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ok(){return(ok="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sk(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ik(e,t){return(ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ak(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=sk(e);if(t){var o=sk(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sk(e){return(sk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var lk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ik(e,t)}(i,uy);var t,n,r,o=ak(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",n}return t=i,(n=[{key:"destroy",value:function(){ok(sk(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof tk){var t,n=this;n.url=w.urlPathAppend(n.url,"upstreamcirticalfaclilities"),t={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&rk(t.prototype,n),r&&rk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function uk(e){"@babel/helpers - typeof";return(uk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ck(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fk(e,t){return(fk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=pk(e);if(t){var o=pk(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===uk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pk(e){return(pk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var dk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fk(e,t)}(i,oy);var t,n,r,o=hk(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"sinksFacilityAnalyst",value:function(e,t){var n=this;new iT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"sourcesFacilityAnalyst",value:function(e,t){var n=this;new bT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceUpFacilityAnalyst",value:function(e,t){var n=this;new IT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceDownFacilityAnalyst",value:function(e,t){var n=this;new qT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"upstreamFacilityAnalyst",value:function(e,t){var n=this;new lk(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&ck(t.prototype,n),r&&ck(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yk(e){"@babel/helpers - typeof";return(yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gk(){return(gk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wk(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function mk(e,t){return(mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=wk(e);if(t){var o=wk(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function wk(e){return(wk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mk(e,t)}(i,uy);var t,n,r,o=bk(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(n=o.call(this,e,t)).CLASS_NAME="SuperMap.ProcessingServiceBase",n}return t=i,(n=[{key:"destroy",value:function(){gk(wk(i.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;cp.get(ay.appendCredential(e),null,{proxy:t.proxy}).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,n,r){var o=this,i=null;t&&t instanceof n&&(i=new Object,n.toObject(t,i));var a=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},o.headers||{}),s={proxy:o.proxy,headers:a,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,isInTheSameDomain:o.isInTheSameDomain};cp.post(ay.appendCredential(e),JSON.stringify(i),s).then(function(e){return e.json()}).then(function(e){e.succeed?o.serviceProcessCompleted(e,r):o.serviceProcessFailed(e)}).catch(function(e){o.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=w.transformResult(e),t=t||1e3;var n=this;if(e)var r=setInterval(function(){cp.get(ay.appendCredential(e.newResourceLocation),{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){n.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(r),n.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(r),n.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(r),n.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){gk(wk(i.prototype),"serviceProcessFailed",this).call(this,e)}}])&&vk(t.prototype,n),r&&vk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function xk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Sk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}])&&xk(t.prototype,n),r&&xk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ok(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Pk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=Ln.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",w.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof Sk&&(e.datasourceInfo.destroy(),e.datasourceInfo=null)}}])&&Ok(t.prototype,n),r&&Ok(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=null,this.numericPrecision=1,this.rangeMode=kn.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=Cn.YELLOW_RED,w.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null}}])&&Tk(t.prototype,n),r&&Tk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ck(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ek=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=qn.METER,this.radiusUnit=qn.METER,this.areaUnit=Jn.SQUAREMILE,this.output=null,this.mappingParameters=null,w.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof Pk&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof kk&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Ck(t.prototype,n),r&&Ck(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ak(e){"@babel/helpers - typeof";return(Ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rk(){return(Rk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lk(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Ik(e,t){return(Ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Lk(e);if(t){var o=Lk(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ak(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lk(e){return(Lk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Dk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ik(e,t)}(i,_k);var t,n,r,o=jk(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=w.urlPathAppend(n.url,"spatialanalyst/density"),n.CLASS_NAME="SuperMap.KernelDensityJobsService",n}return t=i,(n=[{key:"destroy",value:function(){Rk(Lk(i.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){Rk(Lk(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){Rk(Lk(i.prototype),"getJobs",this).call(this,w.urlPathAppend(this.url,e))}},{key:"addKernelDensityJob",value:function(e,t){Rk(Lk(i.prototype),"addJob",this).call(this,this.url,e,Ek,t)}}])&&Mk(t.prototype,n),r&&Mk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Nk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Bk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=bn.CONTAIN,this.output=null,this.mappingParameters=null,w.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof Pk&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof kk&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Nk(t.prototype,n),r&&Nk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Fk(e){"@babel/helpers - typeof";return(Fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zk(){return(zk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wk(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Vk(e,t){return(Vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Wk(e);if(t){var o=Wk(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Fk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Wk(e){return(Wk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Uk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vk(e,t)}(i,_k);var t,n,r,o=Hk(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=w.urlPathAppend(n.url,"spatialanalyst/query"),n.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",n}return t=i,(n=[{key:"destroy",value:function(){zk(Wk(i.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){zk(Wk(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){zk(Wk(i.prototype),"getJobs",this).call(this,w.urlPathAppend(this.url,e))}},{key:"addQueryJob",value:function(e,t){zk(Wk(i.prototype),"addJob",this).call(this,this.url,e,Bk,t)}}])&&Gk(t.prototype,n),r&&Gk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Jk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=Yn.AVERAGE,this.fields="",this.type=Xn.SUMMARYMESH,this.output=null,this.mappingParameters=null,w.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n?"output"!==n?("SUMMARYMESH"===e.type&&"regionDataset"!==n||"SUMMARYREGION"===e.type&&!r(["meshType","resolution","query"],n))&&(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n]);function r(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof Pk&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof kk&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Jk(t.prototype,n),r&&Jk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yk(e){"@babel/helpers - typeof";return(Yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zk(){return(Zk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Qk(e,t){return(Qk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=$k(e);if(t){var o=$k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Yk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $k(e){return($k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var eC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qk(e,t)}(i,_k);var t,n,r,o=Kk(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=w.urlPathAppend(n.url,"spatialanalyst/aggregatepoints"),n.CLASS_NAME="SuperMap.SummaryMeshJobsService",n}return t=i,(n=[{key:"destroy",value:function(){Zk($k(i.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){Zk($k(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){Zk($k(i.prototype),"getJobs",this).call(this,w.urlPathAppend(this.url,e))}},{key:"addSummaryMeshJob",value:function(e,t){Zk($k(i.prototype),"addJob",this).call(this,this.url,e,qk,t)}}])&&Xk(t.prototype,n),r&&Xk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=Un.CLIP,this.output=null,this.mappingParameters=null,w.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof Pk&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof kk&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&tC(t.prototype,n),r&&tC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rC(e){"@babel/helpers - typeof";return(rC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iC(){return(iC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lC(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function aC(e,t){return(aC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=lC(e);if(t){var o=lC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function lC(e){return(lC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var uC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aC(e,t)}(i,_k);var t,n,r,o=sC(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=w.urlPathAppend(n.url,"spatialanalyst/vectorclip"),n.CLASS_NAME="SuperMap.VectorClipJobsService",n}return t=i,(n=[{key:"destroy",value:function(){iC(lC(i.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){iC(lC(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){iC(lC(i.prototype),"getJobs",this).call(this,w.urlPathAppend(this.url,e))}},{key:"addVectorClipJob",value:function(e,t){iC(lC(i.prototype),"addJob",this).call(this,this.url,e,nC,t)}}])&&oC(t.prototype,n),r&&oC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function cC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,w.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!=n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof Pk&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof kk&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&cC(t.prototype,n),r&&cC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hC(e){"@babel/helpers - typeof";return(hC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dC(){return(dC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gC(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function yC(e,t){return(yC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=gC(e);if(t){var o=gC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===hC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function gC(e){return(gC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var mC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yC(e,t)}(i,_k);var t,n,r,o=vC(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=w.urlPathAppend(n.url,"spatialanalyst/overlay"),n.CLASS_NAME="SuperMap.OverlayGeoJobsService",n}return t=i,(n=[{key:"destroy",value:function(){dC(gC(i.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){dC(gC(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){dC(gC(i.prototype),"getJobs",this).call(this,w.urlPathAppend(this.url,e))}},{key:"addOverlayGeoJob",value:function(e,t){dC(gC(i.prototype),"addJob",this).call(this,this.url,e,fC,t)}}])&&pC(t.prototype,n),r&&pC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=qn.METER,this.type=Xn.SUMMARYMESH,this.output=null,this.mappingParameters=null,w.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n&&"type"!==n?"output"!==n?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==n)&&(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof Pk&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof kk&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&bC(t.prototype,n),r&&bC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _C(e){"@babel/helpers - typeof";return(_C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SC(){return(SC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TC(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function OC(e,t){return(OC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function PC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=TC(e);if(t){var o=TC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function TC(e){return(TC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var kC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OC(e,t)}(i,_k);var t,n,r,o=PC(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=w.urlPathAppend(n.url,"spatialanalyst/summaryregion"),n.CLASS_NAME="SuperMap.SummaryRegionJobsService",n}return t=i,(n=[{key:"destroy",value:function(){SC(TC(i.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){SC(TC(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){SC(TC(i.prototype),"getJobs",this).call(this,w.urlPathAppend(this.url,e))}},{key:"addSummaryRegionJob",value:function(e,t){SC(TC(i.prototype),"addJob",this).call(this,this.url,e,wC,t)}}])&&xC(t.prototype,n),r&&xC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function CC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var EC=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=qn.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;w.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},"bounds"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof Pk&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof kk&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&CC(t.prototype,n),r&&CC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function AC(e){"@babel/helpers - typeof";return(AC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RC(){return(RC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LC(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function IC(e,t){return(IC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=LC(e);if(t){var o=LC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===AC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function LC(e){return(LC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var DC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IC(e,t)}(i,_k);var t,n,r,o=jC(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=w.urlPathAppend(n.url,"spatialanalyst/buffers"),n.CLASS_NAME="SuperMap.BuffersAnalystJobsService",n}return t=i,(n=[{key:"destroy",value:function(){RC(LC(i.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){RC(LC(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){RC(LC(i.prototype),"getJobs",this).call(this,w.urlPathAppend(this.url,e))}},{key:"addBuffersJob",value:function(e,t){RC(LC(i.prototype),"addJob",this).call(this,this.url,e,EC,t)}}])&&MC(t.prototype,n),r&&MC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function NC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var BC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=Zn.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,w.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof Pk&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof kk&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&NC(t.prototype,n),r&&NC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function FC(e){"@babel/helpers - typeof";return(FC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zC(){return(zC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WC(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function VC(e,t){return(VC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=WC(e);if(t){var o=WC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===FC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function WC(e){return(WC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var UC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VC(e,t)}(i,_k);var t,n,r,o=HC(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=w.urlPathAppend(n.url,"spatialanalyst/topologyvalidator"),n.CLASS_NAME="SuperMap.TopologyValidatorJobsService",n}return t=i,(n=[{key:"destroy",value:function(){zC(WC(i.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){zC(WC(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){zC(WC(i.prototype),"getJobs",this).call(this,w.urlPathAppend(this.url,e))}},{key:"addTopologyValidatorJob",value:function(e,t){zC(WC(i.prototype),"addJob",this).call(this,this.url,e,BC,t)}}])&&GC(t.prototype,n),r&&GC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function JC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,w.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof Pk&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof kk&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&JC(t.prototype,n),r&&JC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function YC(e){"@babel/helpers - typeof";return(YC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZC(){return(ZC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function QC(e,t){return(QC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=$C(e);if(t){var o=$C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===YC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $C(e){return($C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var eE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QC(e,t)}(i,_k);var t,n,r,o=KC(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).url=w.urlPathAppend(n.url,"spatialanalyst/summaryattributes"),n.CLASS_NAME="SuperMap.SummaryAttributesJobsService",n}return t=i,(n=[{key:"destroy",value:function(){ZC($C(i.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){ZC($C(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(e){ZC($C(i.prototype),"getJobs",this).call(this,w.urlPathAppend(this.url,e))}},{key:"addSummaryAttributesJob",value:function(e,t){ZC($C(i.prototype),"addJob",this).call(this,this.url,e,qC,t)}}])&&XC(t.prototype,n),r&&XC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tE(e){"@babel/helpers - typeof";return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rE(e,t){return(rE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=iE(e);if(t){var o=iE(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===tE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function iE(e){return(iE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var aE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rE(e,t)}(i,oy);var t,n,r,o=oE(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).kernelDensityJobs={},n.summaryMeshJobs={},n.queryJobs={},n.summaryRegionJobs={},n.vectorClipJobs={},n.overlayGeoJobs={},n.buffersJobs={},n.topologyValidatorJobs={},n.summaryAttributesJobs={},n}return t=i,(n=[{key:"getKernelDensityJobs",value:function(e,t){var n=this,r=n._processFormat(t);new Dk(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getKernelDensityJobs()}},{key:"getKernelDensityJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new Dk(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getKernelDensityJob(e)}},{key:"addKernelDensityJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new Dk(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.kernelDensityJobs[e.id]=e.state}},format:a}).addKernelDensityJob(i,n)}},{key:"getKernelDensityJobState",value:function(e){return this.kernelDensityJobs[e]}},{key:"getSummaryMeshJobs",value:function(e,t){var n=this,r=n._processFormat(t);new eC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryMeshJobs()}},{key:"getSummaryMeshJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new eC(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getSummaryMeshJob(e)}},{key:"addSummaryMeshJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new eC(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryMeshJobs[e.id]=e.state}},format:a}).addSummaryMeshJob(i,n)}},{key:"getSummaryMeshJobState",value:function(e){return this.summaryMeshJobs[e]}},{key:"getQueryJobs",value:function(e,t){var n=this,r=n._processFormat(t);new Uk(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getQueryJobs()}},{key:"getQueryJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new Uk(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getQueryJob(e)}},{key:"addQueryJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new Uk(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.queryJobs[e.id]=e.state}},format:a}).addQueryJob(i,n)}},{key:"getQueryJobState",value:function(e){return this.queryJobs[e]}},{key:"getSummaryRegionJobs",value:function(e,t){var n=this,r=n._processFormat(t);new kC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryRegionJobs()}},{key:"getSummaryRegionJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new kC(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getSummaryRegionJob(e)}},{key:"addSummaryRegionJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new kC(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryRegionJobs[e.id]=e.state}},format:a}).addSummaryRegionJob(i,n)}},{key:"getSummaryRegionJobState",value:function(e){return this.summaryRegionJobs[e]}},{key:"getVectorClipJobs",value:function(e,t){var n=this,r=n._processFormat(t);new uC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getVectorClipJobs()}},{key:"getVectorClipJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new uC(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getVectorClipJob(e)}},{key:"addVectorClipJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new uC(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.vectorClipJobs[e.id]=e.state}},format:a}).addVectorClipJob(i,n)}},{key:"getVectorClipJobState",value:function(e){return this.vectorClipJobs[e]}},{key:"getOverlayGeoJobs",value:function(e,t){var n=this,r=n._processFormat(t);new mC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getOverlayGeoJobs()}},{key:"getOverlayGeoJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new mC(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getOverlayGeoJob(e)}},{key:"addOverlayGeoJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new mC(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.overlayGeoJobs[e.id]=e.state}},format:a}).addOverlayGeoJob(i,n)}},{key:"getoverlayGeoJobState",value:function(e){return this.overlayGeoJobs[e]}},{key:"getBuffersJobs",value:function(e,t){var n=this,r=n._processFormat(t);new DC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getBuffersJobs()}},{key:"getBuffersJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new DC(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getBuffersJob(e)}},{key:"addBuffersJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new DC(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.buffersJobs[e.id]=e.state}},format:a}).addBuffersJob(i,n)}},{key:"getBuffersJobState",value:function(e){return this.buffersJobs[e]}},{key:"getTopologyValidatorJobs",value:function(e,t){var n=this,r=n._processFormat(t);new UC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getTopologyValidatorJobs()}},{key:"getTopologyValidatorJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new UC(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getTopologyValidatorJob(e)}},{key:"addTopologyValidatorJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new UC(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.topologyValidatorJobs[e.id]=e.state}},format:a}).addTopologyValidatorJob(i,n)}},{key:"getTopologyValidatorJobState",value:function(e){return this.topologyValidatorJobs[e]}},{key:"getSummaryAttributesJobs",value:function(e,t){var n=this,r=n._processFormat(t);new eE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryAttributesJobs()}},{key:"getSummaryAttributesJob",value:function(e,t,n){var r=this,o=r._processFormat(n);new eE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).getSummaryAttributesJob(e)}},{key:"addSummaryAttributesJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new eE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryAttributesJobs[e.id]=e.state}},format:a}).addSummaryAttributesJob(i,n)}},{key:"getSummaryAttributesJobState",value:function(e){return this.summaryAttributesJobs[e]}},{key:"_processFormat",value:function(e){return e||yn.GEOJSON}},{key:"_processParams",value:function(e){return e?(e.bounds&&(e.bounds=fr.toSuperMapBounds(e.bounds)),e.query&&(e.query=fr.toSuperMapBounds(e.query)),e.geometryQuery&&(e.geometryQuery=fr.toProcessingParam(e.geometryQuery)),e.geometryClip&&(e.geometryClip=fr.toProcessingParam(e.geometryClip)),e):{}}}])&&nE(t.prototype,n),r&&nE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sE(e){"@babel/helpers - typeof";return(sE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uE(){return(uE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dE(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function cE(e,t){return(cE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=dE(e);if(t){var o=dE(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hE(this,n)}}function hE(e,t){if(t&&("object"===sE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pE(e)}function pE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dE(e){return(dE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var yE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cE(e,t)}(i,uy);var t,n,r,o=fE(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).returnContent=!1,n.format=yn.GEOJSON,n.returnFeatureWithFieldCaption=!1,t&&w.extend(pE(n),t),n.CLASS_NAME="SuperMap.QueryService",n.url?(t&&t.format&&(n.format=t.format.toUpperCase()),n.url=w.urlPathAppend(n.url,"queryResults"),n):hE(n)}return t=i,(n=[{key:"destroy",value:function(){uE(dE(i.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof Cy){var t,n=this,r=null;n.returnContent=e.returnContent,t=n.getJsonParameters(e),n.returnContent||(r=e.returnCustomResult)&&(n.url=w.urlAppend(n.url,"returnCustomResult="+r)),n.returnFeatureWithFieldCaption=e.returnFeatureWithFieldCaption,n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){e=w.transformResult(e);var t=new lr;if(e&&e.recordsets)for(var n=0,r=e.recordsets,o=r.length;n<o;n++)r[n].features&&(!0===this.returnFeatureWithFieldCaption&&r[n].features.map(function(e){return e.fieldNames=r[n].fieldCaptions,e}),this.format===yn.GEOJSON&&(r[n].features=t.toGeoJSON(r[n].features)));this.events.triggerEvent("processCompleted",{result:e})}},{key:"dataFormat",value:function(){return[yn.GEOJSON,yn.ISERVER,yn.FGB]}},{key:"getQueryParameters",value:function(e){return new Cy({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime})}}])&&lE(t.prototype,n),r&&lE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vE(e){"@babel/helpers - typeof";return(vE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mE(){return(mE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xE(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function bE(e,t){return(bE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=xE(e);if(t){var o=xE(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _E(e)}(this,n)}}function _E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xE(e){return(xE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var SE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bE(e,t)}(i,Cy);var t,n,r,o=wE(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).returnContent=!0,t.bounds=null,w.extend(_E(t),e),t.CLASS_NAME="SuperMap.QueryByBoundsParameters",t}return t=i,(n=[{key:"destroy",value:function(){mE(xE(i.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&gE(t.prototype,n),r&&gE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function OE(e){"@babel/helpers - typeof";return(OE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TE(){return(TE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EE(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function kE(e,t){return(kE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function CE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=EE(e);if(t){var o=EE(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===OE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function EE(e){return(EE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var AE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kE(e,t)}(i,yE);var t,n,r,o=CE(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByBoundsService",n}return t=i,(n=[{key:"destroy",value:function(){TE(EE(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(!(e instanceof SE))return null;var t,n="",r=e.bounds;return t=this.getQueryParameters(e),n+="'queryMode':'BoundsQuery','queryParameters':",n+=w.toJSON(t),n="{"+(n+=",'bounds': {'rightTop':{'y':"+r.top+",'x':"+r.right+"},'leftBottom':{'y':"+r.bottom+",'x':"+r.left+"}}")+"}"}}])&&PE(t.prototype,n),r&&PE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ME(e){"@babel/helpers - typeof";return(ME="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IE(){return(IE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NE(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function jE(e,t){return(jE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=NE(e);if(t){var o=NE(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ME(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return DE(e)}(this,n)}}function DE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NE(e){return(NE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var BE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jE(e,t)}(i,Cy);var t,n,r,o=LE(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).geometry=null,t.isNearest=null,t.returnContent=!0,w.extend(DE(t),e),t.CLASS_NAME="SuperMap.QueryByDistanceParameters",t}return t=i,(n=[{key:"destroy",value:function(){IE(NE(i.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.distance=null,e.isNearest=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&RE(t.prototype,n),r&&RE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function FE(e){"@babel/helpers - typeof";return(FE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zE(){return(zE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WE(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function VE(e,t){return(VE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=WE(e);if(t){var o=WE(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===FE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function WE(e){return(WE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var UE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VE(e,t)}(i,yE);var t,n,r,o=HE(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByDistanceService",n}return t=i,(n=[{key:"destroy",value:function(){zE(WE(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof BE){var t="",n=this.getQueryParameters(e),r=tr.fromGeometry(e.geometry);return t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",t+=w.toJSON(n),t="{"+(t+=",'geometry':"+w.toJSON(r)+",'distance':"+e.distance)+"}"}}}])&&GE(t.prototype,n),r&&GE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function JE(e){"@babel/helpers - typeof";return(JE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YE(){return(YE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KE(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function XE(e,t){return(XE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ZE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=KE(e);if(t){var o=KE(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===JE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return QE(e)}(this,n)}}function QE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KE(e){return(KE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XE(e,t)}(i,Cy);var t,n,r,o=ZE(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).returnContent=!0,w.extend(QE(t),e),t.CLASS_NAME="SuperMap.QueryBySQLParameters",t}return t=i,(n=[{key:"destroy",value:function(){YE(KE(i.prototype),"destroy",this).call(this);this.returnContent=null}}])&&qE(t.prototype,n),r&&qE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function eA(e){"@babel/helpers - typeof";return(eA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nA(){return(nA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iA(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function rA(e,t){return(rA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=iA(e);if(t){var o=iA(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===eA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function iA(e){return(iA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var aA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rA(e,t)}(i,yE);var t,n,r,o=oA(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryBySQLService",n}return t=i,(n=[{key:"destroy",value:function(){nA(iA(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof $E){var t,n="";return t=this.getQueryParameters(e),n+="'queryMode':'SqlQuery','queryParameters':",n="{"+(n+=w.toJSON(t))+"}"}}}])&&tA(t.prototype,n),r&&tA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sA(e){"@babel/helpers - typeof";return(sA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uA(){return(uA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pA(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function cA(e,t){return(cA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=pA(e);if(t){var o=pA(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===sA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hA(e)}(this,n)}}function hA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pA(e){return(pA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var dA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cA(e,t)}(i,Cy);var t,n,r,o=fA(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).returnContent=!0,t.geometry=null,t.spatialQueryMode=bn.INTERSECT,w.extend(hA(t),e),t.CLASS_NAME="SuperMap.QueryByGeometryParameters",t}return t=i,(n=[{key:"destroy",value:function(){uA(pA(i.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&lA(t.prototype,n),r&&lA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yA(e){"@babel/helpers - typeof";return(yA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gA(){return(gA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wA(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function mA(e,t){return(mA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=wA(e);if(t){var o=wA(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function wA(e){return(wA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mA(e,t)}(i,yE);var t,n,r,o=bA(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByGeometryService",n}return t=i,(n=[{key:"destroy",value:function(){gA(wA(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof dA){var t,n="",r=e.geometry,o=tr.fromGeometry(r);return t=this.getQueryParameters(e),n+="'queryMode':'SpatialQuery','queryParameters':",n="{"+(n+=w.toJSON(t)+",'geometry':"+w.toJSON(o)+",'spatialQueryMode':"+w.toJSON(e.spatialQueryMode))+"}"}}}])&&vA(t.prototype,n),r&&vA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function xA(e){"@babel/helpers - typeof";return(xA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OA(e,t){return(OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function PA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=TA(e);if(t){var o=TA(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===xA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function TA(e){return(TA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var kA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OA(e,t)}(i,oy);var t,n,r,o=PA(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"queryByBounds",value:function(e,t,n){var r=this;new AE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"queryByDistance",value:function(e,t,n){var r=this;new UE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"queryBySQL",value:function(e,t,n){var r=this;new aA(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"queryByGeometry",value:function(e,t,n){var r=this;new _A(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"_processParams",value:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.queryParams&&!fr.isArray(e.queryParams)&&(e.queryParams=[e.queryParams]),e.bounds&&(e.bounds instanceof Array&&(e.bounds=new Oe(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3])),e.bounds instanceof O().LngLatBounds&&(e.bounds=new Oe(e.bounds.getSouthWest().lng,e.bounds.getSouthWest().lat,e.bounds.getNorthEast().lng,e.bounds.getNorthEast().lat))),e.geometry&&(e.geometry instanceof O().LngLat&&(e.geometry=new Me(e.geometry.lng,e.geometry.lat)),e.geometry instanceof O().Point&&(e.geometry=new Me(e.geometry.x,e.geometry.y)),e.geometry instanceof O().LngLatBounds&&(e.geometry=fr.toSuperMapPolygon(e.geometry)),e.geometry instanceof l||(e.geometry=fr.toSuperMapGeometry(e.geometry))),e):{}}},{key:"_processFormat",value:function(e){return e||yn.GEOJSON}}])&&SA(t.prototype,n),r&&SA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function CA(e){"@babel/helpers - typeof";return(CA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AA(){return(AA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=IA(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function MA(e,t){return(MA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=IA(e);if(t){var o=IA(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===CA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function IA(e){return(IA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var jA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MA(e,t)}(i,uy);var t,n,r,o=RA(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).format=t.format||yn.GEOJSON,n.CLASS_NAME="SuperMap.SpatialAnalystBase",n}return t=i,(n=[{key:"destroy",value:function(){AA(IA(i.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t,n=this;if((e=w.transformResult(e))&&n.format===yn.GEOJSON&&"function"==typeof n.toGeoJSONResult)if(w.isArray(e)){for(var r=0;r<e.length;r++)e[r]=n.toGeoJSONResult(e[r]);t=e}else t=n.toGeoJSONResult(e);t||(t=e),n.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new lr;if(e.recordsets)for(var n=0,r=e.recordsets,o=r.length;n<o;n++)r[n].features&&(r[n].features=t.toGeoJSON(r[n].features));else e.recordset&&e.recordset.features&&(e.recordset.features=t.toGeoJSON(e.recordset.features));return e.resultGeometry&&(e.resultGeometry=t.toGeoJSON(e.resultGeometry)),e.regions&&(e.regions=t.toGeoJSON(e.regions)),e}}])&&EA(t.prototype,n),r&&EA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function LA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DA=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){var n={};for(var r in e){if("dataset"!==r)"latitude"===r||"timeMode"===r||"dayStart"===r||("dayEnd"===r||"hourStart"===r||"hourEnd"===r)||("transmittance"===r||"hourInterval"===r||"dayInterval"===r)?n[r]=e[r]:t[r]=e[r]}t.parameter=n}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&LA(t.prototype,n),r&&LA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function NA(e){"@babel/helpers - typeof";return(NA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FA(){return(FA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VA(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function GA(e,t){return(GA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=VA(e);if(t){var o=VA(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===NA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function VA(e){return(VA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var HA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GA(e,t)}(i,jA);var t,n,r,o=zA(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.AreaSolarRadiationService",n}return t=i,(n=[{key:"destroy",value:function(){FA(VA(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof DA){var t=this,n={};e instanceof DA&&(t.url=w.urlPathAppend(t.url,"datasets/".concat(e.dataset,"/solarradiation"))),t.url=w.urlAppend(t.url,"returnContent=true"),DA.toObject(e,n);var r=w.toJSON(n);t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&BA(t.prototype,n),r&&BA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function WA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var UA=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.exp=null,this.value=100,w.extend(this,t),this.CLASS_NAME="SuperMap.BufferDistance"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&WA(t.prototype,n),r&&WA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function JA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qA=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endType=In.FLAT,this.leftDistance=new UA,this.rightDistance=new UA,this.semicircleLineSegment=4,this.radiusUnit=xn.METER,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.BufferSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.endType=null,e.leftDistance&&(e.leftDistance.destroy(),e.leftDistance=null),e.rightDistance&&(e.rightDistance.destroy(),e.rightDistance=null),e.semicircleLineSegment=null,e.radiusUnit=null}}])&&JA(t.prototype,n),r&&JA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function YA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var XA=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.bufferSetting=new qA,w.extend(this,t),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&YA(t.prototype,n),r&&YA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ZA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var QA=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=Bn.RECORDSET_ONLY,this.deleteExistResultDataset=!0,w.extend(this,t),this.CLASS_NAME="SuperMap.DataReturnOption"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&ZA(t.prototype,n),r&&ZA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function KA(e){"@babel/helpers - typeof";return(KA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eM(){return(eM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oM(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function tM(e,t){return(tM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=oM(e);if(t){var o=oM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===KA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rM(e)}(this,n)}}function rM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oM(e){return(oM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var iM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tM(e,t)}(i,XA);var t,n,r,o=nM(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).dataset=null,t.filterQueryParameter=new og,t.resultSetting=new QA,t.isAttributeRetained=!0,t.isUnion=!1,w.extend(rM(t),e),t.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",t}return t=i,r=[{key:"toObject",value:function(e,t){for(var n in e)if("bufferSetting"===n)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===n)t.dataReturnOption=e.resultSetting;else{if("dataset"===n)continue;t[n]=e[n]}}}],(n=[{key:"destroy",value:function(){eM(oM(i.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.isAttributeRetained=null,e.isUnion=null}}])&&$A(t.prototype,n),r&&$A(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function aM(e){"@babel/helpers - typeof";return(aM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lM(){return(lM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hM(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function uM(e,t){return(uM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=hM(e);if(t){var o=hM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===aM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fM(e)}(this,n)}}function fM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hM(e){return(hM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uM(e,t)}(i,XA);var t,n,r,o=cM(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).sourceGeometry=null,t.sourceGeometrySRID=null,e&&w.extend(fM(t),e),t.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",t}return t=i,r=[{key:"toObject",value:function(e,t){for(var n in e)if("bufferSetting"===n){var r={};for(var o in e.bufferSetting)r[o]=e.bufferSetting[o];t.analystParameter=r}else"sourceGeometry"===n?t.sourceGeometry=tr.fromGeometry(e.sourceGeometry):t[n]=e[n]}}],(n=[{key:"destroy",value:function(){lM(hM(i.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&sM(t.prototype,n),r&&sM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dM(e){"@babel/helpers - typeof";return(dM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vM(){return(vM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wM(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gM(e,t){return(gM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=wM(e);if(t){var o=wM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bM(e)}(this,n)}}function bM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wM(e){return(wM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gM(e,t)}(i,jA);var t,n,r,o=mM(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).mode=null,t&&w.extend(bM(n),t),n.CLASS_NAME="SuperMap.BufferAnalystService",n}return t=i,(n=[{key:"destroy",value:function(){vM(wM(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this;e instanceof iM?(n.mode="datasets",n.url=w.urlPathAppend(n.url,"datasets/"+e.dataset+"/buffer"),iM.toObject(e,t)):e instanceof pM&&(n.mode="geometry",n.url=w.urlPathAppend(n.url,"geometry/buffer"),pM.toObject(e,t));var r=w.toJSON(t);this.returnContent=!0,n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[yn.GEOJSON,yn.ISERVER,yn.FGB]}}])&&yM(t.prototype,n),r&&yM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function xM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var SM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"dataset"!==n&&(t[n]=e[n])}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.fieldName=null,e.resultGridDatasetResolution=null,e.searchRadius=null,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&xM(t.prototype,n),r&&xM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function OM(e){"@babel/helpers - typeof";return(OM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TM(){return(TM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AM(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function kM(e,t){return(kM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function CM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=AM(e);if(t){var o=AM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===OM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return EM(e)}(this,n)}}function EM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AM(e){return(AM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var MM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kM(e,t)}(i,jA);var t,n,r,o=CM(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).mode=null,t&&w.extend(EM(n),t),n.CLASS_NAME="SuperMap.DensityAnalystService",n}return t=i,(n=[{key:"destroy",value:function(){TM(AM(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t=this,n=new Object;e instanceof SM&&(t.url=w.urlPathAppend(t.url,"datasets/"+e.dataset+"/densityanalyst/kernel"),t.mode="kernel"),SM.toObject(e,n);var r=w.toJSON(n);t.url=w.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&PM(t.prototype,n),r&&PM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function RM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var IM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null)}}])&&RM(t.prototype,n),r&&RM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jM(e){"@babel/helpers - typeof";return(jM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DM(){return(DM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=FM(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function NM(e,t){return(NM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function BM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=FM(e);if(t){var o=FM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function FM(e){return(FM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var GM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NM(e,t)}(i,jA);var t,n,r,o=BM(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.GenerateSpatialDataService",n}return t=i,(n=[{key:"destroy",value:function(){DM(FM(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof IM){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return this.url=w.urlPathAppend(this.url,t),this.url=w.urlAppend(this.url,"returnContent=true"),w.toJSON(e)}}])&&LM(t.prototype,n),r&&LM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function zM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var VM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null}}])&&zM(t.prototype,n),r&&zM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function HM(e){"@babel/helpers - typeof";return(HM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UM(){return(UM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YM(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function JM(e,t){return(JM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=YM(e);if(t){var o=YM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===HM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function YM(e){return(YM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var XM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JM(e,t)}(i,jA);var t,n,r,o=qM(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.GeoRelationAnalystService",n}return t=i,(n=[{key:"destroy",value:function(){UM(YM(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof VM){var t=this;t.url=w.urlPathAppend(t.url,"datasets/"+e.dataset+"/georelation");var n=w.toJSON(e);t.url=w.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&WM(t.prototype,n),r&&WM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ZM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var QM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,w.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)if("inputPoints"===n&&"geometry"===e.InterpolationAnalystType){for(var r=[],o=0;o<e.inputPoints.length;o++){var i=e.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};r.push(a)}t[n]=r}else t[n]=e[n]}}],(n=[{key:"destroy",value:function(){var e=this;e.bounds=null,e.searchRadius=null,e.zValueFieldName=null,e.zValueScale=null,e.resolution=null,e.filterQueryParameter=null,e.outputDatasetName=null,e.pixelFormat=null}}])&&ZM(t.prototype,n),r&&ZM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function KM(e){"@babel/helpers - typeof";return(KM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eR(){return(eR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oR(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function tR(e,t){return(tR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=oR(e);if(t){var o=oR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===KM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rR(e)}(this,n)}}function rR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oR(e){return(oR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var iR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tR(e,t)}(i,QM);var t,n,r,o=nR(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).smooth=.1,t.tension=40,t.searchMode=null,t.expectedCount=12,t.maxPointCountForInterpolation=200,t.maxPointCountInNode=50,e&&w.extend(rR(t),e),t.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",t}return t=i,r=[{key:"toObject",value:function(e,t){for(var n in e)t[n]=e[n]}}],(n=[{key:"destroy",value:function(){eR(oR(i.prototype),"destroy",this).call(this);var e=this;e.smooth=null,e.tension=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&$M(t.prototype,n),r&&$M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function aR(e){"@babel/helpers - typeof";return(aR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lR(){return(lR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hR(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function uR(e,t){return(uR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=hR(e);if(t){var o=hR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===aR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fR(e)}(this,n)}}function fR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hR(e){return(hR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uR(e,t)}(i,QM);var t,n,r,o=cR(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e&&w.extend(fR(t),e),t.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",t}return t=i,(n=[{key:"destroy",value:function(){lR(hR(i.prototype),"destroy",this).call(this)}}])&&sR(t.prototype,n),r&&sR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dR(e){"@babel/helpers - typeof";return(dR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vR(){return(vR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wR(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gR(e,t){return(gR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=wR(e);if(t){var o=wR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bR(e)}(this,n)}}function bR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wR(e){return(wR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gR(e,t)}(i,QM);var t,n,r,o=mR(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).power=2,t.searchMode=null,t.expectedCount=12,e&&w.extend(bR(t),e),t.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",t}return t=i,(n=[{key:"destroy",value:function(){vR(wR(i.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&yR(t.prototype,n),r&&yR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function xR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var SR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,w.extend(this,t),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.createResultDataset=null,e.resultDatasetName=null,e.resultDatasourceName=null,e.returnResultRegion=null}}])&&xR(t.prototype,n),r&&xR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function OR(e){"@babel/helpers - typeof";return(OR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TR(){return(TR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AR(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function kR(e,t){return(kR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function CR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=AR(e);if(t){var o=AR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===OR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ER(e)}(this,n)}}function ER(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AR(e){return(AR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var MR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kR(e,t)}(i,QM);var t,n,r,o=CR(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type=null,t.mean=null,t.angle=0,t.nugget=0,t.range=0,t.sill=0,t.variogramMode=Vn.SPHERICAL,t.exponent=Hn.EXP1,t.searchMode=null,t.expectedCount=12,t.maxPointCountForInterpolation=200,t.maxPointCountInNode=50,e&&w.extend(ER(t),e),t.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",t}return t=i,(n=[{key:"destroy",value:function(){TR(AR(i.prototype),"destroy",this).call(this);var e=this;e.type=null,e.mean=null,e.angle=null,e.nugget=null,e.range=null,e.sill=null,e.variogramMode=null,e.exponent=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&PR(t.prototype,n),r&&PR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function RR(e){"@babel/helpers - typeof";return(RR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jR(){return(jR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BR(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function LR(e,t){return(LR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=BR(e);if(t){var o=BR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===RR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return NR(e)}(this,n)}}function NR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BR(e){return(BR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var FR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LR(e,t)}(i,jA);var t,n,r,o=DR(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).mode=null,t&&w.extend(NR(n),t),n}return t=i,(n=[{key:"destroy",value:function(){jR(BR(i.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(e){var t={},n=this;e instanceof pR?(n.mode="Density","geometry"===e.InterpolationAnalystType?n.url=w.urlPathAppend(n.url,"geometry/interpolation/density"):n.url=w.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/density")):e instanceof _R?(n.mode="IDW","geometry"===e.InterpolationAnalystType?n.url=w.urlPathAppend(n.url,"geometry/interpolation/idw"):n.url=w.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/idw")):e instanceof iR?(n.mode="RBF","geometry"===e.InterpolationAnalystType?n.url=w.urlPathAppend(n.url,"geometry/interpolation/rbf"):n.url=w.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/rbf")):e instanceof MR&&(n.mode="Kriging","geometry"===e.InterpolationAnalystType?n.url=w.urlPathAppend(n.url,"geometry/interpolation/kriging"):n.url=w.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/kriging")),QM.toObject(e,t);var r=w.toJSON(t);n.url=w.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&IR(t.prototype,n),r&&IR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function GR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)if("dataset"!==n&&(t[n]=e[n]),"extractRegion"===n&&e[n]){for(var r=e[n].components[0].components,o={},i=[],a=r.length,s=0;s<a-1;s++){var l={};l.x=r[s].x,l.y=r[s].y,i.push(l)}o.points=i,o.type="REGION",t[n]=o}}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.expression=null,e.isZip=!0,e.ignoreNoValue=!0,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&GR(t.prototype,n),r&&GR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function VR(e){"@babel/helpers - typeof";return(VR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WR(){return(WR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qR(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function UR(e,t){return(UR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function JR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=qR(e);if(t){var o=qR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===VR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qR(e){return(qR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var YR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UR(e,t)}(i,jA);var t,n,r,o=JR(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.MathExpressionAnalysisService",n}return t=i,(n=[{key:"destroy",value:function(){WR(qR(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this,n={};e instanceof zR&&(t.url=w.urlPathAppend(t.url,"datasets/"+e.dataset+"/mathanalyst")),zR.toObject(e,n);var r=w.toJSON(n);t.url=w.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&HR(t.prototype,n),r&&HR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function XR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ZR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operation=jn.UNION,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.operation=null}}])&&XR(t.prototype,n),r&&XR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function QR(e){"@babel/helpers - typeof";return(QR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $R(){return($R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rI(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function eI(e,t){return(eI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=rI(e);if(t){var o=rI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===QR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nI(e)}(this,n)}}function nI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rI(e){return(rI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eI(e,t)}(i,ZR);var t,n,r,o=tI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).operateDataset=null,t.operateDatasetFields=[],t.operateDatasetFilter=new og,t.operateRegions=[],t.sourceDataset=null,t.sourceDatasetFields=[],t.sourceDatasetFilter=new og,t.tolerance=0,t.resultSetting=new QA,w.extend(nI(t),e),t.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",t}return t=i,r=[{key:"toObject",value:function(e,t){for(var n in e)if("sourceDataset"!==n)if("operateRegions"===n){t.operateRegions=[];var r=e.operateRegions;for(var o in r)r.hasOwnProperty(o)&&(t.operateRegions[o]=tr.fromGeometry(r[o]))}else"resultSetting"===n?t.dataReturnOption=e.resultSetting:t[n]=e[n]}}],(n=[{key:"destroy",value:function(){$R(rI(i.prototype),"destroy",this).call(this);var e=this;if(e.operateDataset=null,e.operateDatasetFields=null,e.operateDatasetFilter&&(e.operateDatasetFilter.destroy(),e.operateDatasetFilter=null),e.operateRegions){for(var t=0,n=e.operateRegions,r=n.length;t<r;t++)n[t].destroy();e.operateRegions=null}e.sourceDataset=null,e.sourceDatasetFields=null,e.sourceDatasetFilter&&(e.sourceDatasetFilter.destroy(),e.sourceDatasetFilter=null),e.tolerance=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null)}}])&&KR(t.prototype,n),r&&KR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function iI(e){"@babel/helpers - typeof";return(iI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sI(){return(sI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fI(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function lI(e,t){return(lI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=fI(e);if(t){var o=fI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===iI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cI(e)}(this,n)}}function cI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fI(e){return(fI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var hI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lI(e,t)}(i,ZR);var t,n,r,o=uI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e&&e.operateGeometry&&(t.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(t.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(t.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(t.sourceGeometries=e.sourceGeometries),e&&w.extend(cI(t),e),t.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",t}return t=i,r=[{key:"toObject",value:function(e,t){for(var n in e)if("sourceGeometry"===n)t.sourceGeometry=tr.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===n){for(var r=[],o=0;o<e.sourceGeometries.length;o++)r.push(tr.fromGeometry(e.sourceGeometries[o]));t.sourceGeometries=r}else if("operateGeometry"===n)t.operateGeometry=tr.fromGeometry(e.operateGeometry);else if("operateGeometries"===n){for(var i=[],a=0;a<e.operateGeometries.length;a++)i.push(tr.fromGeometry(e.operateGeometries[a]));t.operateGeometries=i}else t[n]=e[n]}}],(n=[{key:"destroy",value:function(){sI(fI(i.prototype),"destroy",this).call(this);var e=this;e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.sourceGeometries&&(e.sourceGeometries.destroy(),e.sourceGeometries=null),e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.operateGeometries&&(e.operateGeometries.destroy(),e.operateGeometries=null)}}])&&aI(t.prototype,n),r&&aI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function pI(e){"@babel/helpers - typeof";return(pI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yI(){return(yI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bI(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function vI(e,t){return(vI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=bI(e);if(t){var o=bI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mI(e)}(this,n)}}function mI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bI(e){return(bI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vI(e,t)}(i,jA);var t,n,r,o=gI(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).mode=null,t&&w.extend(mI(n),t),n.CLASS_NAME="SuperMap.OverlayAnalystService",n}return t=i,(n=[{key:"destroy",value:function(){yI(bI(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this;e instanceof oI?(n.mode="datasets",n.url=w.urlPathAppend(n.url,"datasets/"+e.sourceDataset+"/overlay"),oI.toObject(e,t)):e instanceof hI&&(n.mode="geometry",e.operateGeometries&&e.sourceGeometries?(n.url=w.urlPathAppend(n.url,"geometry/overlay/batch"),n.url=w.urlAppend(n.url,"ignoreAnalystParam=true")):n.url=w.urlPathAppend(n.url,"geometry/overlay"),hI.toObject(e,t)),this.returnContent=!0;var r=w.toJSON(t);n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[yn.GEOJSON,yn.ISERVER,yn.FGB]}}])&&dI(t.prototype,n),r&&dI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xI=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.point=null,e.tolerance&&(e.tolerance=null),e.isIgnoreGap&&(e.isIgnoreGap=!1)}}])&&_I(t.prototype,n),r&&_I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SI(e){"@babel/helpers - typeof";return(SI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PI(){return(PI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CI(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function TI(e,t){return(TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=CI(e);if(t){var o=CI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===SI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function CI(e){return(CI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var EI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TI(e,t)}(i,jA);var t,n,r,o=kI(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.RouteCalculateMeasureService",n}return t=i,(n=[{key:"destroy",value:function(){PI(CI(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof xI){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){return this.url=w.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=w.urlAppend(this.url,"returnContent=true"),w.toJSON(e)}}])&&OI(t.prototype,n),r&&OI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function AI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var MI=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var n=t.sourceRoute,r={};if(n&&n instanceof l&&n.components){r.type=n.type,r.parts=n.parts;for(var o=[],i=0,a=n.components.length;i<a;i++)o=o.concat(n.components[i].components);r.points=o,t.sourceRoute=r}w.extend(this,t),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null}}])&&AI(t.prototype,n),r&&AI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function RI(e){"@babel/helpers - typeof";return(RI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function II(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jI(){return(jI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NI(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function LI(e,t){return(LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=NI(e);if(t){var o=NI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===RI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function NI(e){return(NI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var BI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LI(e,t)}(i,jA);var t,n,r,o=DI(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.RouteLocatorService",n}return t=i,(n=[{key:"destroy",value:function(){jI(NI(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof MI){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="geometry/routelocator";return e.dataset&&(t="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url=w.urlPathAppend(this.url,t),this.url=w.urlAppend(this.url,"returnContent=true"),w.toJSON(e)}}])&&II(t.prototype,n),r&&II(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function FI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var GI=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=Dn.BSPLINE,this.smoothness=0,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.datumValue=null,e.expectedZValues=null,e.interval=null,e.resampleTolerance=null,e.smoothMethod=null,e.smoothness=null}},{key:"toJSON",value:function(){var e="'datumValue':"+w.toJSON(this.datumValue);if(e+=",'interval':"+w.toJSON(this.interval),e+=",'resampleTolerance':"+w.toJSON(this.resampleTolerance),e+=",'smoothMethod':"+w.toJSON(this.smoothMethod),e+=",'smoothness':"+w.toJSON(this.smoothness),null!=this.expectedZValues&&(e+=",'expectedZValues':"+w.toJSON(this.expectedZValues)),null!=this.clipRegion){var t=this.clipRegion;this.clipRegion instanceof l&&this.clipRegion.components&&(t=tr.fromGeometry(this.clipRegion)),e+=",'clipRegion':"+w.toJSON(t)}return"{"+e+"}"}}])&&FI(t.prototype,n),r&&FI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var VI=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolution=0,this.extractParameter=new GI,this.resultSetting=new QA,this.surfaceAnalystMethod=Nn.ISOLINE,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.resolution=null,e.extractParameter&&(e.extractParameter.destroy(),e.extractParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.surfaceAnalystMethod=null}}])&&zI(t.prototype,n),r&&zI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function HI(e){"@babel/helpers - typeof";return(HI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UI(){return(UI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=XI(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function JI(e,t){return(JI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=XI(e);if(t){var o=XI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===HI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return YI(e)}(this,n)}}function YI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XI(e){return(XI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ZI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JI(e,t)}(i,VI);var t,n,r,o=qI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).dataset=null,t.filterQueryParameter=new og,t.zValueFieldName=null,e&&w.extend(YI(t),e),t.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",t}return t=i,r=[{key:"toObject",value:function(e,t){for(var n in e)if("filterQueryParameter"===n&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===n)e.extractParameter.clipRegion instanceof l&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=tr.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===n)continue;if("surfaceAnalystMethod"===n)continue;t[n]=e[n]}}}],(n=[{key:"destroy",value:function(){UI(XI(i.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.zValueFieldName=null}}])&&WI(t.prototype,n),r&&WI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function QI(e){"@babel/helpers - typeof";return(QI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $I(){return($I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function ej(e,t){return(ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=rj(e);if(t){var o=rj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===QI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nj(e)}(this,n)}}function nj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rj(e){return(rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ej(e,t)}(i,VI);var t,n,r,o=tj(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).points=null,t.zValues=null,e&&w.extend(nj(t),e),t.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",t}return t=i,(n=[{key:"destroy",value:function(){$I(rj(i.prototype),"destroy",this).call(this);if(this.points){for(var e=0,t=this.points,n=t.length;e<n;e++)t[e].destroy();this.points=null}this.zValues=null}}])&&KI(t.prototype,n),r&&KI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ij(e){"@babel/helpers - typeof";return(ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sj(){return(sj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function lj(e,t){return(lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=cj(e);if(t){var o=cj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ij(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cj(e){return(cj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lj(e,t)}(i,jA);var t,n,r,o=uj(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.SurfaceAnalystService",n}return t=i,(n=[{key:"destroy",value:function(){sj(cj(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof VI){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="",n={};if(e instanceof ZI)this.url=w.urlPathAppend(this.url,"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()),ZI.toObject(e,n),t=w.toJSON(n);else{if(!(e instanceof oj))return;this.url=w.urlPathAppend(this.url,"geometry/"+e.surfaceAnalystMethod.toLowerCase()),t=w.toJSON(e)}return this.returnContent=!0,t}},{key:"dataFormat",value:function(){return[yn.GEOJSON,yn.ISERVER,yn.FGB]}}])&&aj(t.prototype,n),r&&aj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pj=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"dataset"!==n&&(t[n]=e[n])}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&hj(t.prototype,n),r&&hj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dj(e){"@babel/helpers - typeof";return(dj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vj(){return(vj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gj(e,t){return(gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=bj(e);if(t){var o=bj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bj(e){return(bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gj(e,t)}(i,jA);var t,n,r,o=mj(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",n}return t=i,(n=[{key:"destroy",value:function(){vj(bj(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this,n={};e instanceof pj&&(t.url=w.urlPathAppend(t.url,"datasets/"+e.dataset+"/terraincalculation/curvature")),pj.toObject(e,n);var r=w.toJSON(n);t.url=w.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&yj(t.prototype,n),r&&yj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _j(e){"@babel/helpers - typeof";return(_j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sj(){return(Sj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Oj(e,t){return(Oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=kj(e);if(t){var o=kj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tj(e)}(this,n)}}function Tj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kj(e){return(kj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Cj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oj(e,t)}(i,SR);var t,n,r,o=Pj(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).filterQueryParameter=null,t.dataset=null,e&&w.extend(Tj(t),e),t.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",t}return t=i,r=[{key:"toObject",value:function(e,t){for(var n in e)"clipRegion"===n?t.clipRegion=tr.fromGeometry(e.clipRegion):t[n]=e[n]}}],(n=[{key:"destroy",value:function(){Sj(kj(i.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&xj(t.prototype,n),r&&xj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ej(e){"@babel/helpers - typeof";return(Ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mj(){return(Mj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Rj(e,t){return(Rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ij(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Lj(e);if(t){var o=Lj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ej(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jj(e)}(this,n)}}function jj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lj(e){return(Lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Dj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rj(e,t)}(i,SR);var t,n,r,o=Ij(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).points=null,e&&w.extend(jj(t),e),t.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",t}return t=i,r=[{key:"toObject",value:function(e,t){for(var n in e)"clipRegion"===n?t.clipRegion=tr.fromGeometry(e.clipRegion):t[n]=e[n]}}],(n=[{key:"destroy",value:function(){Mj(Lj(i.prototype),"destroy",this).call(this);if(this.points){for(var e=this.points.length-1;e>=0;e--)this.points[e].destroy();this.points=null}}}])&&Aj(t.prototype,n),r&&Aj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Nj(e){"@babel/helpers - typeof";return(Nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fj(){return(Fj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Gj(e,t){return(Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Hj(e);if(t){var o=Hj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Nj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vj(e)}(this,n)}}function Vj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hj(e){return(Hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Wj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gj(e,t)}(i,jA);var t,n,r,o=zj(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).mode=null,t&&w.extend(Vj(n),t),n.CLASS_NAME="SuperMap.ThiessenAnalystService",n}return t=i,(n=[{key:"destroy",value:function(){Fj(Hj(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this;e instanceof Cj?(n.mode="datasets",n.url=w.urlPathAppend(n.url,"datasets/"+e.dataset+"/thiessenpolygon"),Cj.toObject(e,t)):e instanceof Dj&&(n.mode="geometry",n.url=w.urlPathAppend(n.url,"geometry/thiessenpolygon"),Dj.toObject(e,t));var r=w.toJSON(t);this.returnContent=!0,n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[yn.GEOJSON,yn.ISERVER,yn.FGB]}}])&&Bj(t.prototype,n),r&&Bj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Uj(e){"@babel/helpers - typeof";return(Uj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qj(){return(qj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Yj(e,t){return(Yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Qj(e);if(t){var o=Qj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Uj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zj(e)}(this,n)}}function Zj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qj(e){return(Qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Kj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yj(e,t)}(i,jA);var t,n,r,o=Xj(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),t&&w.extend(Zj(n),t),n.CLASS_NAME="SuperMap.GeometryBatchAnalystService",n}return t=i,(n=[{key:"processAsync",value:function(e){var t=this;t.url=w.urlPathAppend(t.url,"geometry/batchanalyst"),t.url=w.urlAppend(t.url,"returnContent=true&ignoreAnalystParam=true");var n=t._processParams(e),r=w.toJSON(n);t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"_processParams",value:function(e){var t=this;if(w.isArray(e)){var n=[];return e.map(function(e){return n.push(t._toJSON(e)),e}),n}}},{key:"_toJSON",value:function(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},pM.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},hI.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},QM.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},QM.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},QM.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},QM.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},Dj.toObject(e.param,t.param)}return t}},{key:"destroy",value:function(){qj(Qj(i.prototype),"destroy",this).call(this)}}])&&Jj(t.prototype,n),r&&Jj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function $j(e){"@babel/helpers - typeof";return($j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tL(e,t){return(tL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=rL(e);if(t){var o=rL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rL(e){return(rL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tL(e,t)}(i,oy);var t,n,r,o=nL(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getAreaSolarRadiationResult",value:function(e,t,n){var r=this;new HA(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)}},{key:"bufferAnalysis",value:function(e,t,n){var r=this;new _M(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"densityAnalysis",value:function(e,t,n){var r=this;new MM(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"generateSpatialData",value:function(e,t,n){var r=this;new GM(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)}},{key:"geoRelationAnalysis",value:function(e,t,n){var r=this;new XM(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)}},{key:"interpolationAnalysis",value:function(e,t,n){var r=this;new FR(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"mathExpressionAnalysis",value:function(e,t,n){var r=this;new YR(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"overlayAnalysis",value:function(e,t,n){var r=this;new wI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"routeCalculateMeasure",value:function(e,t,n){var r=this;new EI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"routeLocate",value:function(e,t,n){var r=this;new BI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"surfaceAnalysis",value:function(e,t,n){var r=this;new fj(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"terrainCurvatureCalculate",value:function(e,t,n){var r=this;new wj(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)}},{key:"thiessenAnalysis",value:function(e,t,n){var r=this;new Wj(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))}},{key:"geometrybatchAnalysis",value:function(e,t,n){for(var r=new Kj(this.url,{eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}),o=[],i=0;i<e.length;i++){var a=e[i];o.push({analystName:a.analystName,param:this._processParams(a.param)})}r.processAsync(o)}},{key:"_processParams",value:function(e){if(!e)return{};if(e.bounds&&(e.bounds=fr.toSuperMapBounds(e.bounds)),e.inputPoints)for(var t=0;t<e.inputPoints.length;t++){var n=e.inputPoints[t];fr.isArray(n)&&(e.inputPoints[t]={x:n[0],y:n[1],tag:n[2]})}if(e.points)for(var r=0;r<e.points.length;r++){var o=e.points[r];e.points[r]=fr.toSuperMapPoint(o)}if(e.point&&(e.point=fr.toSuperMapPoint(e.point)),e.extractRegion&&(e.extractRegion=fr.toSuperMapGeometry(e.extractRegion)),e.extractParameter&&e.extractParameter.clipRegion&&(e.extractParameter.clipRegion=fr.toSuperMapGeometry(e.extractParameter.clipRegion)),e.clipParam&&e.clipParam.clipRegion&&(e.clipParam.clipRegion=fr.toSuperMapGeometry(e.clipParam.clipRegion)),e.sourceRoute&&e.sourceRoute){var i={type:"LINEM"};i.parts=[e.sourceRoute.geometry.coordinates.length],i.points=[];for(var a=0;a<e.sourceRoute.geometry.coordinates.length;a++){var s=e.sourceRoute.geometry.coordinates[a];i.points=i.points.concat({x:s[0],y:s[1],measure:s[2]})}e.sourceRoute=i}if(e.operateRegions&&fr.isArray(e.operateRegions)&&e.operateRegions.map(function(t,n){return e.operateRegions[n]=fr.toSuperMapGeometry(t),e.operateRegions[n]}),e.sourceGeometry){var l=null;e.sourceGeometrySRID&&(l=e.sourceGeometrySRID),e.sourceGeometry=fr.toSuperMapGeometry(e.sourceGeometry),l&&(e.sourceGeometry.SRID=l),delete e.sourceGeometry.sourceGeometrySRID}if(e.operateGeometry&&(e.operateGeometry=fr.toSuperMapGeometry(e.operateGeometry)),e.sourceGeometries){for(var u=[],c=0;c<e.sourceGeometries.length;c++)u.push(fr.toSuperMapGeometry(e.sourceGeometries[c]));e.sourceGeometries=u}if(e.operateGeometries){for(var f=[],h=0;h<e.operateGeometries.length;h++)f.push(fr.toSuperMapGeometry(e.operateGeometries[h]));e.operateGeometries=f}return e.sourceRoute&&e.sourceRoute.components&&fr.isArray(e.sourceRoute.components)&&e.sourceRoute.components.map(function(t,n){return e.sourceRoute.components[n]=fr.toSuperMapGeometry(t),e.sourceRoute.components[n]}),e}},{key:"_processFormat",value:function(e){return e||yn.GEOJSON}}])&&eL(t.prototype,n),r&&eL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function iL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var aL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.datasetNames=null,e.dataSourceNames=null,e.joinItems){for(var t=0,n=e.joinItems,r=n.length;t<r;t++)n[t].destroy();e.joinItems=null}if(e.themes){for(var o=0,i=e.themes,a=i.length;o<a;o++)i[o].destroy();e.themes=null}}}])&&iL(t.prototype,n),r&&iL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sL(e){"@babel/helpers - typeof";return(sL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uL(){return(uL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pL(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function cL(e,t){return(cL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=pL(e);if(t){var o=pL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===sL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hL(e)}(this,n)}}function hL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pL(e){return(pL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var dL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cL(e,t)}(i,uy);var t,n,r,o=fL(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),t&&w.extend(hL(n),t),n.url=w.urlPathAppend(n.url,"tempLayersSet"),n.CLASS_NAME="SuperMap.ThemeService",n}return t=i,(n=[{key:"destroy",value:function(){uL(pL(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof aL){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,n="",r=null,o=null,i=null;n+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<e.themes.length;a++){r=e.themes[a];var s=w.toJSON(r);if(n+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=e.displayFilters)&&o.length>0&&(1===o.length?n+="'displayFilter':\""+o[0]+'",':n+="'displayFilter':\""+o[a]+'",'),(i=e.displayOrderBy)&&i.length>0&&(1===i.length?n+="'displayOrderBy':'"+i[0]+"',":n+="'displayOrderBy':'"+i[a]+"',"),(t=e.fieldValuesDisplayFilter)&&(n+="'fieldValuesDisplayFilter':"+w.toJSON(t)+","),e.joinItems&&e.joinItems.length>0&&e.joinItems[a]&&(n+="'joinItems':["+w.toJSON(e.joinItems[a])+"],"),e.datasetNames&&e.dataSourceNames){var l=e.datasetNames[a]?a:e.datasetNames.length-1,u=e.dataSourceNames[a]?a:e.dataSourceNames.length-1;n+="'datasetInfo': {'name': '"+e.datasetNames[l]+"','dataSourceName': '"+e.dataSourceNames[u]+"'}},"}else n+="},"}e.themes&&e.themes.length>0&&(n=n.substring(0,n.length-1)),n+="]},";var c=this.url.split("/");return n+="'name': '"+c[c.length-2]+"'}]"}}])&&lL(t.prototype,n),r&&lL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yL(e){"@babel/helpers - typeof";return(yL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gL(e,t){return(gL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=bL(e);if(t){var o=bL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bL(e){return(bL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var wL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gL(e,t)}(i,oy);var t,n,r,o=mL(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getThemeInfo",value:function(e,t){var n=this;new dL(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&vL(t.prototype,n),r&&vL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.keyWord=null,this.returnPosition=!1,w.extend(this,t),this.CLASS_NAME="SuperMap.StopQueryParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){w.reset(this)}}])&&_L(t.prototype,n),r&&_L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SL(e){"@babel/helpers - typeof";return(SL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PL(){return(PL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EL(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function TL(e,t){return(TL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=EL(e);if(t){var o=EL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===SL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return CL(e)}(this,n)}}function CL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EL(e){return(EL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var AL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TL(e,t)}(i,uy);var t,n,r,o=kL(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),t=t||{},w.extend(CL(n),t),n.CLASS_NAME="SuperMap.StopQueryService",n}return t=i,(n=[{key:"destroy",value:function(){PL(EL(i.prototype),"destroy",this).call(this),w.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof xL){var t=this;t.url=w.urlPathAppend(t.url,"stops/keyword/"+e.keyWord),t.request({method:"GET",params:{returnPosition:e.returnPosition},scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&OL(t.prototype,n),r&&OL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ML(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var RL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.transferLines=null,this.points=null,w.extend(this,t),this.CLASS_NAME="SuperMap.TransferPathParameters"}var t,n,r;return t=e,r=[{key:"toJson",value:function(e){if(e)return w.toJSON(e)}}],(n=[{key:"destroy",value:function(){w.reset(this)}}])&&ML(t.prototype,n),r&&ML(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function IL(e){"@babel/helpers - typeof";return(IL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LL(){return(LL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BL(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function DL(e,t){return(DL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function NL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=BL(e);if(t){var o=BL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===IL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function BL(e){return(BL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var FL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DL(e,t)}(i,uy);var t,n,r,o=NL(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.TransferPathService",n}return t=i,(n=[{key:"destroy",value:function(){LL(BL(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof RL){var t,n=this;n.url=w.urlPathAppend(n.url,"path"),t={points:w.toJSON(e.points),transferLines:w.toJSON(e.transferLines)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&jL(t.prototype,n),r&&jL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function GL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.solutionCount=6,this.transferPreference=zn.NONE,this.transferTactic=Gn.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,w.extend(this,t),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var t,n,r;return t=e,r=[{key:"toJson",value:function(e){if(e)return w.toJSON(e)}}],(n=[{key:"destroy",value:function(){w.reset(this)}}])&&GL(t.prototype,n),r&&GL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function VL(e){"@babel/helpers - typeof";return(VL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WL(){return(WL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qL(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function UL(e,t){return(UL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function JL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=qL(e);if(t){var o=qL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===VL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qL(e){return(qL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var YL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UL(e,t)}(i,uy);var t,n,r,o=JL(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).CLASS_NAME="SuperMap.TransferSolutionService",n}return t=i,(n=[{key:"destroy",value:function(){WL(qL(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof zL){var t,n=this;n.url=w.urlPathAppend(n.url,"solutions"),t={points:w.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(t.evadeLines=w.toJSON(e.evadeLines)),e.evadeStops&&(t.evadeStops=w.toJSON(e.evadeStops)),e.priorLines&&(t.priorLines=w.toJSON(e.priorLines)),e.priorStops&&(t.priorStops=w.toJSON(e.priorStops)),e.travelTime&&(t.travelTime=e.travelTime),n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&HL(t.prototype,n),r&&HL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function XL(e){"@babel/helpers - typeof";return(XL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QL(e,t){return(QL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=$L(e);if(t){var o=$L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===XL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $L(e){return($L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var eD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QL(e,t)}(i,oy);var t,n,r,o=KL(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"queryStop",value:function(e,t){var n=this;new AL(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"analysisTransferPath",value:function(e,t){var n=this;new FL(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))}},{key:"analysisTransferSolution",value:function(e,t){var n=this;new YL(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))}},{key:"_processParams",value:function(e){return e?(e.transferLines&&!fr.isArray(e.transferLines)&&(e.transferLines=[e.transferLines]),e.points&&fr.isArray(e.points)&&e.points.map(function(t,n){return e.points[n]=t instanceof O().LngLat?{x:t.lng,y:t.lat}:t,e.points[n]}),e):{}}}])&&ZL(t.prototype,n),r&&ZL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tD(e){"@babel/helpers - typeof";return(tD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rD(){return(rD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lD(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function oD(e,t){return(oD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=lD(e);if(t){var o=lD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return aD(this,n)}}function aD(e,t){if(t&&("object"===tD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sD(e)}function sD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lD(e){return(lD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var uD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oD(e,t)}(i,uy);var t,n,r,o=iD(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),t&&w.extend(sD(n),t),n.CLASS_NAME="SuperMap.WebPrintingService",n.url?n:aD(n)}return t=i,(n=[{key:"destroy",value:function(){rD(lD(i.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(e){if(e){e.layoutOptions&&e.layoutOptions.legendOptions&&(!e.layoutOptions.legendOptions.title&&(e.layoutOptions.legendOptions.title=""),e.layoutOptions.legendOptions.picAsBase64=e.layoutOptions.legendOptions.picAsBase64&&e.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),e.layoutOptions.legendOptions.customItems&&e.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(e.layoutOptions.legendOptions.customItems.picAsBase64=e.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,"")));var t=this;t.request({url:t._processUrl("jobs"),method:"POST",data:w.toJSON(e),scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"getPrintingJob",value:function(e){var t=this,n=t._processUrl("jobs/".concat(e));t.request({url:n,method:"GET",scope:t,success:function(e){t.rollingProcess(e,n)},failure:t.serviceProcessFailed})}},{key:"getPrintingJobResult",value:function(e){var t=this;t.request({url:t._processUrl("jobs/".concat(e,"/result")),method:"GET",scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"getLayoutTemplates",value:function(){var e=this;e.request({url:e._processUrl("layouts"),method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"rollingProcess",value:function(e,t){var n=this;if(e)var r=setInterval(function(){n.request({url:t,method:"GET",scope:n,success:function(e){switch(e.status){case"FINISHED":clearInterval(r),n.serviceProcessCompleted(e);break;case"ERROR":clearInterval(r),n.serviceProcessFailed(e);break;case"RUNNING":n.events.triggerEvent("processRunning",e)}},failure:n.serviceProcessFailed})},1e3)}},{key:"_processUrl",value:function(e){return e?w.urlPathAppend(this.url,e):this.url}}])&&nD(t.prototype,n),r&&nD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function cD(e){"@babel/helpers - typeof";return(cD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hD(e,t){return(hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=dD(e);if(t){var o=dD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===cD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function dD(e){return(dD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var yD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hD(e,t)}(i,oy);var t,n,r,o=pD(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"createWebPrintingJob",value:function(e,t){if(e){var n=this;new uD(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).createWebPrintingJob(n._processParams(e))}}},{key:"getPrintingJob",value:function(e,t){var n=this;new uD(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).getPrintingJob(e)}},{key:"getPrintingJobResult",value:function(e,t){var n=this;new uD(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).getPrintingJobResult(e)}},{key:"getLayoutTemplates",value:function(e){var t=this;new uD(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getLayoutTemplates()}},{key:"_processParams",value:function(e){return e.layoutOptions&&e.layoutOptions.littleMapOptions&&(e.layoutOptions.littleMapOptions.center=this._toPointObject(e.layoutOptions.littleMapOptions.center)),e.exportOptions&&(e.exportOptions.center=this._toPointObject(e.exportOptions.center)),e}},{key:"_toPointObject",value:function(e){return fr.isArray(e)?{x:e[0],y:e[1]}:e instanceof Me||e instanceof O().Point?{x:e.x,y:e.y}:e instanceof O().LngLat?{x:e.lng,y:e.lat}:e}}])&&fD(t.prototype,n),r&&fD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vD(e){"@babel/helpers - typeof";return(vD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wD(){return(wD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OD(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function _D(e,t){return(_D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=OD(e);if(t){var o=OD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return SD(e)}(this,n)}}function SD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OD(e){return(OD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var PD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_D(e,t)}(i,uy);var t,n,r,o=xD(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).options=t||{},t&&w.extend(SD(n),t),n.CLASS_NAME="SuperMap.ImageService",n}return t=i,(n=[{key:"destroy",value:function(){wD(OD(i.prototype),"destroy",this).call(this)}},{key:"getCollections",value:function(){var e=w.convertPath("/collections"),t=w.urlPathAppend(this.url,e);this.request({method:"GET",url:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"getCollectionByID",value:function(e){var t={collectionId:e},n=w.convertPath("/collections/{collectionId}",t),r=w.urlPathAppend(this.url,n);this.request({method:"GET",url:r,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"search",value:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gD(Object(n),!0).forEach(function(t){mD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e||{}),n=w.convertPath("/search"),r=w.urlPathAppend(this.url,n);this.request({method:"POST",url:r,data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}])&&bD(t.prototype,n),r&&bD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function TD(e){"@babel/helpers - typeof";return(TD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CD(e,t){return(CD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ED(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=AD(e);if(t){var o=AD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===TD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function AD(e){return(AD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var MD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CD(e,t)}(i,oy);var t,n,r,o=ED(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getCollections",value:function(e){var t=this;new PD(this.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getCollections()}},{key:"getCollectionByID",value:function(e,t){var n=this;new PD(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).getCollectionByID(e)}},{key:"search",value:function(e,t){var n=this;new PD(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).search(e)}}])&&kD(t.prototype,n),r&&kD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function RD(e){"@babel/helpers - typeof";return(RD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ID(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jD(){return(jD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BD(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function LD(e,t){return(LD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=BD(e);if(t){var o=BD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===RD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ND(e)}(this,n)}}function ND(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BD(e){return(BD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var FD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LD(e,t)}(i,uy);var t,n,r,o=DD(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).options=t||{},t&&w.extend(ND(n),t),n.CLASS_NAME="SuperMap.ImageCollectionService",n}return t=i,(n=[{key:"destroy",value:function(){jD(BD(i.prototype),"destroy",this).call(this)}},{key:"getLegend",value:function(e){var t={collectionId:this.options.collectionId},n=w.convertPath("/collections/{collectionId}/legend",t),r=w.urlPathAppend(this.url,n);this.request({method:"GET",url:r,params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"getStatistics",value:function(){var e={collectionId:this.options.collectionId},t=w.convertPath("/collections/{collectionId}/statistics",e),n=w.urlPathAppend(this.url,t);this.request({method:"GET",url:n,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"getTileInfo",value:function(){var e={collectionId:this.options.collectionId},t=w.convertPath("/collections/{collectionId}/tileInfo",e),n=w.urlPathAppend(this.url,t);this.request({method:"GET",url:n,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"deleteItemByID",value:function(e){var t={collectionId:this.options.collectionId,featureId:e},n=w.convertPath("/collections/{collectionId}/items/{featureId}",t),r=w.urlPathAppend(this.url,n);this.request({method:"DELETE",url:r,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"getItemByID",value:function(e){var t={collectionId:this.options.collectionId,featureId:e},n=w.convertPath("/collections/{collectionId}/items/{featureId}",t),r=w.urlPathAppend(this.url,n);this.request({method:"GET",url:r,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}])&&ID(t.prototype,n),r&&ID(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function GD(e){"@babel/helpers - typeof";return(GD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VD(e,t){return(VD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=WD(e);if(t){var o=WD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===GD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function WD(e){return(WD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var UD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VD(e,t)}(i,oy);var t,n,r,o=HD(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getLegend",value:function(e,t){var n=this;new FD(this.url,{collectionId:n.options.collectionId,proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).getLegend(e)}},{key:"getStatistics",value:function(e){var t=this;new FD(t.url,{collectionId:t.options.collectionId,proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getStatistics()}},{key:"getTileInfo",value:function(e){var t=this;new FD(t.url,{collectionId:t.options.collectionId,proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getTileInfo()}},{key:"deleteItemByID",value:function(e,t){var n=this;new FD(this.url,{collectionId:n.options.collectionId,proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).deleteItemByID(e)}},{key:"getItemByID",value:function(e,t){var n=this;new FD(n.url,{collectionId:n.options.collectionId,proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).getItemByID(e)}}])&&zD(t.prototype,n),r&&zD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(),JD=window.SuperMap=window.SuperMap||{};function qD(e){"@babel/helpers - typeof";return(qD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XD(e,t){return(XD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ZD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=QD(e);if(t){var o=QD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function QD(e){return(QD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/JD.Components=window.SuperMap.Components||{};var KD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XD(e,t)}(a,Mt);var t,n,o,i=ZD(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},t.CLASS_NAME="SuperMap.Format.WKT",t.extract={point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.point.apply(this,[e.components[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.components[n]])+")");return t.join(",")},polygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.components[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.polygon.apply(this,[e.components[n]])+")");return t.join(",")},collection:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extractGeometry.apply(this,[e.components[n]]));return t.join(",")}},t.parse={point:function(e){var t=r.trim(e).split(this.regExes.spaces);return new Et(new Me(t[0],t[1]))},multipoint:function(e){for(var t,n=r.trim(e).split(","),o=[],i=0,a=n.length;i<a;++i)t=n[i].replace(this.regExes.trimParens,"$1"),o.push(this.parse.point.apply(this,[t]).geometry);return new Et(new We(o))},linestring:function(e){for(var t=r.trim(e).split(","),n=[],o=0,i=t.length;o<i;++o)n.push(this.parse.point.apply(this,[t[o]]).geometry);return new Et(new rt(n))},multilinestring:function(e){for(var t,n=r.trim(e).split(this.regExes.parenComma),o=[],i=0,a=n.length;i<a;++i)t=n[i].replace(this.regExes.trimParens,"$1"),o.push(this.parse.linestring.apply(this,[t]).geometry);return new Et(new Ht(o))},polygon:function(e){for(var t,n,o,i=r.trim(e).split(this.regExes.parenComma),a=[],s=0,l=i.length;s<l;++s)t=i[s].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[t]).geometry,o=new ct(n.components),a.push(o);return new Et(new vt(a))},multipolygon:function(e){for(var t,n=r.trim(e).split(this.regExes.doubleParenComma),o=[],i=0,a=n.length;i<a;++i)t=n[i].replace(this.regExes.trimParens,"$1"),o.push(this.parse.polygon.apply(this,[t]).geometry);return new Et(new Xt(o))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=r.trim(e).split("|"),n=[],o=0,i=t.length;o<i;++o)n.push(this.read(t[o]));return n}},t}return t=a,(n=[{key:"read",value:function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(e);return o&&(n=o[1].toLowerCase(),r=o[2],this.parse[n]&&(t=this.parse[n].apply(this,[r]))),t}},{key:"write",value:function(e){var t,n,r;e.constructor===Array?(t=e,r=!0):(t=[e],r=!1);var o=[];r&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=t.length;i<a;++i)r&&i>0&&o.push(","),n=t[i].geometry,o.push(this.extractGeometry(n));return r&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null}}])&&YD(t.prototype,n),o&&YD(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}();function $D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var eN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;t=t||{},this.speed=t.speed&&t.speed>=0?t.speed:1,this.frequency=t.speed&&t.frequency>=0?t.frequency:1e3,this.startTime=t.startTime&&null!=t.startTime?t.startTime:0,this.endTime=t.endTime&&null!=t.endTime&&t.endTime>=n.startTime?t.endTime:+new Date,this.repeat=void 0===t.repeat||t.repeat,this.reverse=void 0!==t.reverse&&t.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],n.events=new To(this,null,this.EVENT_TYPES),n.speed=Number(n.speed),n.frequency=Number(n.frequency),n.startTime=Number(n.startTime),n.endTime=Number(n.endTime),n.startTime=Date.parse(new Date(n.startTime)),n.endTime=Date.parse(new Date(n.endTime)),n.currentTime=n.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var t,n,r;return t=e,(n=[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return e>=0&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return e>=0&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null}},{key:"tick",value:function(){}}])&&$D(t.prototype,n),r&&$D(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tN(e){"@babel/helpers - typeof";return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rN(){return(rN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sN(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function oN(e,t){return(oN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=sN(e);if(t){var o=sN(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===tN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aN(e)}(this,n)}}function aN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sN(e){return(sN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var lN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oN(e,t)}(i,eN);var t,n,r,o=iN(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=aN(n=o.call(this,t));return r.callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o}),r.update=r.update.bind(r),r.oldTime=r.currentTime,r.CLASS_NAME="SuperMap.TimeFlowControl",n}return t=i,(n=[{key:"updateOptions",value:function(e){e=e||{},rN(sN(i.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){rN(sN(i.prototype),"stop",this).call(this);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId)}},{key:"destroy",value:function(){rN(sN(i.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.update(),e.intervalId=window.setInterval(e.update,e.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}])&&nN(t.prototype,n),r&&nN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function uN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cN=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){var r=t.substr(t.length-1,1);this.serviceUrl="/"===r?t.substr(0,t.length-2):t}this.options=n||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var t,n,r;return t=e,(n=[{key:"request",value:function(e,t,n,r){(r=r||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(r.withCredentials=!0),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers;var o=ay.imanagerToken;return o&&(r.headers||(r.headers=[]),r.headers["X-Auth-Token"]=o),n&&(n=JSON.stringify(n)),cp.commit(e,t,n,r).then(function(e){return e.json()})}}])&&uN(t.prototype,n),r&&uN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hN=function(e,t,n){return t&&fN(e.prototype,t),n&&fN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",w.extend(this,t)});function pN(e){"@babel/helpers - typeof";return(pN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yN(e,t){return(yN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=gN(e);if(t){var o=gN(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function gN(e){return(gN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var mN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yN(e,t)}(i,cN);var t,n,r,o=vN(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e)}return t=i,(n=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new hN(e))}},{key:"createIPortal",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new hN(e))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",e)}},{key:"stopNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",e)}}])&&dN(t.prototype,n),r&&dN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wN=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{},this.serviceUrl=t,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=n.withCredentials||!1,this.crossOrigin=n.crossOrigin,this.headers=n.headers}var t,n,r;return t=e,(n=[{key:"request",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return t=ay.appendCredential(t),cp.commit(e,t,n,r).then(function(e){return e.json()})}}])&&bN(t.prototype,n),r&&bN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xN=function(e,t,n){return t&&_N(e.prototype,t),n&&_N(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],w.extend(this,t)});function SN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ON=function(e,t,n){return t&&SN(e.prototype,t),n&&SN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,w.extend(this,t)});function PN(e){"@babel/helpers - typeof";return(PN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kN(e,t){return(kN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function CN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=AN(e);if(t){var o=AN(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===PN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return EN(e)}(this,n)}}function EN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AN(e){return(AN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var MN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kN(e,t)}(i,wN);var t,n,r,o=CN(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e),t=t||{},n.authorizeSetting=[],n.bounds="",n.bounds4326="",n.checkStatus="",n.createTime=0,n.description=null,n.dirId=null,n.epsgCode=0,n.heatLevel=0,n.id=0,n.name="",n.personalDirId=null,n.resourceId=0,n.resourceSubType=null,n.resourceType=null,n.serviceRootUrlId=null,n.tags=null,n.thumbnail=null,n.updateTime=0,n.userName="",n.sourceJSON={},w.extend(EN(n),t),n.resourceUrl=e+"/web/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId,n.withCredentials&&(n.resourceUrl=e+"/web/mycontent/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId),n}return t=i,(n=[{key:"load",value:function(){var e=this;return e.request("GET",e.resourceUrl+".json").then(function(t){if(t.error)return t;e.sourceJSON=t})}},{key:"update",value:function(){var e=this.resourceType.replace("_","").toLowerCase();"data"===e&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var t=JSON.stringify(this.sourceJSON);if("service"===e){var n={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};t=JSON.stringify(n)}return this.request("PUT",this.resourceUrl,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&TN(t.prototype,n),r&&TN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function RN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var IN=function(e,t,n){return t&&RN(e.prototype,t),n&&RN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.ids=[],this.entities=[],this.resourceType="",w.extend(this,t)});function jN(e){"@babel/helpers - typeof";return(jN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DN(e,t){return(DN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function NN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=BN(e);if(t){var o=BN(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function BN(e){return(BN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var FN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DN(e,t)}(i,wN);var t,n,r,o=NN(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).iportalUrl=e,t=t||{},n.withCredentials=t.withCredentials||!1,n}return t=i,(n=[{key:"load",value:function(){return cp.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(e){if(!(e instanceof xN))return new Promise(function(e){e("queryParams is not instanceof iPortalQueryParam !")});var t=this,n=this.iportalUrl+"/gateway/catalog/resource/search.json";return e.t=(new Date).getTime(),this.request("GET",n,e).then(function(e){var n=[];e.content.forEach(function(e){n.push(new MN(t.iportalUrl,e))});var r=new ON;return r.content=n,r.total=e.total,r.currentPage=e.currentPage,r.pageSize=e.pageSize,r.aggregations=e.aggregations,r})}},{key:"updateResourcesShareSetting",value:function(e){if(!(e instanceof IN))return new Promise(function(e){e("shareParams is not instanceof iPortalShareParam !")});var t=e.resourceType.replace("_","").toLowerCase()+"s";"datas"===t&&(t="mycontent/"+t);var n={ids:e.ids,entities:e.entities},r=this.iportalUrl+"/web/"+t+"/sharesetting.json";return this.request("PUT",r,JSON.stringify(n)).then(function(e){return e})}}])&&LN(t.prototype,n),r&&LN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function GN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zN=function(e,t,n){return t&&GN(e.prototype,t),n&&GN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,w.extend(this,t)});function VN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HN=function(e,t,n){return t&&VN(e.prototype,t),n&&VN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.rootUrl="",this.tags=[],this.entities=[],w.extend(this,t)});function WN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var UN=function(e,t,n){return t&&WN(e.prototype,t),n&&WN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],w.extend(this,t)});function JN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qN=function(e,t,n){return t&&JN(e.prototype,t),n&&JN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},w.extend(this,t)});function YN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var XN=function(e,t,n){return t&&YN(e.prototype,t),n&&YN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},w.extend(this,t)});function ZN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var QN=function(e,t,n){return t&&ZN(e.prototype,t),n&&ZN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.url="",this.connectionInfo={},w.extend(this,t)});function KN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $N=function(e,t,n){return t&&KN(e.prototype,t),n&&KN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.dataBase="",this.server="",w.extend(this,t)});function eB(e){"@babel/helpers - typeof";return(eB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nB(e,t){return(nB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=oB(e);if(t){var o=oB(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===eB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function oB(e){return(oB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var iB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nB(e,t)}(i,wN);var t,n,r,o=rB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).iportalUrl=e,t}return t=i,(n=[{key:"deleteResources",value:function(e){var t=e.resourceType.replace("_","").toLowerCase(),n=this.iportalUrl+"/web/"+t+"s.json?ids="+encodeURI(JSON.stringify(e.ids));return"data"===t?(n=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",n,JSON.stringify(e.ids))):this.request("DELETE",n)}},{key:"addMap",value:function(e){if(!(e instanceof HN))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},n=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",n,JSON.stringify(t)).then(function(e){return e})}},{key:"addScene",value:function(e){if(!(e instanceof HN))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},n=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",n,JSON.stringify(t)).then(function(e){return e})}},{key:"registerService",value:function(e){if(!(e instanceof UN))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var t={type:e.type,tags:e.tags,authorizeSetting:e.entities,metadata:e.metadata,addedMapNames:e.addedMapNames,addedSceneNames:e.addedSceneNames},n=this.iportalUrl+"/web/services.json";return this.request("POST",n,JSON.stringify(t)).then(function(e){return e})}},{key:"getErrMsgPromise",value:function(e){return new Promise(function(t){t(e)})}},{key:"uploadDataRequest",value:function(e,t){var n=this.iportalUrl+"/web/mycontent/datas/"+e+"/upload.json";return this.request("POST",n,t)}},{key:"addData",value:function(e,t){var n=this;if(!(e instanceof qN))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var r,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:e.fileName,tags:e.tags,type:e.type},a=e.type.toLowerCase();if("excel"===a||"csv"===a){if(!(e.dataMetaInfo instanceof XN))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");r={xField:e.dataMetaInfo.xField,yField:e.dataMetaInfo.yField},"csv"===a&&(r.fileEncoding=e.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=r}else if("hdfs"===a||"hbase"===a){if(!(e.dataMetaInfo instanceof XN))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(e.dataMetaInfo.dataStoreInfo instanceof QN))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:e.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=e.dataMetaInfo.dataStoreInfo.url,r={url:e.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(e.dataMetaInfo.dataStoreInfo.connectionInfo instanceof $N))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:e.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:e.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",r={dataStoreInfo:s}}i.dataMetaInfo=r}return this.request("POST",o,JSON.stringify(i)).then(function(e){return"hdfs"===a||"hbase"===a?e:e.childID?n.uploadDataRequest(e.childID,t):e.customResult})}},{key:"publishOrUnpublish",value:function(e,t){if(!e.dataId||!e.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var n=e.dataId,r=e.dataServiceId,o=e.serviceType,i=this.iportalUrl+"/web/mycontent/datas/"+n+"/publishstatus.json?serviceType="+o;return r&&(i+="&dataServiceId="+r),this.request("PUT",i,JSON.stringify(t)).then(function(e){return t?(r||(r=e.customResult),r):e})}},{key:"getDataPublishedStatus",value:function(e,t){var n=this.iportalUrl+"/web/mycontent/datas/"+e+"/publishstatus.json?dataServiceId="+t+"&forPublish=true";return this.request("GET",n)}},{key:"unPublishDataService",value:function(e){return this.publishOrUnpublish(e,!1)}},{key:"publishDataService",value:function(e){return this.publishOrUnpublish(e,!0)}}])&&tB(t.prototype,n),r&&tB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function aB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null}}])&&aB(t.prototype,n),r&&aB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lB(e){"@babel/helpers - typeof";return(lB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cB(e,t){return(cB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=pB(e);if(t){var o=pB(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===lB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hB(e)}(this,n)}}function hB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pB(e){return(pB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var dB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cB(e,t)}(i,sB);var t,n,r,o=fB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).subAggs=null,t.aggType=null,t.CLASS_NAME="SuperMap.BucketAggParameter",w.extend(hB(t),e),t}return t=i,(n=[{key:"destroy",value:function(){this.subAggs&&(this.subAggs=null)}}])&&uB(t.prototype,n),r&&uB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yB(e){"@babel/helpers - typeof";return(yB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gB(){return(gB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_B(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function mB(e,t){return(mB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=_B(e);if(t){var o=_B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wB(e)}(this,n)}}function wB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _B(e){return(_B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var xB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mB(e,t)}(i,sB);var t,n,r,o=bB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).aggType=Kn.AVG,w.extend(wB(t),e),t.CLASS_NAME="SuperMap.MetricsAggParameter",t}return t=i,(n=[{key:"destroy",value:function(){gB(_B(i.prototype),"destroy",this).call(this);this.aggType=null}}])&&vB(t.prototype,n),r&&vB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function SB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var OB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ClipParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.clipDatasetName=null,e.clipDatasourceName=null,e.clipRegion=null,e.isClipInRegion=null,e.isExactClip=null}},{key:"toJSON",value:function(){return w.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:tr.fromGeometry(this.clipRegion)})}}])&&SB(t.prototype,n),r&&SB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function PB(e){"@babel/helpers - typeof";return(PB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kB(){return(kB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MB(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function CB(e,t){return(CB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function EB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=MB(e);if(t){var o=MB(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===PB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AB(e)}(this,n)}}function AB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MB(e){return(MB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var RB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CB(e,t)}(i,dB);var t,n,r,o=EB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).precision=5,w.extend(AB(t),e),t.aggType=Qn.GEOHASH_GRID,t.CLASS_NAME="SuperMap.GeoHashGridAggParameter",t}return t=i,r=[{key:"toJsonParameters",value:function(e){var t={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return w.toJson(t)}}],(n=[{key:"destroy",value:function(){kB(MB(i.prototype),"destroy",this).call(this),this.aggType=null,this.precision=null}}])&&TB(t.prototype,n),r&&TB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function IB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jB=function(e,t,n){return t&&IB(e.prototype,t),n&&IB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="LabelMatrixCell"});function LB(e){"@babel/helpers - typeof";return(LB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NB(e,t){return(NB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function BB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=GB(e);if(t){var o=GB(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===LB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return FB(e)}(this,n)}}function FB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GB(e){return(GB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var zB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NB(e,t)}(i,jB);var t,n,r,o=BB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).height=0,t.pathField=null,t.rotation=0,t.width=0,t.sizeFixed=!1,t.type="IMAGE",e&&w.extend(FB(t),e),t.CLASS_NAME="SuperMap.LabelImageCell",t}return t=i,(n=[{key:"destroy",value:function(){var e=this;e.height=null,e.pathField=null,e.rotation=null,e.width=null,e.sizeFixed=null}}])&&DB(t.prototype,n),r&&DB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function VB(e){"@babel/helpers - typeof";return(VB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WB(e,t){return(WB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=qB(e);if(t){var o=qB(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===VB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return JB(e)}(this,n)}}function JB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qB(e){return(qB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var YB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WB(e,t)}(i,jB);var t,n,r,o=UB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).style=new $t,t.symbolIDField=null,t.type="SYMBOL",e&&w.extend(JB(t),e),t.CLASS_NAME="SuperMap.LabelSymbolCell",t}return t=i,(n=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&HB(t.prototype,n),r&&HB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function XB(e){"@babel/helpers - typeof";return(XB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QB(e,t){return(QB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=eF(e);if(t){var o=eF(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===XB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $B(e)}(this,n)}}function $B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eF(e){return(eF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var tF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QB(e,t)}(i,jB);var t,n,r,o=KB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).themeLabel=new ww,t.type="THEME",e&&w.extend($B(t),e),t.CLASS_NAME=" SuperMap.LabelThemeCell",t}return t=i,(n=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&ZB(t.prototype,n),r&&ZB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function nF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.LayerStatus"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var e="{";e+='"type":"UGC",';var t=[];return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&t.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+w.toJSON(this.fieldValuesDisplayFilter)),e+=t,e+="}"}}])&&nF(t.prototype,n),r&&nF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var iF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.LinkItem"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.datasourceConnectionInfo instanceof Sk&&(e.datasourceConnectionInfo.destroy(),e.datasourceConnectionInfo=null),e.foreignKeys=null,e.foreignTable=null,e.linkFields=null,e.linkFilter=null,e.name=null,e.primaryKeys=null}}])&&oF(t.prototype,n),r&&oF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function aF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,w.extend(this,t),this.ugcLayer=new b_(t),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){w.reset(this)}},{key:"fromJson",value:function(e){this.ugcLayer.fromJson.apply(this,[e])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var e=this.ugcLayer.toServerJSONObject.apply(this,arguments),t="{";for(var n in e)e.hasOwnProperty(n)&&(t+="'"+n+"':"+e[n]+",");return t=t.substr(0,t.length-1),t+="}"}}])&&aF(t.prototype,n),r&&aF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,w.extend(this,t),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&lF(t.prototype,n),r&&lF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function cF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,w.extend(this,t),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&cF(t.prototype,n),r&&cF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.SupplyCenter"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({maxWeight:t.maxWeight,nodeID:t.nodeID,resourceValue:t.resourceValue,type:t.type})}}],(n=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&hF(t.prototype,n),r&&hF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new $t,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeFlow"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n.leaderLineStyle=$t.fromJson(t.leaderLineStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.flowEnabled=null,e.leaderLineDisplayed=null,e.leaderLineStyle&&(e.leaderLineStyle.destroy(),e.leaderLineStyle=null)}}])&&dF(t.prototype,n),r&&dF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new Qt,this.end=0,this.start=0,this.visible=!0,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n.color=Qt.fromJson(t.color),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=w.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&vF(t.prototype,n),r&&vF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function mF(e){"@babel/helpers - typeof";return(mF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wF(){return(wF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OF(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function _F(e,t){return(_F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=OF(e);if(t){var o=OF(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===mF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return SF(e)}(this,n)}}function SF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OF(e){return(OF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var PF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_F(e,t)}(i,Zb);var t,n,r,o=xF(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRIDRANGE",e)).items=null,t.rangeMode=kn.EQUALINTERVAL,t.rangeParameter=0,t.colorGradientType=Cn.YELLOW_RED,t.reverseColor=!1,e&&w.extend(SF(t),e),t.CLASS_NAME="SuperMap.ThemeGridRange",t}return t=i,r=[{key:"fromObj",value:function(e){if(e){var t=new i;w.copy(t,e);var n=e.items,r=n?n.length:0;t.items=[];for(var o=0;o<r;o++)t.items.push(gF.fromObj(n[o]));return t}}}],(n=[{key:"destroy",value:function(){wF(OF(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.reverseColor=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&bF(t.prototype,n),r&&bF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function TF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new Qt,this.unique=null,this.visible=!0,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return w.copy(n,t),n.color=Qt.fromJson(t.color),n}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=w.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&TF(t.prototype,n),r&&TF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function CF(e){"@babel/helpers - typeof";return(CF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AF(){return(AF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jF(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function MF(e,t){return(MF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=jF(e);if(t){var o=jF(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===CF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return IF(e)}(this,n)}}function IF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jF(e){return(jF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var LF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MF(e,t)}(i,Zb);var t,n,r,o=RF(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRIDUNIQUE",e)).defaultcolor=new Qt,t.items=null,e&&w.extend(IF(t),e),t.CLASS_NAME="SuperMap.ThemeGridUnique",t}return t=i,r=[{key:"fromObj",value:function(e){var t=new i,n=e.items,r=n?n.length:0;w.extend(t,e),t.items=[],t.defaultcolor=Qt.fromJson(e.defaultcolor);for(var o=0;o<r;o++)t.items.push(kF.fromObj(n[o]));return t}}],(n=[{key:"destroy",value:function(){AF(jF(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.defaultcolor&&(e.defaultcolor.destroy(),e.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=w.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],n=e.items.length,r=0;r<n;r++)t.push(e.items[r].toServerJSONObject());e.items=t}return e}}])&&EF(t.prototype,n),r&&EF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function DF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var NF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new Kb,t&&w.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return w.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.unique=null,e.caption=null,e.offsetX=null,e.offsetY=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&DF(t.prototype,n),r&&DF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function BF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FF=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.srcData=t,this.targetData=n,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),n=0;n<t;n++)e+="'"+this.srcData[n]+"':'"+this.targetData[n]+"',";return n>0&&(e=e.substring(0,e.length-1)),"{"+e+"}"}return null}}])&&BF(t.prototype,n),r&&BF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function GF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,w.extend(this,t),this.CLASS_NAME="SuperMap.TransferLine"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({lineID:t.lineID,lineName:t.lineName,lineAliasName:t.lineAliasName,startStopIndex:t.startStopIndex,startStopName:t.startStopName,startStopAliasName:t.startStopAliasName,endStopIndex:t.endStopIndex,endStopName:t.endStopName,endStopAliasName:t.endStopAliasName})}}],(n=[{key:"destroy",value:function(){w.reset(this)}}])&&GF(t.prototype,n),r&&GF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function VF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type=null,w.extend(this,t),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.type=null}}])&&VF(t.prototype,n),r&&VF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function WF(e){"@babel/helpers - typeof";return(WF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JF(){return(JF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZF(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function qF(e,t){return(qF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function YF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ZF(e);if(t){var o=ZF(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===WF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return XF(e)}(this,n)}}function XF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZF(e){return(ZF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var QF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qF(e,t)}(i,HF);var t,n,r,o=YF(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).redIndex=0,t.nirIndex=1,t.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",t.type=$n.NDVI,w.extend(XF(t),e),t.CLASS_NAME="SuperMap.NDVIParameter",t}return t=i,(n=[{key:"destroy",value:function(){JF(ZF(i.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&UF(t.prototype,n),r&&UF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function KF(e){"@babel/helpers - typeof";return(KF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eG(){return(eG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oG(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function tG(e,t){return(tG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=oG(e);if(t){var o=oG(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===KF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rG(e)}(this,n)}}function rG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oG(e){return(oG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var iG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tG(e,t)}(i,HF);var t,n,r,o=nG(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).altitude=45,t.azimuth=315,t.zFactor=1,t.type=$n.HILLSHADE,w.extend(rG(t),e),t.CLASS_NAME="SuperMap.HillshadeParameter",t}return t=i,(n=[{key:"destroy",value:function(){eG(oG(i.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&$F(t.prototype,n),r&&$F(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function aG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={name:this.name};return this.title&&(e.title=this.title),this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),w.toJSON(e)}}])&&aG(t.prototype,n),r&&aG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl&&(e.picAsUrl=this.picAsUrl),this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),w.toJSON(e)}}])&&lG(t.prototype,n),r&&lG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function cG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&cG(t.prototype,n),r&&cG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof fG&&(this.layers.destroy(),this.layers=null),this.customItems instanceof sG&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var e={title:this.title||""};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64?e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(e.customItems=this.customItems),w.toJSON(e)}}])&&hG(t.prototype,n),r&&hG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof uG&&(this.image.destroy(),this.image=null),this.layers instanceof fG&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var e={scale:this.scale,center:this.center};return this.layerNames?e.layerNames=this.layerNames:this.layers&&(e.layers=this.layers),this.image&&(e.image=this.image),w.toJSON(e)}}])&&dG(t.prototype,n),r&&dG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),w.toJSON(e)}}])&&vG(t.prototype,n),r&&vG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function mG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var bG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var e={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(e.orientation=this.orientation),w.toJSON(e)}}])&&mG(t.prototype,n),r&&mG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var e={type:this.type};return this.token&&(e.token=this.token),this.url?e.url=this.url:this.value&&(e.value=this.value),w.toJSON(e)}}])&&wG(t.prototype,n),r&&wG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var SG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions instanceof bG&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof gG&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof yG&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof pG&&(this.legendOptions.destroy(),this.legendOptions=null)}},{key:"toJSON",value:function(){var e={templateName:this.templateName,title:this.title,subTitle:this.subTitle,author:this.author,copyright:this.copyright};return this.scaleBarOptions&&(e.scaleBarOptions=this.scaleBarOptions),this.northArrowOptions&&(e.northArrowOptions=this.northArrowOptions),this.littleMapOptions&&(e.littleMapOptions=this.littleMapOptions),this.legendOptions&&(e.legendOptions=this.legendOptions),w.toJSON(e)}}])&&xG(t.prototype,n),r&&xG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function OG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var PG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",w.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var e={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(e.rotation=this.rotation),this.outputSize&&(e.outputSize=this.outputSize),w.toJSON(e)}}])&&OG(t.prototype,n),r&&OG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function TG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,w.extend(this,t),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.content instanceof _G&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof SG&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof PG&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&TG(t.prototype,n),r&&TG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function CG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var EG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",w.extend(this,t)}var t,n,r;return t=e,r=[{key:"constructFromObject",value:function(t,n){return t&&(n=n||new e,t.hasOwnProperty("include")&&(n.include=t.include),t.hasOwnProperty("exclude")&&(n.exclude=t.exclude)),n}}],(n=[{key:"destroy",value:function(){this.include=void 0,this.exclude=void 0}}])&&CG(t.prototype,n),r&&CG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function AG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var MG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=void 0,this.direction=e.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",w.extend(this,t)}var t,n,r;return t=e,r=[{key:"constructFromObject",value:function(t,n){return t&&(n=n||new e,t.hasOwnProperty("field")&&(n.field=t.field),t.hasOwnProperty("direction")&&(n.direction=t.direction)),n}}],(n=[{key:"destroy",value:function(){this.field=void 0,this.direction="ASC"}}])&&AG(t.prototype,n),r&&AG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function RG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}MG.Direction={ASC:"ASC",DESC:"DESC"};
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var IG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",w.extend(this,t)}var t,n,r;return t=e,r=[{key:"constructFromObject",value:function(t,n){return t&&(n=n||new e,t.hasOwnProperty("bbox")&&(n.bbox=t.bbox),t.hasOwnProperty("collections")&&(n.collections=t.collections),t.hasOwnProperty("ids")&&(n.ids=t.ids),t.hasOwnProperty("limit")&&(n.limit=t.limit),t.hasOwnProperty("fields")&&(n.fields=EG.constructFromObject&&EG.constructFromObject(t.fields,{})||t.fields),t.hasOwnProperty("query")&&(n.query=t.query),t.hasOwnProperty("sortby")&&(n.sortby=t.sortby,t.sortby&&(n.sortby=t.sortby.map(function(e){return MG.constructFromObject&&MG.constructFromObject(e,{})||e})))),n}}],(n=[{key:"destroy",value:function(){var e=this;e.bbox=void 0,e.collections=void 0,e.ids=void 0,e.limit=void 0,e.fields=void 0,e.query=void 0,e.sortby=void 0}}])&&RG(t.prototype,n),r&&RG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var LG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",w.extend(this,t)}var t,n,r;return t=e,r=[{key:"constructFromObject",value:function(t,n){return t&&(n=n||new e,t.hasOwnProperty("stretchType")&&(n.stretchType=t.stretchType),t.hasOwnProperty("stdevCoefficient")&&(n.stdevCoefficient=t.stdevCoefficient),t.hasOwnProperty("gaussianCoefficient")&&(n.gaussianCoefficient=t.gaussianCoefficient),t.hasOwnProperty("useMedianValue")&&(n.useMedianValue=t.useMedianValue),t.hasOwnProperty("minPercent")&&(n.minPercent=t.minPercent),t.hasOwnProperty("maxPercent")&&(n.maxPercent=t.maxPercent)),n}}],(n=[{key:"destroy",value:function(){var e=this;e.stretchType=void 0,e.stdevCoefficient=void 0,e.gaussianCoefficient=void 0,e.useMedianValue=void 0,e.minPercent=void 0,e.maxPercent=void 0}}])&&jG(t.prototype,n),r&&jG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function DG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}LG.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var NG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",w.extend(this,t)}var t,n,r;return t=e,r=[{key:"constructFromObject",value:function(t,n){return t&&(n=n||new e,t.hasOwnProperty("displayMode")&&(n.displayMode=t.displayMode),t.hasOwnProperty("displayBands")&&(n.displayBands=t.displayBands),t.hasOwnProperty("stretchOption")&&(n.stretchOption=LG.constructFromObject&&LG.constructFromObject(t.stretchOption,{})||t.stretchOption),t.hasOwnProperty("interpolationMode")&&(n.interpolationMode=t.interpolationMode),t.hasOwnProperty("colorScheme")&&(n.colorScheme=t.colorScheme),t.hasOwnProperty("colorTable")&&(n.colorTable=t.colorTable),t.hasOwnProperty("brightness")&&(n.brightness=t.brightness),t.hasOwnProperty("contrast")&&(n.contrast=t.contrast),t.hasOwnProperty("noData")&&(n.noData=t.noData),t.hasOwnProperty("noDataColor")&&(n.noDataColor=t.noDataColor),t.hasOwnProperty("backgroundValue")&&(n.backgroundValue=t.backgroundValue),t.hasOwnProperty("noDataTransparent")&&(n.noDataTransparent=t.noDataTransparent),t.hasOwnProperty("backgroundColor")&&(n.backgroundColor=t.backgroundColor),t.hasOwnProperty("backgroundTransparent")&&(n.backgroundTransparent=t.backgroundTransparent),t.hasOwnProperty("gridFunctions")&&(n.gridFunctions=t.gridFunctions)),n}}],(n=[{key:"destroy",value:function(){var e=this;e.displayMode=void 0,e.displayBands=void 0,e.stretchOption=void 0,e.interpolationMode=void 0,e.colorScheme=void 0,e.colorTable=void 0,e.brightness=void 0,e.contrast=void 0,e.noData=void 0,e.noDataColor=void 0,e.noDataTransparent=void 0,e.backgroundValue=void 0,e.backgroundColor=void 0,e.backgroundTransparent=void 0,e.gridFuncOptions=void 0}}])&&DG(t.prototype,n),r&&DG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function BG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}NG.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},NG.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",w.extend(this,t)}var t,n,r;return t=e,r=[{key:"constructFromObject",value:function(t,n){return t&&(n=n||new e,t.hasOwnProperty("girdFuncName")&&(n.girdFuncName=t.girdFuncName),t.hasOwnProperty("Azimuth")&&(n.Azimuth=t.Azimuth),t.hasOwnProperty("Altitude")&&(n.Altitude=t.Altitude),t.hasOwnProperty("ZFactor")&&(n.ZFactor=t.ZFactor)),n}}],(n=[{key:"destroy",value:function(){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1}}])&&BG(t.prototype,n),r&&BG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function GG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",w.extend(this,t)}var t,n,r;return t=e,r=[{key:"constructFromObject",value:function(t,n){return t&&(n=n||new e,t.hasOwnProperty("girdFuncName")&&(n.girdFuncName=t.girdFuncName),t.hasOwnProperty("Azimuth")&&(n.Azimuth=t.Azimuth)),n}}],(n=[{key:"destroy",value:function(){this.girdFuncName="GFAspect",this.Azimuth=void 0}}])&&GG(t.prototype,n),r&&GG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function VG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",w.extend(this,t)}var t,n,r;return t=e,r=[{key:"constructFromObject",value:function(t,n){return t&&(n=n||new e,t.hasOwnProperty("girdFuncName")&&(n.girdFuncName=t.girdFuncName)),n}}],(n=[{key:"destroy",value:function(){this.girdFuncName="GFOrtho"}}])&&VG(t.prototype,n),r&&VG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function WG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var UG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",w.extend(this,t)}var t,n,r;return t=e,r=[{key:"constructFromObject",value:function(t,n){return t&&(n=n||new e,t.hasOwnProperty("girdFuncName")&&(n.girdFuncName=t.girdFuncName),t.hasOwnProperty("Altitude")&&(n.Altitude=t.Altitude),t.hasOwnProperty("ZFactor")&&(n.ZFactor=t.ZFactor)),n}}],(n=[{key:"destroy",value:function(){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1}}])&&WG(t.prototype,n),r&&WG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function JG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qG=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},w.extend(this,t),this.CLASS_NAME="SuperMap.OnlineServiceBase"}var t,n,r;return t=e,(n=[{key:"request",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=ay.appendCredential(t),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers,cp.commit(e,t,n,r).then(function(e){return e.json()})}}])&&JG(t.prototype,n),r&&JG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function YG(e){"@babel/helpers - typeof";return(YG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZG(e,t){return(ZG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function QG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=$G(e);if(t){var o=$G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===YG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return KG(e)}(this,n)}}function KG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $G(e){return($G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ez=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZG(e,t)}(i,qG);var t,n,r,o=QG(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e),t=t||{},n.MD5=null,n.type=null,n.userName=null,n.fileName=null,n.size=null,n.serviceStatus=null,n.serviceId=null,n.id=null,n.lastModfiedTime=null,n.status=null,n.storageId=null,n.publishInfo=null,n.authorizeSetting=null,n.nickname=null,n.tags=[],n.description=null,n.dataItemServices=null,n.coordType=null,n.dataCheckResult=null,n.dataMetaInfo=null,n.thumbnail=null,w.extend(KG(n),t),n.id&&(n.serviceUrl=e+"/"+n.id),n.CLASS_NAME="SuperMap.OnlineData",n}return t=i,(n=[{key:"load",value:function(){if(this.serviceUrl){var e=this;return e.request("GET",this.serviceUrl).then(function(t){w.extend(e,t)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&XG(t.prototype,n),r&&XG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nz=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var t=this.webUrl+"/mycontent";this.mDatasUrl=t+"/datas",this.CLASS_NAME="SuperMap.Online"}var t,n,r;return t=e,(n=[{key:"load",value:function(){return cp.get(this.rootUrl).then(function(e){return e})}},{key:"login",value:function(){ay.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(e){var t=this,n=t.mDatasUrl;return e&&(e=e.toJSON()),cp.get(n,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var n=[],r=e.content,o=r.length,i=0;i<o;i++){var a=r[i],s=new ez(t.mDatasUrl,a);n.push(s)}return n}})}}])&&tz(t.prototype,n),r&&tz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var oz=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,w.extend(this,t),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){var e=this,t={types:e.types,fileName:e.fileName,serviceStatuses:e.serviceStatuses,serviceId:e.serviceId,ids:e.ids,keywords:e.keywords,orderBy:e.orderBy,tags:e.tags,filterFields:e.filterFields};for(var n in t)null==t[n]&&delete t[n];return t}}])&&rz(t.prototype,n),r&&rz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function iz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var az=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.serviceIds=null,this.clientType=Wn.SERVER,this.limitation=null,w.extend(this,t),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&iz(t.prototype,n),r&&iz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lz=function(e,t,n){return t&&sz(e.prototype,t),n&&sz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,w.extend(this,n),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||vn.ISERVER,this.server||console.error("server url require is not  undefined");var r="/services/security/tokens";this.type===vn.ISERVER&&this.server.indexOf("iserver")<0&&(r="/iserver"+r),this.tokenServiceUrl||(this.tokenServiceUrl=w.urlPathAppend(this.server,r)),this.keyServiceUrl||(this.type===vn.IPORTAL?this.keyServiceUrl=w.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===vn.ONLINE&&(this.keyServiceUrl=w.urlPathAppend(this.server,"/web/mycontent/keys")))});function uz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cz=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=null,this.password=null,this.clientType=Wn.NONE,this.ip=null,this.referer=null,this.expiration=60,w.extend(this,t),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&uz(t.prototype,n),r&&uz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),fz=function(){try{return elasticsearch}catch(e){return{}}}(),hz=n.n(fz);function pz(e){return function(e){if(Array.isArray(e))return dz(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return dz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dz(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vz=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{},this.url=t;try{this.client=new(hz().Client)({host:this.url})}catch(e){this.client=new(hz().Client)({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new To(this,null,this.EVENT_TYPES),this.eventListeners=null,w.extend(this,n),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var t,n,r;return t=e,(n=[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,this._handleCallback(t))}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,this._handleCallback(t))}},{key:"count",value:function(e,t){return this.client.count(e,this._handleCallback(t))}},{key:"create",value:function(e,t){return this.client.create(e,this._handleCallback(t))}},{key:"delete",value:function(e,t){return this.client.delete(e,this._handleCallback(t))}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,this._handleCallback(t))}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,this._handleCallback(t))}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,this._handleCallback(t))}},{key:"exists",value:function(e,t){return this.client.exists(e,this._handleCallback(t))}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,this._handleCallback(t))}},{key:"explain",value:function(e,t){return this.client.explain(e,this._handleCallback(t))}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,this._handleCallback(t))}},{key:"get",value:function(e,t){return this.client.get(e,this._handleCallback(t))}},{key:"getScript",value:function(e,t){return this.client.getScript(e,this._handleCallback(t))}},{key:"getSource",value:function(e,t){return this.client.getSource(e,this._handleCallback(t))}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,this._handleCallback(t))}},{key:"index",value:function(e,t){return this.client.index(e,this._handleCallback(t))}},{key:"info",value:function(e,t){return this.client.info(e,this._handleCallback(t))}},{key:"mget",value:function(e,t){return this.client.mget(e,this._handleCallback(t))}},{key:"msearch",value:function(e,t){var n=this;return n.client.msearch(e).then(function(e){return e=e.body||e,n._update(e.responses,t),e},function(e){return t(e),n.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,this._handleCallback(t))}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,this._handleCallback(t))}},{key:"ping",value:function(e,t){return this.client.ping(e,this._handleCallback(t))}},{key:"putScript",value:function(e,t){return this.client.putScript(e,this._handleCallback(t))}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,this._handleCallback(t))}},{key:"reindex",value:function(e,t){return this.client.reindex(e,this._handleCallback(t))}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,this._handleCallback(t))}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,this._handleCallback(t))}},{key:"scroll",value:function(e,t){return this.client.scroll(e,this._handleCallback(t))}},{key:"search",value:function(e,t){var n=this;return n.client.search(e).then(function(e){return e=e.body||e,n._update(e,t),e},function(e){return t&&t(e),n.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,this._handleCallback(t))}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,this._handleCallback(t))}},{key:"suggest",value:function(e,t){return this.client.suggest(e,this._handleCallback(t))}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,this._handleCallback(t))}},{key:"update",value:function(e,t){return this.client.update(e,this._handleCallback(t))}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,this._handleCallback(t))}},{key:"_handleCallback",value:function(e){return function(){var t=Array.from(arguments),n=t.shift(),r=t.shift(),o=r&&r.body;if(o){var i=r;t=[i.statusCode,i.headers],r=o}e.call.apply(e,[this,n,r].concat(pz(t)))}}},{key:"_update",value:function(e,t){var n=this;e&&(n.data=e,n.openGeoFence&&n.geoFence&&n._validateDatas(e),n.events.triggerEvent("change",{data:n.data}),n.change?n.change&&n.change(e):t&&t(void 0,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,n=e.length;for(t=0;t<n;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(n){var r=n._source,o=t._getMeterPerMapUnit(t.geoFence.unit),i=t.geoFence.center[0]*o,a=t.geoFence.center[1]*o,s=r.x*o,l=r.y*o;return t._distance(s,l,i,a)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),n})}},{key:"_distance",value:function(e,t,n,r){return Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))}},{key:"_getMeterPerMapUnit",value:function(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}])&&yz(t.prototype,n),r&&yz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var mz=new Lr,bz=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createCanvas",value:function(e,t){var n=document.createElement("canvas");return n.height=e,n.width=t,n.getContext("2d")}},{key:"getLinearGradient",value:function(e,t,n,r,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(e,t,n,r),a=o.length,s=1/(a-1),l=0,u=0;u<a;u++)i.addColorStop(l,o[u]),l+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(e,t,n){e=mz.toRGBA(e),t=mz.toRGBA(t),e=mz.getData(e);for(var r=[],o=((t=mz.getData(t))[0]-e[0])/n,i=(t[1]-e[1])/n,a=(t[2]-e[2])/n,s=(t[3]-e[3])/n,l=0,u=e[0],c=e[1],f=e[2],h=e[3];l<n;l++)r[l]=mz.toColor([mz.adjust(Math.floor(u),[0,255]),mz.adjust(Math.floor(c),[0,255]),mz.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"hex"),u+=o,c+=i,f+=a,h+=s;return u=t[0],c=t[1],f=t[2],h=t[3],r[l]=mz.toColor([u,c,f,h],"hex"),r}},{key:"getGradientColors",value:function(e,t,n){var r,o,i,a=[],s=e.length;if(void 0!==t){if(s>=t)if("RANGE"===n)for(o=0;o<t;o++)a.push(e[o]);else for(o=0;o<t;o++){var l=Math.floor(o/2);if(o%2==0)a.push(e[l]);else{var u=e.length-1-l;a.push(e[u])}}else{for(r=Math.ceil(t/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(e[o],e[o+1],r);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-t,h=0;h<f;h++)a.splice(2,1)}return a}}}],(n=null)&&gz(t.prototype,n),r&&gz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(e){var t=this.newInstance();return t.setSerie(e),t}},{key:"getArrayStatistic",value:function(e,t){return e.length?"Sum"===t||"æ±å"===t?this.getSum(e):"Maximum"===t||"æå¤§å¼"===t?this.getMax(e):"Minimum"===t||"æå°å¼"===t?this.getMin(e):"Average"===t||"å¹³åå¼"===t?this.getMean(e):"Median"===t||"ä¸­ä½æ°"===t?this.getMedian(e):"times"===t||"è®¡æ°"===t?this.getTimes(e):void 0:0}},{key:"getArraySegments",value:function(e,t,n){return"offset"===t?this.getEqInterval(e,n):"jenks"===t?this.getJenks(e,n):"square"===t?this.getMin(e)>=0&&this.getSqrtInterval(e,n):"logarithm"===t?this.getMin(e)>0&&this.getGeometricProgression(e,n):void 0}},{key:"getSum",value:function(e){return this.getInstance(e).sum()}},{key:"getMax",value:function(e){return this.getInstance(e).max()}},{key:"getMin",value:function(e){return this.getInstance(e).min()}},{key:"getMean",value:function(e){return this.getInstance(e).mean()}},{key:"getMedian",value:function(e){return this.getInstance(e).median()}},{key:"getTimes",value:function(e){return e.length}},{key:"getEqInterval",value:function(e,t){return this.getInstance(e).getClassEqInterval(t)}},{key:"getJenks",value:function(e,t){return this.getInstance(e).getClassJenks(t)}},{key:"getSqrtInterval",value:function(e,t){return e=e.map(function(e){return Math.sqrt(e)}),this.getInstance(e).getClassEqInterval(t).map(function(e){return e*e})}},{key:"getGeometricProgression",value:function(e,t){return this.getInstance(e).getClassGeometricProgression(t)}}],(n=null)&&wz(t.prototype,n),r&&wz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),xz=n(820),Sz=n.n(xz);function Oz(e){"@babel/helpers - typeof";return(Oz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kz(e,t,n){return t&&Tz(e.prototype,t),n&&Tz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Cz=function(){function e(t){Pz(this,e),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof t&&(this.cartoStr=t,this.env={frames:[],errors:[],error:function(e){this.errors.push(e)}},this.parser=this.getParser(this.env),this.parse(t),this.shaders=this.toShaders())}return kz(e,[{key:"getParser",value:function(t){var n,r,o,i,a,s,l,u,c,f=this;function h(){i=l[o],a=r,u=r}function p(){l[o]=i,u=r=a}function d(){r>u&&(l[o]=l[o].slice(r-u),u=r)}function y(e){var t,i,a,s;if(e instanceof Function)return e.call(c.parsers);if("string"==typeof e)t=n.charAt(r)===e?e:null,i=1,d();else{if(d(),!(t=e.exec(l[o])))return null;i=t[0].length}if(t){var f=r+=i;for(s=r+l[o].length-i;r<s&&(32===(a=n.charCodeAt(r))||10===a||9===a);)r++;return l[o]=l[o].slice(i+(r-f)),u=r,0===l[o].length&&o<l.length-1&&o++,"string"==typeof t?t:1===t.length?t[0]:t}}function v(e){var r,o={index:s,filename:t.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===e[i]&&(e[i]=o[i]);r=e.filename&&f.env.inputs&&f.env.inputs[e.filename]?f.env.inputs[e.filename]:n,e.line=(r.slice(0,e.index).match(/\n/g)||"").length+1;for(var a=e.index;a>=0&&"\n"!==r.charAt(a);a--)e.column++;return new Error([e.filename,e.line,e.column,e.message].join(";"))}return this.env=t=t||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(i){var a,c=null;if(r=o=u=s=0,l=[],n=i.replace(/\r\n/g,"\n"),t.filename&&(f.env.inputs[t.filename]=n),l=function(e){for(var t,r,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,l=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,u=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,h=e[0],p=0;p<n.length;)if(s.lastIndex=p,(t=s.exec(n))&&t.index===p&&(p+=t[0].length,h.push(t[0])),o=n.charAt(p),l.lastIndex=u.lastIndex=p,(t=u.exec(n))&&t.index===p)p+=t[0].length,h.push(t[0]);else if(r||"/"!==o||"/"!==(i=n.charAt(p+1))&&"*"!==i||!(t=l.exec(n))||t.index!==p){switch(o){case"{":if(!r){f++,h.push(o);break}case"}":if(!r){f--,h.push(o),e[++a]=h=[];break}case"(":if(!r){r=!0,h.push(o);break}case")":if(r){r=!1,h.push(o);break}default:h.push(o)}p++}else p+=t[0].length,h.push(t[0]);return 0!==f&&(c={index:p-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),c)throw v(c);var h=function(e,t){var n=e.specificity,r=t.specificity;return n[0]!=r[0]?r[0]-n[0]:n[1]!=r[1]?r[1]-n[1]:n[2]!=r[2]?r[2]-n[2]:r[3]-n[3]};return(a=new e.Tree.Ruleset([],y(this.parsers.primary))).root=!0,a.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+v(t).message:e.errors.message=v(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(h),t},a},parsers:{primary:function(){for(var e,t=[];(e=y(this.rule)||y(this.ruleset)||y(this.comment))||y(/^[\s\n]+/)||(e=y(this.invalid));)e&&t.push(e);return t},invalid:function(){var t=y(/^[^;\n]*[;\n]/);if(t)return new e.Tree.Invalid(t,a)},comment:function(){var t;if("/"===n.charAt(r))return"/"===n.charAt(r+1)?new e.Tree.Comment(y(/^\/\/.*/),!0):(t=y(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new e.Tree.Comment(t):void 0},entities:{quoted:function(){if('"'===n.charAt(r)||"'"===n.charAt(r)){var t=y(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return t?new e.Tree.Quoted(t[1]||t[2]):void 0}},field:function(){if(y("[")){var t=y(/(^[^\]]+)/);if(y("]"))return t?new e.Tree.Field(t[1]):void 0}},comparison:function(){var e=y(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var t=y(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(t)return new e.Tree.Keyword(t)},call:function(){var t,n;if(t=/^([\w\-]+|%)\(/.exec(l[o])){if("url"===(t=t[1]))return null;r+=t.length;if(y("("),n=y(this.entities.arguments),y(")"))return t?new e.Tree.Call(t,n,r):void 0}},arguments:function(){for(var e,t=[];e=y(this.expression);){t.push(e);if(!y(","))break}return t},literal:function(){return y(this.entities.dimension)||y(this.entities.keywordcolor)||y(this.entities.hexcolor)||y(this.entities.quoted)},url:function(){var t;if("u"===n.charAt(r)&&y(/^url\(/)){t=y(this.entities.quoted)||y(this.entities.variable)||y(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return y(")")?new e.Tree.URL(void 0!==t.value||t instanceof e.Tree.Variable?t:new e.Tree.Quoted(t)):new e.Tree.Invalid(t,a,"Missing closing ) in URL.")}},variable:function(){var o,i=r;if("@"===n.charAt(r)&&(o=y(/^@[\w-]+/)))return new e.Tree.Variable(o,i,t.filename)},hexcolor:function(){var t;if("#"===n.charAt(r)&&(t=y(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new e.Tree.Color(t[1])},keywordcolor:function(){var t=l[o].match(/^[a-z]+/);if(t&&t[0]in e.Tree.Reference.data.colors)return new e.Tree.Color(e.Tree.Reference.data.colors[y(/^[a-z]+/)])},dimension:function(){var t=n.charCodeAt(r);if(!(t>57||t<45||47===t)){var o=y(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return o?new e.Tree.Dimension(o[1],o[2],a):void 0}}},variable:function(){var e;if("@"===n.charAt(r)&&(e=y(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){var e=y(this.entities.call)||y(this.entities.literal),t=y(this.entities.field)||y(this.entities.variable),n=y(this.entities.url)||y(this.entities.keyword);return e||t||n},end:function(){var e;return y(";")||("string"==typeof(e="}")?n.charAt(r)===e:!!e.test(l[o]))},element:function(){var t=y(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(t)return new e.Tree.Element(t)},attachment:function(){var e=y(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){for(var t,o,i,s,l,u=[],c=new e.Tree.Filterset,f=[],h=0,p=0;(i=y(this.element))||(l=y(this.zoom))||(s=y(this.filter))||(t=y(this.attachment));){if(h++,i)u.push(i);else if(l)f.push(l),p++;else if(s){var d=c.add(s);if(d)throw v({message:d,index:r-1});p++}else{if(o)throw v({message:"Encountered second attachment name.",index:r-1});o=t}var g=n.charAt(r);if("{"===g||"}"===g||";"===g||","===g)break}if(h)return new e.Tree.Selector(c,f,u,o,p,a)},filter:function(){h();var n,r,o;if(y("[")&&(n=y(/^[a-zA-Z0-9\-_]+/)||y(this.entities.quoted)||y(this.entities.variable)||y(this.entities.keyword)||y(this.entities.field))&&(n instanceof e.Tree.Quoted&&(n=new e.Tree.Field(n.toString())),(r=y(this.entities.comparison))&&(o=y(this.entities.quoted)||y(this.entities.variable)||y(this.entities.dimension)||y(this.entities.keyword)||y(this.entities.field)))){if(!y("]"))throw v({message:"Missing closing ] of filter.",index:a-1});return n.is||(n=new e.Tree.Field(n)),new e.Tree.Filter(n,r,o,a,t.filename)}},zoom:function(){h();var t,n;if(y(/^\[\s*zoom/g)&&(t=y(this.entities.comparison))&&(n=y(this.entities.variable)||y(this.entities.dimension))&&y("]"))return new e.Tree.Zoom(t,n,a);p()},block:function(){var e;if(y("{")&&(e=y(this.primary))&&y("}"))return e},ruleset:function(){var t,n,r=[];for(h();t=y(this.selector);){for(r.push(t);y(this.comment););if(!y(","))break;for(;y(this.comment););}if(t)for(;y(this.comment););if(r.length>0&&(n=y(this.block))){if(1===r.length&&r[0].elements.length&&"Map"===r[0].elements[0].value){var o=new e.Tree.Ruleset(r,n);return o.isMap=!0,o}return new e.Tree.Ruleset(r,n)}p()},rule:function(){var o,i,l=n.charAt(r);if(h(),"."!==l&&"#"!==l&&(o=y(this.variable)||y(this.property))){if((i=y(this.value))&&y(this.end))return new e.Tree.Rule(o,i,a,t.filename);s=r,p()}},font:function(){for(var t,n=[],r=[];t=y(this.entity);)r.push(t);if(n.push(new e.Tree.Expression(r)),y(","))for(;(t=y(this.expression))&&(n.push(t),y(",")););return new e.Tree.Value(n)},value:function(){for(var t,n=[];(t=y(this.expression))&&(n.push(t),y(",")););return n.length>1?new e.Tree.Value(n.map(function(e){return e.value[0]})):1===n.length?new e.Tree.Value(n):void 0},sub:function(){var e;if(y("(")&&(e=y(this.expression))&&y(")"))return e},multiplication:function(){var t,n,r,o;if(t=y(this.operand)){for(;(r=y("/")||y("*")||y("%"))&&(n=y(this.operand));)o=new e.Tree.Operation(r,[o||t,n],a);return o||t}},addition:function(){var t,o,i,s;if(t=y(this.multiplication)){for(;(i=y(/^[-+]\s+/)||" "!=n.charAt(r-1)&&(y("+")||y("-")))&&(o=y(this.multiplication));)s=new e.Tree.Operation(i,[s||t,o],a);return s||t}},operand:function(){return y(this.sub)||y(this.entity)},expression:function(){for(var t,n=[];t=y(this.addition)||y(this.entity);)n.push(t);if(n.length>0)return new e.Tree.Expression(n)},property:function(){var e=y(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}},{key:"parse",value:function(e){var t=this.parser;return this.ruleSet=t.parse(e)}},{key:"toShaders",value:function(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env);t.reverse();var n={},r=[];this._toShaders(n,r,t);for(var o=[],i={},a=0,s=t.length;a<s;++a){var l=t[a],u=l.attachment,c=n[r[a]],f=[];if(!i[u]){var h=0;for(var p in c)if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var d=(c[p].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:d})}else f[h++]=function(e,t){if(!Array.isArray(e))return e;var n=e.join("\n"),r='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=n.indexOf(r);if(o>=0){if(!t.featureFilter){var i=o+r.length,a=n.indexOf(")",i+1),s="featureId&&(featureId"+n.substring(i,a)+")";Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function(e){return!!s}})}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+n+";} return _value; ")}}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+n+"; return _value; ")}}(c[p],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:u}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:l.elements}),o.push(f),i[r[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:l.zoom})}return o}}return null}},{key:"_toShaders",value:function(t,n,r){for(var o=0,i=r.length;o<i;++o){for(var a=r[o],s=[],l=0,u=a.elements.length;l<u;l++)s.push(a.elements[l]);var c=a.filters.filters,f=[];for(var h in c)f.push(c[h].id);var p=s.join("/")+"::"+a.attachment+"_"+f.join("_");n.push(p);var d=t[p]=t[p]||{};d.zoom=e.Tree.Zoom.all;var y=a.toJS(this.env);for(var v in y)(d[v]=d[v]||[]).push(y[v].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),e}(),Ez={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};function Az(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Cz.mapnik_reference={version:{latest:Ez,"2.1.1":Ez}},Cz.Tree={},Cz.Tree.operate=function(e,t,n){switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"%":return t%n;case"/":return t/n}},Cz.Tree.functions={rgb:function(e,t,n){return this.rgba(e,t,n,1)},rgba:function(e,t,n,r){var o=this,i=[e,t,n].map(function(e){return o.number(e)});return r=o.number(r),i.some(isNaN)||isNaN(r)?null:new Cz.Tree.Color(i,r)},stop:function(e){var t,n;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]),{is:"tag",val:e,color:t,mode:n,toString:function(r){return'\n\t<stop value="'+e.ev(r)+'"'+(t?' color="'+t.ev(r)+'" ':"")+(n?' mode="'+n.ev(r)+'" ':"")+"/>"}}},hsl:function(e,t,n){return this.hsla(e,t,n,1)},hsla:function(e,t,n,r){if([e=this.number(e)%360/360,t=this.number(t),n=this.number(n),r=this.number(r)].some(isNaN))return null;var o=n<=.5?n*(t+1):n+t-n*t,i=2*n-o;return this.rgba(255*a(e+1/3),255*a(e),255*a(e-1/3),r);function a(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?i+(o-i)*e*6:2*e<1?o:3*e<2?i+(o-i)*(2/3-e)*6:i}},hue:function(e){return"toHSL"in e?new Cz.Tree.Dimension(Math.round(e.toHSL().h)):null},saturation:function(e){return"toHSL"in e?new Cz.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null},lightness:function(e){return"toHSL"in e?new Cz.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null},alpha:function(e){return"toHSL"in e?new Cz.Tree.Dimension(e.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.s+=t.value/100,n.s=this.clamp(n.s),this.hsla_simple(n)},desaturate:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.s-=t.value/100,n.s=this.clamp(n.s),this.hsla_simple(n)},lighten:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.l+=t.value/100,n.l=this.clamp(n.l),this.hsla_simple(n)},darken:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.l-=t.value/100,n.l=this.clamp(n.l),this.hsla_simple(n)},fadein:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.a+=t.value/100,n.a=this.clamp(n.a),this.hsla_simple(n)},fadeout:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.a-=t.value/100,n.a=this.clamp(n.a),this.hsla_simple(n)},spin:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL(),r=(n.h+t.value)%360;return n.h=r<0?360+r:r,this.hsla_simple(n)},replace:function(e,t,n){return"field"===e.is?e.toString+".replace("+t.toString()+", "+n.toString()+")":e.replace(t,n)},mix:function(e,t,n){var r=n.value/100,o=2*r-1,i=e.toHSL().a-t.toHSL().a,a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a,l=[e.rgb[0]*a+t.rgb[0]*s,e.rgb[1]*a+t.rgb[1]*s,e.rgb[2]*a+t.rgb[2]*s],u=e.alpha*r+t.alpha*(1-r);return new Cz.Tree.Color(l,u)},greyscale:function(e){return this.desaturate(e,new Cz.Tree.Dimension(100))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),n=e.value,r=0;r<t.length;r++)n=n.replace(/%s/,t[r].value).replace(/%[da]/,t[r].toString());return n=n.replace(/%%/g,"%"),new Cz.Tree.Quoted(n)},hsla_simple:function(e){return this.hsla(e.h,e.s,e.l,e.a)},number:function(e){return e instanceof Cz.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN},clamp:function(e){return Math.min(1,Math.max(0,e))}},Cz.Tree.Call=function(){function e(t,n,r){Pz(this,e),this.is="call",this.name=t,this.args=n,this.index=r}return kz(e,[{key:"ev",value:function(e){for(var t=this.args.map(function(t){return t.ev(e)}),n=0;n<t.length;n++)if("undefined"===t[n].is)return{is:"undefined",value:"undefined"};if(this.name in Cz.Tree.functions){if(Cz.Tree.functions[this.name].length<=t.length){var r=Cz.Tree.functions[this.name].apply(Cz.Tree.functions,t);return null===r?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+Cz.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=Cz.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var i=Sz()(Cz.Tree.Reference.mapnikFunctions),a=this.name,s=i.map(function(e){return[e[0],Cz.Tree.Reference.editDistance(a,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==t.length&&-1!==o?(e.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+t.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=t,this)}},{key:"toString",value:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),e}(),Cz.Tree.Color=function(){function e(t,n){Pz(this,e),this.is="color",Array.isArray(t)?this.rgb=t.slice(0,3):6==t.length?this.rgb=t.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=t.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof n?this.alpha=n:4===t.length?this.alpha=t[3]:this.alpha=1}return kz(e,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(e,t,n){var r=[];n instanceof Cz.Tree.Color||(n=n.toColor());for(var o=0;o<3;o++)r[o]=Cz.Tree.operate(t,this.rgb[o],n.rgb[o]);return new Cz.Tree.Color(r)}},{key:"toHSL",value:function(){var e,t,n=this.rgb[0]/255,r=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(n,r,o),s=Math.min(n,r,o),l=(a+s)/2,u=a-s;if(a===s)e=t=0;else{switch(t=l>.5?u/(2-a-s):u/(a+s),a){case n:e=(r-o)/u+(r<o?6:0);break;case r:e=(o-n)/u+2;break;case o:e=(n-r)/u+4}e/=6}return{h:360*e,s:t,l:l,a:i}}}]),e}(),Cz.Tree.Comment=function(){function e(t,n){Pz(this,e),this.value=t,this.silent=!!n}return kz(e,[{key:"toString",value:function(e){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),e}(),Cz.Tree.Definition=function(){function e(t,n){Pz(this,e),this.elements=t.elements,this.rules=n,this.ruleIndex={};for(var r=0;r<this.rules.length;r++)"zoom"in this.rules[r]&&(this.rules[r]=this.rules[r].clone()),this.rules[r].zoom=t.zoom,this.ruleIndex[this.rules[r].updateID()]=!0;this.filters=t.filters,this.zoom=t.zoom,this.attachment=t.attachment||"__default__",this.specificity=t.specificity()}return kz(e,[{key:"toString",value:function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e}},{key:"toJS",value:function(e){var t={},n=this.zoom,r=this.filters.toJS(e),o=[n];function i(n){if(n instanceof Cz.Tree.Rule)t[n.name]=t[n.name]||[],r?t[n.name].push("if("+r+"){"+n.value.toJS(e)+"}"):t[n.name].push(n.value.toJS(e));else if(n instanceof Cz.Tree.Ruleset){var o=n.toJS(e);for(var i in o)for(var a in t[i]=t[i]||[],o[i])t[i].push(o[i][a])}}for(var a in r&&o.push(r),r=o.join(" && "),this.rules)i(this.rules[a]);return t}}]),e}(),Cz.Tree.Dimension=function(){function e(t,n,r){Pz(this,e),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(t),this.unit=n||null,this.index=r}return kz(e,[{key:"ev",value:function(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new Cz.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(e,t,n){return"%"===this.unit&&"%"!==n.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===n.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new Cz.Tree.Dimension(Cz.Tree.operate(t,this.value,this.value*n.value*.01),this.unit):new Cz.Tree.Dimension(Cz.Tree.operate(t,this.value,n.value),this.unit||n.unit)}}]),e}(),Cz.Tree.Element=function(){function e(t){Pz(this,e),this.value=t.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return kz(e,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),e}(),Cz.Tree.Expression=function(){function e(t){Pz(this,e),this.is="expression",this.value=t}return kz(e,[{key:"ev",value:function(e){return this.value.length>1?new Cz.Tree.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)}},{key:"toString",value:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}]),e}(),Cz.Tree.Field=function(){function e(t){Pz(this,e),this.is="field",this.value=t||""}return kz(e,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),e}(),Cz.Tree.Filter=function(){function e(t,n,r,o,i){Pz(this,e),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=t,this.op=n,this.val=r,this.index=o,this.filename=i,this.id=this.key+this.op+this.val}return kz(e,[{key:"ev",value:function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),e}(),Cz.Tree.Filterset=function(){function e(){Pz(this,e),this.filters={}}return kz(e,[{key:"toJS",value:function(e){function t(e){var t=e.op;"="===t&&(t="==");var n=e.val;void 0!==e._val&&(n=e._val.toString(!0)),e.key&&"scale"===e.key.value?n=+n:"string"!=typeof n&&"object"!==Oz(n)||(n="'"+n+"'");var r="attributes";return r+"&&"+r+e.key+"&&"+r+e.key+" "+t+n}var n=[];for(var r in this.filters)n.push(t(this.filters[r]));return n.join(" && ")}},{key:"toString",value:function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")}},{key:"ev",value:function(e){for(var t in this.filters)this.filters[t].ev(e);return this}},{key:"clone",value:function(){var e=new Cz.Tree.Filterset;for(var t in this.filters)e.filters[t]=this.filters[t];return e}},{key:"cloneWith",value:function(e){var t=[];for(var n in e.filters){var r=this.addable(e.filters[n]);if(!1===r)return!1;!0===r&&t.push(e.filters[n])}if(!t.length)return null;var o=new Cz.Tree.Filterset;for(n in this.filters)o.filters[n]=this.filters[n];for(;n=t.shift();)o.add(n);return o}},{key:"addable",value:function(e){var t=e.key.toString(),n=e.val.toString();switch(n.match(/^[0-9]+(\.[0-9]*)?_match/)&&(n=parseFloat(n)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==n&&null:void 0===this.filters[t+"!="+n]&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n))));case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!==n&&null:void 0!==this.filters[t+"!="+n]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)||null));case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)||null));case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null));case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)||null))}}},{key:"conflict",value:function(e){var t=e.key.toString(),n=e.val.toString();return isNaN(parseFloat(n))||(n=parseFloat(n)),("="===e.op&&void 0!==this.filters[t+"="]&&n!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&n==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&n===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(e,t){var n,r=e.key.toString(),o=e.op,i=this.conflict(e);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===r&&delete this.filters[a];this.filters[r+"="]=e}else if("!="===o)this.filters[r+"!="+e.val]=e;else if("=~"===o)this.filters[r+"=~"+e.val]=e;else if(">"===o){for(var s in this.filters)this.filters[s].key===r&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[r+">"]=e}else if(">="===o){for(var l in this.filters)n=+this.filters[l].val.toString(),this.filters[l].key===r&&n<e.val&&delete this.filters[l];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op=">",this.filters[r+">"]=e):this.filters[r+">="]=e}else if("<"===o){for(var u in this.filters)n=+this.filters[u].val.toString(),this.filters[u].key===r&&n>=e.val&&delete this.filters[u];this.filters[r+"<"]=e}else if("<="===o){for(var c in this.filters)n=+this.filters[c].val.toString(),this.filters[c].key===r&&n>e.val&&delete this.filters[c];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op="<",this.filters[r+"<"]=e):this.filters[r+"<="]=e}}}]),e}(),Cz.Tree.Fontset=kz(function e(t,n){Pz(this,e),this.fonts=n,this.name="fontset-"+t.effects.length}),Cz.Tree.Invalid=function(){function e(t,n,r){Pz(this,e),this.is="invalid",this.chunk=t,this.index=n,this.type="syntax",this.message=r||"Invalid code: "+this.chunk}return kz(e,[{key:"ev",value:function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),e}(),Cz.Tree.Keyword=function(){function e(t){Pz(this,e),this.value=t;var n={transparent:"color",true:"boolean",false:"boolean"};this.is=n[t]?n[t]:"keyword"}return kz(e,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return this.value}}]),e}(),Cz.Tree.Literal=function(){function e(t){Pz(this,e),this.value=t||"",this.is="field"}return kz(e,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),e}(),Cz.Tree.Operation=function(){function e(t,n,r){Pz(this,e),this.is="operation",this.op=t.trim(),this.operands=n,this.index=r}return kz(e,[{key:"ev",value:function(e){var t,n=this.operands[0].ev(e),r=this.operands[1].ev(e);return"undefined"===n.is||"undefined"===r.is?{is:"undefined",value:"undefined"}:(n instanceof Cz.Tree.Dimension&&r instanceof Cz.Tree.Color&&("*"===this.op||"+"===this.op?(t=r,r=n,n=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),n instanceof Cz.Tree.Quoted&&r instanceof Cz.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n instanceof Cz.Tree.Field||r instanceof Cz.Tree.Field||n instanceof Cz.Tree.Literal||r instanceof Cz.Tree.Literal?"color"===n.is||"color"===r.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new Cz.Tree.Literal(n.ev(e).toString(!0)+this.op+r.ev(e).toString(!0)):void 0===n.operate?(e.error({message:"Cannot do math with type "+n.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n.operate(e,this.op,r))}}]),e}(),Cz.Tree.Quoted=function(){function e(t){Pz(this,e),this.is="string",this.value=t||""}return kz(e,[{key:"toString",value:function(e){var t=this.value.replace(/&/g,"&amp;"),n=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+n+"'":t}},{key:"ev",value:function(){return this}},{key:"operate",value:function(e,t,n){return new Cz.Tree.Quoted(Cz.Tree.operate(t,this.toString(),n.toString(this.contains_field)))}}]),e}(),Cz.Tree.Reference={_validateValue:{font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},setData:function(e){this.data=e,this.selector_cache=function(e){var t={};for(var n in e.symbolizers)for(var r in e.symbolizers[n])e.symbolizers[n][r].hasOwnProperty("css")&&(t[e.symbolizers[n][r].css]=[e.symbolizers[n][r],n,r]);return t}(e),this.mapnikFunctions=function(e){var t={};for(var n in e.symbolizers)for(var r in e.symbolizers[n])if("functions"===e.symbolizers[n][r].type)for(var o=0;o<e.symbolizers[n][r].functions.length;o++){var i=e.symbolizers[n][r].functions[o];t[i[0]]=i[1]}return t}(e),this.required_cache=function(e){var t={};for(var n in e.symbolizers)for(var r in t[n]=[],e.symbolizers[n])e.symbolizers[n][r].required&&t[n].push(e.symbolizers[n][r].css);return t}(e)},setVersion:function(e){return!!Cz.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(Cz.mapnik_reference.version[e]),!0)},selectorData:function(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t]},validSelector:function(e){return!!this.selector_cache[e]},selectorName:function(e){return this.selectorData(e,2)},selector:function(e){return this.selectorData(e,0)},symbolizer:function(e){return this.selectorData(e,1)},requiredProperties:function(e,t){var n=this.required_cache[e];for(var r in n)if(!(n[r]in t))return"Property "+n[r]+" required for defining "+e+" styles."},isFont:function(e){return"font"===this.selector(e).validate},editDistance:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var n=[],r=0;r<=t.length;r++)n[r]=[r];for(var o=0;o<=e.length;o++)n[0][o]=o;for(r=1;r<=t.length;r++)for(o=1;o<=e.length;o++)t.charAt(r-1)===e.charAt(o-1)?n[r][o]=n[r-1][o-1]:n[r][o]=Math.min(n[r-1][o-1]+1,Math.min(n[r][o-1]+1,n[r-1][o]+1));return n[t.length][e.length]},validValue:function(e,t,n){var r;if(this.selector(t)){if("keyword"===n.value[0].is)return function(e,t){return"object"===Oz(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type}(n,t);if("undefined"===n.value[0].is)return!0;if("numbers"===this.selector(t).type){for(r in n.value)if("float"!==n.value[r].is)return!1;return!0}if("tags"===this.selector(t).type){if(!n.value)return!1;if(!n.value[0].value)return"tag"===n.value[0].is;for(r=0;r<n.value[0].value.length;r++)if("tag"!==n.value[0].value[r].is)return!1;return!0}if("functions"==this.selector(t).type)return function(e,t){if("string"===e.value[0].is)return!0;for(var n in e.value)for(var r in e.value[n].value){if("call"!==e.value[n].value[r].is)return!1;var o=find(this.selector(t).functions,function(t){return t[0]===e.value[n].value[r].name});if(!(o&&-1===o[1]||o&&o[1]===e.value[n].value[r].args.length))return!1}return!0}(n,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===n.value[0].is&&(n.value[0].round(),!0);if(this.selector(t).validate){for(r=0;r<n.value.length;r++)if(this.selector(t).type===n.value[r].is&&this._validateValue[this.selector(t).validate](e,n.value[r].value))return!0;return!1}return this.selector(t).type===n.value[0].is}return!1}},Cz.Tree.Reference.setVersion("latest"),Cz.Tree.Rule=function(){function e(t,n,r,o){Pz(this,e),this.is="rule";var i=t.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=n instanceof Cz.Tree.Value?n:new Cz.Tree.Value([n]),this.index=r,this.symbolizer=Cz.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===t.charAt(0)}return kz(e,[{key:"clone",value:function(){var e=Object.create(Cz.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+Cz.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(e){return new Cz.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename)}}]),e}(),Cz.Tree.Ruleset=function(){function e(t,n){Pz(this,e),this.is="ruleset",this.selectors=t,this.rules=n,this._lookups={}}return kz(e,[{key:"ev",value:function(e){var t,n,r=new Cz.Tree.Ruleset(this.selectors,this.rules.slice(0));for(r.root=this.root,e.frames.unshift(r),t=0;t<r.rules.length;t++)n=r.rules[t],r.rules[t]=n.ev?n.ev(e):n;return e.frames.shift(),r}},{key:"match",value:function(e){return!e||0===e.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof Cz.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e},{})}},{key:"variable",value:function(e){return this.variables()[e]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof Cz.Tree.Ruleset})}},{key:"find",value:function(e,t){t=t||this;var n=[],r=e.toString();return r in this._lookups?this._lookups[r]:(this.rulesets().forEach(function(r){if(r!==t)for(var o=0;o<r.selectors.length;o++)if(e.match(r.selectors[o])){e.elements.length>1?Array.prototype.push.apply(n,r.find(new Cz.Tree.Selector(null,null,e.elements.slice(1)),t)):n.push(r);break}}),this._lookups[r]=n)}},{key:"evZooms",value:function(e){for(var t=0;t<this.selectors.length;t++){for(var n=Cz.Tree.Zoom.all,r=0;r<this.selectors[t].zoom.length;r++)n=this.selectors[t].zoom[r].ev(e).zoom;this.selectors[t].zoom=n}}},{key:"flatten",value:function(e,t,n){var r,o,i=[];for(0===this.selectors.length&&(n.frames=n.frames.concat(this.rules)),this.evZooms(n),r=0;r<this.selectors.length;r++){var a=this.selectors[r];if(a.filters)if(t.length)for(o=0;o<t.length;o++){var s=t[o],l=s.filters.cloneWith(a.filters);if(null===l){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){i.push(s);continue}l=s.filters}else if(!l)continue;var u=Object.create(Cz.Tree.Selector.prototype);u.filters=l,u.zoom=a.zoom,u.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?u.attachment=s.attachment+"/"+a.attachment:u.attachment=a.attachment||s.attachment,u.conditions=s.conditions+a.conditions,u.index=a.index,i.push(u)}else i.push(a)}var c=[];for(r=0;r<this.rules.length;r++){var f=this.rules[r];f instanceof Cz.Tree.Ruleset?f.flatten(e,i,n):f instanceof Cz.Tree.Rule?c.push(f):f instanceof Cz.Tree.Invalid&&n.error(f)}var h=!!c.length&&c[0].index;for(r=0;r<i.length;r++)!1!==h&&(i[r].index=h),e.push(new Cz.Tree.Definition(i[r],c.slice()));return e}}]),e}(),Cz.Tree.Selector=function(){function e(t,n,r,o,i,a){Pz(this,e),this.elements=r||[],this.attachment=o,this.filters=t||{},this.zoom=void 0!==n?n:Cz.Tree.Zoom.all,this.conditions=i,this.index=a}return kz(e,[{key:"specificity",value:function(){return this.elements.reduce(function(e,t){var n=t.specificity();return e[0]+=n[0],e[1]+=n[1],e},[0,0,this.conditions,this.index])}}]),e}(),Cz.Tree.URL=function(){function e(t,n){Pz(this,e),this.is="uri",this.value=t,this.paths=n}return kz(e,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(e){return new Cz.Tree.URL(this.value.ev(e),this.paths)}}]),e}(),Cz.Tree.Value=function(){function e(t){Pz(this,e),this.is="value",this.value=t}return kz(e,[{key:"ev",value:function(e){return 1===this.value.length?this.value[0].ev(e):new Cz.Tree.Value(this.value.map(function(t){return t.ev(e)}))}},{key:"toJS",value:function(e){var t=this.ev(e),n=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?n="'"+n+"'":"field"===t.is?n=n.replace(/\[(.*)\]/g,"attributes['_match1']"):t.value&&"object"===Oz(t.value)&&(n="["+n+"]"),"_value = "+n+";"}},{key:"toString",value:function(e,t,n,r){return this.value.map(function(t){return t.toString(e,r)}).join(n||", ")}},{key:"clone",value:function(){var e=Object.create(Cz.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e}}]),e}(),Cz.Tree.Variable=function(){function e(t,n,r){Pz(this,e),this.is="variable",this.name=t,this.index=n,this.filename=r}return kz(e,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(e){if(this._css)return this._css;var t=e.frames.filter(function(e){return e.name===this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),e}(),Cz.Tree.Zoom=function(){function e(t,n,r){Pz(this,e),this.op=t,this.value=n,this.index=r}return kz(e,[{key:"setZoom",value:function(e){return this.zoom=e,this}},{key:"ev",value:function(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>Cz.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+Cz.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t}return this}},{key:"toString",value:function(){for(var e="",t=0;t<=Cz.Tree.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}}]),e}(),Cz.Tree.Zoom.all=23,Cz.Tree.Zoom.maxZoom=22,Cz.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Mz=function(e,t,n){return t&&Az(e.prototype,t),n&&Az(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,w.extend(this,t)});function Rz(e){"@babel/helpers - typeof";return(Rz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jz(){return(jz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nz(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Lz(e,t){return(Lz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Nz(e);if(t){var o=Nz(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Rz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Nz(e){return(Nz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Bz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lz(e,t)}(i,wr);var t,n,r,o=Dz(i);function i(e,t,n,r,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,t,n,r,a,s)).shapeFactory=new zc,l.shapeParameters=null,l.RelativeCoordinate=!1,l.setting=null,l.origonPoint=null,l.chartBox=null,l.chartBounds=null,l.width=null,l.height=null,l.XOffset=0,l.YOffset=0,l.DVBParameter=null,l.dataViewBox=null,l.DVBCodomain=null,l.DVBCenterPoint=null,l.DVBUnitValue=null,l.DVBOrigonPoint=null,l.DVBWidth=null,l.DVBHeight=null,l.origonPointOffset=null,l.fields=n||[],l.dataValues=null,l.lonlat=a||l.data.geometry.getBounds().getCenterLonLat(),r&&r.width&&r.height&&r.codomain&&(l.setting=r),l.CLASS_NAME="SuperMap.Feature.Theme.Graph",l}return t=i,(n=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,jz(Nz(i.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,n=wr.getDataValues(this.data,this.fields,t);this.dataValues=n||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var r=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-r/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+r,a[1]];var s=this.chartBox,l=this.DVBParameter;this.dataViewBox=[s[0]+l[0],s[1]-l[1],s[2]-l[2],s[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3])&&(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(e){e&&(this.lonlat=e);var t=this.getLocalXY(this.lonlat);t[0]+=this.XOffset,t[1]+=this.YOffset,this.location=t;var n=this.width,r=this.height,o=this.location;return this.chartBounds=new Oe(o[0]-n/2,o[1]+r/2,o[0]+n/2,o[1]-r/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var e=this.shapes,t=this.location,n=0,r=e.length;n<r;n++){e[n].refOriginalPosition=t;var o=e[n].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,l=a.length;s<l;s++)a[s][0]-=t[0],a[s][1]-=t[1];break;case"x":o[i]-=t[0];break;case"y":o[i]-=t[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&Iz(t.prototype,n),r&&Iz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Fz(e){"@babel/helpers - typeof";return(Fz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zz(){return(zz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wz(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Vz(e,t){return(Vz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Wz(e);if(t){var o=Wz(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Fz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Wz(e){return(Wz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/wr.getDataValues=function(e,t,n){if(!e.attributes)return!1;for(var r=[],o=e.attributes,i=0;i<t.length;i++)for(var a in o)if(a===t[i])try{!isNaN(n)&&n>=0?r.push(parseFloat(o[a].toString()).toFixed(n)):r.push(parseFloat(o[a].toString()))}catch(e){throw new Error("not a number")}return r.length===t.length&&r};var Uz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vz(e,t)}(i,Bz);var t,n,r,o=Hz(i);function i(e,t,n,r,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,n,r,a)).CLASS_NAME="SuperMap.Feature.Theme.Bar",s}return t=i,(n=[{key:"destroy",value:function(){zz(Wz(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if(t.barLinearGradient||(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<n[0]||o[i]>n[1])return;var s=this.calculateXShapeInfo();if(s){var l=s.xPositions,u=s.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(zc.Background(this.shapeFactory,this.chartBox,t)),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(zc.GraphAxis(this.shapeFactory,r,t,s)));for(var c=0;c<o.length;c++){var f=r[1]-(o[c]-n[0])/this.DVBUnitValue,h=[[l[c]-u/2,r[1]-1],[l[c]+u/2,r[1]-1],[l[c]+u/2,f],[l[c]-u/2,f]],p=new uu(h);if(void 0===t.showShadow||t.showShadow){if(t.barShadowStyle){var d=t.barShadowStyle;d.shadowBlur&&(e.shadowBlur=d.shadowBlur),d.shadowColor&&(e.shadowColor=d.shadowColor),d.shadowOffsetX&&(e.shadowOffsetX=d.shadowOffsetX),d.shadowOffsetY&&(e.shadowOffsetY=d.shadowOffsetY)}p.style={},w.copyAttributesWithClip(p.style,e)}p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:o[c]},void 0!==t.barHoverAble&&(p.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(p.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var o=[],i=0,a=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){var s=a-((e=n.xShapeBlank)[0]+e[2]+(r-1)*e[1]);if(s<=r)return null;i=s/r}else e=[i=a/(2*r+1),i,i];for(var l=0,u=0;u<r;u++)0==u?l=e[0]+i/2:l+=i+e[1],o.push(t[0]+l);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,n=-1,r=0;r<e;r++){var o=this.shapes[r];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++n>=t.length&&(n%=t.length);var l=t[n][0],u=t[n][1],c=(new Lr).getLinearGradient(a,0,s,0,[[0,l],[1,u]]);o.style.color=c}}}}])&&Gz(t.prototype,n),r&&Gz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Jz(e){"@babel/helpers - typeof";return(Jz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yz(){return(Yz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qz(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function Xz(e,t){return(Xz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Qz(e);if(t){var o=Qz(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Jz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qz(e){return(Qz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Kz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xz(e,t)}(i,Bz);var t,n,r,o=Zz(i);function i(e,t,n,r,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,n,r,a)).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",s}return t=i,(n=[{key:"destroy",value:function(){Yz(Qz(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow=void 0===e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset=void 0!==e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain;this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight;var n=this.dataViewBox,r=this.dataValues;if(!(r.length<1)){for(var o=0,i=r.length;o<i;o++)if(r[o]<t[0]||r[o]>t[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,l=a.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(zc.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(zc.GraphAxis(this.shapeFactory,n,e,a)));for(var u=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10,c=0;c<r.length;c++){var f=n[1]-(r[c]-t[0])/this.DVBUnitValue,h=s[c]-l/2,p=s[c]+l/2,d=[[h,f],[p,f],[p-u,f+u],[h-u,f+u]],y=[[p,f],[p-u,f+u],[p-u,n[1]+u],[p,n[1]]],v=[[h-u,n[1]+u],[p-u,n[1]+u],[p-u,f+u],[h-u,f+u]];u<=0&&(v=[[h,n[1]],[p,n[1]],[p,f],[h,f]]);var g=new uu(d),m=new uu(y),b=new uu(v);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain,b.style=zc.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,c,r[c]),m.style=zc.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,c,r[c]),g.style=zc.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,c,r[c]),e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle,b.highlightStyle=zc.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),m.highlightStyle=zc.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),g.highlightStyle=zc.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),g.refDataID=m.refDataID=b.refDataID=this.data.id,g.isHoverByRefDataID=m.isHoverByRefDataID=b.isHoverByRefDataID=!0,g.refDataHoverGroup=m.refDataHoverGroup=b.refDataHoverGroup=w.createUniqueID("lr_shg"),g.dataInfo=m.dataInfo=b.dataInfo={field:this.fields[c],value:r[c]},void 0!==e.barHoverAble&&(g.hoverable=m.hoverable=b.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(g.clickable=m.clickable=b.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(g)),this.shapes.push(this.shapeFactory.createShape(b))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var o=[],i=0,a=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){var s=a-((e=n.xShapeBlank)[0]+e[2]+(r-1)*e[1]);if(s<=r)return null;i=s/r}else e=[i=a/(2*r+1),i,i];for(var l=0,u=0;u<r;u++)0==u?l=e[0]+i/2:l+=i+e[1],o.push(t[0]+l);return{xPositions:o,width:i}}}])&&qz(t.prototype,n),r&&qz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function $z(e){"@babel/helpers - typeof";return($z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tV(){return(tV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oV(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function nV(e,t){return(nV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=oV(e);if(t){var o=oV(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function oV(e){return(oV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var iV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nV(e,t)}(i,Bz);var t,n,r,o=rV(i);function i(e,t,n,r,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,t,n,r,a,s)).setting=null,r&&r.codomain&&(l.setting=r,l.DVBCodomain=l.setting.codomain),l.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",l}return t=i,(n=[{key:"destroy",value:function(){this.setting=null,tV(oV(i.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var t=this.width,n=this.height,r=this.location;this.origonPoint=[r[0]-t/2,r[1]-n/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+n,o[0]+t,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&eV(t.prototype,n),r&&eV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function aV(e){"@babel/helpers - typeof";return(aV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lV(){return(lV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fV(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function uV(e,t){return(uV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=fV(e);if(t){var o=fV(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===aV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fV(e){return(fV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var hV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uV(e,t)}(i,iV);var t,n,r,o=cV(i);function i(e,t,n,r,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,n,r,a)).CLASS_NAME="SuperMap.Feature.Theme.Circle",s}return t=i,(n=[{key:"destroy",value:function(){lV(fV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,n=wr.getDataValues(this.data,this.fields,t);this.dataValues=n||[];var r=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=e.maxR/(o[1]-o[0]):this.DVBUnitValue=e.maxR;var i=this.DVBUnitValue,a=r[0]*i+e.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(r[0]<o[0]||r[0]>o[1]))){var s=this.DVBCenterPoint,l=new Wu(s[0],s[1],a);l.style=zc.ShapeStyleTool(null,e.circleStyle,null,null,0),void 0!==e.fillColor?l.style.fillColor=e.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=zc.ShapeStyleTool(null,e.circleHoverStyle),void 0!==e.circleHoverAble&&(l.hoverable=e.circleHoverAble),void 0!==e.circleClickAble&&(l.clickable=e.circleClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[0],r:a,value:r[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}])&&sV(t.prototype,n),r&&sV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function pV(e){"@babel/helpers - typeof";return(pV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yV(){return(yV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mV(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function vV(e,t){return(vV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=mV(e);if(t){var o=mV(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function mV(e){return(mV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var bV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vV(e,t)}(i,Bz);var t,n,r,o=gV(i);function i(e,t,n,r,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,t,n,r,a,s)).CLASS_NAME="SuperMap.Feature.Theme.Line",l}return t=i,(n=[{key:"destroy",value:function(){yV(mV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,l=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(zc.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(zc.GraphAxis(this.shapeFactory,t,e,i));for(var u=[],c=[],f=0,h=o.length;f<h;f++){if(o[f]<n[0]||o[f]>n[1])return null;a=l[f],s=t[1]-(o[f]-n[0])/r;var p=new Xl(a,s);p.style=zc.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,f,o[f]),p.highlightStyle=zc.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(p.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(p.clickable=e.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(p));var d=[a,s];u.push(d)}var y=new nu(u);y.style=zc.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),y.clickable=!1,y.hoverable=!1;var v=this.shapeFactory.createShape(y);this.shapes.push(v),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var o=[],i=this.DVBWidth,a=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){var s=i-((e=n.xShapeBlank)[0]+e[1]);if(s<=r)return null;a=s/(r-1)}else e=[a=i/(r+1),a,a];for(var l=0,u=0;u<r;u++)0==u?l=e[0]:l+=a,o.push(t[0]+l);return{xPositions:o,width:0}}}])&&dV(t.prototype,n),r&&dV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function wV(e){"@babel/helpers - typeof";return(wV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xV(){return(xV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PV(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function SV(e,t){return(SV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function OV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=PV(e);if(t){var o=PV(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===wV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function PV(e){return(PV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var TV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SV(e,t)}(i,Bz);var t,n,r,o=OV(i);function i(e,t,n,r,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,n,r,a)).CLASS_NAME="SuperMap.Feature.Theme.Pie",s}return t=i,(n=[{key:"destroy",value:function(){xV(PV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(zc.Background(this.shapeFactory,this.chartBox,e));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,o=0;o<n.length;o++)if(n[o]<r[0]||n[o]>r[1])return;for(var i=0,a=0;a<n.length;a++)i+=Math.abs(n[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<n.length;p++){var d=Math.abs(n[p]);(c=0===p?u+d*s:p===d.length-1?f:u+d*s)-u>=360&&(c=359.9999999);var y=new Su(l[0],l[1],h,u,c);if(void 0===e.sectorStyleByFields){var v=p%t.length;y.style=zc.ShapeStyleTool(null,e.sectorStyle,t,null,v)}else y.style=zc.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,p,n[p]);y.highlightStyle=zc.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(y.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(y.clickable=e.sectorClickAble),y.refDataID=this.data.id,y.dataInfo={field:this.fields[p],value:n[p]},this.shapes.push(this.shapeFactory.createShape(y)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&_V(t.prototype,n),r&&_V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function kV(e){"@babel/helpers - typeof";return(kV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EV(){return(EV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RV(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function AV(e,t){return(AV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function MV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=RV(e);if(t){var o=RV(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function RV(e){return(RV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var IV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AV(e,t)}(i,Bz);var t,n,r,o=MV(i);function i(e,t,n,r,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,t,n,r,a,s)).CLASS_NAME="SuperMap.Feature.Theme.Point",l}return t=i,(n=[{key:"destroy",value:function(){EV(RV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,l=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(zc.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(zc.GraphAxis(this.shapeFactory,t,e,i));for(var u=0,c=o.length;u<c;u++){if(o[u]<n[0]||o[u]>n[1])return null;a=l[u],s=t[1]-(o[u]-n[0])/r;var f=new Xl(a,s);f.style=zc.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,u,o[u]),f.highlightStyle=zc.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(f.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(f.clickable=e.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[u],value:o[u]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var o=[],i=this.DVBWidth,a=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){var s=i-((e=n.xShapeBlank)[0]+e[1]);if(s<=r)return null;a=s/(r-1)}else e=[a=i/(r+1),a,a];for(var l=0,u=0;u<r;u++)0==u?l=e[0]:l+=a,o.push(t[0]+l);return{xPositions:o,width:0}}}])&&CV(t.prototype,n),r&&CV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jV(e){"@babel/helpers - typeof";return(jV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DV(){return(DV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=FV(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function NV(e,t){return(NV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function BV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=FV(e);if(t){var o=FV(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function FV(e){return(FV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var GV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NV(e,t)}(i,Bz);var t,n,r,o=BV(i);function i(e,t,n,r,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,n,r,a)).CLASS_NAME="SuperMap.Feature.Theme.Ring",s}return t=i,(n=[{key:"destroy",value:function(){DV(FV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting;t.useBackground&&this.shapes.push(zc.Background(this.shapeFactory,this.chartBox,t));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,o=0;o<n.length;o++)if(n[o]<r[0]||n[o]>r[1])return;for(var i=0,a=0;a<n.length;a++)i+=Math.abs(n[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=t.innerRingRadius>=0&&t.innerRingRadius<h,d=void 0!==t.innerRingRadius&&!isNaN(t.innerRingRadius)&&p?t.innerRingRadius:0,y=0;y<n.length;y++){var v=Math.abs(n[y]);c=0===y?u+v*s:y===v.length-1?f:u+v*s;var g=new Su(l[0],l[1],h,u,c,d);if(void 0===t.sectorStyleByFields){var m=y%e.length;g.style=zc.ShapeStyleTool(null,t.sectorStyle,e,null,m)}else g.style=zc.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,y,n[y]);g.highlightStyle=zc.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(g.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(g.clickable=t.sectorClickAble),g.refDataID=this.data.id,g.dataInfo={field:this.fields[y],value:n[y]},this.shapes.push(this.shapeFactory.createShape(g)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&LV(t.prototype,n),r&&LV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zV="EXCEL",VV="CSV",HV="GEOJSON",WV="JSON";function UV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var JV=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initView()}var t,n,r;return t=e,(n=[{key:"_initView",value:function(){var e=document.createElement("div");e.hidden=!0,e.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var t=document.createElement("div");t.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),t.appendChild(this.icon),e.appendChild(t);var n=document.createElement("div");n.setAttribute("class","component-messagebox"),n.innerHTML="",e.appendChild(n),this.messageBox=n;var r=document.createElement("div");r.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),r.appendChild(o),e.appendChild(r),this.messageBoxContainer=e,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===t?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===t?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===t&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=e,this.messageBoxContainer.hidden=!1}}])&&UV(t.prototype,n),r&&UV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),qV=function(){try{return echarts}catch(e){return{}}}(),YV=n.n(qV),XV={"en-US":{title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failureï¼",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},"zh-CN":{title_dataFlowService:"æ°æ®æµæå¡",title_distributedAnalysis:"åå¸å¼åæ",title_clientComputing:"å®¢æ·ç«¯è®¡ç®",title_dataServiceQuery:"æ°æ®æå¡æ¥è¯¢",title_searchCity:"æç´¢åå¸",title_searchLayer:"æç´¢å¾å±",text_input_value_inputDataFlowUrl:"è¯·è¾å¥æ°æ®æµæå¡å°åå¦:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"æ¾ç¤ºè¦ç´ ä¿¡æ¯",text_subscribe:"è®¢é",text_cancelSubscribe:"åæ¶è®¢é",text_densityAnalysis:"å¯åº¦åæ",text_CalculateTheValuePerUnitArea:"è®¡ç®ç¹æå®é»åå½¢ç¶åçæ¯åä½é¢ç§¯éå¼",text_option_selectDataset:"è¯·éæ©æ°æ®é",text_label_dataset:"æ°æ®é",text_option_simplePointDensityAnalysis:"ç®åç¹å¯åº¦åæ",text_option_nuclearDensityAnalysis:"æ ¸å¯åº¦åæ",text_label_analyticalMethod:"åææ¹æ³",text_option_quadrilateral:"åè¾¹å½¢",text_option_hexagon:"å­è¾¹å½¢",text_label_meshType:"ç½æ ¼é¢ç±»å",text_option_notSet:"æªè®¾ç½®",text_label_weightField:"æéå­æ®µ",text_label_gridSizeInMeters:"ç½æ ¼å¤§å°",text_label_searchRadius:"æç´¢åå¾",text_label_queryRange:"åæèå´",text_label_areaUnit:"é¢ç§¯åä½",text_option_equidistantSegmentation:"ç­è·ç¦»åæ®µ",text_option_logarithm:"å¯¹æ°",text_option_equalCountingSegment:"ç­è®¡æ°åæ®µ",text_option_squareRootSegmentation:"å¹³æ¹æ ¹åæ®µ",text_label_thematicMapSegmentationMode:"ä¸é¢å¾åæ®µæ¨¡å¼",text_label_thematicMapSegmentationParameters:"ä¸é¢å¾åæ®µåæ°",text_option_greenOrangePurpleGradient:"ç»¿æ©ç´«æ¸å",text_option_greenOrangeRedGradient:"ç»¿æ©çº¢æ¸å",text_option_rainbowGradient:"å½©è¹æ¸å",text_option_spectralGradient:"åè°±æ¸å",text_option_terrainGradient:"å°å½¢æ¸å",text_label_thematicMapColorGradientMode:"ä¸é¢å¾é¢è²æ¸åæ¨¡å¼",text_label_resultLayerName:"ç»æå¾å±åç§°",text_chooseFile:"éæ©æä»¶",text_isoline:"ç­å¼çº¿",text_extractDiscreteValue:"æåç¦»æ£å¼çææ²çº¿",text_buffer:"ç¼å²åº",text_specifyTheDistance:"æå®è·ç¦»åå»ºå¨è¾¹åºå",text_label_analysisLayer:"åæå¾å±",text_label_extractField:"æåå­æ®µ",text_label_extractedValue:"æåå¼",text_label_distanceAttenuation:"è·ç¦»è¡°å",text_label_gridSize:"æ æ ¼å¤§å°",text_label_bufferRadius:"ç¼å²åå¾",text_label_defaultkilometers:"é»è®¤10åç±³",text_option_kilometer:"åç±³",text_label_unit:"åä½",text_retainOriginal:"ä¿çåå¯¹è±¡å­æ®µå±æ§",text_mergeBuffer:"åå¹¶ç¼å²åº",text_label_color:"é¢è²",text_label_buffer:"[ç¼å²åº]",text_label_isolines:"[ç­å¼çº¿]",text_label_queryRangeTips:"é»è®¤ä¸ºè¾å¥æ°æ®çå¨å¹èå´ãèä¾ï¼-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"è¦ç´  ID æ°ç»",text_label_maxFeatures:"æå¤å¯è¿åçè¦ç´ æ°é",text_label_bufferDistance:"ç¼å²åºè·ç¦»",text_label_queryRange1:"æ¥è¯¢èå´",text_label_spatialQueryMode:"ç©ºé´æ¥è¯¢æ¨¡å¼",text_label_featureFilter:"è¦ç´ è¿æ»¤å¨",text_label_geometricObject:"å ä½å¯¹è±¡",text_label_queryMode:"æ¥è¯¢æ¨¡å¼",text_label_searchTips:"æç´¢åå¸å°ç¹æå¾å±è¦ç´ ",text_label_chooseSearchLayers:"éæ©æ¥è¯¢å¾å±",text_loadSearchCriteria:"å è½½æç´¢æ¡ä»¶",text_saveSearchCriteria:"ä¿å­æç´¢æ¡ä»¶",btn_analyze:"åæ",btn_analyzing:"åæä¸­",btn_emptyTheAnalysisLayer:"æ¸ç©ºåæå¾å±",btn_cancelAnalysis:"åæ¶",btn_query:"æ¥è¯¢",btn_querying:"æ¥è¯¢ä¸­",btn_emptyTheRresultLayer:"æ¸é¤ææç»æå¾å±",msg_dataFlowServiceHasBeenSubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_inputDataFlowUrlFirst:"è¯·åè¾å¥æ°æ®æµæå¡å°åã",msg_datasetOrMethodUnsupport:"è¯¥æ°æ®éä¸æ¯ææ¬åæç±»åï¼è¯·éæ°éæ©æ°æ®é",msg_selectDataset:"è¯·éæ©æ°æ®éï¼",msg_setTheWeightField:"è¯·è®¾ç½®æéå­æ®µï¼",msg_theFieldNotSupportAnalysis:"æ¨å½åéæ©çå­æ®µä¸æ¯æåæï¼",msg_resultIsEmpty:"åæçç»æä¸ºç©ºï¼",msg_dataReturnedIsEmpty:"è¯·æ±æåï¼æ¥è¯¢è¿åçæ°æ®ä¸ºç©ºã",msg_openFileFail:"æå¼æä»¶å¤±è´¥ï¼",msg_fileTypeUnsupported:"ä¸æ¯æè¯¥æä»¶æ ¼å¼ï¼",msg_fileSizeExceeded:"æä»¶å¤§å°è¶éï¼æä»¶å¤§å°ä¸å¾è¶è¿ 10Mï¼",msg_dataInWrongGeoJSONFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç GEOJSON æ ¼å¼æ°æ®ï¼",msg_dataInWrongFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç EXCEL, CSV æ GEOJSON æ ¼å¼æ°æ®ï¼",msg_searchKeywords:"æç´¢å³é®å­ä¸è½ä¸ºç©ºï¼è¯·è¾å¥æç´¢æ¡ä»¶ã",msg_searchGeocodeField:"æªå¹éå°å°åå¹éæå¡æ°æ®ï¼",msg_cityGeocodeField:"æªéç½®å½ååå¸çå°åå¹éæå¡ã",msg_getFeatureField:"æªæ¥æ¾å°ç¸å³ç¢éè¦ç´ ï¼",msg_dataflowservicesubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_subscribesucceeded:"æ°æ®æµæå¡è®¢éæåã",msg_crsunsupport:"ä¸æ¯æå½åå°å¾çåæ ç³»",msg_tilematrixsetunsupport:"ä¸æ¯æä¼ å¥çTileMatrixSet",msg_jsonResolveFiled:"jsonæ ¼å¼è§£æå¤±è´¥ï¼",msg_requestContentFiled:"éè¿iportalè¯·æ±æ°æ®å¤±è´¥ï¼",msg_getdatafailed:"è·åæ°æ®å¤±è´¥ï¼"},code:null,defaultCode:"en-US",getCode:function(){return XV.code||XV.setCode(),XV.code},setCode:function(){var e=this.getLanguageFromCookie();e?XV.code=e:(e=XV.defaultCode,0===(e="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage).indexOf("zh")&&(e="zh-CN"),0===e.indexOf("en")&&(e="en-US"),XV.code=e)},getLanguageFromCookie:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var n=e[t];" "===n.charAt(0);)n=n.substring(1);if(-1!==n.indexOf("language="))return n.substring("language=".length,n.length)}return""},i18n:function(e){var t=XV[XV.getCode()],n=t&&t[e];return n||(n=e),n}},ZV=function(){try{return XLSX}catch(e){return{}}}(),QV={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(e,t,n,r,o){WV===e||HV===e?this.readTextFile(t,n,r,o):zV!==e&&VV!==e||this.readXLSXFile(t,n,r,o)},readTextFile:function(e,t,n,r){var o=new FileReader;o.onloadend=function(e){t&&t.call(r,e.target.result)},o.onerror=function(e){n&&n.call(r,e)},this.rAT?o.readAsText(e.file,"utf-8"):o.readAsBinaryString(e.file)},readXLSXFile:function(e,t,n,r){var o=new FileReader;o.onloadend=function(e){var o=new Uint8Array(e.target.result),i=ZV.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=ZV.utils.sheet_to_csv(i.Sheets[a]);t&&t.call(r,s)}}catch(e){n&&n.call(r,e)}},o.onerror=function(e){n&&n.call(r,e)},this.rABF&&o.readAsArrayBuffer(e.file)},processDataToGeoJson:function(e,t,n,r,o){var i=null;if("EXCEL"===e||"CSV"===e)i=this.processExcelDataToGeoJson(t),n&&n.call(o,i);else if("JSON"===e||"GEOJSON"===e){var a=t;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:r&&r.call(o,XV.i18n("msg_dataInWrongGeoJSONFormat")),n&&n.call(o,i)}else r&&r.call(o,XV.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(e){for(var t=this.string2Csv(e),n=t.colTitles,r=-1,o=-1,i=0,a=n.length;i<a;i++)this.isXField(n[i])&&(r=i),this.isYField(n[i])&&(o=i);for(var s=[],l=0,u=t.rows.length;l<u;l++){var c=t.rows[l],f=Number(c[r]),h=Number(c[o]),p={};for(var d in t.colTitles){p[t.colTitles[d]]=t.rows[l][d]}var y={type:"Feature",geometry:{type:"Point",coordinates:[f,h]},properties:p};s.push(y)}return s},isXField:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"ç»åº¦"===t||"ä¸ç»"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t||"xåæ "===t},isYField:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"çº¬åº¦"===t||"åçº¬"===t||"latitude"===t||"lat"===t||"yåæ "===t},string2Csv:function(e,t){var n=e.split("\n"),r={};r.colTitles=t?[]:n[0].split(","),r.rows=[];for(var o=t?0:1;o<n.length;o++)n[o]&&r.rows.push(n[o].split(","));return r}};function KV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $V=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t,this.EVENT_TYPES=["getdatafailed"],this.events=new To(this,null,this.EVENT_TYPES)}var t,n,r;return t=e,(n=[{key:"getDatasetInfo",value:function(e){var t=this.datasets.url,n=this;cp.get(t).then(function(e){return e.json()}).then(function(t){if(t.datasetInfo){var r=t.datasetInfo;n.datasetsInfo={dataSourceName:r.dataSourceName,datasetName:r.name,mapName:t.name},e({result:n.datasetsInfo})}}).catch(function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDataFeatures",value:function(e,t){var n,r,o=e.result,i={name:o.datasetName+"@"+o.dataSourceName};Object.assign(i,this.datasets.queryInfo),n=new og(i),r=new Eg({queryParameter:n,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new Dg(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(r)}},{key:"getLayerFeatures",value:function(e,t){var n,r,o=e.result,i={name:o.mapName};Object.assign(i,this.datasets.queryInfo),n=new og(i),r=new $E({queryParams:[n],expectCount:1e5}),new aA(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(r)}},{key:"getDataInfoByIptl",value:function(e){this.getServiceInfo(this.datasets.url,e)}},{key:"getServiceInfo",value:function(e,t){var n=this;cp.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(r){var o;!1!==r.succeed?r.dataItemServices&&r.dataItemServices.length>0?(r.dataItemServices.forEach(function(r){if("RESTDATA"===r.serviceType&&"PUBLISHED"===r.serviceStatus)o=r;else{if("RESTMAP"!==r.serviceType||"PUBLISHED"!==r.serviceStatus)return void n.getDatafromContent(e,t);o=r}}),o&&n.getDatafromRest(o.serviceType,o.address,t)):n.getDatafromContent(e,t):n._fireFailedEvent(r)}).catch(function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDatafromContent",value:function(e,t){var n=this,r={result:{}},o=this;e+="/content.json?pageSize=9999999&currentPage=1",cp.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(e){if(!1!==e.succeed){if(e.type){if("JSON"===e.type||"GEOJSON"===e.type){if(e.content=JSON.parse(e.content.trim()),!e.content.features)return void console.log(XV.i18n("msg_jsonResolveFiled"));var i=n._formatGeoJSON(e.content);r.result.features={type:e.content.type,features:i}}else if("EXCEL"===e.type||"CSV"===e.type){var a=n._excelData2Feature(e.content);r.result.features={type:"FeatureCollection",features:a}}t(r,"content")}}else o._fireFailedEvent(e)},this).catch(function(e){console.log(e),o._fireFailedEvent(e)})}},{key:"getDatafromRest",value:function(e,t,n){var r=this,o=this.datasets.withCredentials;if("RESTDATA"===e){var i,a,s="".concat(t,"/data/datasources");cp.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){i=e.datasourceNames[0],s="".concat(t,"/data/datasources/").concat(i,"/datasets"),cp.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return a=e.datasetNames[0],r.getDatafromRestData("".concat(t,"/data"),[i+":"+a],n),[i+":"+a]}).catch(function(e){r._fireFailedEvent(e)})}).catch(function(e){r._fireFailedEvent(e)})}else{var l,u,c,f="".concat(t,"/maps");cp.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){l=e[0].name,c=e[0].path,f=f="".concat(t,"/maps/").concat(l,"/layers"),cp.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return u=e[0].subLayers.layers[0].caption,r.getDatafromRestMap(u,c,n),u}).catch(function(e){r._fireFailedEvent(e)})}).catch(function(e){r._fireFailedEvent(e)})}}},{key:"getDatafromRestData",value:function(e,t,n){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(e,t,this.datasets.queryInfo,function(e){n(e,"RESTDATA")},function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDatafromRestMap",value:function(e,t,n){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(t,e,this.datasets.queryInfo,null,null,function(e){n(e,"RESTMAP")},function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"_getFeatureBySQL",value:function(e,t,n,r,o){var i,a,s={name:t.join().replace(":","@")};Object.assign(s,n),i=new og(s),a=new Eg({queryParameter:i,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new Dg(e,{eventListeners:{processCompleted:function(e){r&&r(e)},processFailed:function(e){o&&o(e)}}}).processAsync(a)}},{key:"_queryFeatureBySQL",value:function(e,t,n,r,o,i,a,s,l,u){var c,f,h={name:t};Object.assign(h,n),c=new og(h),r&&(c.fields=r);var p={queryParams:[c]};u&&(p.queryOption=mn.ATTRIBUTE),s&&(p.startRecord=s),l&&(p.expectCount=l),o&&(p.prjCoordSys={epsgCode:o}),f=new $E(p),this._queryBySQL(e,f,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"_queryBySQL",value:function(e,t,n,r){new aA(e,{eventListeners:{scope:this,processCompleted:n,processFailed:n},format:this._processFormat(r)}).processAsync(t)}},{key:"_processFormat",value:function(e){return e||yn.GEOJSON}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,n=-1,r=-1,o=0,i=t.length;o<i;o++)QV.isXField(t[o])&&(n=o),QV.isYField(t[o])&&(r=o);for(var a=[],s=0,l=e.rows.length;s<l;s++){var u=e.rows[s],c=Number(u[n]),f=Number(u[r]),h={};for(var p in e.colTitles){h[e.colTitles[p]]=e.rows[s][p]}h.index=s+"";var d={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(d)}return a}},{key:"_fireFailedEvent",value:function(e){var t=e?{error:e,message:XV.i18n("msg_getdatafailed")}:{message:XV.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",t)}}])&&KV(t.prototype,n),r&&KV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function eH(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return tH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tH(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function tH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rH=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=t.type||"bar",this._initXYField(t.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new To(this,null,this.EVENT_TYPES)}var t,n,r;return t=e,(n=[{key:"_initXYField",value:function(e){var t=this;e&&e.length>0&&e.forEach(function(e){e.xAxis&&t.xField.push({field:e.xAxis.field,name:e.xAxis.name}),e.yAxis&&t.yField.push({field:e.yAxis.field,name:e.yAxis.name})})}},{key:"getDatasetInfo",value:function(e){var t=this;this.createChart=e,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new $V(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(e){t.events.triggerEvent("getdatafailed",e)}}))}},{key:"_getDatasetInfoSuccess",value:function(e){var t=this.datasets.url,n=t.indexOf("rest");if(n>0){var r=t.indexOf("/",n+5),o=t.substring(n+5,r),i=t.substring(0,n+4)+"/data";if("maps"===o){var a=t.indexOf("/",r+1),s=t.substring(r+1,a);i=t.substring(0,n+4)+"/maps/"+s,e.result.dataUrl=i,this._getLayerFeatures(e)}else"data"===o&&(e.result.dataUrl=i,this._getDataFeatures(e))}}},{key:"_getDataInfoSuccess",value:function(e,t){"RESTMAP"===t?this._getChartDatasFromLayer(e):this._getChartDatas(e)}},{key:"_getDataFeatures",value:function(e){this.chartModel.getDataFeatures(e,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(e){this.chartModel.getLayerFeatures(e,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(e){if(e){this.features=e.result.features;var t=this.features.features,n={};if(t.length){var r=t[0],o=[],i=[];for(var a in r.properties)o.push(a),i.push(this._getDataType(r.properties[a]));for(var s in n={features:t,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var l=[];for(var u in t){var c=t[u],f=n.fieldCaptions[s],h=c.properties[f];l.push(h)}n.fieldValues.push(l)}this.createChart(n)}}}},{key:"_getChartDatasFromLayer",value:function(e){if(e.result.recordsets){var t=e.result.recordsets[0],n=t.features.features;this.features=t.features;var r={};if(n.length){for(var o in(r={features:t.features,fieldCaptions:t.fieldCaptions,fieldTypes:t.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in n){var s=n[a],l=r.fieldCaptions[o],u=s.properties[l];i.push(u)}r.fieldValues.push(i)}this.createChart(r)}}}},{key:"_createChartOptions",value:function(e){return this.calculatedData=this._createChartDatas(e),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(e){if(e!==this.chartType)return this.chartType=e,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(e,t,n){this.updateChart=n,this.xField=[],this.yField=[],this._initXYField(t),e.type=e.type||"iServer",e.withCredentials=e.withCredentials||!1,this.datasets=e,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(e){var t=this._createChartOptions(e);this.updateChart(t)}},{key:"updateChartOptions",value:function(e,t){if(this.calculatedData){var n=this.grid,r=this._createChartSeries(this.calculatedData,e),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},l={formatter:"{b0}: {c0}"},u="#404a59";return t&&(t.grid&&(n=t.grid),t.tooltip&&(l=t.tooltip),t.backgroundColor&&(u=t.backgroundColor)),{backgroundColor:u,grid:n,series:r,xAxis:a,yAxis:s,tooltip:l}}}},{key:"_createChartDatas",value:function(e){var t=0,n=[],r=e.fieldCaptions,o=this;r.forEach(function(e,n){o.xField[0]&&e===o.xField[0].field&&(t=n)}),this.yFieldName="",this.yField.forEach(function(e,t){0!==t&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+e.name,r.forEach(function(t,r){t===e.field&&n.push(r)})});var i=this._getAttrData(e,t),a=[];if(n.length>0)n.forEach(function(t){var n=[];for(var r in e.fieldValues[t])n.push({value:e.fieldValues[t][r]});a.push(n)});else{for(var s=[],l=[],u=i.length,c=0;c<u;c++){for(var f=!1,h=0,p=l.length;h<p;h++)if(i[c].fieldsData===l[h].fieldsData){s[h].value++,l[h].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(l.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=l,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(e,t){0===t&&(this.xField=[{field:e.fieldCaptions[t],name:e.fieldCaptions[t]}]);for(var n=[],r=0,o=e.fieldValues[t].length;r<o;r++){var i=e.fieldValues[t][r];n.push({recordIndexs:r,fieldsData:i})}return n}},{key:"_createChartSeries",value:function(e,t){var n=[];return e.YData.forEach(function(e){var r,o=0,i=[],a=eH(e);try{for(a.s();!(r=a.n()).done;){o=r.value.value,i.push({value:o})}}catch(e){a.e(e)}finally{a.f()}var s={type:t,data:i,name:"y"};n.push(s)}),n}},{key:"_isDate",value:function(e){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(e)}},{key:"_isNumber",value:function(e){var t=Number(e);return 0===t||!isNaN(t)}},{key:"_getDataType",value:function(e){if(null!==e&&void 0!==e&&""!==e){if(this._isDate(e))return"DATE";if(this._isNumber(e))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(e){return!(""===e||!this._isMatchUrl(e))&&(!/^http[s]?:\/\/localhost/.test(e)&&!/^http[s]?:\/\/127.0.0.1/.test(e))}},{key:"_isMatchUrl",value:function(e){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(e){return this.updateChartOptions(this.chartType,e)}}])&&nH(t.prototype,n),r&&nH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var iH=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domID=t,this.chartType=n.type||"bar",n.datasets.type=n.datasets.type||"iServer",n.datasets.withCredentials=n.datasets.withCredentials||!1,this.viewModel=new rH(n),this._fillDataToView()}var t,n,r;return t=e,(n=[{key:"onAdd",value:function(e){this.addChart=e}},{key:"_fillDataToView",value:function(){var e=new JV;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(t){e.showView(t.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(e){var t=this.viewModel.setStyle(e);this._updateChart(t)}},{key:"changeType",value:function(e){if(this.chartType!==e){this.chartType=e;var t=this.viewModel.changeType(e);this._updateChart(t)}}},{key:"updateData",value:function(e,t){var n=this;this.viewModel.updateData(e,t,function(e){n._updateChart(e),n.addChart&&n.addChart()})}},{key:"_createChart",value:function(e){this.echart=YV().init(document.getElementById(this.domID),null,{renderer:"canvas"});var t=this.viewModel._createChartOptions(e);this.echart.setOption(t),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(e){this.echart&&(this.echart.clear(),this.echart.setOption(e))}}])&&oH(t.prototype,n),r&&oH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function aH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sH=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.id=t.id?t.id:null,this.rootContainer=null}var t,n,r;return t=e,(n=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&aH(t.prototype,n),r&&aH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lH(e){"@babel/helpers - typeof";return(lH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cH(e,t){return(cH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=hH(e);if(t){var o=hH(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===lH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hH(e){return(hH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cH(e,t)}(i,sH);var t,n,r,o=fH(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=e.title?e.title:"";return t._initView(n),t}return t=i,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-container");var n=document.createElement("div");n.setAttribute("class","component-title");var r=document.createElement("div");r.innerHTML=e,n.appendChild(r),t.appendChild(n);var o=document.createElement("div");return o.setAttribute("class","component-content"),t.appendChild(o),this.content=o,this.rootContainer=t,t}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&uH(t.prototype,n),r&&uH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dH(e){"@babel/helpers - typeof";return(dH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vH(e,t){return(vH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=mH(e);if(t){var o=mH(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function mH(e){return(mH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var bH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vH(e,t)}(i,sH);var t,n,r,o=gH(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._initView(e),t}return t=i,(n=[{key:"_initView",value:function(e){var t=this._createElement("div","component-selecttool");e.labelName&&(this._createElement("label","component-selecttool__lable--describe",t).innerHTML=e.labelName);var n=this._createElement("div","component-selecttool--chart",t);n.setAttribute("tabindex","1");var r=this._createElement("div","component-selecttool__name",n);r.title=e.optionsArr[0],r.innerHTML=e.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",n),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",n),s=this._createElement("div","component-selecttool__content--chart",a),l=this._createElement("div","component-selecttool__scrollarea__content",s);l.setAttribute("tabindex","1"),this.createOptions(l,e.optionsArr),this.optionClickEvent(l,r,e.optionsClickCb),this._selectClickEvent(n,a,i),this.rootContainer=t}},{key:"createOptions",value:function(e,t){for(var n in t){var r=this._createElement("div","component-selecttool__option",e);r.title=t[n],r.innerHTML=t[n]}}},{key:"_selectClickEvent",value:function(e,t,n){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",n.className="component-triangle-down-img"):(t.style.display="block",n.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())},e.onblur=function(){t.style.display="none",n.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,n){var r=document.createElement(e||"div");return t&&(r.className=t),n&&n.appendChild(r),r}},{key:"optionClickEvent",value:function(e,t,n){for(var r=function(){var r=e.children[o];r.onclick=function(){t.innerHTML=r.innerHTML,t.title=r.title,r.getAttribute("data-value")&&t.setAttribute("data-value",r.getAttribute("data-value")),n&&n(r)}},o=0;o<e.children.length;o++)r()}}])&&yH(t.prototype,n),r&&yH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function wH(e){"@babel/helpers - typeof";return(wH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xH(e,t){return(xH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function SH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=OH(e);if(t){var o=OH(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===wH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function OH(e){return(OH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var PH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xH(e,t)}(i,sH);var t,n,r,o=SH(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._initView(e),t}return t=i,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.className="component-dropdownbox--container";var n=document.createElement("div");n.setAttribute("tabindex","1"),n.className="component-dropdownbox",t.appendChild(n);var r=document.createElement("div");n.appendChild(r),this._createDropDownOption(e[0],r);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",n.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:n,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:e,triangleBtn:i,dropDownTopContainer:r};this._createDropDownBox(a),this.rootContainer=t}},{key:"_createDropDownBox",value:function(e){var t=e.parentEle,n=e.dropDownTopContainer,r=document.createElement("div");r.className=e.dropDownContent[0],t.appendChild(r);var o=document.createElement("div");o.className=e.scrollareaContent,r.appendChild(o);for(var i=e.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=e.triangleBtn;this._dropDownClickEvent(t,r,s),this._eleOnblur(t,r,s);for(var l=o.children,u=function(e){l[e].onclick=function(){n.innerHTML=l[e].outerHTML}},c=0;c<l.length;c++)u(c)}},{key:"_createDropDownOption",value:function(e,t){var n=document.createElement("div");n.className="component-dropdownbox__item";var r=e;r.dataValue&&n.setAttribute("data-value",r.dataValue),t.appendChild(n);var o=document.createElement("div");o.className="component-dropdownbox__item__img",n.appendChild(o);var i=document.createElement("div");r.icon.className&&(i.className=r.icon.className),r.icon.background&&(i.style.background=r.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=r.title,a.innerHTML=r.title,n.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=r.remark,s.innerHTML=r.remark,n.appendChild(s)}},{key:"_dropDownClickEvent",value:function(e,t,n){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",n.className="component-triangle-down-img"):(t.style.display="block",n.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())}}},{key:"_eleOnblur",value:function(e,t,n){e.onblur=function(){t.style.display="none",n.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,n){var r=document.createElement(e||"div");return t&&(r.className=t),n&&n.appendChild(r),r}}])&&_H(t.prototype,n),r&&_H(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function TH(e){"@babel/helpers - typeof";return(TH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CH(e,t){return(CH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function EH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=AH(e);if(t){var o=AH(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===TH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function AH(e){return(AH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var MH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CH(e,t)}(i,sH);var t,n,r,o=EH(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},t=o.call(this,e),e.title=e.title?e.title:"",t._initView(e.title),t}return t=i,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-popcontainer");var n=document.createElement("div");n.setAttribute("class","component-popcontainer__header");var r=document.createElement("label");r.setAttribute("class","component-popcontainer__header__title"),r.innerHTML=e,n.appendChild(r);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),t.appendChild(o),t.appendChild(n);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,t.appendChild(i),this.rootContainer=t}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&kH(t.prototype,n),r&&kH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function RH(e){"@babel/helpers - typeof";return(RH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jH(e,t){return(jH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=DH(e);if(t){var o=DH(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===RH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function DH(e){return(DH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var NH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jH(e,t)}(i,MH);var t,n,r,o=LH(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.title=e.title?e.title:"å±æ§",(t=o.call(this,e)).rootContainer.firstChild.hidden=!0,e.attributes=e.attributes?e.attributes:[],t._createAttributesTable(e.attributes),t}return t=i,(n=[{key:"_createAttributesTable",value:function(e){var t=document.createElement("table");t.setAttribute("class","component-popcontainer__content__table");var n=document.createElement("tbody"),r=!0;for(var o in e){var i=document.createElement("tr");r&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var l=document.createElement("td");l.innerHTML=e[o],i.appendChild(a),i.appendChild(l),n.appendChild(i),r=!r}t.appendChild(n),this.appendContent(t)}}])&&IH(t.prototype,n),r&&IH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function BH(e){"@babel/helpers - typeof";return(BH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GH(e,t){return(GH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=VH(e);if(t){var o=VH(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===BH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function VH(e){return(VH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var HH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GH(e,t)}(i,sH);var t,n,r,o=zH(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._initView(),t}return t=i,(n=[{key:"_initView",value:function(){var e=document.createElement("div");e.setAttribute("class","component-tabpage");var t=document.createElement("ul");this.header=t;var n=document.createElement("div");n.setAttribute("class","component-tabpage__content"),this.content=n,e.appendChild(t),e.appendChild(n),this.rootContainer=e}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var n=document.createElement("span");n.index=t,n.appendChild(document.createTextNode(e[t].title)),n.onclick=this._changeTabsPage.bind(this);var r=e[t].content;r.index=t,r.hidden=!0,this.header.appendChild(n),this.content.appendChild(r)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.header.children.length;e>0;e--)this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,n=0;n<this.header.children.length;n++)this.header.children[n].setAttribute("class",""),this.content.children[n].hidden=!0,n===t&&(this.header.children[n].setAttribute("class","on"),this.content.children[n].hidden=!1)}}])&&FH(t.prototype,n),r&&FH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function WH(e){"@babel/helpers - typeof";return(WH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JH(e,t){return(JH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=YH(e);if(t){var o=YH(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===WH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function YH(e){return(YH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var XH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JH(e,t)}(i,HH);var t,n,r,o=qH(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),t.config=e.config,w.isArray(t.config)?(t.header.hidden=!0,t._createCityItem("åå¸",t.config),t.content.style.border="none"):(t._createTabs(),t.header.onclick=function(e){for(var n=0;n<t.header.children.length;n++)t.header.children[n].setAttribute("class","");e.target.setAttribute("class","on"),t._createCityContent(e.target.innerHTML)}),t}return t=i,(n=[{key:"_createTabs",value:function(){if(w.isArray(this.config))for(var e=0;e<this.config.length;e++){var t="";for(var n in this.config[e])t+=n;var r=document.createElement("li");r.innerHTML=t,this.header.appendChild(r)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(e){for(var t=this.content.children.length;t>0;t--)this.content.removeChild(this.content.children[t-1]);var n=this.config[e];for(var r in n)this._createCityItem(r,n[r])}},{key:"_createCityItem",value:function(e,t){var n=document.createElement("div"),r=document.createElement("div");r.setAttribute("class","component-citytabpag__py-key"),r.innerHTML=e,n.appendChild(r);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<t.length;i++){var a=document.createElement("span");a.innerHTML=t[i],o.appendChild(a)}"HOT"===e&&(o.style.width="428px"),n.appendChild(o),this.content.appendChild(n)}}])&&UH(t.prototype,n),r&&UH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ZH(e){"@babel/helpers - typeof";return(ZH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KH(e,t){return(KH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=eW(e);if(t){var o=eW(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ZH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function eW(e){return(eW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var tW=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KH(e,t)}(i,sH);var t,n,r,o=$H(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).navTabsTitle=null,t.navTabsContent=null,e.tabs=e.tabs?e.tabs:[],t._initView(e.tabs),t}return t=i,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-navtabspage");var n=document.createElement("span");n.setAttribute("class","supermapol-icons-close"),n.onclick=this.closeView.bind(this),t.appendChild(n);var r=document.createElement("div");this.navTabsTitle=r,r.setAttribute("class","component-navtabspage__title"),t.appendChild(r);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),t.appendChild(o),e.length>0&&this.appendTabs(e),this.rootContainer=t}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var n=document.createElement("span");n.index=t,n.appendChild(document.createTextNode(e[t].title)),n.onclick=this._changeTabsPage.bind(this);var r=e[t].content;r.index=t,r.hidden=!0,this.navTabsTitle.appendChild(n),this.navTabsContent.appendChild(r)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.navTabsTitle.children.length;e>0;e--)this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,n=0;n<this.navTabsTitle.children.length;n++)this.navTabsTitle.children[n].setAttribute("class",""),this.navTabsContent.children[n].hidden=!0,n===t&&(this.navTabsTitle.children[n].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[n].hidden=!1)}}])&&QH(t.prototype,n),r&&QH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function nW(e){"@babel/helpers - typeof";return(nW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oW(e,t){return(oW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=aW(e);if(t){var o=aW(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function aW(e){return(aW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var sW=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oW(e,t)}(i,sH);var t,n,r,o=iW(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).currentPage=0,t.pageNumberLis=[],t.currentPageNumberLis=[],t.linkageEvent=null,e.contents=e.contents?e.contents:null,e.pageCounts=e.pageCounts?e.pageCounts:0,t._initView(e.contents,e.pageCounts),t}return t=i,(n=[{key:"setLinkageEvent",value:function(e){this.linkageEvent=e}},{key:"_initView",value:function(e,t){var n=document.createElement("div");n.setAttribute("class","component-pagination");var r=document.createElement("div");r.setAttribute("class","component-pagination__content"),n.appendChild(r),this.content=r;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),n.appendChild(o),this._createLink(o),this.link=o,e&&this.setContent(e),0!==t&&this.setPageLink(t),this.rootContainer=n}},{key:"setContent",value:function(e){this.clearContent(),this.appendContent(e)}},{key:"appendContent",value:function(e){this.content.appendChild(e)}},{key:"clearContent",value:function(){for(var e=this.content.children.length-1;e>=0;e--)this.content.removeChild(this.content.children[e])}},{key:"setPageLink",value:function(e){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(e),this._appendPageLink()}},{key:"_createPageLi",value:function(e){for(var t=0;t<e;t++){var n=document.createElement("li");n.innerHTML=t+1,this.pageNumberLis.push(n)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,e<5)this.currentPageNumberLis=this.pageNumberLis;else for(var r=0;r<5;r++)this.currentPageNumberLis.push(this.pageNumberLis[r])}},{key:"_appendPageLink",value:function(){for(var e=0;e<this.currentPageNumberLis.length;e++)this.link.insertBefore(this.currentPageNumberLis[e],this.link.childNodes[this.link.children.length-2]);for(var t=0;t<this.currentPageNumberLis.length;t++)this.currentPageNumberLis[t].setAttribute("class",""),Number(this.currentPageNumberLis[t].innerHTML)===this.currentPage&&this.currentPageNumberLis[t].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var e=this.link.children.length-3;e>1;e--)this.link.removeChild(this.link.children[e])}},{key:"_createLink",value:function(e){for(var t=0;t<4;t++){var n=document.createElement("li");n.setAttribute("class","disable");var r=document.createElement("span");n.appendChild(r),0===t?(r.id="first",r.setAttribute("class","supermapol-icons-first")):1===t?(r.id="prev",r.setAttribute("class","supermapol-icons-prev")):2===t?(r.id="next",r.setAttribute("class","supermapol-icons-next")):3===t&&(r.id="last",r.setAttribute("class","supermapol-icons-last")),e.appendChild(n)}}},{key:"_changePageEvent",value:function(e){var t=e.target;if("disable"!==t.parentElement.classList[0]){var n;if(t.id)n=t.id;else{if(!Number(t.innerHTML))return;n=Number(t.innerHTML)}this._prePageNum(n),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(e){var t=[];if(this.currentPage="first"===e?1:"last"===e?this.pageNumberLis.length:"prev"===e?this.currentPage-1:"next"===e?this.currentPage+1:e,this.pageNumberLis.length<=5)for(var n=0;n<this.pageNumberLis.length;n++)t.push(this.pageNumberLis[n]);else if(this.currentPage<=3)for(var r=0;r<5;r++)t.push(this.pageNumberLis[r]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)t.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)t.push(this.pageNumberLis[i]);t.length>0&&(this.currentPageNumberLis=t)}}])&&rW(t.prototype,n),r&&rW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lW(Object(n),!0).forEach(function(t){cW(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function cW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function fW(e){var t,n=(t={},["(",")","ï¼","ï¼",",","ï¼"].forEach(function(e,n){t[e]="$".concat(n)}),t);for(var r in n)for(var o=n[r],i=new RegExp("\\".concat(r),"g");i.test(e);)e=e.replace(i,o);return e}function hW(e,t){var n=e;return e.replace(/&|\||>|<|=|!/g," ").split(" ").filter(function(e){return e}).forEach(function(e){var r=t.find(function(t){return t===e});if(dW(e)&&r&&(n=n.replace(r,"$"+r)),r){var o=fW(r);n=n.replace(r,o)}}),n}function pW(e){var t={};for(var n in e){var r=n;dW(n)&&(r="$"+n),t[r=fW(r)]=e[n]}return t}function dW(e){return/^\d/.test(e)}JD.Lang=XV,JD.i18n=JD.Lang.i18n,JD.Util=uW(uW({},JD.Util),w),JD.Browser=g,JD.INCHES_PER_UNIT=_,JD.METERS_PER_INCH=x,JD.DOTS_PER_INCH=96,JD.IS_GECKO=b,JD.setCORS=function(e){Xh=e},JD.isCORS=lp,JD.setRequestTimeout=function(e){return Zh=e},JD.getRequestTimeout=up,JD.FetchRequest=cp,JD.inherit=function(e,t){var n,r,o,i=function(){};for(i.prototype=t.prototype,e.prototype=new i,n=2,r=arguments.length;n<r;n++)"function"==typeof(o=arguments[n])&&(o=o.prototype),w.extend(e.prototype,o)},JD.mixin=t,JD.String=r,JD.Number=o,JD.Function=i,JD.Array=a,JD.Date=xo,JD.Event=So,JD.Bounds=Oe,JD.Credential=_o,JD.Events=To,JD.Feature=mt,JD.Geometry=l,JD.Pixel=we,JD.Size=me,JD.Feature.Vector=Et,JD.Geometry.Collection=Be,JD.Geometry.Curve=Ze,JD.Geometry.GeoText=mr,JD.Geometry.LinearRing=ct,JD.Geometry.LineString=rt,JD.Geometry.MultiLineString=Ht,JD.Geometry.MultiPoint=We,JD.Geometry.MultiPolygon=Xt,JD.Geometry.Point=Me,JD.Geometry.Polygon=vt,JD.Geometry.Rectangle=bo,JD.Symbol.SimplePoint=Vo,JD.Symbol.ImagePoint=Xo,JD.Symbol.SimpleLine=vi,JD.Symbol.ArcLine=Ai,JD.Symbol.GreatCircleLine=Si,JD.Symbol.SimpleImageLine=Wi,JD.Symbol.ArcImageLine=Qi,JD.Symbol.GreatCircleImageLine=oa,JD.Symbol.SimpleAnimateLine=ma,JD.Symbol.GreatCircleAnimateLine=Ra,JD.Symbol.ArcAnimateLine3D=Pa,JD.Symbol.ArcAnimateLine3D=Ja,JD.Symbol.WallAnimateLine3D=$a,JD.Symbol.WallLineSymbol3D=ps,JD.Symbol.Polygon=ws,JD.Symbol.ImagePolygon=ks,JD.Symbol.Text=js,JD.Components.Chart=iH,JD.Components.ChartViewModel=rH,JD.Components.MessageBox=JV,JD.Components.AttributesPopContainer=NH,JD.Components.CityTabsPage=XH,JD.Components.CommonContainer=pH,JD.Components.DropDownBox=PH,JD.Components.IndexTabsPageContainer=HH,JD.Components.NavTabsPage=tW,JD.Components.PaginationContainer=sW,JD.Components.PopContainer=MH,JD.Components.Select=bH,JD.Components.TemplateBase=sH,JD.Components.FileReaderUtil=QV,JD.TimeControlBase=eN,JD.TimeFlowControl=lN,JD.Format=JD.Format||Mt,JD.Format.GeoJSON=lr,JD.Format.JSON=Nt,JD.Format.WKT=KD,JD.iManager=mN,JD.iManagerCreateNodeParam=hN,JD.iManagerServiceBase=cN,JD.iPortal=FN,JD.iPortalAddDataParam=qN,JD.iPortalAddResourceParam=HN,JD.iPortalDataConnectionInfoParam=$N,JD.iPortalDataMetaInfoParam=XN,JD.iPortalDataStoreInfoParam=QN,JD.iPortalQueryParam=xN,JD.iPortalQueryResult=ON,JD.iPortalRegisterServiceParam=UN,JD.iPortalResource=MN,JD.iPortalServiceBase=wN,JD.iPortalShareEntity=zN,JD.iPortalShareParam=IN,JD.iPortalUser=iB,JD.AddressMatchService=wy,JD.AggregationParameter=sB,JD.AreaSolarRadiationParameters=DA,JD.AreaSolarRadiationService=HA,JD.BucketAggParameter=dB,JD.BufferAnalystParameters=XA,JD.BufferAnalystService=_M,JD.BufferDistance=UA,JD.BuffersAnalystJobsParameter=EC,JD.BuffersAnalystJobsService=DC,JD.BufferSetting=qA,JD.BurstPipelineAnalystParameters=US,JD.BurstPipelineAnalystService=KS,JD.ChartFeatureInfoSpecsService=qy,JD.ChartQueryFilterParameter=Ay,JD.ChartQueryParameters=Ry,JD.ChartQueryService=Gy,JD.ClipParameter=OB,JD.ColorDictionary=J_,JD.CommonServiceBase=uy,JD.ComputeWeightMatrixParameters=oO,JD.ComputeWeightMatrixService=fO,JD.CreateDatasetParameters=Ov,JD.DataFlowService=av,JD.DataReturnOption=QA,JD.DatasetBufferAnalystParameters=iM,JD.DatasetInfo=A_,JD.DatasetOverlayAnalystParameters=oI,JD.DatasetService=xv,JD.DatasetSurfaceAnalystParameters=ZI,JD.DatasetThiessenAnalystParameters=Cj,JD.DatasourceConnectionInfo=Sk,JD.DatasourceService=Gv,JD.DensityAnalystService=MM,JD.DensityKernelAnalystParameters=SM,JD.EditFeaturesParameters=Em,JD.EditFeaturesService=Nm,JD.FacilityAnalyst3DParameters=JP,JD.FacilityAnalystSinks3DParameters=$P,JD.FacilityAnalystSinks3DService=iT,JD.FacilityAnalystSources3DParameters=hT,JD.FacilityAnalystSources3DService=bT,JD.FacilityAnalystStreamParameters=pO,JD.FacilityAnalystStreamService=wO,JD.FacilityAnalystTracedown3DParameters=GT,JD.FacilityAnalystTracedown3DService=qT,JD.FacilityAnalystTraceup3DParameters=TT,JD.FacilityAnalystTraceup3DService=IT,JD.FacilityAnalystUpstream3DParameters=tk,JD.FacilityAnalystUpstream3DService=lk,JD.FieldParameters=$m,JD.FieldsFilter=EG,JD.FieldStatisticService=db,JD.FieldStatisticsParameters=ab,JD.FilterParameter=og,JD.FindClosestFacilitiesParameters=xO,JD.FindClosestFacilitiesService=EO,JD.FindLocationParameters=MO,JD.FindLocationService=BO,JD.FindMTSPPathsParameters=GO,JD.FindMTSPPathsService=qO,JD.FindPathParameters=XO,JD.FindPathService=nP,JD.FindServiceAreasParameters=oP,JD.FindServiceAreasService=fP,JD.FindTSPPathsParameters=pP,JD.FindTSPPathsService=wP,JD.GenerateSpatialDataParameters=IM,JD.GenerateSpatialDataService=GM,JD.GeoCodingParameter=fy,JD.GeoDecodingParameter=py,JD.GeoHashGridAggParameter=RB,JD.GeometryBatchAnalystService=Kj,JD.GeometryBufferAnalystParameters=pM,JD.GeometryOverlayAnalystParameters=hI,JD.GeometrySurfaceAnalystParameters=oj,JD.GeometryThiessenAnalystParameters=Dj,JD.GeoprocessingService=Vb,JD.GeoRelationAnalystParameters=VM,JD.GeoRelationAnalystService=XM,JD.GetFeaturesByBoundsParameters=Wg,JD.GetFeaturesByBoundsService=Qg,JD.GetFeaturesByBufferParameters=im,JD.GetFeaturesByBufferService=hm,JD.GetFeaturesByGeometryParameters=wm,JD.GetFeaturesByGeometryService=km,JD.GetFeaturesByIDsParameters=dg,JD.GetFeaturesByIDsService=_g,JD.GetFeaturesBySQLParameters=Eg,JD.GetFeaturesBySQLService=Dg,JD.GetFeaturesParametersBase=ag,JD.GetFeaturesServiceBase=ng,JD.GetFieldsService=Qm,JD.GetGridCellInfosParameters=xb,JD.GetGridCellInfosService=Ab,JD.GetLayersInfoService=_x,JD.Grid=$_,JD.HillshadeParameter=iG,JD.Image=ax,JD.ImageCollectionService=FD,JD.ImageGFAspect=zG,JD.ImageGFHillShade=FG,JD.ImageGFOrtho=HG,JD.ImageGFSlope=UG,JD.ImageRenderingRule=NG,JD.ImageSearchParameter=IG,JD.ImageService=PD,JD.ImageStretchOption=LG,JD.InterpolationAnalystParameters=QM,JD.InterpolationAnalystService=FR,JD.InterpolationDensityAnalystParameters=pR,JD.InterpolationIDWAnalystParameters=_R,JD.InterpolationKrigingAnalystParameters=MR,JD.InterpolationRBFAnalystParameters=iR,JD.JoinItem=C_,JD.KernelDensityJobParameter=Ek,JD.KernelDensityJobsService=Dk,JD.LabelImageCell=zB,JD.LabelMatrixCell=jB,JD.LabelMixedTextStyle=aw,JD.LabelSymbolCell=YB,JD.LabelThemeCell=tF,JD.LayerStatus=rF,JD.LinkItem=iF,JD.MappingParameters=kk,JD.MapService=sS,JD.MathExpressionAnalysisParameters=zR,JD.MathExpressionAnalysisService=YR,JD.MeasureParameters=xS,JD.MeasureService=AS,JD.MetricsAggParameter=xB,JD.NDVIParameter=QF,JD.NetworkAnalystServiceBase=HS,JD.OutputSetting=Pk,JD.OverlapDisplayedOptions=sF,JD.OverlayAnalystParameters=ZR,JD.OverlayAnalystService=wI,JD.OverlayGeoJobParameter=fC,JD.OverlayGeoJobsService=mC,JD.PointWithMeasure=sn,JD.ProcessingServiceBase=_k,JD.QueryByBoundsParameters=SE,JD.QueryByBoundsService=AE,JD.QueryByDistanceParameters=BE,JD.QueryByDistanceService=UE,JD.QueryByGeometryParameters=dA,JD.QueryByGeometryService=_A,JD.QueryBySQLParameters=$E,JD.QueryBySQLService=aA,JD.QueryParameters=Cy,JD.QueryService=yE,JD.RasterFunctionParameter=HF,JD.Route=dn,JD.RouteCalculateMeasureParameters=xI,JD.RouteCalculateMeasureService=EI,JD.RouteLocatorParameters=MI,JD.RouteLocatorService=BI,JD.ServerColor=Qt,JD.ServerFeature=Ml,JD.ServerGeometry=tr,JD.ServerStyle=$t,JD.ServerTextStyle=Kb,JD.ServerTheme=W_,JD.SetDatasourceParameters=Vv,JD.SetLayerInfoParameters=uF,JD.SetLayerInfoService=Ex,JD.SetLayersInfoParameters=fF,JD.SetLayersInfoService=Nx,JD.SetLayerStatusParameters=Fx,JD.SetLayerStatusService=qx,JD.SingleObjectQueryJobsParameter=Bk,JD.SingleObjectQueryJobsService=Uk,JD.Sortby=MG,JD.SpatialAnalystBase=jA,JD.StopQueryParameters=xL,JD.StopQueryService=AL,JD.SummaryAttributesJobsParameter=qC,JD.SummaryAttributesJobsService=eE,JD.SummaryMeshJobParameter=qk,JD.SummaryMeshJobsService=eC,JD.SummaryRegionJobParameter=wC,JD.SummaryRegionJobsService=kC,JD.SupplyCenter=pF,JD.SurfaceAnalystParameters=VI,JD.SurfaceAnalystParametersSetting=GI,JD.SurfaceAnalystService=fj,JD.TerrainCurvatureCalculationParameters=pj,JD.TerrainCurvatureCalculationService=wj,JD.Theme=Zb,JD.ThemeDotDensity=Qw,JD.ThemeFlow=yF,JD.ThemeGraduatedSymbol=s_,JD.ThemeGraduatedSymbolStyle=$w,JD.ThemeGraph=Ww,JD.ThemeGraphAxes=Aw,JD.ThemeGraphItem=Dw,JD.ThemeGraphSize=Rw,JD.ThemeGraphText=jw,JD.ThemeGridRange=PF,JD.ThemeGridRangeItem=gF,JD.ThemeGridUnique=LF,JD.ThemeGridUniqueItem=kF,JD.ThemeLabel=ww,JD.ThemeLabelAlongLine=cw,JD.ThemeLabelBackground=hw,JD.ThemeLabelItem=ew,JD.ThemeLabelText=lw,JD.ThemeLabelUniqueItem=NF,JD.ThemeMemoryData=FF,JD.ThemeOffset=ow,JD.ThemeParameters=aL,JD.ThemeRange=g_,JD.ThemeRangeItem=u_,JD.ThemeService=dL,JD.ThemeUnique=Cw,JD.ThemeUniqueItem=nw,JD.ThiessenAnalystParameters=SR,JD.ThiessenAnalystService=Wj,JD.TilesetsService=dS,JD.TopologyValidatorJobsParameter=BC,JD.TopologyValidatorJobsService=UC,JD.TransferLine=zF,JD.TransferPathParameters=RL,JD.TransferPathService=FL,JD.TransferSolutionParameters=zL,JD.TransferSolutionService=YL,JD.TransportationAnalystParameter=nO,JD.TransportationAnalystResultSetting=eO,JD.UGCLayer=b_,JD.UGCMapLayer=T_,JD.UGCSubLayer=N_,JD.UpdateDatasetParameters=Tv,JD.UpdateEdgeWeightParameters=xP,JD.UpdateEdgeWeightService=EP,JD.UpdateTurnNodeWeightParameters=MP,JD.UpdateTurnNodeWeightService=BP,JD.Vector=px,JD.VectorClipJobsParameter=nC,JD.VectorClipJobsService=uC,JD.WebPrintingJobContent=_G,JD.WebPrintingJobCustomItems=sG,JD.WebPrintingJobExportOptions=PG,JD.WebPrintingJobImage=uG,JD.WebPrintingJobLayers=fG,JD.WebPrintingJobLayoutOptions=SG,JD.WebPrintingJobLegendOptions=pG,JD.WebPrintingJobLittleMapOptions=yG,JD.WebPrintingJobNorthArrowOptions=gG,JD.WebPrintingJobParameters=kG,JD.WebPrintingJobScaleBarOptions=bG,JD.WebPrintingService=uD,JD.Online=nz,JD.OnlineData=ez,JD.OnlineQueryDatasParameter=oz,JD.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},JD.DataItemType={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},JD.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},JD.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"},JD.OnlineServiceBase=qG,JD.Feature=JD.Feature||{},JD.Feature.Theme=wr,JD.Feature.Theme.Bar=Uz,JD.Feature.Theme.Bar3D=Kz,JD.Feature.Theme.Circle=hV,JD.Feature.Theme.Graph=Bz,JD.Feature.Theme.Line=bV,JD.Feature.Theme.Pie=TV,JD.Feature.Theme.Point=IV,JD.Feature.Theme.RankSymbol=iV,JD.Feature.Theme.Ring=GV,JD.Feature.Theme.ThemeVector=Zc,JD.Feature.ShapeParameters=Vl,JD.Feature.ShapeParameters.Circle=Wu,JD.Feature.ShapeParameters.Image=Nu,JD.Feature.ShapeParameters.Label=Au,JD.Feature.ShapeParameters.Line=nu,JD.Feature.ShapeParameters.Point=Xl,JD.Feature.ShapeParameters.Polygon=uu,JD.Feature.ShapeParameters.Rectangle=vu,JD.Feature.ShapeParameters.Sector=Su,JD.Feature.ShapeFactory=zc,JD.LevelRenderer=El,JD.KeyServiceParameter=az,JD.SecurityManager=ay,JD.ServerInfo=lz,JD.TokenServiceParameter=cz,JD.ThemeStyle=Mz,JD.CartoCSS=Cz,JD.ElasticSearch=vz,JD.ArrayStatistic=_z,JD.ColorsPickerUtil=bz,JD.DataFormat=yn,JD.ServerType=vn,JD.GeometryType=gn,JD.QueryOption=mn,JD.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},JD.SpatialQueryMode=bn,JD.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},JD.MeasureMode=wn,JD.Unit=_n,JD.BufferRadiusUnit=xn,JD.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},JD.ThemeGraphTextFormat=Sn,JD.ThemeGraphType=On,JD.GraphAxesTextDisplayMode=Pn,JD.GraduatedMode=Tn,JD.RangeMode=kn,JD.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},JD.ColorGradientType=Cn,JD.TextAlignment=En,JD.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},JD.AlongLineDirection=An,JD.LabelBackShape=Mn,JD.LabelOverLengthMode=Rn,JD.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},JD.OverlayOperationType=jn,JD.OutputType=Ln,JD.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},JD.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},JD.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},JD.BufferEndType=In,JD.SmoothMethod=Dn,JD.SurfaceAnalystMethod=Nn,JD.DataReturnMode=Bn,JD.EditType=Fn,JD.TransferTactic=Gn,JD.TransferPreference=zn,JD.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},JD.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},JD.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},JD.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},JD.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},JD.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},JD.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},JD.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},JD.VariogramMode=Vn,JD.Exponent=Hn,JD.ClientType=Wn,JD.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},JD.ClipAnalystMode=Un,JD.AnalystAreaUnit=Jn,JD.AnalystSizeUnit=qn,JD.StatisticAnalystMode=Yn,JD.SummaryType=Xn,JD.TopologyValidatorRule=Zn,JD.BucketAggType=Qn,JD.MetricsAggType=Kn,JD.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},JD.RasterFunctionType=$n,JD.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},JD.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},JD.OrderType={ASC:"ASC",DESC:"DESC"},JD.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},JD.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},JD.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},JD.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},JD.WebExportFormatType={PNG:"PNG",PDF:"PDF"},JD.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},JD.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},JD.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"};var yW=function(){try{return convert}catch(e){return{}}}(),vW=n.n(yW),gW=function(){try{return canvg}catch(e){return{}}}(),mW=n.n(gW);function bW(e){"@babel/helpers - typeof";return(bW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _W(e,t){return(_W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=SW(e);if(t){var o=SW(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===bW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function SW(e){return(SW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/* CopyrightÂ© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var OW=["559082264.0287178","279541132.0143589","139770566.0071794","69885283.00358972","34942641.50179486","17471320.75089743","8735660.375448715","4367830.1877224357","2183915.093862179","1091957.546931089","545978.7734655447","272989.7734655447","272989.3867327723","136494.6933663862","68247.34668319309","34123.67334159654","17061.83667079827","8530.918335399136","4265.459167699568","2132.729583849784"],PW=["5.590822640287176E8","2.795411320143588E8","1.397705660071794E8","6.98852830035897E7","3.494264150179485E7","1.7471320750897426E7","8735660.375448713","4367830.187724357","2183915.0938621783","1091957.5469310891","545978.7734655446","272989.3867327723","136494.69336638614","68247.34668319307","34123.673341596535","17061.836670798268","8530.918335399134"],TW=["GoogleCRS84Quad","GoogleMapsCompatible"],kW=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_W(e,t)}(a,O().Evented);var t,n,o,i=xW(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this)).mapId=e,t=t||{},n.server=t.server||"https://www.supermapol.com",n.credentialKey=t.credentialKey,n.credentialValue=t.credentialValue,n.withCredentials=t.withCredentials||!1,n.target=t.target||"map",n._canvgsV=[],n._createWebMap(),n.on("mapinitialized",function(){n.map.on("remove",function(){n._stopCanvg()})}),n}return t=a,(n=[{key:"resize",value:function(){this.map.resize()}},{key:"setMapId",value:function(e){this.mapId=e,this._createWebMap()}},{key:"setWebMapOptions",value:function(e){this.server=e.server,this._createWebMap()}},{key:"setMapOptions",value:function(e){var t=e.center,n=e.zoom,r=e.maxBounds,o=e.minZoom,i=e.maxZoom,a=e.isWorldCopy,s=e.bearing,l=e.pitch;t&&t.length&&this.map.setCenter(t),n&&this.map.setZoom(n),r&&this.map.setMaxBounds(r),o&&this.map.setMinZoom(o),i&&this.map.setMaxZoom(i),a&&this.map.setRenderWorldCopies(a),s&&this.map.setBearing(s),l&&this.map.setPitch(l)}},{key:"_createWebMap",value:function(){var e=this.server.split("");"/"!==e[e.length-1]&&(this.server+="/");var t=this.server+"web/maps/"+this.mapId+"/map";this.credentialValue&&this.credentialKey&&(t+="?"+this.credentialKey+"="+this.credentialValue);var n="getUrlResource.json?url=";if(this.excludePortalProxyUrl&&this.server.indexOf(n)>-1){var r=this.server.split(n);r.length>1&&(t=r[0]+n+this.server+"web/maps/"+this.mapId+"/map.json")}this._getMapInfo(t)}},{key:"_createMap",value:function(e){var t=[],n=e.layers;n&&n.length>0&&n.forEach(function(e){e.labelStyle&&t.push(e.labelStyle.fontFamily)},this),t.push("'supermapol-icons'");var r,o=t.join(","),i=e.center,a=e.level||0,s=0;if(e.minScale&&e.maxScale)s=this._transformScaleToZoom(e.minScale,O().CRS?O().CRS.get(this.baseProjection):"EPSG:3857");else{var l=this._getResolution(O().CRS?O().CRS.get(this.baseProjection).getExtent():[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892])/this._getResolution(e.extent);s=+Math.log(l)/Math.LN2.toFixed(2)}a+=s,r=i?this._unproject([i.x,i.y]):new(O().LngLat)(0,0),this.map=new(O().Map)({container:this.target,center:r,zoom:a,style:{version:8,sources:{},layers:[]},crs:this.baseProjection,localIdeographFontFamily:o||""}),this.fire("mapinitialized")}},{key:"_getMapInfo",value:function(e){var t=this,n=-1===e.indexOf(".json")?"".concat(e,".json"):e;cp.get(n,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(e){t.baseProjection=e.projection,t.mapParams={title:e.title,description:e.description};if(!(t.baseProjection in{"EPSG:4490":"EPSG:4490","EPSG:4214":"EPSG:4214","EPSG:4610":"EPSG:4610","EPSG:3857":"EPSG:3857","EPSG:4326":"EPSG:4326"}))throw Error(XV.i18n("msg_crsunsupport"));t._createMap(e,t.mapSetting);var n=e.layers;t.map.on("load",function(){t._addBaseMap(e),n&&0!==n.length?t._addLayers(n):t._sendMapToUser(0,0)})}).catch(function(e){t.fire("getmapfailed",{error:e})})}},{key:"_addBaseMap",value:function(e){this._createBaseLayer(e)}},{key:"_createBaseLayer",value:function(e){var t=e.baseLayer||e,n=t.layerType;(n.indexOf("TIANDITU_VEC")>-1||n.indexOf("TIANDITU_IMG")>-1||n.indexOf("TIANDITU_TER")>-1)&&(n=n.substr(0,12));var r;switch(n){case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":this._createTiandituLayer(e);break;case"BING":this._createBingLayer(t.name);break;case"WMS":this._createWMSLayer(t);break;case"WMTS":this._createWMTSLayer(t);break;case"TILE":case"SUPERMAP_REST":this._createDynamicTiledLayer(t);break;case"CLOUD":case"CLOUD_BLACK":case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":r={CLOUD:"http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:"http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"https://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0",GOOGLE_CN:"https://mt{0-3}.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}[n],this._createXYZLayer(t,r);break;case"MAPBOXSTYLE":this._createMapboxStyle(t)}}},{key:"_createMapboxStyle",value:function(e){var t,n=this,r=e.dataSource,o=void 0===r?{}:r,i=o.serverId,a=o.url;t=void 0!==i?"".concat(this.server,"web/datas/").concat(i,"/download"):a,cp.get(t,null,{withCredentials:this.withCredentials,withoutFormatSuffix:!0,headers:{"Content-Type":"application/json;chartset=uft-8"}}).then(function(e){return e.json()}).then(function(e){n._matchStyleObject(e),n.map.setStyle(e)})}},{key:"_matchStyleObject",value:function(e){var t=e.sprite,n=e.glyphs;t&&"object"===bW(t)&&(e.sprite=Object.values(t)[0]),n&&"object"===bW(n)&&(e.glyphs=Object.values(n)[0])}},{key:"_createTiandituLayer",value:function(e){var t=this._getTiandituUrl(e),n=e.baseLayer.layerType,r=Boolean(e.baseLayer.labelLayerVisible),o=t.labelUrl,i=t.tiandituUrl;this._addBaselayer(i,"tianditu-layers-"+n),r&&this._addBaselayer(o,"tianditu-label-layers-"+n)}},{key:"_createWMTSLayer",value:function(e){var t=this,n=this._getWMTSUrl(e);this._filterWMTSIsMatched(e,function(r,o){r&&t._addBaselayer([n],"wmts-layers"+e.name,0,o)})}},{key:"_filterWMTSIsMatched",value:function(e,t){var n=this,r=!1,o=22,i=e.url;cp.get(i,null,{withCredentials:!1,withoutFormatSuffix:!0}).then(function(e){return e.text()}).then(function(i){var a=vW()?vW():window.convert,s=JSON.parse(a.xml2json(i,{compact:!0,spaces:4})).Capabilities.Contents.TileMatrixSet;Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++)if(s[l]["ows:Identifier"]&&s[l]["ows:Identifier"]._text===e.tileMatrixSet)if(TW.indexOf(s[l].WellKnownScaleSet._text)>-1)r=!0;else{if(!s[l].WellKnownScaleSet||"Custom"!==s[l].WellKnownScaleSet._text)throw Error(XV.i18n("msg_tilematrixsetunsupport"));for(var u=[],c="EPSG:3857"===n.map.crs?OW:PW,f=0,h=c.length;f<h&&s[l].TileMatrix[f]&&c[f]===s[l].TileMatrix[f].ScaleDenominator._text;f++)u.push(c[f]);if(o=u.length-1,0===u.length)throw Error(XV.i18n("msg_tilematrixsetunsupport"));r=!0}t(r,o)}).catch(function(e){n.fire("getwmtsfailed",{error:e,map:n.map})})}},{key:"_createBingLayer",value:function(e){this.addLayer(["https://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadkey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z"],"bing-layers-"+e)}},{key:"_createXYZLayer",value:function(e,t){var n=[];if("OSM"===e.layerType){for(var r=t.match(/\w\-\w/g)[0],o=r[0],i=r[2],a="",s=97;s<123;s++)a+=String.fromCharCode(s);for(var l=a.split(""),u=l.indexOf(o),c=l.indexOf(i),f=l.slice(u,c+1),h=0;h<f.length;h++){var p=t.replace(/{\w\-\w}/g,f[h]);n.push(p)}}else if("GOOGLE_CN"===e.layerType)for(var d=t.match(/\d\-\d/g)[0],y=d[0],v=d[2],g=y;g<=v;g++){var m=t.replace(/{\d\-\d}/g,g);n.push(m)}else n=[t];this._addBaselayer(n,"XYZ-layers-"+e.name)}},{key:"_createDynamicTiledLayer",value:function(e){var t=e.url,n=e.layerID||e.name,r=e.minzoom,o=e.maxzoom;this._addBaselayer([t],n,r,o,!0)}},{key:"_createWMSLayer",value:function(e){var t=this._getWMSUrl(e);this._addBaselayer([t],"WMS-layers-"+e.name)}},{key:"_createVectorLayer",value:function(e,t){var n=e.style,r=e.featureType,o=e.layerID,i=e.visible,a={};a.style=this._transformStyleToMapBoxGl(n,r),a.layout={visibility:i};var s={type:"geojson",data:{type:"FeatureCollection",features:t}};this._addOverlayToMap(r,s,o,a),"POLYGON"===r&&n.strokeColor&&this._addStrokeLineForPoly(n,s,o+"-strokeLine",i)}},{key:"_getTiandituUrl",value:function(e){for(var t=/t0/gi,n={},r=e.baseLayer.layerType.split("_")[1].toLowerCase(),o=Boolean(e.baseLayer.labelLayerVisible),i="https://t0.tianditu.gov.cn/{layer}_{proj}/wmts?",a=i,s="EPSG:4326"===this.baseProjection?"c":"w",l={service:"WMTS",request:"GetTile",style:"default",version:"1.0.0",layer:r,tilematrixSet:s,format:"tiles",width:256,height:256},u=(i+=this._getParamString(l,i)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",r).replace("{proj}",s),c=[],f=0;f<8;f++)c.push(u.replace(t,"t".concat(f)));if(n.tiandituUrl=c,o){var h={vec:"cva",ter:"cta",img:"cia"}[r];l.layer=h,a=(a+=this._getParamString(l,a)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",h).replace("{proj}",s);for(var p=[],d=0;d<8;d++)p.push(a.replace(t,"t".concat(d)));n.labelUrl=p}return n}},{key:"_getWMSUrl",value:function(e){var t=e.url,n=(t=t.split("?")[0]).split("/"),r={service:"WMS",request:"GetMap",layers:n[n.length-1],styles:"",format:"image/png",transparent:"true",version:"1.1.1",width:256,height:256,srs:this.baseProjection},o="EPSG:4326"===this.baseProjection?"{bbox-epsg-4326}":"{bbox-epsg-3857}";return t+=this._getParamString(r,t)+"&bbox=".concat(o)}},{key:"_addLayers",value:function(e){var t=this;this.layers=e;var n,r=0,o=e.length;e.forEach(function(e,i){if(e.dataSource&&e.dataSource.serverId||"MARKER"===e.layerType){var a=e.dataSource?e.dataSource.serverId:e.serverId,s="".concat(t.server,"web/datas/").concat(a,"/content.json?pageSize=9999999&currentPage=1");a&&cp.get(s,null,{withCredentials:t.withCredentials}).then(function(e){return e.json()}).then(function(a){if(!1===a.succeed)return r++,t._sendMapToUser(r,o),void t.fire("getlayersfailed",{error:a.error,map:t.map});a.type&&("JSON"===a.type||"GEOJSON"===a.type?(a.content=JSON.parse(a.content.trim()),n=t._formatGeoJSON(a.content,e)):"EXCEL"!==a.type&&"CSV"!==a.type||(n=t._excelData2Feature(a.content,e)),t._addLayer(e,n,i),r++,t._sendMapToUser(r,o))}).catch(function(e){r++,t._sendMapToUser(r,o),t.fire("getlayersfailed",{error:e,map:t.map})})}else if("SUPERMAP_REST"===e.layerType||"TILE"===e.layerType||"WMS"===e.layerType||"WMTS"===e.layerType)t._createBaseLayer(e),r++,t._sendMapToUser(r,o);else if(e.dataSource&&"REST_DATA"===e.dataSource.type){var l=e.dataSource;t._getFeatureBySQL(l.url,[l.dataSourseName||e.name],function(a){n=t._parseGeoJsonData2Feature({allDatas:{features:a.result.features.features},fileCode:e.projection,featureProjection:t.baseProjection}),t._addLayer(e,n,i),r++,t._sendMapToUser(r,o)},function(e){r++,t._sendMapToUser(r,o),t.fire("getfeaturesfailed",{error:e})})}else e.dataSource&&"REST_MAP"===e.dataSource.type&&e.dataSource.url&&t._queryFeatureBySQL(e.dataSource.url,e.dataSource.layerName,"smid=1",null,null,function(n){var a=n&&n.result.recordsets,s=a&&a[0],l=s.fields;if(s&&l){var u=[];for(var c in l){var f=l[c];0===f.indexOf("Sm")&&"SmID"!==f||u.push(f)}t._getFeatures(u,e,function(n){t._addLayer(e,n,i),r++,t._sendMapToUser(r,o)},function(e){r++,t.fire("getfeaturesfailed",{error:e,map:t.map})})}},function(e){t.fire("getlayersfailed",{error:e,map:t.map})})},this)}},{key:"_getFeatures",value:function(e,t,n,r){var o=this,i=t.dataSource,a=t.projection;this._queryFeatureBySQL(i.url,i.layerName,null,e,null,function(e){var t=e.result.recordsets[0].features.features,r=o._parseGeoJsonData2Feature({allDatas:{features:t},fileCode:a,featureProjection:o.baseProjection},"JSON");n(r)},function(e){r(e)})}},{key:"_addLayer",value:function(e,t,n){var r=e.layerType;e.layerID=r+"-"+e.name+"-"+n,e.visible=e.visible?"visible":"none",t[0]&&"Polygon"===t[0].geometry.type&&(t=this._handleMultyPolygon(t)),e.style&&e.filterCondition&&"RANGE"!==r&&"UNIQUE"!==r&&(t=this._getFiterFeatures(e.filterCondition,t)),"VECTOR"===r?"POINT"===e.featureType?"SYMBOL_POINT"===e.style.type?this._createSymbolLayer(e,t):this._createGraphicLayer(e,t):this._createVectorLayer(e,t):"UNIQUE"===r?this._createUniqueLayer(e,t):"RANGE"===r?this._createRangeLayer(e,t):"HEAT"===r?this._createHeatLayer(e,t):"MARKER"===r&&this._createMarkerLayer(e,t),e.labelStyle&&e.labelStyle.labelField&&this._addLabelLayer(e,t)}},{key:"_addLabelLayer",value:function(e,t){var n=e.labelStyle;this.map.addLayer({id:e.layerID+"label",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:{"text-color":n.fill},layout:{"text-field":"{".concat(n.labelField,"}"),"text-size":parseFloat(n.fontSize)||12,"text-offset":n.offsetX?[n.offsetX/10||0,n.offsetY/10||0]:[0,-1.5],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:e.visible}})}},{key:"_createSymbolLayer",value:function(e,t){document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map");var n=e.style,r=e.style.unicode,o=String.fromCharCode(parseInt(r.replace(/^&#x/,""),16)),i=e.layerID;this.map.addSource(i+"-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:i,type:"symbol",source:i+"-source",paint:{"text-color":n.fillColor},layout:{"text-field":o,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:e.visible}}),this.map.getSource(i+"-source").setData({type:"FeatureCollection",features:t})}},{key:"_createGraphicLayer",value:function(e,t){var n=this,r=e.style,o={},i=e.layerID,a={type:"geojson",data:{type:"FeatureCollection",features:t}};if("IMAGE_POINT"===r.type){var s=r.imageInfo,l=s.img;l&&l.src||(s.url=this.server+s.url),this.map.loadImage(s.url||l.src,function(t,o){t&&console.log(t);var s=2*Number.parseFloat((r.radius/o.height).toFixed(2));n.map.addImage("imageIcon",o),n.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":s,visibility:e.visible}})})}else if("SVG_POINT"===r.type){var u=r.url;this.svgDiv||(this.svgDiv=document.createElement("div"),document.body.appendChild(this.svgDiv)),this._getCanvasFromSVG(u,this.svgDiv,function(t){var o=t.toDataURL("img/png");o&&n.map.loadImage(o,function(o,s){o&&console.log(o);var l=Number.parseFloat((r.radius/t.width).toFixed(2));n.map.addImage("imageIcon",s),n.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":l,visibility:e.visible}})},n)})}else o.style=this._transformStyleToMapBoxGl(r,e.featureType),o.layout={visibility:e.visible},this._addOverlayToMap("POINT",a,i,o)}},{key:"_createUniqueLayer",value:function(e,t){var n=this._getUniqueStyleGroup(e,t);t=this._getFiterFeatures(e.filterCondition,t);var r=e.style,o={},i=e.themeSetting.themeField,a=e.featureType,s=["match",["get","index"]],l=e.layerID;t.forEach(function(e){n.forEach(function(t){t.value===e.properties[i]&&s.push(e.properties.index,t.color)})}),s.push("#ffffff"),o.style=this._transformStyleToMapBoxGl(r,a,s);var u=e.visible;o.layout={visibility:u};var c={type:"geojson",data:{type:"FeatureCollection",features:t}};this._addOverlayToMap(a,c,l,o),"POLYGON"===a&&r.strokeColor&&this._addStrokeLineForPoly(r,c,l+"-strokeLine",u)}},{key:"_getUniqueStyleGroup",value:function(e,t){var n=e.featureType,r=e.style,o=e.themeSetting,i=o.themeField,a=o.colors,s=[],l=o.customSettings;for(var u in t){var c=t[u].properties[i],f=!1;for(var h in s)if(s[h]===c){f=!0;break}f||s.push(c)}var p=a||this.defaultParameters.colors;p=bz.getGradientColors(p,s.length);var d=[];return s.forEach(function(e,t){var o=p[t];e in l&&(o=l[e]),"LINE"===n?r.strokeColor=o:r.fillColor=o,d.push({color:o,value:e})},this),d}},{key:"_getWMTSUrl",value:function(e){var t={service:"WMTS",request:"GetTile",version:"1.0.0",style:"default",layer:e.layer,tilematrixSet:e.tileMatrixSet,format:"image/png"},n=e.url;return n+=this._getParamString(t,n)+"&tilematrix={z}&tilerow={y}&tilecol={x}"}},{key:"_createMarkerLayer",value:function(e,t){var n=this;t&&t.forEach(function(t){var r=t.geometry.type.toUpperCase(),o=t.dv_v5_markerStyle;"POINT"===r&&o.text&&(r="TEXT");var i=n.setFeatureInfo(t);t.properties.useStyle=o,t.properties.featureInfo=i,"POINT"===r&&o.src&&-1===o.src.indexOf("http://")&&-1===o.src.indexOf("https://")&&(o.src=n.server+o.src);var a={type:"geojson",data:t},s=t.properties.index,l=r+"-"+s;if("POINT"===r&&o.src&&o.src.indexOf("svg")<=-1&&n.map.loadImage(o.src,function(t,r){t&&console.log(t),n.map.addImage(s+"",r),n.map.addLayer({id:l,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:e.visible}})},n),"POINT"===r&&o.src&&o.src.indexOf("svg")>-1&&(n.svgDiv||(n.svgDiv=document.createElement("div"),document.body.appendChild(n.svgDiv)),n._getCanvasFromSVG(o.src,n.svgDiv,function(t){var r=t.toDataURL("img/png");r&&n.map.loadImage(r,function(t,r){t&&console.log(t),n.map.addImage(s+"",r),n.map.addLayer({id:l,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:e.visible}})},n)})),!o.src){var u={layout:{}};"LINESTRING"===r&&o.lineCap&&(r="LINE",u.layout={"line-cap":o.lineCap});var c=e.visible;u.layout.visibility=c,u.style=n._transformStyleToMapBoxGl(o,r),n._addOverlayToMap(r,a,l,u),"POLYGON"===r&&o.strokeColor&&n._addStrokeLineForPoly(o,a,l+"-strokeLine",c)}},this)}},{key:"setFeatureInfo",value:function(e){var t,n=e.dv_v5_markerInfo;if(!n||!n.dataViz_title)return n;t=n;var r=e.properties;for(var o in t)r[o]&&(t[o]=r[o],delete r[o]);return t}},{key:"_createHeatLayer",value:function(e,t){var n=e.themeSetting,r={};r.gradient=n.colors.slice(),r.radius=parseInt(n.radius);var o=n.customSettings;for(var i in o)r.gradient[i]=o[i];n.weight&&this._changeWeight(t,n.weight);var a=["interpolate",["linear"],["heatmap-density"]],s=(1/r.gradient.length).toFixed(2);r.gradient.forEach(function(e,t){a.push(t*s),0===t&&(e=fr.hexToRgba(e,0)),a.push(e)});var l={"heatmap-color":a,"heatmap-radius":n.radius+15,"heatmap-intensity":{base:1,stops:[[0,.8],[22,1]]}};if(t[0].weight&&t.length>=4){var u=[];t.forEach(function(e){u.push(e.weight)});var c=_z.getMax(u),f=_z.getMin(u);l["heatmap-weight"]=["interpolate",["linear"],["get","weight"],f,0,c,1]}this.map.addLayer({id:e.layerID,type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:l})}},{key:"_changeWeight",value:function(e,t){this.fieldMaxValue={},this._getMaxValue(e,t);var n=this.fieldMaxValue[t];e.forEach(function(e){var r=e.properties[t];e.weight=r/n})}},{key:"_getMaxValue",value:function(e,t){var n,r=[],o=t;this.fieldMaxValue[o]||(e.forEach(function(e){(n=e.properties)&&parseFloat(n[o])&&r.push(parseFloat(n[o]))}),this.fieldMaxValue[o]=_z.getArrayStatistic(r,"Maximum"))}},{key:"_createRangeLayer",value:function(e,t){var n=e.themeSetting.themeField,r=e.style,o=e.featureType,i=this._getRangeStyleGroup(e,t),a={type:"geojson",data:{type:"FeatureCollection",features:t=this._getFiterFeatures(e.filterCondition,t)}},s=["match",["get","index"]];t.forEach(function(e){for(var t=parseFloat(e.properties[n]),r=0;r<i.length;r++)i[r].start<=t&&t<i[r].end&&s.push(e.properties.index,i[r].color);!t&&s.push(e.properties.index,"rgba(0, 0, 0, 0)")},this),s.push("rgba(0, 0, 0, 0)");var l={layout:{}};"LINE"===o&&r.lineCap&&(l.layout={"line-cap":r.lineCap});var u=e.visible;l.layout.visibility=u,l.style=this._transformStyleToMapBoxGl(r,o,s);var c=e.layerID;this._addOverlayToMap(o,a,c,l),"POLYGON"===o&&r.strokeColor&&this._addStrokeLineForPoly(r,a,c+"-strokeline",u)}},{key:"_getFiterFeatures",value:function(e,t){if(!e)return t;for(var n=this._replaceFilterCharacter(e),r=[],o=0;o<t.length;o++){var i=t[o],a=!1;try{var s=i.properties,l=hW(n,Object.keys(s)),u=pW(s),c="select * from json where ("+l+")";a=window.jsonsql.query(c,{attr:u})}catch(e){continue}a&&a.length>0&&r.push(i)}return r}},{key:"_replaceFilterCharacter",value:function(e){return e=e.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"_getRangeStyleGroup",value:function(e,t){var n,r=e.featureType,o=e.style,i=[],a=e.themeSetting,s=a.customSettings,l=a.themeField,u=a.segmentCount;t.forEach(function(e){(n=e.properties||e.get("Properties"))?n[l]&&fr.isNumber(n[l])&&i.push(parseFloat(n[l])):e.get(l)&&fr.isNumber(e.get(l))&&e.get(l)&&i.push(parseFloat(e.get(l)))},this);var c=_z.getArraySegments(i,a.segmentMethod,u);if(c){var f=u;for(var h in n&&c[0]===c[n.length-1]&&(f=1,c.length=2),c){var p=c[h];p=0==h?Math.floor(100*p)/100:Math.ceil(100*p)/100+.1,c[h]=Number(p.toFixed(2))}for(var d=a.colors,y=0;y<f;y++)y in s&&(s[y].segment.start&&(c[y]=s[y].segment.start),s[y].segment.end&&(c[y+1]=s[y].segment.end));for(var v=[],g=0;g<f;g++){var m=d[g];g in s&&s[g].color&&(m=s[g].color),"LINE"===r?o.strokeColor=m:o.fillColor=m;var b=c[g],w=c[g+1],_=JSON.parse(JSON.stringify(o));v.push({style:_,color:m,start:b,end:w})}return v}}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,n=-1,r=-1,o=0,i=t.length;o<i;o++)this._isXField(t[o])&&(n=o),this._isYField(t[o])&&(r=o);for(var a=[],s=0,l=e.rows.length;s<l;s++){var u=e.rows[s],c=Number(u[n]),f=Number(u[r]),h={};for(var p in e.colTitles){h[e.colTitles[p]]=e.rows[s][p]}h.index=s+"";var d={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(d)}return a}},{key:"_sendMapToUser",value:function(e,t){e===t&&this.fire("addlayerssucceeded",{map:this.map,mapparams:this.mapParams,layers:this.layers})}},{key:"_unproject",value:function(e){for(var t,n=180/Math.PI,r=6378137,o=Math.exp(-e[1]/r),i=Math.PI/2-2*Math.atan(o),a=0,s=.1;a<15&&Math.abs(s)>1e-7;a++)t=1,i+=s=Math.PI/2-2*Math.atan(o*t)-i;return new(O().LngLat)(e[0]*n/r,i*n)}},{key:"_getParamString",value:function(e,t,n){var r=[];for(var o in e)r.push((n?o.toUpperCase():o)+"="+e[o]);return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}},{key:"_isXField",value:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"ç»åº¦"===t||"ä¸ç»"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t}},{key:"_isYField",value:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"çº¬åº¦"===t||"åçº¬"===t||"latitude"===t||"lat"===t}},{key:"_transformStyleToMapBoxGl",value:function(e,t,n){var r={};"POINT"!==e.type&&"BASIC_POINT"!==e.type&&"POINT"!==t||"LINE"===t?"LINE"===t?r={strokeWidth:"line-width",strokeColor:"line-color",strokeOpacity:"line-opacity"}:"POLYGON"===t&&(r={fillColor:"fill-color",fillOpacity:"fill-opacity",strokeColor:"fill-outline-color"}):r={fillColor:"circle-color",strokeWidth:"circle-stroke-width",fillOpacity:"circle-opacity",radius:"circle-radius",strokeColor:"circle-stroke-color",strokeOpacity:"circle-stroke-opacity"};var o={};for(var i in e)r[i]&&(o[r[i]]=e[i]);return n&&(o["circle-color"]?o["circle-color"]=n:o["line-color"]?o["line-color"]=n:o["fill-color"]=n),e.lineDash&&"solid"!==e.lineDash&&"LINE"===t&&(o["line-dasharray"]=this._dashStyle(e)),o}},{key:"_dashStyle",value:function(e){if(!e)return[];var t=e.strokeDashstyle||e.lineDash;switch(t){case"solid":return[];case"dot":return[1,4];case"dash":return[4,4];case"dashdot":return[4,4,1,4];case"longdash":return[8,4];case"longdashdot":return[8,4,1,4];default:return t?w.isArray(t)?t:(t=r.trim(t).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"_getCanvasFromSVG",value:function(e,t,n){var r=this,o=document.createElement("canvas");o.id="dataviz-canvas-"+fr.newGuid(8),o.style.display="none",t.appendChild(o);var i=window.canvg&&window.canvg.default?window.canvg.default:mW(),a=o.getContext("2d");i.from(a,e,{ignoreMouse:!0,ignoreAnimation:!0,forceRedraw:function(){return!1}}).then(function(e){e.start(),r._canvgsV.push(e),o.width>300||o.height>300||n(o)})}},{key:"_stopCanvg",value:function(){this._canvgsV.forEach(function(e){return e.stop()}),this._canvgsV=[]}},{key:"_addOverlayToMap",value:function(e,t,n,r){"circle"!==(e={POINT:"circle",LINE:"line",POLYGON:"fill"}[e])&&"line"!==e&&"fill"!==e||this.map.addLayer({id:n,type:e,source:t,paint:r.style,layout:r.layout||{}})}},{key:"_addBaselayer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:22,o=arguments.length>4?arguments[4]:void 0;this.map.addLayer({id:t,type:"raster",source:{type:"raster",tiles:e,tileSize:256,rasterSource:o?"iserver":"",prjCoordSys:o?{epsgCode:this.baseProjection.split(":")[1]}:""},minzoom:n,maxzoom:r})}},{key:"_addStrokeLineForPoly",value:function(e,t,n,r){var o={};o.style=this._transformStyleToMapBoxGl(e,"LINE"),o.layout={visibility:r},this._addOverlayToMap("LINE",t,n,o)}},{key:"_parseGeoJsonData2Feature",value:function(e){for(var t=e.allDatas.features,n=[],r=0,o=t.length;r<o;r++){var i=t[r],a=i.geometry.coordinates;"Point"===t[r].geometry.type&&t[r].properties&&(t[r].properties.lon=a[0],t[r].properties.lat=a[1]),i.properties.index=r+"",n.push(i)}return n}},{key:"_getFeatureBySQL",value:function(e,t,n,r){var o,i;o=new og({name:t.join().replace(":","@"),attributeFilter:"SMID > 0"}),i=new Eg({queryParameter:o,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new Dg(e,{eventListeners:{processCompleted:function(e){n&&n(e)},processFailed:function(e){r&&r(e)}}}).processAsync(i)}},{key:"_queryFeatureBySQL",value:function(e,t,n,r,o,i,a,s,l,u){var c,f;c=new og({name:t,attributeFilter:n}),r&&(c.fields=r);var h={queryParams:[c]};u&&(h.queryOption=mn.ATTRIBUTE),s&&(h.startRecord=s),l&&(h.expectCount=l),o&&(h.prjCoordSys={epsgCode:o}),f=new $E(h),new kA(e).queryBySQL(f,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"_handleMultyPolygon",value:function(e){return e.forEach(function(e){if("Polygon"===e.geometry.type){var t=e.geometry.coordinates;if(t.length>1){var n=[];t.forEach(function(e){n.push([e])}),e.geometry.coordinates=n,e.geometry.type="MultiPolygon"}}}),e}},{key:"_transformScaleToZoom",value:function(e,t){var n=295829515.2024169;"EPSG:3857"!==(t||this.map.getCRS()).epsgCode&&(n=295295895);var r=e.split(":")[1];return Math.min(24,+Math.log2(n/+r).toFixed(2))}},{key:"_getResolution",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return e.leftBottom&&e.rightTop?Math.max(e.rightTop.x-e.leftBottom.x,e.rightTop.y-e.leftBottom.y)/t:Math.max(e[2]-e[0],e[3]-e[1])/t}}])&&wW(t.prototype,n),o&&wW(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}();function CW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function EW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CW(Object(n),!0).forEach(function(t){AW(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function AW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
O().supermap=EW(EW({},JD),O().supermap),O().supermap.map=O().supermap.map||{},O().supermap.LogoControl=ve,O().supermap.Util=fr,O().supermap.WebMap=kW,O().supermap.Graphic=Xd,O().supermap.map.getDefaultVectorTileStyle=function(e,t){t=t||{};var n={};n.version=t.version||8,n.layers=t.layers||[],n.light=t.light||{anchor:"viewport",color:"#fcf6ef",intensity:.5,position:[1.15,201,20]};var r={version:n.version,sources:{"vector-tiles":{type:"vector",tiles:[e]}},layers:n.layers,light:n.light};return null!=t.sprite&&(r.sprite=t.sprite),null!=t.glyphs&&(r.glyphs=t.glyphs),r},O().supermap.map.setBackground=function(e,t){t&&e&&e.addLayer({id:"background",type:"background",paint:{"background-color":t}},"background")},O().supermap.map.setPaintProperty=function(e,t,n,r,o,i){if(t&&e){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var a=0;a<t.length;a++){var s=i?i[a]:null,l=Qd(t[a],n,o,s,r);e.addLayer(l,t[a]),e.moveLayer(t[a])}}},O().supermap.MapvDataSet=Zd,O().supermap.GeoFeatureThemeLayer=rf,O().supermap.Theme3DLayer=Af,O().supermap.ThemeFeature=xr,O().supermap.ThemeLayer=Il,O().supermap.Transform=yh,O().supermap.DeckglLayer=Uh,O().supermap.GraphicLayer=fh,O().supermap.GraphThemeLayer=Gl,O().supermap.GraticuleLayer=tp,O().supermap.HeatMapLayer=Hh,O().supermap.LabelThemeLayer=hf,O().supermap.MapvLayer=Cf,O().supermap.FGBLayer=qd,O().supermap.RangeTheme3DLayer=Nf,O().supermap.RangeThemeLayer=Hf,O().supermap.RankSymbolThemeLayer=Xf,O().supermap.ThreeLayer=Nh,O().supermap.UniqueTheme3DLayer=nh,O().supermap.UniqueThemeLayer=lh,O().supermap.AddressMatchService=Ty,O().supermap.ChartService=$y,O().supermap.DataFlowService=pv,O().supermap.DatasetService=Rv,O().supermap.DatasourceService=Yv,O().supermap.FeatureService=Hm,O().supermap.FieldService=wb,O().supermap.GeoprocessingService=Yb,O().supermap.GridCellInfosService=Db,O().supermap.ImageCollectionService=UD,O().supermap.ImageService=MD,O().supermap.LayerInfoService=$x,O().supermap.MapService=wS,O().supermap.MeasureService=DS,O().supermap.NetworkAnalyst3DService=dk,O().supermap.NetworkAnalystService=WP,O().supermap.ProcessingService=aE,O().supermap.QueryService=kA,O().supermap.ServiceBase=oy,O().supermap.SpatialAnalystService=oL,O().supermap.ThemeService=wL,O().supermap.TrafficTransferAnalystService=eD,O().supermap.WebPrintingJobService=yD,O().supermap.CommonUtil=w}(),function(){"use strict"}()}();